<html>
    <head>
		<script language="javascript" src="../lib/jquery/jquery.min.js"></script>
		<script language="javascript" src="../lib/backbone/underscore.min.js"></script>
		<script language="javascript" src="../lib/backbone/backbone.min.js"></script>
        <script language="javascript" src="../lib/handlebars/handlebars-1.0.0.beta.6.js"></script>
        <script language="javascript" src="../lib/stash/stash.min.js"></script>
		<!-- App Scripts -->
		<script src='app.js'></script>
		<script src='cache/cache.js'></script>
		<script src='template/template.js'></script>
		<script src='sugarfieldmanager/sugarfieldmanager.js'></script>
		<script src='../lib/sugarapi/sugarapi.js'></script>
		<script src="events/events.js"></script>
		<script src='context/context.js'></script>
		<script src='controller/controller.js'></script>
		<script src='controller/router.js'></script>
		<script src='metadata/metadata-manager.js'></script>
		<script src='logger.js'></script>
		<script src='config.js'></script>
		<script src='data/data-manager.js'></script>
		<script src='data/bean.js'></script>
		<script src='data/bean-collection.js'></script>
		<script src='data/validation.js'></script>
		<script src='layout/layout.js'></script>
		<!--SUGAR REST interface fakeserver + data-->
		<script language="javascript" src="../tests/fixtures/sugarFields.js"></script>
		<script language="javascript" src="../tests/fixtures/metadata.js"></script>
		<script language="javascript" src="../tests/fixtures/templates.js"></script>
		<script language="javascript" src="../lib/sinon/sinon.min.js"></script>
		<script language="javascript" src="../lib/sugarapi/demoServerData.js"></script>
		<script language="javascript" src="../lib/sugarapi/demoRestServer.js"></script>

		<link rel="stylesheet" href="../lib/twitterbootstrap/bootstrap/css/bootstrap.css"/>
		<link rel="stylesheet" href="../lib/twitterbootstrap/bootstrap/css/bootstrap-responsive.css"/>
		<script src="../lib/twitterbootstrap/bootstrap/js/bootstrap.js"></script>
		
		<style>
			.view {
			/* border: 1px solid grey; */
				padding: 5px;
				margin: 5px;
			}
			.layout {
				border: 2px solid #000000;
				padding: 5px;
				margin: 5px;
			}
			.control-label {
				font-weight: bold;
				float:left;
				margin-right: 5px;
				margin-bottom: 0px;
				color:grey;
			}
			.label {
				font-weight: bold;
				float:left;
				margin: 0px;
			}
			.panel {
				padding: 5px;
				margin: 5px;
				/* border: 1px solid grey; */
			}
			.editView.panel h4 {
				/* border-bottom: 1px solid black; */
				margin-bottom: 5px;
			}
			.layout.columns > table > tbody > tr > td {
				border : 1px solid red;
				vertical-align:top;
			}
		</style>

    </head>
    <body>
    	<div>
			<div id="view" style=""></div>
			<div id="layout" style=""></div>
		</div>

		<script language="javascript">
			var syncResult, view, layout, html;
			//Fake template manager
			SUGAR.App.template.load(fixtures.templates);
			//Fake a field list
            SUGAR.App.metadata.set({sugarFields:sugarFieldsFixtures.fieldsData});

			var App = SUGAR.App.init({el: "#sidecar"});
			//Initialize the data model
			App.dataManager.declareModels(fixtures.metadata);
			App.metadata.set(fixtures.metadata);

			//Need a sample Bean
			this.bean = App.dataManager.createBean("Contacts", {
				id:"4352352345",
				first_name: "Foo",
				last_name: "Bar",
				phone_work: null
			});
			this.collection = new App.BeanCollection([
				this.bean,
				App.dataManager.createBean("Contacts", {
					id:"435234523452345",
					first_name:"Majed",
					last_name:"Itani",
					phone_work: "408-555-5555"
				}), App.dataManager.createBean("Contacts", {
					id:"7654325",
					first_name:"Clint",
					last_name:"Oram",
					phone_work: "408-555-1234"
				}), App.dataManager.createBean("Contacts", {
					id:"985432345",
					first_name:"Lila",
					last_name:"Tretikov",
					phone_work: "408-555-5678"
				})
			]);
			//Setup a context
			var context = SUGAR.App.context.getContext({
				url: "someurl",
				module: "Contacts",
				model : this.bean,
				collection : this.collection
			});
			var view = App.layout.get({
				context : context,
				view:"listView"
			});
			$("#view").append(view.el);
			view.render();

			var layout = App.layout.get({
				context : context,
				layout: "detailplus"
				//view:"detailView"
			});
			$("#layout").append(layout.el);
			layout.render();



			/*
			var sublayout = App.layout.get({
				context : context,
				layout: "sublayout"
				//view:"detailView"
			});
			$("#layout").append(sublayout.el);
			sublayout.render();
			*/
		</script>
    </body>
</html>