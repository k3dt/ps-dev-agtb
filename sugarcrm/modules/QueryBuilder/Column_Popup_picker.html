<!--
/*********************************************************************************
 * The contents of this file are subject to the SugarCRM Professional End User
 * License Agreement ("License") which can be viewed at
 * http://www.sugarcrm.com/EULA.  By installing or using this file, You have
 * unconditionally agreed to the terms and conditions of the License, and You
 * may not use this file except in compliance with the License.  Under the
 * terms of the license, You shall not, among other things: 1) sublicense,
 * resell, rent, lease, redistribute, assign or otherwise transfer Your
 * rights to the Software, and 2) use the Software for timesharing or service
 * bureau purposes such as hosting the Software for commercial gain and/or for
 * the benefit of a third party.  Use of the Software may be subject to
 * applicable fees and any use of the Software without first paying applicable
 * fees is strictly prohibited.  You do not have the right to remove SugarCRM
 * copyrights from the source code or user interface.
 *
 * All copies of the Covered Code must include on each user interface screen:
 *  (i) the "Powered by SugarCRM" logo and
 *  (ii) the SugarCRM copyright notice
 * in the same form as they appear in the distribution.  See full license for
 * requirements.
 *
 * Your Warranty, Limitations of liability and Indemnity are expressly stated
 * in the License.  Please refer to the License for the specific language
 * governing these rights and limitations under the License.  Portions created
 * by SugarCRM are Copyright (C) 2004 SugarCRM, Inc.; All Rights Reserved.
 ********************************************************************************/
/*********************************************************************************
 * $Id: Column_Popup_picker.html 42215 2008-11-26 20:35:04Z jmertic $
 * Description:
 ********************************************************************************/
-->
<!-- BEGIN: embeded -->
<script>

function updatedroplist(name, field_name, field_value){
	document.getElementById(name).src = 'index.php?module=QueryBuilder&action=DisplayColumnValues&to_pdf=true&column_name=' + field_value + '&column_module=' + document.getElementById(field_name).options[document.getElementById(field_name).selectedIndex].value;
}
</script>
<script>
		function toggleDisplay(id){
		
			if(this.document.getElementById( id).style.display=='none'){
				this.document.getElementById( id).style.display='inline'
						
			}else{
				this.document.getElementById(  id).style.display='none'
			}
		
		}
		
		function toggleDisplay2(id, dropdown){
			if(this.document.getElementById(dropdown).value=='Calculation'){
				this.document.getElementById('standiv').style.display='none'
				toggleDisplay(id);
			} else{
				this.document.getElementById('standiv').style.display='inline'
				this.document.getElementById(id).style.display='none'
					
			}	
		}
		function toggleDisplay3(id, dropdown){
			
			if(this.document.getElementById(dropdown).value=='Standard'){
				this.document.getElementById(id).style.display='inline'
			} else{
				this.document.getElementById(id).style.display='none'
					
			}	
		}		
		
</script>
<!-- END: embeded -->
<!-- BEGIN: main -->

{SET_RETURN_JS}


<table cellpadding="0" cellspacing="0" border="0" width="100%" class="edit view">
<tr><td>
	<table width="100%" border="0" cellspacing="0" cellpadding="0">
<form>

	<tr>
		<td scope="row"><slot>{MOD.LBL_COLUMN_DISPLAY_SWITCH}</slot></td>
		<td  colspan="3"><slot><select id='column_type' name='column_type' onchange="toggleDisplay2('calcdiv','column_type');" tabindex='2' {SUB_CALC_DISABLE}>{COLUMN_DISPLAY_SWITCH}</select></slot></td>
		</tr><tr>
		<td  width="30%"><slot>&nbsp;</slot></td>
		<td scope="row" width="30%"><slot>&nbsp;</slot></td>		
		<td  width="20%"><slot>&nbsp;</slot></td>
		<td scope="row" width="20%"><slot>&nbsp;</slot></td>
		</tr><tr>
		<td colspan="4"><div id='standiv' style='display:inline'>
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
		<tr>
		<td width="30%" scope="row"><slot>{MOD.LBL_COLUMN_MODULE}</slot></td>	
		<td width="30%" ><slot><select id='column_module' name='column_module' onchange="updatedroplist('listiframe', 'column_module', '');" tabindex='2' >{AVAILABLE_MODULES}</select></slot></td>
		<td width="20%" ><slot>&nbsp;</slot></td>
		<td width="20%" scope="row"><slot>&nbsp;</slot></td>
		</tr><tr>
		<td scope="row"><slot>{MOD.LBL_COLUMN_NAME}</slot></td>
		<td scope="row" colspan="3"><iframe id='listiframe' frameborder="0" marginwidth="0" marginheight="0" width='100%' height='30'></iframe></td>
		</tr>
		</table>
		</div>
		</td></tr>
<tr>
		
		<td colspan="4"><div id='calcdiv' style='display:none'>
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
		<tr>
			<td width="30%" scope="row"><slot>{MOD.LBL_CALC_NAME} <span class="required">{APP.LBL_REQUIRED_SYMBOL}</span></slot></td>
			<td width="30%" ><slot><input name='name' tabindex='1' size='25' maxlength='25' type="text" value="{CALC_NAME}" {SUB_CALC_DISABLE}></slot></td>
			<td width="20%" ><slot>&nbsp;</slot></td>
			<td width="20%" scope="row"><slot>&nbsp;</slot></td>
		</tr><tr>
		<td ><slot>&nbsp;</slot></td>
		<td scope="row"><slot>&nbsp;</slot></td>		
		<td ><slot>&nbsp;</slot></td>
		<td scope="row"><slot>&nbsp;</slot></td>
		</tr><tr>
			<td width="30%" scope="row"><slot>{MOD.LBL_CALC_TYPE}</slot></td>	
			<td width="30%" ><slot><select id='type' name='type' tabindex='2'  onchange="toggleDisplay3('subcalcdiv','type');" {SUB_CALC_DISABLE}>{TYPE}</select></slot></td>
			<td width="20%" scope="row"><slot>{MOD.LBL_GROUPBY_CALC}</slot></td>	
			<td width="20%" ><slot><select id='calc_type' name='calc_type' tabindex='2' {SUB_CALC_DISABLE}>{CALC_TYPE}</select></slot></td>

			</tr><tr>
		<td ><slot>&nbsp;</slot></td>
		<td scope="row"><slot>&nbsp;</slot></td>		
		<td ><slot>&nbsp;</slot></td>
		<td scope="row"><slot>&nbsp;</slot></td>
		</tr><tr>
		<td colspan="4"><div id='subcalcdiv' style='display:inline'>
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
		<tr>
			<td scope="row" width="30%"><slot>{MOD.LBL_GROUPBY_CALC_MODULE}</slot></td>	
			<td  colspan="3"><slot><select id='calc_module' name='calc_module' onchange="updatedroplist('calciframe', 'calc_module','');" tabindex='2' >{CALC_MODULES}</select></slot></td>
			</tr><tr>
			<td scope="row" width="30%"><slot>{MOD.LBL_GROUPBY_CALC_FIELD}</slot></td>
			<td scope="row" colspan="3"><iframe id='calciframe' frameborder="0" marginwidth="0" marginheight="0" width='100%' height='30'></iframe></td>
		</tr>
		</div>
		</table>	
		</td>
		</tr>
		</tr>
		</table>
		</div>
		</td>
		</tr><tr>
		<td scope="row"><slot>&nbsp;</slot></td>
		<td scope="row"><slot><input 	title="{SELECT_BUTTON_TITLE}" accessKey="{APP.LBL_SELECT_BUTTON_KEY}" class="button" type="submit" name="button" value="{SELECT_BUTTON_LABEL}"
					onclick='set_return("ColumnSave", this.form.column_module.value, this.form.column_type.value, this.form.name.value, this.form.calc_module.value, this.form.type.value, this.form.calc_type.value); window.close()'>
		</slot></td>
		<td scope="row"><slot>&nbsp;</slot></td>
		<td scope="row"><slot>&nbsp;</slot></td>
		</tr>
		

<tr>
</form>
<td>
</td>
</tr>
	</table>
</td></tr></table>

<script>
updatedroplist('listiframe', 'column_module', '{COLUMN_FIELD}');
updatedroplist('calciframe', 'calc_module', '{CALC_FIELD}');
toggleDisplay2('calcdiv', 'column_type');
toggleDisplay3('subcalcdiv', 'type');
</script>

<!-- END: main -->
