<!--
/*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 */
-->
<h2 xmlns="http://www.w3.org/1999/html">Overview</h2>
<span class="lead">
    Create a new Emails record.
</span>

<h2>Request Arguments</h2>
<table class="table table-hover">
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
            <th>Required</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                &lt;record field&gt;
            </td>
            <td>
                &lt;record field type&gt;
            </td>
            <td>
                The name value list of fields to populate.
            </td>
            <td>
                True
            </td>
        </tr>
    </tbody>
</table>

<h3>Request</h3>
<pre class="pre-scrollable">
    {
      "assigned_user_id": "seed_sarah_id",
      "from_addr_name": "Administrator <twolf@sugarcrm.com>",
      "from_addr_name": "Administrator <myname@mydomain.com>",
      "reply_to_addr": "myname@mydomain.com",
      "to_addrs_names": "Mike Smith<mike_smith@somedomain.com>, tom_davis@anotherdomain.com",
      "cc_addrs_names": "John Doe<john_doe@stillanother.com>",
      "bcc_addrs_names": "jack_benimble@nurseryrhymes.net",
      "date_sent": "2012-02-17T06:53:00-08:00",
      "message_id": "",
      "message_uid": "",
      "name": "Sample Draft Email",
      "state": "Draft",
      "flagged": true,
      "reply_to_status": false,
      "intent": "pick",
      "mailbox_id": "",
      "parent_type": "Contacts",
      "parent_id": "afe9702e-53a3-0efb-6bbe-56c3580885ef",
      "team_name": [
        {
          "id": 1,
          "name": "Global",
          "name_2": "",
          "primary": true,
          "selected": false
        }
      ]
    }
</pre>

<h3>Link fields</h3>
<span class="lead">
    It is possible to add record relations to other records and create new related records.
</span>

<table class="table table-hover">
    <thead>
    <tr>
        <th>Action</th>
        <th>Type</th>
        <th>Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            <code>add</code>
        </td>
        <td>
            List
        </td>
        <td>
            List of related record IDs. See <a href="module_record_link_post_help.html">RelateRecordApi</a>
            for details.
        </td>
    </tr>
    <tr>
        <td>
            <code>create</code>
        </td>
        <td>
            List
        </td>
        <td>
            List of name to value arrays of related records.
        </td>
    </tr>
    </tbody>
</table>

<h3>Sender Link</h3>
<span class="lead">
    Specify the sender of an email.
</span>
<table class="table table-hover">
    <thead>
    <tr>
        <th>Action</th>
        <th>Type</th>
        <th>Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            <code>add</code>
        </td>
        <td>
            List
        </td>
        <td>
            List of one record representing the sender. An email address can be specified along with the record.
            The following links are supported OOTB: <code>accounts_from</code>, <code>contacts_from</code>,
            <code>email_addresses_from</code>, <code>leads_from</code>, <code>prospects_from</code>,
            <code>users_from</code>.
        </td>
    </tr>
    <tr>
        <td>
            <code>create</code>
        </td>
        <td>
            List
        </td>
        <td>
            List of one record representing the sender. Specify an email address to use as the sender. The email
            address may be new or existing. This action is only available for <code>email_addresses_from</code>.
        </td>
    </tr>
    </tbody>
</table>

<pre class="pre-scrollable">
    {
      "contacts_from": {
        "add": [
          "afe9702e-53a3-0efb-6bbe-56c3580885ef"
        ]
      }
    }

    {
      "contacts_from": {
        "add": [
          {
            "id": "afe9702e-53a3-0efb-6bbe-56c3580885ef",
            "email_address": "myname@mydomain.com"
          }
        ]
      }
    }

    {
      "contacts_from": {
        "add": [
          {
            "id": "afe9702e-53a3-0efb-6bbe-56c3580885ef",
            "email_address_id": "a028341c-ba92-9343-55e7-56cf5beda121"
          }
        ]
      }
    }

    {
      "email_addresses_from": {
        "add": [
          "afe9702e-53a3-0efb-6bbe-56c3580885ef"
        ]
      }
    }

    {
      "email_addresses_from": {
        "create": [
          {
            "email_address": "myname@mydomain.com"
          }
        ]
      }
    }
</pre>

<h3>Recipients Links</h3>
<span class="lead">
    Specify the recipients of an email.
</span>
<table class="table table-hover">
    <thead>
    <tr>
        <th>Action</th>
        <th>Type</th>
        <th>Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            <code>add</code>
        </td>
        <td>
            List
        </td>
        <td>
            List of records representing the recipients. An email address can be specified along with the record.
            The following links are supported OOTB: <code>accounts_to</code>, <code>accounts_cc</code>,
            <code>accounts_bcc</code>, <code>contacts_to</code>, <code>contacts_cc</code>, <code>contacts_bcc</code>,
            <code>email_addresses_to</code>, <code>email_addresses_cc</code>, <code>email_addresses_bcc</code>,
            <code>leads_to</code>, <code>leads_cc</code>, <code>leads_bcc</code>, <code>prospects_to</code>,
            <code>prospects_cc</code>, <code>prospects_bcc</code>, <code>users_to</code>, <code>users_cc</code>,
            <code>users_bcc</code>.
        </td>
    </tr>
    <tr>
        <td>
            <code>create</code>
        </td>
        <td>
            List
        </td>
        <td>
            List of records representing the recipients. Specify an email address to use for recipient. The email
            address may be new or existing. This action is only available for <code>email_addresses_to</code>,
            <code>email_addresses_cc</code>, and <code>email_addresses_bcc</code>.
        </td>
    </tr>
    </tbody>
</table>

<pre class="pre-scrollable">
    {
      "contacts_to": {
        "add": [
          "afe9702e-53a3-0efb-6bbe-56c3580885ef",
          {
            "id": "afe9702e-53a3-0efb-6bbe-56c3580885ef",
            "email_address": "myname@mydomain.com"
          }
        ]
      },
      "leads_cc": {
        "add": [
          {
            "id": "afe9702e-53a3-0efb-6bbe-56c3580885ef",
            "email_address_id": "a028341c-ba92-9343-55e7-56cf5beda121"
          }
        ]
      },
      "email_addresses_bcc": {
        "create": [
          {
            "email_address": "myname@mydomain.com"
          }
        ]
      }
    }
</pre>

<h3>Attachments</h3>
<span class="lead">
    Specify the attachments of an email.
</span>
<table class="table table-hover">
    <thead>
    <tr>
        <th>Action</th>
        <th>Type</th>
        <th>Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            <code>add</code>
        </td>
        <td>
            List
        </td>
        <td>
            Unsupported. Existing Notes records cannot be attached to an email.
        </td>
    </tr>
    <tr>
        <td>
            <code>create</code>
        </td>
        <td>
            List
        </td>
        <td>
            List of objects representing the Notes record data. <b>filename_guid</b> is used to specify the temporary
            file ID for an uploaded file that should be attached as a Notes record. <b>upload_id</b> is used to specify
            the ID of an existing file that the Notes record should reference as the attachment. This allows files to be
            shared by multiple records. When using <b>upload_id</b>, the <b>file_source</b> should be provided to
            indicate from where the file originated. The value should be the module of the record that shares its ID
            with the file. So when an attachment comes from an email template, the <b>file_source</b> should be
            <b>EmailTemplates</b>. And when an attachment comes from a document, the <b>file_source</b> should be
            <b>DocumentRevisions</b>.
        </td>
    </tr>
    </tbody>
</table>

<pre class="pre-scrollable">
    {
      "attachments": {
        "create": [
          {
            "filename_guid": "afe9702e-53a3-0efb-6bbe-56c3580885ef",
            "name": "Quote.pdf",
            "filename": "Quote.pdf"
          },
          {
            "upload_id": "a028341c-ba92-9343-55e7-56cf5beda121",
            "name": "Contract.pdf",
            "filename": "Contract.pdf",
            "file_source": "DocumentRevisions"
          },
          {
            "upload_id": "18a72782-4514-11e6-a5f7-3c15c2d582c6",
            "name": "survey.doc",
            "filename": "survey.doc",
            "file_source": "EmailTemplates"
          }
        ]
      }
    }
</pre>

<h2>Response Arguments</h2>
<table class="table table-hover">
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                &lt;record field&gt;
            </td>
            <td>
                &lt;record field type&gt;
            </td>
            <td>
                Returns the fields for the newly created record.
            </td>
        </tr>
    </tbody>
</table>

<h3>Response</h3>
<pre class="pre-scrollable">
{
  "id": "a028341c-ba92-9343-55e7-56cf5beda121",
  "date_entered": "2016-02-25T11:53:07-08:00",
  "date_modified": "2016-02-25T11:53:07-08:00",
  "assigned_user_id": "seed_sarah_id",
  "assigned_user_name": "",
  "modified_user_id": "1",
  "modified_by_name": "Administrator",
  "created_by": "1",
  "created_by_name": "Administrator",
  "deleted": false,
  "from_addr_name": "Administrator <myname@mydomain.com>",
  "reply_to_addr": "myname@mydomain.com",
  "to_addrs_names": "Mike Smith<mike_smith@somedomain.com>, tom_davis@anotherdomain.com",
  "cc_addrs_names": "John Doe<john_doe@stillanother.com>",
  "bcc_addrs_names": "jack_benimble@nurseryrhymes.net",
  "description_html": "<p>Now is the time</p>",
  "description": "For all good men",
  "date_sent": "2012-02-17T06:53:00-08:00",
  "message_id": "",
  "message_uid": "",
  "name": "Sample Draft Email",
  "type": "archived",
  "status": "",
  "flagged": true,
  "reply_to_status": true,
  "intent": "pick",
  "mailbox_id": "",
  "state": "Draft",
  "parent_name": "",
  "parent_type": "Contacts",
  "parent_id": "afe9702e-53a3-0efb-6bbe-56c3580885ef",
  "team_count": "",
  "team_name": [
    {
      "id": 1,
      "name": "Global",
      "name_2": "",
      "primary": true,
      "selected": false
    }
  ],
  "my_favorite": false,
  "_acl": {
    "fields": [

    ]
  },
  "_module": "Emails"
}
</pre>

<h2>Change Log</h2>
<table class="table table-hover">
    <tr>
        <th>Version</th>
        <th>Change</th>
    </tr>
    <tr>
        <td>
            v11
        </td>
        <td>
            Added <code>/Emails</code> POST endpoint.
        </td>
    </tr>
</table>
