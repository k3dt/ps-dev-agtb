<!--
/*********************************************************************************
 * The contents of this file are subject to the SugarCRM Professional End User
 * License Agreement ("License") which can be viewed at
 * http://www.sugarcrm.com/crm/products/sugar-professional-eula.html
 * By installing or using this file, You have unconditionally agreed to the
 * terms and conditions of the License, and You may not use this file except in
 * compliance with the License.  Under the terms of the license, You shall not,
 * among other things: 1) sublicense, resell, rent, lease, redistribute, assign
 * or otherwise transfer Your rights to the Software, and 2) use the Software
 * for timesharing or service bureau purposes such as hosting the Software for
 * commercial gain and/or for the benefit of a third party.  Use of the Software
 * may be subject to applicable fees and any use of the Software without first
 * paying applicable fees is strictly prohibited.  You do not have the right to
 * remove SugarCRM copyrights from the source code or user interface.
 *
 * All copies of the Covered Code must include on each user interface screen:
 *  (i) the "Powered by SugarCRM" logo and
 *  (ii) the SugarCRM copyright notice
 * in the same form as they appear in the distribution.  See full license for
 * requirements.
 *
 * Your Warranty, Limitations of liability and Indemnity are expressly stated
 * in the License.  Please refer to the License for the specific language
 * governing these rights and limitations under the License.  Portions created
 * by SugarCRM are Copyright (C) 2004-2005 SugarCRM, Inc.; All Rights Reserved.
 ********************************************************************************/
/*********************************************************************************
 * $Id: CreateStep2.html,v 1.1 2006/07/07 22:00:05 jgreen Exp $
 * Description:
 ********************************************************************************/
-->
<!-- BEGIN: embeded -->
<script type="text/javascript" src="include/workflow/jutils.js"></script>
<script>


function togglefield_select(field_num, setting){
	var target_row = 'lang_' + field_num;
	var target_set_type = 'set_type_' + field_num;
	
	
	if(setting==true){
		this.document.getElementById(target_row).style.display='';
		
	} else {
		this.document.getElementById(target_row).style.display='none';
		this.document.getElementById(target_set_type).value = '';
	
	}	
//end function togglefield_select		
}	

function changehref_text(href_object, selected_text){
	
	this.document.getElementById(href_object).innerHTML = selected_text;
	
//end function changehref_text
}

function set_attribute(attribute_id, attribute_value){
	this.document.getElementById(attribute_id).value = attribute_value;	
}	

function get_selector(alert_user_type){

	var base_module = this.document.getElementById('base_module').value;
	var rel_module1 = this.document.getElementById('rel_module1').value;
	var rel_module2 = this.document.getElementById('rel_module2').value;
	var link_location = "index.php?module=WorkFlowAlerts&action=Selector&to_pdf=true&base_module={BASE_MODULE}";
	link_location += '&rel_module1=' + rel_module1 + '&rel_module2=' + rel_module2 + '&alert_user_type=' + alert_user_type;
	
	window.open(link_location, "Test","width=300,height=100,resizable=1,scrollbars=1");	
//end function get_selector	
}
function get_single_selector(href_object, type, dom_name, value_field, meta_filter_name){

	var value = get_value(value_field);
	var opener_id = value_field;
	
	//type, value, dom_name, opener_id, href_object
	
	var link_location = "index.php?module=Expressions&action=SingleSelector&to_pdf=true";
	link_location += '&type=' + type + '&value=' + value + '&opener_id=' + opener_id + '&href_object=' + href_object + '&dom_name=' + dom_name;
	link_location += '&meta_filter_name=' + meta_filter_name;
	
	window.open(link_location, "Test","width=400,height=100,resizable=1,scrollbars=1");	
//end function get_selector	
}


function confirm_safety(){
	
	if((safety_rel_filters())==false){
		return false;	
	}
	

	return true;
	
//end function confirm_safety
}	



</script>

<!-- END: embeded -->
<!-- BEGIN: main -->

{SET_RETURN_JS}


<table cellpadding="0" cellspacing="0" border="0" width="100%" class="tabForm">
<tr><td>
<table width="100%" cellpadding="0" cellspacing="0" border="0"><tr>
			<form name="EditView" method="POST" action="index.php">
			<input type="hidden" name="module" value="WorkFlowActionShells">
			<input type="hidden" id='record' name="record" value="{ID}">
			<input type="hidden" id='parent_id' name="parent_id" value="{WORKFLOW_ID}">
			<input type="hidden" id='workflow_id' name="workflow_id" value="{WORKFLOW_ID}">
			<input type="hidden" name="action" value="CustomPlugin">
			<input type="hidden" name="plugin_action" value="Save">
			<input type="hidden" name="plugin_module" value="weighted_route">
			<input type="hidden" name="return_module" value="{RETURN_MODULE}">
			<input type="hidden" name="return_id" value="{RETURN_ID}">
			<input type="hidden" name="return_action" value="{RETURN_ACTION}">
			<input type="hidden" id='rel__set_type' name="rel__set_type" value="{REL_SET_TYPE}">
			<input type="hidden" id='action_module' name="action_module" value="{ACTION_MODULE}">
			<input type="hidden" id='target_module' name="target_module" value="{TARGET_MODULE}">
			<input type="hidden" id ='rel_module' name="rel_module" value="{REL_MODULE}">
			<input type="hidden" id ='action_type' name="action_type" value="{ACTION_TYPE}">
			<input type="hidden" id ='total_field_count' name="total_field_count" value="{TOTAL_FIELD_COUNT}">
	<td></td></tr>
</table>
	<table width="100%" border="0" cellspacing="0" cellpadding="0">
		<tr>
		<td colspan="4">
		<table width="100%" border="0" cellspacing="0" cellpadding="0"  class="tabDetailView" height="80px">
	<tr>
	<td class="tabDetailViewDF">{PREV_DISPLAY_TEXT}</td>
	</tr>
		<!-- BEGIN: lang_field -->		

		<!-- END: lang_field -->	
		<tr id='lang_target_field'>
		<td class="tabDetailViewDF">
		&nbsp;Percentage&nbsp;<input id='user_1_weight' name='user_1_weight' type="text" size="5" maxsize="5" value="{USER_1_WEIGHT}" />&nbsp;for this user:&nbsp;<select name='user_1' tabindex='2'>{USER_1_OPTIONS}</select>
		<BR><BR>&nbsp;Percentage&nbsp;<input id='user_2_weight' name='user_2_weight' type="text" size="5" maxsize="5" value="{USER_2_WEIGHT}" />&nbsp;for this user:&nbsp;<select name='user_2' tabindex='2'>{USER_2_OPTIONS}</select>
		</td>

		</tr>				
		<tr>
		<td class="tabDetailViewDF">&nbsp;</td>
		</tr>	
		</table>		
		</td>
		</tr>
		<tr>
		<td>&nbsp;</td>
		</tr>
	<tr>
	<td align='right' colspan='2'>
	<span id='set_type_hrefs'>
			<a id='href_set_type_basic' href=# onclick="toggle_set_type('rel', 'Advanced');" class="tabFormAdvLink">{ADVANCED_SEARCH_PNG}&nbsp;{APP.LNK_ADVANCED_SEARCH}</a>
			<a id='href_set_type_adv' href=# onclick="reset_rel_filters(); toggle_set_type('rel', 'Basic');" class="tabFormAdvLink">{BASIC_SEARCH_PNG}&nbsp;{APP.LNK_BASIC_SEARCH}</a>
	</span>
<input title="{APP.LBL_SAVE_BUTTON_TITLE}" accessKey="{APP.LBL_SAVE_BUTTON_KEY}" class="button" onclick=" return confirm_safety();" type="submit" name="button" value="  {APP.LBL_SAVE_BUTTON_LABEL}  ">
 <input title="{APP.LBL_CANCEL_BUTTON_TITLE}" accessKey="{APP.LBL_CANCEL_BUTTON_KEY}" class="button" onclick="window.close();" type="submit" name="button" value="  {APP.LBL_CANCEL_BUTTON_LABEL}  ">
</td>
	</tr>
	<tr>
	<td>&nbsp;</td>
	</tr>

	{ADV_RELATED_BLOCK}
	
		</form>
</table>

<script>
toggle_set_type('rel', '{REL_SET_TYPE}');
toggle_hrefs('{SET_DISABLED}');
</script>

<!-- END: main -->
