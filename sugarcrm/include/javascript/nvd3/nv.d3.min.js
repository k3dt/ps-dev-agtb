(function(){function t(e,t){return(new Date(t,e+1,0)).getDate()}function n(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s===0&&u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}function r(e,t){function i(){var r=0,i=t.length;n=[];while(++r<i)n[r-1]=d3.quantile(e,r/i);return s}function s(e){return isNaN(e=+e)?NaN:t[d3.bisect(n,e)]}var n;return s.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(d3.ascending),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.ticks=function(e){return d3_scale_linearTicks(s.domain(),e)},s.quantiles=function(){return n},s.copy=function(){return r(e,t)},i()}var e=window.nv||{};e.version="0.0.1a",e.dev=!1,window.nv=e,e.tooltip={},e.utils={},e.models={},e.charts={},e.graphs=[],e.logs={},e.dispatch=d3.dispatch("render_start","render_end"),e.dev&&(e.dispatch.on("render_start",function(t){e.logs.startTime=+(new Date)}),e.dispatch.on("render_end",function(t){e.logs.endTime=+(new Date),e.logs.totalTime=e.logs.endTime-e.logs.startTime,e.log("total",e.logs.totalTime)})),e.log=function(){if(e.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(e.dev&&console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},e.render=function(n){n=n||1,e.render.active=!0,e.dispatch.render_start(),setTimeout(function(){var t,r;for(var i=0;i<n&&(r=e.render.queue[i]);i++)t=r.generate(),typeof r.callback==typeof Function&&r.callback(t),e.graphs.push(t);e.render.queue.splice(0,i),e.render.queue.length?setTimeout(arguments.callee,0):(e.render.active=!1,e.dispatch.render_end())},0)},e.render.active=!1,e.render.queue=[],e.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),e.render.queue.push(t),e.render.active||e.render()},e.identity=function(e){return e},e.strip=function(e){return e.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)},d3.time.monthEnds=n(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(e){return e.getMonth()}),d3.scale.quantile=function(){return r([],[])},function(){var t=window.nv.tooltip={};t.show=function(e,n,r,i,s,o){var u=document.createElement("div"),a=document.createElement("div"),f=document.createElement("div"),l=document.getElementsByTagName("body")[0];return r=r||"s",i=i||10,a.className="tooltip-inner",f.className="tooltip-arrow",a.innerHTML=n,u.style.left=0,u.style.top=-1e3,u.style.opacity=0,u.className="tooltip xy-tooltip in",u.appendChild(a),u.appendChild(f),l.appendChild(u),t.position(u,e,r,i),u.style.opacity=1,u},t.cleanup=function(){var e=document.getElementsByClassName("tooltip"),t=[];while(e.length)t.push(e[0]),e[0].style.transitionDelay="0 !important",e[0].style.opacity=0,e[0].className="nvtooltip-pending-removal out";setTimeout(function(){while(t.length){var e=t.pop();e.parentNode.removeChild(e)}},500)},t.position=function(t,n,r,i){function v(){var e=n[0]-u/2;return e<c&&(e=c+5),e+u>a&&(e=a-u-5),e}function m(){var e=n[1]-o/2;return e<l&&(e=l+5),e+o>l+f&&(e=l-o-5),e}var s=document.getElementsByTagName("body")[0];r=r||"s",i=i||10;var o=parseInt(t.offsetHeight,10),u=parseInt(t.offsetWidth,10),a=e.utils.windowSize().width,f=e.utils.windowSize().height,l=s.scrollTop,c=s.scrollLeft,h=t.className.replace(/ top| right| bottom| left/g,""),p,d;switch(r){case"e":d=m(),p=n[0]-u-i,p<c?(p=n[0]+i,h+=" right"):h+=" left";break;case"w":d=m(),p=n[0]+i,p+u>a?(p=n[0]-u-i,h+=" left"):h+=" right";break;case"n":p=v(),d=n[1]+i,d+o>l+f?(d=n[1]-o-i,h+=" top"):h+=" bottom";break;case"s":p=v(),d=n[1]-o-i,l>d?(d=n[1]+10,h+=" bottom"):h+=" top"}t.style.left=p+"px",t.style.top=d+"px",t.className=h}}(),e.utils.windowSize=function(){var e={width:640,height:480};return document.body&&document.body.offsetWidth&&(e.width=document.body.offsetWidth,e.height=document.body.offsetHeight),document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(e.width=document.documentElement.offsetWidth,e.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e.width=window.innerWidth,e.height=window.innerHeight),e},e.utils.windowResize=function(e){window.attachEvent?window.attachEvent("onresize",e):window.addEventListener&&window.addEventListener("resize",e,!0)},e.utils.windowUnResize=function(e){window.detachEvent?window.detachEvent("onresize",e):window.removeEventListener&&window.removeEventListener("resize",e,!0)},e.utils.resizeOnPrint=function(e){if(window.matchMedia){var t=window.matchMedia("print");t.addListener(function(t){t.matches&&e()})}else window.attachEvent?window.attachEvent("onbeforeprint",e):window.onbeforeprint=e},e.utils.unResizeOnPrint=function(e){if(window.matchMedia){var t=window.matchMedia("print");t.removeListener(function(t){t.matches&&e()})}else window.detachEvent?window.detachEvent("onbeforeprint",e):window.onbeforeprint=null},e.utils.getColor=function(t){return arguments.length?Object.prototype.toString.call(t)==="[object Array]"?function(e,n){return e.color||t[n%t.length]}:t:e.utils.defaultColor()},e.utils.defaultColor=function(){var e=d3.scale.category20().range();return function(t,n){return t.color||e[n%e.length]}},e.utils.customTheme=function(e,t,n){t=t||function(e){return e.key},n=n||d3.scale.category20().range();var r=n.length;return function(i,s){var o=t(i);return r||(r=n.length),typeof e[o]!="undefined"?typeof e[o]=="function"?e[o]():e[o]:n[--r]}},e.utils.pjax=function(t,n){function r(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),e.utils.pjax(t,n)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},e.utils.colorLinearGradient=function(t,n,r,i,s){var o="lg_gradient_"+n,u=s.select("#"+o);return u.empty()&&(r.position==="middle"?e.utils.createLinearGradient(o,r,s,[{offset:"0%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1},{offset:"20%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1},{offset:"80%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1}]):e.utils.createLinearGradient(o,r,s,[{offset:"0%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1}])),"url(#"+o+")"},e.utils.createLinearGradient=function(e,t,n,r){var i=t.orientation==="horizontal"?"0%":"100%",s=t.orientation==="horizontal"?"100%":"0%",o=n.append("linearGradient").attr("id",e).attr("x1","0%").attr("y1","0%").attr("x2",i).attr("y2",s).attr("spreadMethod","pad");for(var u=0;u<r.length;u+=1){var a=r[u],f=o.append("stop");for(var l in a)a.hasOwnProperty(l)&&f.attr(l,a[l])}},e.utils.colorRadialGradient=function(t,n,r,i,s){var o="rg_gradient_"+n,u=s.select("#"+o);return u.empty()&&e.utils.createRadialGradient(o,r,s,[{offset:r.s,"stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1}]),"url(#"+o+")"},e.utils.createRadialGradient=function(e,t,n,r){var i=n.append("radialGradient").attr("id",e).attr("r",t.r).attr("cx",t.x).attr("cy",t.y).attr("gradientUnits",t.u).attr("spreadMethod","pad");for(var s=0;s<r.length;s+=1){var o=r[s],u=i.append("stop");for(var a in o)o.hasOwnProperty(a)&&u.attr(a,o[a])}},e.utils.getAbsoluteXY=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,s=n.left+r,o=n.top+i;return{left:s,top:o}},e.utils.roundedRectangle=function(e,t,n,r,i){return"M"+e+","+t+"h"+(n-i*2)+"a"+i+","+i+" 0 0 1 "+i+","+i+"v"+(r-2-i*2)+"a"+i+","+i+" 0 0 1 "+ -i+","+i+"h"+(i*2-n)+"a"+ -i+","+i+" 0 0 1 "+ -i+","+ -i+"v"+(-r+i*2+2)+"a"+i+","+i+" 0 0 1 "+i+","+ -i+"z"},e.utils.dropShadow=function(e,t,n){var r=n||{},i=r.height||"130%",s=r.offset||2,o=r.blur||1,u=t.append("filter").attr("id",e).attr("height",i),a=u.append("feOffset").attr("in","SourceGraphic").attr("result","offsetBlur").attr("dx",s).attr("dy",s),f=u.append("feColorMatrix").attr("in","offsetBlur").attr("result","matrixOut").attr("type","matrix").attr("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"),l=u.append("feGaussianBlur").attr("in","matrixOut").attr("result","blurOut").attr("stdDeviation",o),c=u.append("feMerge");return c.append("feMergeNode"),c.append("feMergeNode").attr("in","SourceGraphic"),"url(#"+e+")"},e.utils.maxStringSetLength=function(e,t,n){var r=0;t.append("g").attr("class","tmp-text-strings");var i=t.select(".tmp-text-strings").selectAll("text").data(e).enter().append("text").text(n);return i.each(function(e,t){r=Math.max(this.getBBox().width,r)}),t.select(".tmp-text-strings").remove(),r},e.models.axis=function(){function m(t){return t.each(function(t){var m=d3.select(this),g=m.selectAll("g.nv-wrap.nv-axis").data([t]),y=g.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),b=g.select("g"),w=e.orient()==="left"||e.orient()==="right"?"vertical":"horizontal",E=e.tickPadding(),S=e.tickFormat(),x=r.range().length===2?r.range()[1]:r.range()[r.range().length-1]+(r.range()[1]-r.range()[0]),T={y:0,dy:0,x:x/2,a:"middle",t:""},N={};p!==null?e.ticks(p):(e.orient()==="top"||e.orient()==="bottom")&&e.ticks(Math.ceil(Math.abs(r.range()[1]-r.range()[0])/100)),u%360&&e.orient()==="bottom"&&e.tickPadding(0),b.call(e),e.tickPadding(E),v=v||e.scale(),S===null&&(S=v.tickFormat());var C=0,k=0,L=b.selectAll("g.tick").select("text");L.each(function(e,t){var n=this.getBoundingClientRect(),r={w:parseInt(n.width,10),h:parseInt(n.height/1.15,10)};r.w>C&&(C=r.w),r.h>k&&(k=r.h)}),n=E+(i?d:0);switch(e.orient()){case"top":i&&(T.y=-n,T.dy="-.71em"),s&&(N={data:r.domain(),translate:function(e,t){return"translate("+r(e)+",0)"},dy:"0em",x:0,y:-e.tickPadding(),transform:"",anchor:u?u%360>0?"start":"end":"middle"});break;case"bottom":if(u%360){var A=Math.abs(Math.sin(u*Math.PI/180));n+=A?A*C:C,n+=A?A*k:0,L.attr("transform",function(e,t,n){return"translate(0,"+E+") rotate("+u+")"}).style("text-anchor",u%360>0?"start":"end")}else if(f){var O=1;b.selectAll(".tick").select("text").each(function(t){var n=this.textContent,r=d3.select(this),i=n.split(" "),s=0,o=i.length,u=.71,a=1,f=e.scale().rangeBand();if(this.getBoundingClientRect().width>f){this.textContent="";do{var l,c=r.append("tspan").text(i[s]+" ").attr("dy",u+"em").attr("x","0px");s===0&&(u=1),s+=1;while(s<o){l=c.text(),c.text(l+" "+i[s]);if(!(this.getBoundingClientRect().width<=f)){c.text(l),a+=1;break}s+=1}}while(s<o)}O=Math.max(O,a)}),n+=O*k}else a?(L.attr("transform",function(e,t){return"translate(0,"+(t%2===0?"0":"12")+")"}),n+=2*k):n+=k;i&&(T.y=n,T.dy=".71em"),l&&b.selectAll(".tick").each(function(e,n){d3.select(this).selectAll("text,line").style("opacity",n%Math.ceil(t[0].values.length/(x/100))!==0?0:1)}),s&&(N={data:[r.domain()[0],r.domain()[r.domain().length-1]],translate:function(e,t){return"translate("+(r(e)+(h?r.rangeBand()/2:0))+",0)"},dy:".71em",x:0,y:e.tickPadding(),rotate:function(e){return"rotate("+u+" 0,0)"},anchor:u?u%360>0?"start":"end":"middle"});break;case"right":n+=C,i&&(T={y:c?-n:-10,dy:0,x:c?r.range()[0]/2:e.tickPadding(),a:c?"middle":"begin",t:c?"rotate(90)":""}),s&&(N={data:r.domain(),translate:function(e,t){return"translate(0,"+r(e)+")"},dy:".32em",x:e.tickPadding(),y:0,rotate:"",anchor:"start"});break;case"left":n+=C,i&&(T={y:c?-n:-10,dy:0,x:c?-r.range()[0]/2:-e.tickPadding(),a:c?"middle":"end",t:c?"rotate(-90)":""}),s&&(N={data:r.domain(),translate:function(e,t){return"translate(0,"+r(e)+")"},dy:".32em",x:-e.tickPadding(),y:0,rotate:"",anchor:"end"})}var M=b.selectAll("text.nv-axislabel").data([i]);M.exit().remove(),M.enter().append("text").attr("class","nv-axislabel"),i&&(M.text(function(e){return e}).attr("y",T.y).attr("dy",T.dy).attr("x",T.x).attr("transform",T.t).style("text-anchor",T.a),M.each(function(e,t){n+=w==="horizontal"?parseInt(this.getBoundingClientRect().height/1.15,10):parseInt(this.getBoundingClientRect().width/1.15,10)}));if(s){var _=g.selectAll("g.nv-axisMaxMin").data(N.data);_.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),_.exit().remove(),_.attr("transform",N.translate).select("text").text(function(e,t){var n=S(e);return(""+n).match("NaN")?"":n}).attr("dy",N.dy).attr("x",N.x).attr("y",N.y).attr("transform",N.rotate).style("text-anchor",N.anchor),_.attr("transform",N.translate).select("text").style("opacity",1)}s&&(e.orient()==="left"||e.orient()==="right")&&(b.selectAll("g.tick").each(function(e,t){d3.select(this).select("text").style("opacity",1);if(r(e)>r.range()[0]-10||r(e)<r.range()[1]+10)e<1e-10&&e>-1e-10&&(d3.select(this).select("text").style("opacity",0),d3.select(this).select("line").style("opacity",0)),d3.select(this).select("text").style("opacity",0)}),r.domain()[0]===r.domain()[1]&&r.domain()[0]===0&&g.selectAll("g.nv-axisMaxMin").style("opacity",function(e,t){return t?0:1}));if(s&&(e.orient()==="top"||e.orient()==="bottom")){var D=[];g.selectAll("g.nv-axisMaxMin").each(function(e,t){try{t?D.push(r(e)-this.getBoundingClientRect().width-4):D.push(r(e)+this.getBoundingClientRect().width+4)}catch(n){t?D.push(r(e)-4):D.push(r(e)+4)}})}o&&b.selectAll("line.tick").filter(function(e){return!parseFloat(Math.round(e*1e5)/1e6)}).classed("zero",!0),v=r.copy()}),m}var e=d3.svg.axis(),t={top:0,right:0,bottom:0,left:0},n=0,r=d3.scale.linear(),i=null,s=!0,o=!0,u=0,a=!1,f=!1,l=!1,c=!0,h=!1,p=null,d=8;e.scale(r).orient("bottom").tickFormat(function(e){return e});var v;return m.axis=e,d3.rebind(m,e,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(m,r,"domain","range","rangeBand","rangeBands"),m.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return m},m.width=function(e){return arguments.length?(n=e,m):n},m.height=function(e){return arguments.length?(n=e,m):n},m.ticks=function(e){return arguments.length?(p=e,m):p},m.axisLabel=function(e){return arguments.length?(i=e,m):i},m.showMaxMin=function(e){return arguments.length?(s=e,m):s},m.highlightZero=function(e){return arguments.length?(o=e,m):o},m.scale=function(t){return arguments.length?(r=t,e.scale(r),h=typeof r.rangeBands=="function",d3.rebind(m,r,"domain","range","rangeBand","rangeBands"),m):r},m.wrapTicks=function(e){return arguments.length?(f=e,u=0,a=!1,m):f},m.rotateTicks=function(e){return arguments.length?(u=e,f=!1,a=!1,m):u},m.staggerTicks=function(e){return arguments.length?(a=e,f=!1,u=0,m):a},m.reduceXTicks=function(e){return arguments.length?(l=e,m):l},m.rotateYLabel=function(e){return arguments.length?(c=e,m):c},m.axisLabelDistance=function(e){return arguments.length?(d=e,m):d},m.maxTickWidth=function(e){return arguments.length?(maxTickWidth=e,m):maxTickWidth},m},e.models.legend=function(){function y(c){return c.each(function(c){function j(e){var t=d3.transform(D.attr("transform")).translate,n=t[1]+d3.event.sourceEvent.wheelDelta/4,r=T-x,i=Math.max(n,r);i&&D.attr("transform","translate(0,"+Math.min(i,0)+")")}function F(){O.transition().duration(200).style("opacity",g*.9).style("display",g?"inline":"none"),D.transition().duration(200).style("opacity",g).style("display",g?"inline":"none"),M.text(g===1?y.strings().close:y.strings().type)}var b=d3.select(this),w=n,E=r,S=[],x=0,T=0,N="";if(!c||!c.length||!c.filter(function(e){return!e.values||e.values.length}).length)return y;l=!0,N=!c[0].type||c[0].type==="bar"?"bar":"line";var C=b.selectAll("g.nv-chart-legend").data([c]),k=C.enter().append("g").attr("class","nv-chart-legend"),L=k.append("defs");L.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect");var A=C.select("#nv-edge-clip-"+h+" rect");k.append("rect").attr("class","nv-legend-background");var O=b.select(".nv-legend-background");k.append("text").attr("class","nv-legend-link");var M=b.select(".nv-legend-link");k.append("g").attr("class","nv-legend-mask").append("g").attr("class","nv-legend");var _=b.select(".nv-legend-mask"),D=b.select("g.nv-legend"),P=D.selectAll(".nv-series").data(function(e){return e}),H=P.enter().append("g").attr("class","nv-series");P.exit().remove();var B=d3.behavior.zoom();A.attr("x",.5-t.left).attr("y",.5).attr("width",0).attr("height",0),O.attr("x",.5).attr("y",.5).attr("rx",2).attr("ry",2).attr("width",0).attr("height",0).attr("filter",e.utils.dropShadow("legend_back_"+h,L,{blur:2})).style("opacity",0).style("pointer-events","all"),M.text(g===1?y.strings().close:y.strings().type).attr("text-anchor",i==="left"?"start":"end").attr("dy",".32em").attr("dx",0).style("opacity",0).on("click",function(e,t){m.toggleMenu(e,t)}),H.on("mouseover",function(e,t){m.legendMouseover(e,t)}).on("mouseout",function(e,t){m.legendMouseout(e,t)}).on("click",function(e,t){m.legendClick(e,t),d3.event.stopPropagation()}),N==="bar"?(H.append("circle").attr("r",o).attr("class",function(e,t){return this.getAttribute("class")||v(e,t)}).attr("fill",function(e,t){return this.getAttribute("fill")||d(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||d(e,t)}).style("stroke-width",2),H.append("text").text(p).attr("dy",".36em")):(H.append("circle").attr("r",function(e,t){return e.type==="dash"?0:o}).attr("class",function(e,t){return this.getAttribute("class")||v(e,t)}).attr("fill",function(e,t){return this.getAttribute("fill")||d(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||d(e,t)}).style("stroke-width",0),H.append("line").attr("class",function(e,t){return this.getAttribute("class")||v(e,t)}).attr("stroke",function(e,t){return this.getAttribute("stroke")||d(e,t)}).attr("stroke-width",3).attr("x0",0).attr("y0",0).attr("y1",0).style("stroke-width","4px"),H.append("circle").attr("r",function(e,t){return e.type==="dash"?0:o}).attr("class",function(e,t){return this.getAttribute("class")||v(e,t)}).attr("fill",function(e,t){return this.getAttribute("fill")||d(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||d(e,t)}).style("stroke-width",0),H.append("text").text(p).attr("dy",".32em").attr("dx",0).attr("text-anchor",s)),P.classed("disabled",function(e){return e.disabled}),y.calculateWidth=function(){var e=u+(s==="start"?2*o+3:0);return S=[],D.style("display","inline"),P.select("text").each(function(t,n){var r=d3.select(this).node().getBBox().width;S.push(Math.max(Math.floor(r)+e,50))}),y.width(d3.sum(S)-u),y.width()},y.getLineHeight=function(){D.style("display","inline");var e=Math.floor(P.select("text").node().getBBox().height);return e},y.arrange=function(e){w=e,S.length===0&&this.calculateWidth();var n=S.length,r=1,l=n,c=[],p=[],d=0,v=0,m=0,b=s==="start"?10:6,C=this.getLineHeight(),k=b+o*2+(s==="start"?0:C),L=0,H=0,F;if(a){while(l>0){c=[];for(F=0;F<n;F+=1)S[F]>(c[F%l]||0)&&(c[F%l]=S[F]);if(d3.sum(c)<w)break;l-=1}r=Math.ceil(n/l),m=d3.sum(c)-u;for(F=0;F<n;F+=1)s==="start"?L+=F%l===0?0-L:c[F%l-1]:L+=(F%l===0?0-L:c[F%l-1]/2)+c[F%l]/2,H=Math.floor(F/l)*k,p[F]={x:L,y:H}}else for(F=0;F<n;F+=1)L+S[F]-u>w&&(L=0,r+=1),L+S[F]-u>m&&(m=L+S[F]-u),p[F]={x:L,y:(r-1)*(b+o*2)},L+=S[F];f||r<3?(g=0,v=.5+t.top+o,y.width(t.left+m+t.right).height(t.top+r*k-b+t.bottom),d=.5+(i==="right"?w-y.width()+t.right:i==="center"?(w-y.width())/2:0-t.left),B.on("zoom",null),A.attr("y",0-v).attr("width",y.width()).attr("height",y.height()),O.attr("x",d).attr("width",y.width()).attr("height",y.height()).style("opacity",0).style("display","inline"),_.attr("clip-path","none").attr("transform","translate("+(d+t.left+(s==="start"?o:0-u/2))+","+v+")"),D.style("opacity",1).style("display","inline"),P.attr("transform",function(e,t){var n=p[t];return"translate("+n.x+","+n.y+")"}),P.selectAll("text").attr("text-anchor",s).attr("transform",function(e,t){return s==="start"?"translate(8,0)":"translate(0,"+C+")"}),P.selectAll("circle").attr("transform",function(e,t){return"translate("+(s==="start"||N==="bar"?0:t?15:-15)+",0)"}),P.selectAll("line").attr("x1",function(e,t){return e.type==="dash"?40:30}).attr("transform",function(e,t){return e.type==="dash"?"translate(-20,0)":"translate(-15,0)"}).style("stroke-dasharray",function(e,t){return e.type==="dash"?"8, 8":"0,0"})):(y.width(t.left+d3.max(S)-u+(s==="start"?0:2*o+3)+t.right).height(t.top+o*2+t.bottom),d=.5+(i==="left"?0:w-y.width()),v=.5+y.height()+t.top+o,x=t.top+o*2*n+(n-1)*10+t.bottom,T=Math.min(E-y.height(),x),B.on("zoom",j),A.attr("y",0-t.top-o).attr("width",y.width()).attr("height",T),O.attr("x",d).attr("y",.5+y.height()).attr("width",y.width()).attr("height",T).style("opacity",g*.9).style("display",g?"inline":"none").call(B),M.attr("transform","translate("+(i==="left"?0:w)+","+(t.top+o)+")").style("opacity",1),_.attr("clip-path","url(#nv-edge-clip-"+h+")").attr("transform","translate("+(d+t.left+o)+","+v+")"),D.style("opacity",g).style("display",g?"inline":"none").call(B),P.attr("transform",function(e,t){return"translate(0,"+t*(10+o*2)+")"}),P.selectAll("circle").attr("transform",""),P.selectAll("line").attr("x1",16).attr("transform","translate(-8,0)").style("stroke-dasharray","inherit"),P.selectAll("text").attr("text-anchor","start").attr("transform","translate("+(N==="bar"?8:10)+",0)"))},m.on("toggleMenu",function(e){d3.event.stopPropagation(),g=1-g,F()}),m.on("closeMenu",function(e){g===1&&(g=0,F())})}),y}var t={top:10,right:10,bottom:10,left:10},n=0,r=0,i="right",s="start",o=5,u=10,a=!0,f=!1,l=!1,c={close:"close",type:"legend"},h=Math.floor(Math.random()*1e4),p=function(e){return e.key.length>0||!isNaN(parseFloat(e.key))&&isFinite(e.key)?e.key:"undefined"},d=e.utils.defaultColor(),v=function(e,t){return""},m=d3.dispatch("legendClick","legendMouseover","legendMouseout","toggleMenu","closeMenu"),g=0;return y.dispatch=m,y.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,y):t},y.width=function(e){return arguments.length?(n=Math.round(e),y):n},y.height=function(e){return arguments.length?(r=Math.round(e),y):r},y.id=function(e){return arguments.length?(h=e,y):h},y.key=function(e){return arguments.length?(p=e,y):p},y.color=function(t){return arguments.length?(d=e.utils.getColor(t),y):d},y.classes=function(e){return arguments.length?(v=e,y):v},y.align=function(e){return arguments.length?(i=e,y):i},y.position=function(e){return arguments.length?(s=e,y):s},y.showAll=function(e){return arguments.length?(f=e,y):f},y.lineSpacing=function(e){return arguments.length?(lineSpacing=e,y):lineSpacing},y.strings=function(e){return arguments.length?(c=e,y):c},y.equalColumns=function(e){return arguments.length?(a=e,y):a},y.enabled=function(e){return arguments.length?(l=e,y):l},y},e.models.scatter=function(){function F(I){return I.each(function(I){function Q(){if(!b)return!1;var e,i=d3.merge(I.map(function(e,t){return e.values.map(function(e,n){return[a(c(e,n))*(Math.random()/1e12+1),f(h(e,n))*(Math.random()/1e12+1),t,n,e]}).filter(function(e,t){return w(e[4],t)})}));if(_===!0){if(T){var s=X.select("defs").selectAll(".nv-point-clips").data([u]).enter();s.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+u);var o=X.select("#nv-points-clip-"+u).selectAll("circle").data(i);o.enter().append("circle").attr("r",N),o.exit().remove(),o.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}),X.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+u+")")}i.length<3&&(i.push([a.range()[0]-20,f.range()[0]-20,null,null]),i.push([a.range()[1]+20,f.range()[1]+20,null,null]),i.push([a.range()[0]-20,f.range()[0]+20,null,null]),i.push([a.range()[1]+20,f.range()[1]-20,null,null]));var l=d3.geom.polygon([[-10,-10],[-10,r+10],[n+10,r+10],[n+10,-10]]),p=d3.geom.voronoi(i).map(function(e,t){return{data:l.clip(e),series:i[t][2],point:i[t][3]}}),d=X.select(".nv-point-paths").selectAll("path").data(p);d.enter().append("path").attr("class",function(e,t){return"nv-path-"+t}),d.exit().remove(),d.attr("d",function(e){return"M"+e.data.join("L")+"Z"}),d.on("click",function(e){if(j)return 0;var n=I[e.series],r=n.values[e.point];M.elementClick({point:r,series:n,pos:[a(c(r,e.point))+t.left,f(h(r,e.point))+t.top],seriesIndex:e.series,pointIndex:e.point})}).on("mouseover",function(e){if(j)return 0;var t=I[e.series],n=t.values[e.point];M.elementMouseover({point:n,series:t,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.series,pointIndex:e.point})}).on("mouseout",function(e,t){if(j)return 0;var n=I[e.series],r=n.values[e.point];M.elementMouseout({point:r,series:n,seriesIndex:e.series,pointIndex:e.point})}).on("mousemove",function(e,t){var n=I[e.series],r=n.values[e.point];M.elementMousemove({point:r,pointIndex:e.point,pos:[d3.event.pageX,d3.event.pageY],id:u})})}else X.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").style("pointer-events","auto").on("click",function(e,n){if(j||!I[e.series])return 0;var r=I[e.series],i=r.values[n];M.elementClick({point:i,series:r,pos:[a(c(i,n))+t.left,f(h(i,n))+t.top],seriesIndex:e.series,pointIndex:n})}).on("mouseover",function(e,t){if(j||!I[e.series])return 0;var n=I[e.series],r=n.values[t];M.elementMouseover({point:r,series:n,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.series,pointIndex:t})}).on("mouseout",function(e,t){if(j||!I[e.series])return 0;var n=I[e.series],r=n.values[t];M.elementMouseout({point:r,series:n,seriesIndex:e.series,pointIndex:t})}).on("mousemove",function(e,t){var n=I[e.series],r=n.values[t];M.elementMousemove({point:r,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:u})});j=!1}var q=n-t.left-t.right,R=r-t.top-t.bottom,U=d3.select(this);I=I.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var W=C&&k&&L?[]:d3.merge(I.map(function(e){return e.values.map(function(e,t){return{x:c(e,t),y:h(e,t),size:p(e,t)}})}));a.domain(C||d3.extent(W.map(function(e){return e.x}).concat(m))),E&&I[0]?S!==0?a.range([(q*S+q)/(2*I[0].values.length),q-q*(1+S)/(2*I[0].values.length)]):a.range([0+Math.sqrt(A[1]/Math.PI),q-Math.sqrt(A[1]/Math.PI)]):a.range([0,q]),f.domain(k||d3.extent(W.map(function(e){return e.y}).concat(g))).range([R,0]),l.domain(L||d3.extent(W.map(function(e){return e.size}).concat(y))).range(A);if(a.domain()[0]===a.domain()[1]||f.domain()[0]===f.domain()[1])O=!0;a.domain()[0]===a.domain()[1]&&(a.domain()[0]?a.domain([a.domain()[0]-a.domain()[0]*.01,a.domain()[1]+a.domain()[1]*.01]):a.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+f.domain()[0]*.01,f.domain()[1]-f.domain()[1]*.01]):f.domain([-1,1])),D=D||a,P=P||f,H=H||l;var X=U.selectAll("g.nv-wrap.nv-scatter").data([I]),V=X.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+u+(O?" nv-single-point":"")),$=V.append("defs"),J=V.append("g"),K=X.select("g");F.gradient=function(t,n){return e.utils.colorRadialGradient(t,u+"-"+n,{x:.5,y:.5,r:.5,s:0,u:"objectBoundingBox"},i(t,n),X.select("defs"))},J.append("g").attr("class","nv-groups"),J.append("g").attr("class","nv-point-paths"),X.attr("transform","translate("+t.left+","+t.top+")"),$.append("clipPath").attr("id","nv-edge-clip-"+u).append("rect"),X.select("#nv-edge-clip-"+u+" rect").attr("width",q).attr("height",R),K.attr("clip-path",x?"url(#nv-edge-clip-"+u+")":""),j=!0;var G=X.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});G.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(G.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),G.attr("class",function(e,t){return this.getAttribute("class")||o(e,e.series)}).attr("fill",function(e,t){return this.getAttribute("fill")||s(e,e.series)}).attr("stroke",function(e,t){return this.getAttribute("stroke")||s(e,e.series)}).classed("hover",function(e){return e.hover}),d3.transition(G).style("stroke-opacity",1).style("fill-opacity",.5);if(v){var Y=G.selectAll("circle.nv-point").data(function(e){return e.values});Y.enter().append("circle").attr("cx",function(e,t){return D(c(e,t))}).attr("cy",function(e,t){return P(h(e,t))}).attr("r",function(e,t){return Math.sqrt(l(p(e,t))/Math.PI)}),Y.exit().remove(),d3.transition(G.exit().selectAll("path.nv-point")).attr("cx",function(e,t){return a(c(e,t))}).attr("cy",function(e,t){return f(h(e,t))}).remove(),Y.attr("class",function(e,t){return"nv-point nv-point-"+t}),d3.transition(Y).attr("cx",function(e,t){return a(c(e,t))}).attr("cy",function(e,t){return f(h(e,t))}).attr("r",function(e,t){return Math.sqrt(l(p(e,t))/Math.PI)})}else{var Y=G.selectAll("path.nv-point").data(function(e){return e.values});Y.enter().append("path").attr("transform",function(e,t){return"translate("+D(c(e,t))+","+P(h(e,t))+")"}).attr("d",d3.svg.symbol().type(d).size(function(e,t){return l(p(e,t))})),Y.exit().remove(),d3.transition(G.exit().selectAll("path.nv-point")).attr("transform",function(e,t){return"translate("+a(c(e,t))+","+f(h(e,t))+")"}).remove(),Y.attr("class",function(e,t){return"nv-point nv-point-"+t}),d3.transition(Y).attr("transform",function(e,t){return"translate("+a(c(e,t))+","+f(h(e,t))+")"}).attr("d",d3.svg.symbol().type(d).size(function(e,t){return l(p(e,t))}))}clearTimeout(B),B=setTimeout(Q,300),D=a.copy(),P=f.copy(),H=l.copy()}),F}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=i,o=function(e,t){return"nv-group nv-series-"+t},u=Math.floor(Math.random()*1e5),a=d3.scale.linear(),f=d3.scale.linear(),l=d3.scale.linear(),c=function(e){return e.x},h=function(e){return e.y},p=function(e){return e.size||1},d=function(e){return e.shape||"circle"},v=!0,m=[],g=[],y=[],b=!0,w=function(e){return!e.notActive},E=!1,S=.1,x=!1,T=!0,N=function(){return 10},C=null,k=null,L=null,A=[16,256],O=!1,M=d3.dispatch("elementClick","elementMouseover","elementMouseout","elementMousemove"),_=!0,D,P,H,B,j=!1;return M.on("elementMouseover.point",function(e){b&&d3.select(".nv-chart-"+u+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!0)}),M.on("elementMouseout.point",function(e){b&&d3.select(".nv-chart-"+u+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!1)}),F.dispatch=M,F.color=function(e){return arguments.length?(i=e,F):i},F.fill=function(e){return arguments.length?(s=e,F):s},F.classes=function(e){return arguments.length?(o=e,F):o},F.gradient=function(e){return arguments.length?(gradient=e,F):gradient},F.x=function(e){return arguments.length?(c=d3.functor(e),F):c},F.y=function(e){return arguments.length?(h=d3.functor(e),F):h},F.size=function(e){return arguments.length?(p=d3.functor(e),F):p},F.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,F):t},F.width=function(e){return arguments.length?(n=e,F):n},F.height=function(e){return arguments.length?(r=e,F):r},F.xScale=function(e){return arguments.length?(a=e,F):a},F.yScale=function(e){return arguments.length?(f=e,F):f},F.zScale=function(e){return arguments.length?(l=e,F):l},F.xDomain=function(e){return arguments.length?(C=e,F):C},F.yDomain=function(e){return arguments.length?(k=e,F):k},F.sizeDomain=function(e){return arguments.length?(L=e,F):L},F.sizeRange=function(e){return arguments.length?(A=e,F):A},F.forceX=function(e){return arguments.length?(m=e,F):m},F.forceY=function(e){return arguments.length?(g=e,F):g},F.forceSize=function(e){return arguments.length?(y=e,F):y},F.interactive=function(e){return arguments.length?(b=e,F):b},F.pointActive=function(e){return arguments.length?(w=e,F):w},F.padData=function(e){return arguments.length?(E=e,F):E},F.padDataOuter=function(e){return arguments.length?(S=e,F):S},F.clipEdge=function(e){return arguments.length?(x=e,F):x},F.clipVoronoi=function(e){return arguments.length?(T=e,F):T},F.useVoronoi=function(e){return arguments.length?(_=e,_===!1&&(T=!1),F):_},F.clipRadius=function(e){return arguments.length?(N=e,F):N},F.shape=function(e){return arguments.length?(d=e,F):d},F.onlyCircles=function(e){return arguments.length?(v=e,F):v},F.id=function(e){return arguments.length?(u=e,F):u},F.singlePoint=function(e){return arguments.length?(O=e,F):O},F},e.models.bubbleChart=function(){function P(n){return n.each(function(
n){function h(e){function t(e){return 32-(new Date(e.getFullYear(),e.getMonth(),32)).getDate()}var n=d3.extent(d3.merge(e.map(function(e){return e.values.map(function(e,t){return d3.time.format("%Y-%m-%d").parse(u(e))})}))),r=d3.time.month.range(d3.time.month.floor(n[0]),d3.time.month.ceil(n[1])),i=r.map(function(e){return d3.time.day.offset(d3.time.month.floor(e),t(e)/2-1)});return i}function v(e){var t=d3.nest().key(p).entries(e),n=1e3/t.length,r=n*.25,i=[0,1],s=[0,1],o=d3.scale.linear().domain(i).range(s),u=[],a=0;return t.map(function(e,t){return e.total=0,e.values=e.values.sort(function(e,t){return t.y<e.y?-1:t.y>e.y?1:0}).map(function(t){return e.total+=t.y,t}),e.group=t,e}).sort(function(e,t){return e.total<t.total?-1:e.total>t.total?1:0}).map(function(e,t){return a+=e.total,i=d3.extent(e.values.map(function(e){return e.y})),s=[n*t+r,n*(t+1)-r],o.domain(i).range(s),e.values=e.values.map(function(t){return t.group=e.group,t.opportunity=t.y,t.y=o(t.opportunity),t}),u.push({y:d3.min(e.values.map(function(e){return e.y})),key:e.key}),e}),u}var r=n.properties,s=n.data,l=d3.select(this),c=this;P.update=function(){l.transition().call(P)},P.container=this;if(!s||!s.length)return P;C.disabled=s.map(function(e){return!!e.disabled});var m=d3.nest().key(d).entries(s);m=m.sort(function(e,t){return parseInt(e.key,10)<parseInt(t.key,10)?-1:parseInt(e.key,10)>parseInt(t.key,10)?1:0}).map(function(e,t){return e.series=t,e.classes=e.values[0].classes,e.color=e.values[0].color,e});var y=d3.extent(d3.merge(m.map(function(e){return e.values.map(function(e,t){return d3.time.format("%Y-%m-%d").parse(e.x)})}))),b=[d3.time.month.floor(y[0]),d3.time.day.offset(d3.time.month.ceil(y[1]),-1)],w=v(s),x=d3.extent(d3.merge(m.map(function(e){return e.values.map(function(e,t){return a(e,t)})})).concat(f));T=A.xScale(),N=A.yScale(),O.scale(T),M.scale(N),P.render=function(){var e=e||parseInt(l.style("width"),10),n=n||parseInt(l.style("height"),10),u=e-t.left-t.right,a=n-t.top-t.bottom,f=u,c=a,p={top:0,right:0,bottom:0,left:0},d=Math.sqrt(A.sizeRange()[1]/Math.PI);if(!s||!s.length){var v=l.selectAll(".nv-noData").data([k]);return v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",t.left+u/2).attr("y",t.top+a/2).text(function(e){return e}),P}l.selectAll(".nv-noData").remove();var g=l.selectAll("g.nv-wrap.nv-bubbleChart").data([m]),y=g.enter().append("g").attr("class","nvd3 nv-wrap nv-bubbleChart").append("g"),E=g.select("g").attr("class","nv-chartWrap");y.append("g").attr("class","nv-titleWrap");var S=E.select(".nv-titleWrap");y.append("g").attr("class","nv-x nv-axis");var T=E.select(".nv-x.nv-axis");y.append("g").attr("class","nv-y nv-axis");var N=E.select(".nv-y.nv-axis");y.append("g").attr("class","nv-bubblesWrap");var C=E.select(".nv-bubblesWrap");y.append("g").attr("class","nv-legendWrap");var L=E.select(".nv-legendWrap");g.attr("transform","translate("+t.left+","+t.top+")"),i&&r.title&&(S.select(".nv-title").remove(),S.append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("dy",".71em").attr("text-anchor","start").text(r.title).attr("stroke","none").attr("fill","black"),p.top+=parseInt(E.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(E.select(".nv-title").style("margin-top"),10)+parseInt(E.select(".nv-title").style("margin-bottom"),10)),o&&(_.id("legend_"+P.id()).height(a-p.top).key(function(e){return e.key+"%"}),L.datum(m).call(_),_.arrange(u),L.attr("transform","translate(0,"+p.top+")")),p.top+=_.height(),c=a-p.top-p.bottom,O.tickValues(h(m)),T.call(O),p[O.orient()]+=O.height(),p.top+=d,c=a-p.top-p.bottom,M.ticks(w.length).tickValues(w.map(function(e,t){return w[t].y})).tickFormat(function(e,t){return w[t].key}),N.call(M),p[M.orient()]+=M.width(),f=u-p.left-p.right,A.xDomain(b).yDomain(x).width(f).height(c).id(P.id()),C.datum(m.filter(function(e){return!e.disabled})).attr("transform","translate("+p.left+","+p.top+")").transition().duration(P.delay()).call(A),T.attr("transform","translate("+p.left+","+(O.orient()==="bottom"?c+p.top:p.top)+")").transition().call(O),M.tickSize(-f,0),N.attr("transform","translate("+(M.orient()==="left"?p.left:p.left+f)+","+p.top+")").transition().call(M)},_.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,s.filter(function(e){return!e.disabled}).length||s.map(function(e){return e.disabled=!1,g.selectAll(".nv-series").classed("disabled",!1),e}),C.disabled=s.map(function(e){return!!e.disabled}),L.stateChange(C),l.transition().call(P.render)}),L.on("tooltipShow",function(e){S&&D(e,c.parentNode)}),L.on("tooltipHide",function(){S&&e.tooltip.cleanup()}),L.on("tooltipMove",function(t){E&&e.tooltip.position(E,t.pos)}),L.on("changeState",function(e){typeof e.disabled!="undefined"&&(s.forEach(function(t,n){t.disabled=e.disabled[n]}),C.disabled=e.disabled),l.transition().call(P)}),L.on("chartClick",function(e){_.enabled()&&_.dispatch.closeMenu(e)}),P.render()}),P}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!1,o=!0,u=function(e){return e.x},a=function(e){return e.y},f=[0],l,c,h=200,p=function(e){return e.y},d=function(e){return e.y},v=!1,m=0,y=!1,b=function(e){return},w=d3.time.format("%Y-%m-%d"),E=null,S=!0,x=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},T,N,C={},k="No Data Available.",L=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),A=e.models.scatter().padData(!0).padDataOuter(0).size(function(e){return e.y}).sizeRange([256,1024]).singlePoint(!0),O=e.models.axis().orient("bottom").tickSize(0).tickPadding(5).highlightZero(!1).showMaxMin(!1).ticks(d3.time.months,1).tickFormat(function(e){return d3.time.format("%b")(new Date(e))}),M=e.models.axis().orient("left").tickPadding(7).highlightZero(!1).showMaxMin(!1),_=e.models.legend().align("center"),D=function(t,n,r){var i=t.pos[0],s=t.pos[1],o=t.point.x,u=t.point.y,a=x(t.series.key,o,u,t,P);E=e.tooltip.show([i,s],a,t.value<0?"n":"s",null,n)};return A.dispatch.on("elementMouseover.tooltip",function(e){L.tooltipShow(e)}),A.dispatch.on("elementMouseout.tooltip",function(e){L.tooltipHide(e)}),A.dispatch.on("elementMousemove.tooltip",function(e){L.tooltipMove(e)}),A.dispatch.on("elementClick",function(t){b(t),e.tooltip.cleanup()}),P.dispatch=L,P.scatter=A,P.legend=_,P.xAxis=O,P.yAxis=M,d3.rebind(P,A,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(P,A,"size","zScale","sizeDomain","forceSize","interactive","clipVoronoi","clipRadius"),d3.rebind(P,O,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),P.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,t.series)},r=function(e,t){return"nv-group nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(e.series/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=e.series*(s.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var f=s.gradient?function(e,t){return A.gradient(e,e.series)}:n;return A.color(n),A.fill(f),A.classes(r),_.color(n),_.classes(r),P},P.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return P},P.width=function(e){return arguments.length?(n=e,P):n},P.height=function(e){return arguments.length?(r=e,P):r},P.showTitle=function(e){return arguments.length?(i=e,P):i},P.showLegend=function(e){return arguments.length?(o=e,P):o},P.tooltip=function(e){return arguments.length?(E=e,P):E},P.tooltips=function(e){return arguments.length?(S=e,P):S},P.tooltipContent=function(e){return arguments.length?(x=e,P):x},P.noData=function(e){return arguments.length?(k=e,P):k},P.state=function(e){return arguments.length?(C=e,P):C},P.delay=function(e){return arguments.length?(h=e,P):h},P.bubbleClick=function(e){return arguments.length?(b=e,P):b},P.groupBy=function(e){return arguments.length?(p=e,P):p},P.filterBy=function(e){return arguments.length?(d=e,P):d},P.colorFill=function(e){return P},P},e.models.funnel=function(){function S(T){return T.each(function(T){function j(e,t,n){var r=P/2-H*e,i=P/2-H*t;return B-r+","+e*n+" "+(B-i)+","+t*n+" "+(B+i)+","+t*n+" "+(B+r)+","+e*n}function F(e,t){var n=t/H/2;return Math.abs(Math.sqrt(e/H+n*n))-n}function I(e,t){return e*(t-e*H)}var N=n-t.left-t.right,C=r-t.top-t.bottom,k=d3.select(this),L=20,A=0,O=0,M=0,_=0,D=8,P=Math.min(C/1.1,N-40),H=.3,B=N/2;O=I(C,P),M=P-2*H*C,T=T.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,typeof e.value=="undefined"&&(e.value=e.y),A+=e.value,e}),e}),T=T.map(function(e,t){return e.values=e.values.map(function(e){return e.height=0,A>0&&(e.height=F(O*e.value/A,M)),e.height<D?(_+=e.height-D,e.height=D):_<0&&e.height+_>D&&(e.height+=_,_=0),M+=2*H*e.height,e}),e}),T=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(T);var q=p&&d?[]:T.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});i.domain(p||d3.merge(q).map(function(e){return e.x})).rangeBands([0,N],.1),s.domain(d||d3.extent(d3.merge(q).map(function(e){return e.y+e.y0}).concat(l))).range([C,0]),w=w||i,E=E||s;var R=k.selectAll("g.nv-wrap.nv-funnel").data([T]),U=R.enter().append("g").attr("class","nvd3 nv-wrap nv-funnel"),z=U.append("defs"),W=U.append("g"),X=R.select("g");S.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,o+"-"+n,r,m(t,n),R.select("defs"))},W.append("g").attr("class","nv-groups"),R.attr("transform","translate("+t.left+","+t.top+")"),z.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),R.select("#nv-edge-clip-"+o+" rect").attr("width",N).attr("height",C),X.attr("clip-path",c?"url(#nv-edge-clip-"+o+")":"");var V=R.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});V.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(V.exit()).duration(0).selectAll("polygon.nv-bar").delay(function(e,t){return t*h/T[0].values.length}).attr("points",function(e){return j(s(e.y0),s(e.y0+e.y),0)}).remove(),d3.transition(V.exit()).duration(0).selectAll("g.nv-label-value").delay(function(e,t){return t*h/T[0].values.length}).attr("y",0).style("fill-opacity",1e-6).attr("transform","translate("+B+",0)").remove(),d3.transition(V.exit()).duration(0).selectAll("text.nv-label-group").delay(function(e,t){return t*h/T[0].values.length}).attr("y",0).style("fill-opacity",1e-6).attr("transform","translate("+N+",0)").remove(),V.attr("class",function(e,t){return this.getAttribute("class")||y(e,t)}).classed("hover",function(e){return e.hover}).attr("fill",function(e,t){return this.getAttribute("fill")||g(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||g(e,t)}),d3.transition(V).duration(0).style("stroke-opacity",1).style("fill-opacity",1);var $=V.selectAll("polygon.nv-bar").data(function(e){return e.values}),J=$.enter().append("polygon").attr("class","nv-bar positive").attr("points",function(e){return j(s(e.y0),s(e.y0+e.y),0)});d3.transition($).duration(0).delay(function(e,t){return t*h/T[0].values.length}).attr("points",function(e){return j(s(e.y0),s(e.y0+e.y),1)});var K=V.selectAll(".nv-label-value").data(function(e){return e.values}),Q=K.enter().append("g").attr("class","nv-label-value").attr("transform","translate("+B+",0)");Q.append("text").attr("x",0).attr("y",5).attr("text-anchor","middle").text(function(e){return e.height>2*D?v(e):""}).style("pointer-events","none"),d3.transition(K).duration(0).delay(function(e,t){return t*h/T[0].values.length}).attr("transform",function(e){return"translate("+B+","+s(e.y0+e.y/2)+")"});var G=V.selectAll("text.nv-label-group").data(function(e){return[{y:e.values[0].y,y0:e.values[0].y0,key:e.count}]}),Y=G.enter().append("text").attr("class","nv-label-group").attr("x",0).attr("y",0).attr("dx",-10).attr("dy",5).attr("text-anchor","middle").text(function(e){return e.key}).attr("stroke","none").style("fill","black").style("fill-opacity",1e-6).attr("transform","translate("+N+",0)");d3.transition(G).duration(0).delay(function(e,t){return t*h/T[0].values.length}).style("fill-opacity",1).attr("transform",function(e){return"translate("+N+","+s(e.y0+e.y/2)+")"}),$.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),b.elementMouseover({value:f(e,t),point:e,series:T[e.series],pos:[i(u(e,t))+i.rangeBand()*(T.length/2)/T.length,s(a(e,t)+e.y0)],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),b.elementMouseout({value:f(e,t),point:e,series:T[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mousemove",function(e,t){b.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:o})}).on("click",function(e,t){b.elementClick({value:f(e,t),point:e,series:T[e.series],pos:[i(u(e,t))+i.rangeBand()*(T.length/2)/T.length,s(a(e,t)+e.y0)],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){b.elementDblClick({value:f(e,t),point:e,series:T[e.series],pos:[i(u(e,t))+i.rangeBand()*(T.length/2)/T.length,s(a(e,t)+e.y0)],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),w=i.copy(),E=s.copy()}),S}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.height},f=function(e){return e.value},l=[0],c=!0,h=1200,p,d,v=function(e){return e.value},m=e.utils.defaultColor(),g=m,y=function(e,t){return"nv-group nv-series-"+t},b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),w,E;return S.dispatch=b,S.color=function(e){return arguments.length?(m=e,S):m},S.fill=function(e){return arguments.length?(g=e,S):g},S.classes=function(e){return arguments.length?(y=e,S):y},S.gradient=function(e){return arguments.length?(gradient=e,S):gradient},S.x=function(e){return arguments.length?(u=e,S):u},S.y=function(e){return arguments.length?(a=e,S):a},S.margin=function(e){return arguments.length?(t=e,S):t},S.width=function(e){return arguments.length?(n=e,S):n},S.height=function(e){return arguments.length?(r=e,S):r},S.xScale=function(e){return arguments.length?(i=e,S):i},S.yScale=function(e){return arguments.length?(s=e,S):s},S.xDomain=function(e){return arguments.length?(p=e,S):p},S.yDomain=function(e){return arguments.length?(d=e,S):d},S.forceY=function(e){return arguments.length?(l=e,S):l},S.id=function(e){return arguments.length?(o=e,S):o},S.delay=function(e){return arguments.length?(h=e,S):h},S.clipEdge=function(e){return arguments.length?(c=e,S):c},S.fmtValueLabel=function(e){return arguments.length?(v=e,S):v},S},e.models.funnelChart=function(){function y(a){return a.each(function(a){var b=a.properties,w=a.data,E=d3.select(this),S=this,T=(n||parseInt(E.style("width"),10)||960)-t.left-t.right,N=(r||parseInt(E.style("height"),10)||400)-t.top-t.bottom,C=T,k=N,L={top:0,right:0,bottom:0,left:0};y.update=function(){E.transition().call(y)},y.container=this;if(!w||!w.length||!w.filter(function(e){return e.values.length}).length){var A=E.selectAll(".nv-noData").data([h]);return A.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),A.attr("x",t.left+T/2).attr("y",t.top+N/2).text(function(e){return e}),y}E.selectAll(".nv-noData").remove(),c.disabled=w.map(function(e){return!!e.disabled}),f=d.xScale();var O=E.selectAll("g.nv-wrap.nv-funnelChart").data([w]),M=O.enter().append("g").attr("class","nvd3 nv-wrap nv-funnelChart").append("g"),_=O.select("g").attr("class","nv-chartWrap");M.append("g").attr("class","nv-titleWrap");var D=_.select(".nv-titleWrap");M.append("g").attr("class","nv-y nv-axis");var P=_.select(".nv-y.nv-axis");M.append("g").attr("class","nv-funnelWrap");var H=_.select(".nv-funnelWrap");M.append("g").attr("class","nv-legendWrap");var B=_.select(".nv-legendWrap");O.attr("transform","translate("+t.left+","+t.top+")"),i&&b.title&&(D.select(".nv-title").remove(),D.append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("dy",".71em").attr("text-anchor","start").text(b.title).attr("stroke","none").attr("fill","black"),L.top+=parseInt(_.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(_.select(".nv-title").style("margin-top"),10)+parseInt(_.select(".nv-title").style("margin-bottom"),10)),s&&(m.id("legend_"+y.id()).height(N-L.top),B.datum(w).call(m),m.arrange(T),B.attr("transform","translate(0,"+L.top+")")),L.top+=m.height()+4,k=N-L.top-L.bottom,d.width(C).height(k),H.datum(w.filter(function(e){return!e.disabled})).attr("transform","translate("+L.left+","+L.top+")").transition().call(d);var j=[{x:0,y:0}],F=w.filter(function(e){return!e.disabled}).map(function(e){return e.values.map(function(e,t){return{x:e.x,y:e.y0+e.y}})}),I=d3.merge(j.concat(F)),q=d3.extent(I,function(e){return e.y}),R=d3.merge(I).map(function(e){return e.y});l=d3.scale.linear().domain(q).range([k,0]),yScale=d3.scale.quantile().domain(R).range(R.map(function(e){return l(e)})),v.tickSize(-C,0).scale(yScale).tickValues(R),P.attr("transform","translate("+(v.orient()==="left"?L.left:C)+","+L.top+")").transition().duration(y.delay()).call(v),m.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,w.filter(function(e){return!e.disabled}).length||w.map(function(e){return e.disabled=!1,O.selectAll(".nv-series").classed("disabled",!1),e}),c.disabled=w.map(function(e){return!!e.disabled}),p.stateChange(c),E.transition().call(y)}),p.on("tooltipShow",function(e){u&&g(e,S.parentNode,b)}),p.on("tooltipHide",function(){u&&e.tooltip.cleanup()}),p.on("tooltipMove",function(t){o&&e.tooltip.position(o,t.pos)}),p.on("changeState",function(e){typeof e.disabled!="undefined"&&(w.forEach(function(t,n){t.disabled=e.disabled[n]}),c.disabled=e.disabled),E.transition().call(y)}),p.on("chartClick",function(e){m.enabled()&&m.dispatch.closeMenu(e)})}),y}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!0,o=null,u=!0,a=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},f,l,c={},h="No Data Available.",p=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),d=e.models.funnel(),v=e.models.axis().orient("left").tickFormat(function(e){return""}),m=e.models.legend().align("center"),g=function(t,n,r){var i=0;r.total>0&&(i=(t.point.value*100/r.total).toFixed(1));var s=t.pos[0],u=t.pos[1],f=i,l=t.point.value,c=a(t.series.key,f,l,t,y);o=e.tooltip.show([s,u],c,t.value<0?"n":"s",null,n)};return d.dispatch.on("elementMouseover.tooltip",function(e){p.tooltipShow(e)}),d.dispatch.on("elementMouseout.tooltip",function(e){p.tooltipHide(e)}),d.dispatch.on("elementMousemove.tooltip",function(e){p.tooltipMove(e)}),y.dispatch=p,y.funnel=d,y.legend=m,y.yAxis=v,d3.rebind(y,d,"id","x","y","xDomain","yDomain","forceX","forceY","color","fill","classes","gradient"),d3.rebind(y,d,"fmtValueLabel","clipEdge","delay"),y.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,n)},r=function(e,t){return"nv-group nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(t/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=t*(s.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var f=s.gradient?function(e,t){var n={orientation:s.orientation||"vertical",position:s.position||"middle"};return d.gradient(e,t,n)}:n;return d.color(n),d.fill(f),d.classes(r),m.color(n),m.classes(r),y},y.x=function(e){return arguments.length?(getX=e,funnelWrap.x(e),y):getX},y.y=function(e){return arguments.length?(getY=e,d.y(e),y):getY},y.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return y},y.width=function(e){return arguments.length?(n=e,y):n},y.height=function(e){return arguments.length?(r=e,y):r},y.showTitle=function(e){return arguments.length?(i=e,y):i},y.showLegend=function(e){return arguments.length?(s=e,y):s},y.tooltip=function(e){return arguments.length?(o=e,y):o},y.tooltips=function(e){return arguments.length?(u=e,y):u},y.tooltipContent=function(e){return arguments.length?(a=e,y):a},y.noData=function(e){return arguments.length?(h=e,y):h},y.state=function(e){return arguments.length?(c=e,y):c},y},e.models.gauge=function(){function C(i){return i.each(function(i){function V(e){W.transition().duration(T).ease("elastic").attr("transform","rotate("+J(e)+")")}function $(e){return e*Math.PI/180}function J(e){return S+A(e)*L}function K(){return"translate("+y+","+y+")"}var s=i.properties,o=i.data,u=n-t.left-t.right,c=r-t.top-t.bottom,y=Math.min(u/2,c)/((100+N)/100),k=d3.select(this),L=x-S,A=d3.scale.linear().range([0,1]).domain([w,E]),O=0,M=o.map(function(e,t){var n={key:e.key,y0:O,y1:e.y,color:e.color,classes:e.classes};return O=e.y,n}),_=[0].concat(o.map(function(e){return e.y})),D=function(e){return e*y/100},P=k.selectAll("g.nv-wrap.nv-gauge").data([o]),H=P.enter().append("g").attr("class","nvd3 nv-wrap nv-gauge"),B=H.append("defs"),j=H.append("g"),F=P.select("g");C.gradient=function(t,n){return e.utils.colorRadialGradient(t,a+"-"+n,{x:0,y:0,r:y,s:m/100,u:"userSpaceOnUse"},h(t,n),P.select("defs"))},j.append("g").attr("class","nv-arc-group"),j.append("g").attr("class","nv-labels"),j.append("g").attr("class","nv-pointer"),j.append("g").attr("class","nv-odometer"),P.attr("transform","translate("+(t.left/2+t.right/2+D(N))+","+(t.top+D(N))+")");var I=d3.svg.arc().innerRadius(D(m)).outerRadius(y).startAngle(function(e,t){return $(J(e.y0))}).endAngle(function(e,t){return $(J(e.y1))}),q=F.select(".nv-arc-group").attr("transform",K);q.selectAll(".nv-arc-path").transition().duration(10).attr("fill",function(e,t){return p(e,t)}).attr("d",I),q.selectAll(".nv-arc-path").data(M).enter().append("path").attr("class",function(e,t){return this.getAttribute("class")||d(e,t)}).attr("fill",function(e,t){return p(e,t)}).attr("stroke","#ffffff").attr("stroke-width",3).attr("d",I).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),v.elementMouseover({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),v.elementMouseout({point:e,index:t,id:a})}).on("mousemove",function(e,t){v.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("click",function(e,t){v.elementClick({point:e,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}).on("dblclick",function(e,t){v.elementDblClick({point:e,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()});var R=F.select(".nv-labels").attr("transform",K);R.selectAll("text").transition().duration(0).attr("transform",function(e){return"rotate("+J(e)+") translate(0,"+(-y-D(1.5))+")"}).style("font-size",D(.6)+"em"),R.selectAll("text").data(_).enter().append("text").attr("transform",function(e){return"rotate("+J(e)+") translate(0,"+(-y-D(1.5))+")"}).text(f).style("text-anchor","middle").style("font-size",D(.6)+"em");var U=[[Math.round(D(g)/2),0],[0,-Math.round(D(b))],[-Math.round(D(g)/2),0],[0,Math.round(D(g))],[Math.round(D(g)/2),0]],z=F.select(".nv-pointer").attr("transform",K);z.selectAll("path").transition().duration(120).attr("d",d3.svg.line().interpolate("monotone"));var W=z.selectAll("path").data([U]).enter().append("path").attr("d",d3.svg.line().interpolate("monotone")).attr("transform","rotate("+S+")");V(s.value),F.selectAll(".nv-odom").remove(),F.select(".nv-odomText").transition().duration(0).style("font-size",D(.7)+"em"),F.select(".nv-odometer").append("text").attr("class","nv-odom nv-odomText").attr("x",0).attr("y",0).attr("text-anchor","middle").text(l(s.value)).style("stroke","none").style("fill","black").style("font-size",D(.7)+"em");var X=F.select(".nv-odomText").node().getBBox();F.select(".nv-odometer").insert("path",".nv-odomText").attr("class","nv-odom nv-odomBox").attr("d",e.utils.roundedRectangle(-X.width/2,-X.height+D(1.5),X.width+D(4),X.height+D(2),D(2))).attr("fill","#eeffff").attr("stroke","black").attr("stroke-width","2px").attr("opacity",.8),F.select(".nv-odometer").attr("transform","translate("+y+","+(t.top+D(70)+X.width)+")"),C.setGaugePointer=V}),C}var t={top:0,right:0,bottom:0,left:0},n=null,r=null,i=!0,s=function(e){return e.values},o=function(e){return e.key},u=function(e){return e.y},a=Math.floor(Math.random()*1e4),f=d3.format(",g"),l=d3.format(",.f"),c=!0,h=e.utils.defaultColor(),p=h,d=function(e,t){return"nv-group nv-series-"+t},v=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),m=50,g=5,y=5,b=90,w=0,E=10,S=-90,x=90,T=750,N=10;return C.dispatch=v,C.color=function(e){return arguments.length?(h=e,C):h},C.fill=function(e){return arguments.length?(p=e,C):p},C.classes=function(e){return arguments.length?(d=e,C):d},C.gradient=function(e){return arguments.length?(gradient=e,C):gradient},C.margin=function(e){return arguments.length?(t=e,C):t},C.width=function(e){return arguments.length?(n=e,C):n},C.height=function(e){return arguments.length?(r=e,C):r},C.values=function(e){return arguments.length?(s=e,C):s},C.x=function(e){return arguments.length?(o=e,C):o},C.y=function(e){return arguments.length?(u=d3.functor(e),C):u},C.showLabels=function(e){return arguments.length?(c=e,C):c},C.id=function(e){return arguments.length?(a=e,C):a},C.valueFormat=function(e){return arguments.length?(l=e,C):l},C.labelThreshold=function(e){return arguments.length?(labelThreshold=e,C):labelThreshold},C.ringWidth=function(e){return arguments.length?(m=e,C):m},C.pointerWidth=function(e){return arguments.length?(g=e,C):g},C.pointerTailLength=function(e){return arguments.length?(y=e,C):y},C.pointerHeadLength=function(e){return arguments.length?(b=e,C):b},C.minValue=function(e){return arguments.length?(w=e,C):w},C.maxValue=function(e){return arguments.length?(E=e,C):E},C.minAngle=function(e){return arguments.length?(S=e,C):S},C.maxAngle=function(e){return arguments.length?(x=e,C):x},C.transitionMs=function(e){return arguments.length?(T=e,C):T},C.labelFormat=function(e){return arguments.length?(f=e,C):f},C.labelInset=function(e){return arguments.length?(N=e,C):N},C.setPointer=function(e){return arguments.length?(C.setGaugePointer(e),C):C.setGaugePointer},C.isRendered=function(e){return svg!==undefined},C},e.models.gaugeChart=function(){function m(a){return a.each(function(a){var f=a.properties,l=a.data,g=d3.select(this),y=this,b=(n||parseInt(g.style("width"),10)||960)-t.left-t.right,w=(r||parseInt(g.style("height"),10)||400)-t.top-t.bottom,E=b,S=w,x={top:0,right:0,bottom:0,left:0};m.update=function(){g.transition().call(m)},m.container=this;if(!l||!l.length){var T=g.selectAll(".nv-noData").data([c]);return T.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),T.attr("x",t.left+b/2).attr("y",t.top+w/2).text(function(e){return e}),m}g.selectAll(".nv-noData").remove();var N=g.selectAll("g.nv-wrap.nv-gaugeChart").data([l]),C=N.enter().append("g").attr("class","nvd3 nv-wrap nv-gaugeChart").append("g"),k=N.select("g").attr("class","nv-chartWrap");C.append("g").attr("class","nv-titleWrap");var L=k.select(".nv-titleWrap");C.append("g").attr("class","nv-gaugeWrap");var A=k.select(".nv-gaugeWrap");C.append("g").attr("class","nv-legendWrap");var O=k.select(".nv-legendWrap");N.attr("transform","translate("+t.left+","+t.top+")"),i&&f.title&&(L.select(".nv-title").remove(),L.append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("dy",".71em").attr("text-anchor","start").text(f.title).attr("stroke","none").attr("fill","black"),x.top+=parseInt(k.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(k.select(".nv-title").style("margin-top"),10)+parseInt(k.select(".nv-title").style("margin-bottom"),10)),s&&(d.id("legend_"+m.id()).height(w-x.top),O.datum(l).call(d),d.arrange(b),O.attr("transform","translate(0,"+x.top+")")),x.top+=d.height()+4,S=w-x.top-x.bottom,p.width(E).height(S),A.datum(a).attr("transform","translate("+x.left+","+x.top+")").transition().call(p),h.on("tooltipShow",function(e){u&&v(e)}),h.on("tooltipHide",function(){u&&e.tooltip.cleanup()}),h.on("tooltipMove",function(t){o&&e.tooltip.position(o,t.pos)})}),m}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!0,o=null,u=!0,a=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},f,l,c="No Data Available.",h=d3.dispatch("tooltipShow","tooltipHide","tooltipMove"),p=e.models.gauge(),d=e.models.legend().align("center"),v=function(t,n){var r=t.pos[0],i=t.pos[1],s=1,u=p.valueFormat()(t.point.y1-t.point.y0),f=a(t.point.key,s,u,t,m);o=e.tooltip.show([r,i],f,null,null,n)};return p.dispatch.on("elementMouseover.tooltip",function(e){h.tooltipShow(e)}),p.dispatch.on("elementMouseout.tooltip",function(e){h.tooltipHide(e)}),p.dispatch.on("elementMousemove.tooltip",function(e){h.tooltipMove(e)}),m.dispatch=h,m.gauge=p,m.legend=d,d3.rebind(m,p,"id","x","y","color","fill","classes","gradient"),d3.rebind(m,p,"valueFormat","values","showLabels","setPointer","ringWidth","labelThreshold","maxValue","minValue","transitionMs"),m.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,n)},r=function(e,t){return"nv-group nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(t/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=t*(s.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var f=s.gradient?function(e,t){return p.gradient(e,t)}:n;return p.color(n),p.fill(f),p.classes(r),d.color(n),d.classes(r),m},m.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return m},m.width=function(e){return arguments.length?(n=e,m):n},m.height=function(e){return arguments.length?(r=e,m):r},m.showTitle=function(e){return arguments.length?(i=e,m):i},m.showLegend=function(e){return arguments.length?(s=e,m):s},m.tooltip=function(e){return arguments.length?(o=e,m):o},m.tooltips=function(e){return arguments.length?(u=e,m):u},m.tooltipContent=function(e){return arguments.length?(a=e,m):a},m.noData=function(e){return arguments.length?(c=e,m):c},m},e.models.line=function(){function b(h){return h.each(function(h){var w=r-n.left-n.right,E=i-n.top-n.bottom,S=d3.select(this);l=t.xScale(),c=t.yScale(),g=g||l,y=y||c;var T=S.selectAll("g.nv-wrap.nv-line").data([h]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),C=N.append("defs"),k=N.append("g"),L=T.select("g");b.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,b.id()+"-"+n,r,d(t,n),T.select("defs"))},k.append("g").attr("class","nv-groups"),k.append("g").attr("class","nv-scatterWrap"),T.attr("transform","translate("+n.left+","+n.top+")"),t.width(w).height(E);var A=T.select(".nv-scatterWrap");d3.transition(A).call(t),C.append("clipPath").attr("id","nv-edge-clip-"+t.id()).append("rect"),T.select("#nv-edge-clip-"+t.id()+" rect").attr("width",w).attr("height",E),L.attr("clip-path",f?"url(#nv-edge-clip-"+t.id()+")":""),A.attr("clip-path",f?"url(#nv-edge-clip-"+t.id()+")":"");var O=T.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});O.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(O.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),O.classed("hover",function(e){return e.hover}).attr("class",function(e,t){return this.getAttribute("class")||m(e,t)}).attr("fill",function(e,t){return this.getAttribute("fill")||v(e,t)}).attr("stroke",function(e,t){return this.getAttribute("stroke")||v(e,t)}),d3.transition(O).style("stroke-opacity",1).style("fill-opacity",.5);var M=O.selectAll("path.nv-area").data(function(e){return a(e)?[e]:[]});M.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y0(function(e,t){return y(o(e,t))}).y1(function(e,t){return y(c.domain()[0]<=0?c.domain()[1]>=0?0:c.domain()[1]:c.domain()[0])}).apply(this,[e.values])}),M.exit().remove(),d3.transition(O.exit().selectAll("path.nv-area")).attr("d",function(e){return d3.svg.area().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y0(function(e,t){return y(o(e,t))}).y1(function(e,t){return y(c.domain()[0]<=0?c.domain()[1]>=0?0:c.domain()[1]:c.domain()[0])}).apply(this,[e.values])}),d3.transition(M).attr("d",function(e){return d3.svg.area().interpolate(p).defined(u).x(function(e,t){return l(s(e,t))}).y0(function(e,t)
{return c(o(e,t))}).y1(function(e,t){return y(c.domain()[0]<=0?c.domain()[1]>=0?0:c.domain()[1]:c.domain()[0])}).apply(this,[e.values])});var _=O.selectAll("path.nv-line").data(function(e){return[e.values]});_.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y(function(e,t){return y(o(e,t))})),d3.transition(O.exit().selectAll("path.nv-line")).attr("d",d3.svg.line().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y(function(e,t){return y(o(e,t))})),d3.transition(_).attr("d",d3.svg.line().interpolate(p).defined(u).x(function(e,t){return l(s(e,t))}).y(function(e,t){return c(o(e,t))})),g=l.copy(),y=c.copy()}),b}var t=e.models.scatter(),n={top:0,right:0,bottom:0,left:0},r=960,i=500,s=function(e){return e.x},o=function(e){return e.y},u=function(e,t){return!isNaN(o(e,t))&&o(e,t)!==null},a=function(e){return e&&e.area||!1},f=!1,l,c,h=200,p="linear",d=e.utils.defaultColor(),v=d,m=function(e,t){return"nv-group nv-series-"+t};t.size(16).sizeDomain([16,256]);var g,y;return b.dispatch=t.dispatch,b.scatter=t,d3.rebind(b,t,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","useVoronoi","clipVoronoi","clipRadius","padData"),b.color=function(e){return arguments.length?(d=e,t.color(d),b):d},b.fill=function(e){return arguments.length?(v=e,t.fill(v),b):v},b.classes=function(e){return arguments.length?(m=e,t.classes(m),b):m},b.gradient=function(e){return arguments.length?(gradient=e,b):gradient},b.margin=function(e){return arguments.length?(n.top=typeof e.top!="undefined"?e.top:n.top,n.right=typeof e.right!="undefined"?e.right:n.right,n.bottom=typeof e.bottom!="undefined"?e.bottom:n.bottom,n.left=typeof e.left!="undefined"?e.left:n.left,b):n},b.width=function(e){return arguments.length?(r=e,b):r},b.height=function(e){return arguments.length?(i=e,b):i},b.x=function(e){return arguments.length?(s=e,t.x(e),b):s},b.y=function(e){return arguments.length?(o=e,t.y(e),b):o},b.delay=function(e){return arguments.length?(h=e,b):h},b.clipEdge=function(e){return arguments.length?(f=e,b):f},b.interpolate=function(e){return arguments.length?(p=e,b):p},b.defined=function(e){return arguments.length?(u=e,b):u},b.isArea=function(e){return arguments.length?(a=d3.functor(e),b):a},b},e.models.lineChart=function(){function E(f){return f.each(function(f){var S=f.properties,T=f.data,N=d3.select(this),C=this,k=(n||parseInt(N.style("width"),10)||960)-t.left-t.right,L=(r||parseInt(N.style("height"),10)||400)-t.top-t.bottom,A=k,O=L,M={top:0,right:0,bottom:0,left:0},_=0,D=0,P=0;E.update=function(){N.transition().duration(E.delay()).call(E)},E.container=this;if(!T||!T.length||!T.filter(function(e){return e.values.length}).length){var H=N.selectAll(".nv-noData").data([p]);return H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),H.attr("x",t.left+k/2).attr("y",t.top+L/2).text(function(e){return e}),E}N.selectAll(".nv-noData").remove(),h.disabled=T.map(function(e){return!!e.disabled}),h.interpolate=v.interpolate(),h.isArea=!v.isArea(),T=T.map(function(e,t){return e.series=t,e});var B=T.filter(function(e){return!e.disabled});B=B.length?B:[{values:[]}];var j=[{key:"Linear",disabled:v.interpolate()!=="linear"},{key:"Basis",disabled:v.interpolate()!=="basis"},{key:"Monotone",disabled:v.interpolate()!=="monotone"},{key:"Cardinal",disabled:v.interpolate()!=="cardinal"},{key:"Line",disabled:v.isArea()()===!0},{key:"Area",disabled:v.isArea()()===!1}];l=v.xScale(),c=v.yScale(),m.scale(l),g.scale(c);var F=N.selectAll("g.nv-wrap.nv-lineChart").data([T]),I=F.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),q=F.select("g").attr("class","nv-chartWrap");I.append("g").attr("class","nv-titleWrap");var R=q.select(".nv-titleWrap");I.append("g").attr("class","nv-x nv-axis");var U=q.select(".nv-x.nv-axis");I.append("g").attr("class","nv-y nv-axis");var z=q.select(".nv-y.nv-axis");I.append("g").attr("class","nv-linesWrap");var W=q.select(".nv-linesWrap");I.append("g").attr("class","nv-controlsWrap");var X=q.select(".nv-controlsWrap");I.append("g").attr("class","nv-legendWrap");var V=q.select(".nv-legendWrap");F.attr("transform","translate("+t.left+","+t.top+")"),i&&S.title&&(R.select(".nv-title").remove(),R.append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("dy",".71em").attr("text-anchor","start").text(S.title).attr("stroke","none").attr("fill","black"),M.top+=parseInt(q.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(q.select(".nv-title").style("margin-top"),10)+parseInt(q.select(".nv-title").style("margin-bottom"),10)),s&&(b.id("controls_"+E.id()).height(L-M.top),X.datum(j).call(b),_=b.calculateWidth()+b.margin().left),o&&(y.id("legend_"+E.id()).height(L-M.top),V.datum(T).call(y),D=y.calculateWidth()+y.margin().right),P=k/(_+D),s&&(b.arrange(Math.floor(P*_)),X.attr("transform","translate(0,"+M.top+")")),o&&(y.arrange(Math.floor(k-b.width()+y.margin().right)),V.attr("transform","translate("+(b.width()-b.margin().left)+","+M.top+")")),M.top+=Math.max(y.height(),b.height())+4,O=L-M.top-M.bottom,v.width(A).height(O).id(E.id()),W.datum(B).call(v),U.call(m),M[m.orient()]+=m.height(),O=L-M.top-M.bottom,z.call(g),M[g.orient()]+=g.width(),A=k-M.left-M.right,v.width(A).height(O),W.attr("transform","translate("+M.left+","+M.top+")").transition().duration(E.delay()).call(v),m.ticks(A/100).tickSize(-O,0),U.attr("transform","translate("+M.left+","+(m.orient()==="bottom"?O+M.top:M.top)+")").transition().call(m),g.ticks(O/36).tickSize(-A,0),z.attr("transform","translate("+(g.orient()==="left"?M.left:M.left+A)+","+M.top+")").transition().call(g),y.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,T.filter(function(e){return!e.disabled}).length||T.map(function(e){return e.disabled=!1,q.selectAll(".nv-series").classed("disabled",!1),e}),h.disabled=T.map(function(e){return!!e.disabled}),d.stateChange(h),N.transition().duration(E.delay()).call(E)}),b.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;j=j.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Basis":v.interpolate("basis");break;case"Linear":v.interpolate("linear");break;case"Monotone":v.interpolate("monotone");break;case"Cardinal":v.interpolate("cardinal");break;case"Line":v.isArea(!1);break;case"Area":v.isArea(!0)}h.interpolate=v.interpolate(),h.isArea=v.isArea(),d.stateChange(h),N.transition().duration(E.delay()).call(E)}),d.on("tooltipShow",function(e){a&&w(e,C.parentNode)}),d.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),d.on("tooltipMove",function(t){u&&e.tooltip.position(u,t.pos,"s")}),d.on("changeState",function(e){typeof e.disabled!="undefined"&&(T.forEach(function(t,n){t.disabled=e.disabled[n]}),h.disabled=e.disabled),typeof e.interpolate!="undefined"&&(v.interpolate(e.interpolate),h.interpolate=e.interpolate),typeof e.isArea!="undefined"&&(v.isArea(e.isArea),h.isArea=e.isArea),N.transition().duration(E.delay()).call(E)}),d.on("chartClick",function(e){b.enabled()&&b.dispatch.closeMenu(e),y.enabled()&&y.dispatch.closeMenu(e)})}),E}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!1,o=!0,u=null,a=!0,f=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},l,c,h={},p="No Data Available.",d=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),v=e.models.line().clipEdge(!0),m=e.models.axis().orient("bottom").tickPadding(7).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),g=e.models.axis().orient("left").tickPadding(4).tickFormat(d3.format(",.1f")),y=e.models.legend().align("right"),b=e.models.legend().align("left").strings({close:"close",type:"controls"}).color(["#444"]),w=function(t,n){var r=t.pos[0],i=t.pos[1],s=m.tickFormat()(v.x()(t.point,t.pointIndex)),o=g.tickFormat()(v.y()(t.point,t.pointIndex)),a=f(t.series.key,s,o,t,E);u=e.tooltip.show([r,i],a,null,null,n)};return v.dispatch.on("elementMouseover.tooltip",function(e){d.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){d.tooltipHide(e)}),v.dispatch.on("elementMousemove.tooltip",function(e){d.tooltipMove(e)}),E.dispatch=d,E.lines=v,E.legend=y,E.controls=b,E.xAxis=m,E.yAxis=g,d3.rebind(E,v,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(E,v,"defined","isArea","interpolate","size","clipVoronoi","interactive"),d3.rebind(E,m,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),E.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,t.series)},r=function(e,t){return"nv-group nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(e.series/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=e.series*(s.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n+" nv-stroke"+e.series)}}var f=s.gradient?function(e,t){var n={orientation:s.orientation||"horizontal",position:s.position||"base"};return v.gradient(e,e.series,n)}:n;return v.color(n),v.fill(f),v.classes(r),y.color(n),y.classes(r),E},E.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return E},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.showTitle=function(e){return arguments.length?(i=e,E):i},E.showControls=function(e){return arguments.length?(s=e,E):s},E.showLegend=function(e){return arguments.length?(o=e,E):o},E.tooltip=function(e){return arguments.length?(u=e,E):u},E.tooltips=function(e){return arguments.length?(a=e,E):a},E.tooltipContent=function(e){return arguments.length?(f=e,E):f},E.noData=function(e){return arguments.length?(p=e,E):p},E.state=function(e){return arguments.length?(h=e,E):h},E},e.models.lineWithFocusChart=function(){function C(e){return e.each(function(S){function R(e){var t=+(e=="e"),n=t?1:-1,r=M/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function U(){a.empty()||a.extent(w),I.data([a.empty()?g.domain():w]).each(function(e,t){var n=g(e[0])-v.range()[0],r=v.range()[1]-g(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",g(e[1])).attr("width",r<0?0:r)})}function z(){w=a.empty()?null:a.extent(),extent=a.empty()?g.domain():a.extent(),T.brush({extent:extent,brush:a}),U();var e=H.select(".nv-focus .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}).map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return t.x()(e,n)>=extent[0]&&t.x()(e,n)<=extent[1]})}}));d3.transition(e).call(t),d3.transition(H.select(".nv-focus .nv-x.nv-axis")).call(r),d3.transition(H.select(".nv-focus .nv-y.nv-axis")).call(i)}var k=d3.select(this),L=this,A=(h||parseInt(k.style("width"))||960)-f.left-f.right,O=(p||parseInt(k.style("height"))||400)-f.top-f.bottom-d,M=d-l.top-l.bottom;C.update=function(){C(e)},C.container=this;if(!S||!S.length||!S.filter(function(e){return e.values.length}).length){var _=k.selectAll(".nv-noData").data([x]);return _.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),_.attr("x",f.left+A/2).attr("y",f.top+O/2).text(function(e){return e}),C}k.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale(),g=n.xScale(),y=n.yScale();var D=k.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([S]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),H=D.select("g");P.append("g").attr("class","nv-legendWrap");var B=P.append("g").attr("class","nv-focus");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-linesWrap");var j=P.append("g").attr("class","nv-context");j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-linesWrap"),j.append("g").attr("class","nv-brushBackground"),j.append("g").attr("class","nv-x nv-brush"),b&&(u.width(A),H.select(".nv-legendWrap").datum(S).call(u),f.top!=u.height()&&(f.top=u.height(),O=(p||parseInt(k.style("height"))||400)-f.top-f.bottom-d),H.select(".nv-legendWrap").attr("transform","translate(0,"+ -f.top+")")),D.attr("transform","translate("+f.left+","+f.top+")"),t.width(A).height(O).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),n.defined(t.defined()).width(A).height(M).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),H.select(".nv-context").attr("transform","translate(0,"+(O+f.bottom+l.top)+")");var F=H.select(".nv-context .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}));d3.transition(F).call(n),r.scale(v).ticks(A/100).tickSize(-O,0),i.scale(m).ticks(O/36).tickSize(-A,0),H.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+O+")"),a.x(g).on("brush",z),w&&a.extent(w);var I=H.select(".nv-brushBackground").selectAll("g").data([w||a.extent()]),q=I.enter().append("g");q.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",M),q.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",M),gBrush=H.select(".nv-x.nv-brush").call(a),gBrush.selectAll("rect").attr("height",M),gBrush.selectAll(".resize").append("path").attr("d",R),z(),s.scale(g).ticks(A/100).tickSize(-M,0),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),d3.transition(H.select(".nv-context .nv-x.nv-axis")).call(s),o.scale(y).ticks(M/36).tickSize(-A,0),d3.transition(H.select(".nv-context .nv-y.nv-axis")).call(o),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),u.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,S.filter(function(e){return!e.disabled}).length||S.map(function(e){return e.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(C)}),T.on("tooltipShow",function(e){E&&N(e,L.parentNode)})}),C}var t=e.models.line(),n=e.models.line(),r=e.models.axis(),i=e.models.axis(),s=e.models.axis(),o=e.models.axis(),u=e.models.legend(),a=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},l={top:0,right:30,bottom:20,left:60},c=e.utils.defaultColor(),h=null,p=null,d=100,v,m,g,y,b=!0,w=null,E=!0,S=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},x="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","brush");t.clipEdge(!0),n.interactive(!1),r.orient("bottom").tickPadding(5),i.orient("left"),s.orient("bottom").tickPadding(5),o.orient("left");var N=function(n,s){var o=n.pos[0]+(s.offsetLeft||0),u=n.pos[1]+(s.offsetTop||0),a=r.tickFormat()(t.x()(n.point,n.pointIndex)),f=i.tickFormat()(t.y()(n.point,n.pointIndex)),l=S(n.series.key,a,f,n,C);e.tooltip.show([o,u],l,null,null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+f.left,e.pos[1]+f.top],T.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){T.tooltipHide(e)}),T.on("tooltipHide",function(){E&&e.tooltip.cleanup()}),C.dispatch=T,C.legend=u,C.lines=t,C.lines2=n,C.xAxis=r,C.yAxis=i,C.x2Axis=s,C.y2Axis=o,d3.rebind(C,t,"defined","isArea","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),C.x=function(e){return arguments.length?(t.x(e),n.x(e),C):t.x},C.y=function(e){return arguments.length?(t.y(e),n.y(e),C):t.y},C.margin=function(e){return arguments.length?(f.top=typeof e.top!="undefined"?e.top:f.top,f.right=typeof e.right!="undefined"?e.right:f.right,f.bottom=typeof e.bottom!="undefined"?e.bottom:f.bottom,f.left=typeof e.left!="undefined"?e.left:f.left,C):f},C.margin2=function(e){return arguments.length?(l=e,C):l},C.width=function(e){return arguments.length?(h=e,C):h},C.height=function(e){return arguments.length?(p=e,C):p},C.height2=function(e){return arguments.length?(d=e,C):d},C.color=function(t){return arguments.length?(c=e.utils.getColor(t),u.color(c),C):c},C.showLegend=function(e){return arguments.length?(b=e,C):b},C.tooltips=function(e){return arguments.length?(E=e,C):E},C.tooltipContent=function(e){return arguments.length?(S=e,C):S},C.interpolate=function(e){return arguments.length?(t.interpolate(e),n.interpolate(e),C):t.interpolate()},C.noData=function(e){return arguments.length?(x=e,C):x},C.xTickFormat=function(e){return arguments.length?(r.tickFormat(e),s.tickFormat(e),C):r.tickFormat()},C.yTickFormat=function(e){return arguments.length?(i.tickFormat(e),o.tickFormat(e),C):i.tickFormat()},C},e.models.multiBar=function(){function L(b){return b.each(function(b){var A=n-t.left-t.right,O=r-t.top-t.bottom,M=d3.select(this),_=g?"vertical":"horizontal",D=g?"width":"height",P=g?"height":"width",H=g?A:O,B=g?O:A,j=g?"x":"y",F=g?"y":"x",I=0;l&&(b=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(b)),b.map(function(e,t){e.values.map(function(e){e.series=t})}),l&&b[0].values.map(function(e,t){var n=0,r=0;b.map(function(e){var i=e.values[t];i.size=Math.abs(i.y),i.y<0?(i.y1=r-(g?0:i.size),r-=i.size):(i.y1=n+(g?i.size:0),n+=i.size)})});var q=w&&E?[]:b.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0,y1:e.y1}})}),R=y*.75*(l?1:b.length)+y*.25,U=Math.max(.25,(H-b[0].values.length*R+16)/(2*R));m?i.domain(w||d3.merge(q).map(function(e){return e.x})).rangeBands([0,H],.3):i.domain(w||d3.merge(q).map(function(e){return e.x})).rangeRoundBands([0,H],.25,U),s.domain(E||d3.extent(d3.merge(q).map(function(e){var t=g?0:e.y,n=g?e.y:0;return l?e.y>0?e.y1+t:e.y1+n:e.y}).concat(f))).range(g?[O,0]:[0,A]),C=C||i,k=k||s;var z=s.invert(s(0)+(g?-4:4));s.domain(s.domain().map(function(e,t){return e+=z*(e<0?-1:e>1?1:0)})),d&&!l&&(I=e.utils.maxStringSetLength(d3.merge(q).map(function(e){return e.y}),M,v),I+=6,g?s.range([B-(s.domain()[0]<0?I:0),s.domain()[1]>0?I:0]):s.range([s.domain()[0]<0?I:0,B-(s.domain()[1]>0?I:0)]));var W=M.selectAll("g.nv-wrap.nv-multibar"+(g?"":"Horizontal")).data([b]),X=W.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"+(g?"":"Horizontal")),V=X.append("defs"),$=X.append("g"),J=W.select("g");L.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,o+"-"+n,r,S(t,n),W.select("defs"))},$.append("g").attr("class","nv-groups"),W.attr("transform","translate("+t.left+","+t.top+")"),V.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),W.select("#nv-edge-clip-"+o+" rect").attr("width",A).attr("height",O),J.attr("clip-path",p?"url(#nv-edge-clip-"+o+")":"");var K=W.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});K.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),K.exit().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).selectAll("g.nv-bar").attr("y",function(e){return l?k(e.y0):k(0)}).attr(D,0).remove(),K.attr("class",function(e,t){return this.getAttribute("class")||T(e,t)}).classed("hover",function(e){return e.hover}).attr("fill",function(e,t){return this.getAttribute("fill")||x(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||x(e,t)}),K.style("stroke-opacity",1).style("fill-opacity",1);var Q=K.selectAll("g.nv-bar").data(function(e){return e.values});Q.exit().remove();var G=Q.enter().append("g").attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(e,t,n){var r={x:l?0:n*i.rangeBand()/b.length+i(u(e,t)),y:k(l?e.y0:0)};return"translate("+r[j]+","+r[F]+")"});G.append("rect").attr(D,0).attr(P,0),Q.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),N.elementMouseover({value:a(e,t),point:e,series:b[e.series],pos:[d3.event.pageX,d3.event.pageY],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),N.elementMouseout({value:a(e,t),point:e,series:b[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mousemove",function(e,t){N.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:o})}).on("click",function(e,t){N.elementClick({value:a(e,t),point:e,series:b[e.series],pos:[i(u(e,t))+i.rangeBand()*(l?b.length/2:e.series+.5)/b.length,s(a(e,t)+(l?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){N.elementDblClick({value:a(e,t),point:e,series:b[e.series],pos:[i(u(e,t))+i.rangeBand()*(l?b.length/2:e.series+.5)/b.length,s(a(e,t)+(l?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),G.append("text"),d&&!l?Q.select("text").attr("text-anchor",function(e,t){return a(e,t)<0?"end":"start"}).attr("x",function(e,t){return g?a(e,t)<0?s(0)-s(a(e,t))-4:4:a(e,t)<0?-4:s(a(e,t))-s(0)+4}).attr("y",i.rangeBand()/b.length/2).attr("dy",".45em").attr("transform","rotate("+(g?-90:0)+" 0,0)").text(function(e,t){return v(a(e,t))}):Q.selectAll("text").text(""),c&&(h||(h=b.map(function(){return!0})),Q.style("fill",function(e,t,n){return d3.rgb(c(e,t)).darker(h.map(function(e,t){return t}).filter(function(e,t){return!h[t]})[n]).toString()}).style("stroke",function(e,t,n){return d3.rgb(c(e,t)).darker(h.map(function(e,t){return t}).filter(function(e,t){return!h[t]})[n]).toString()})),l?Q.attr("transform",function(e,t){var n={x:Math.round(i(u(e,t))),y:Math.round(s(e.y1))};return"translate("+n[j]+","+n[F]+")"}).select("rect").attr(F,function(e,t){return g?a(e,t)<0?2:-2:a(e,t)<0?-2:2}).attr(P,function(e,t){return Math.max(Math.round(Math.abs(s(a(e,t)+e.y0)-s(e.y0))),0)}).attr(D,function(e,t){return i.rangeBand()}):Q.attr("transform",function(e,t){var n={x:Math.round(e.series*i.rangeBand()/b.length+i(u(e,t))),y:Math.round(a(e,t)<0?g?s(0):s(a(e,t)):g?s(a(e,t)):s(0))};return"translate("+n[j]+","+n[F]+")"}).select("rect").attr(F,function(e,t){return g?a(e,t)<0?2:-2:a(e,t)<0?-2:2}).attr(P,function(e,t){return Math.max(Math.round(Math.abs(s(a(e,t))-s(0))),0)||0}).attr(D,Math.round(i.rangeBand()/b.length)),C=i.copy(),k=s.copy()}),L}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=!1,c=null,h,p=!0,d=!1,v=d3.format(",.2f"),m=!1,g=!0,y=54,b=200,w,E,S=e.utils.defaultColor(),x=S,T=function(e,t){return"nv-group nv-series-"+t},N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),C,k;return L.dispatch=N,L.color=function(e){return arguments.length?(S=e,L):S},L.fill=function(e){return arguments.length?(x=e,L):x},L.classes=function(e){return arguments.length?(T=e,L):T},L.gradient=function(e){return arguments.length?(gradient=e,L):gradient},L.x=function(e){return arguments.length?(u=e,L):u},L.y=function(e){return arguments.length?(a=e,L):a},L.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return L},L.width=function(e){return arguments.length?(n=e,L):n},L.height=function(e){return arguments.length?(r=e,L):r},L.xScale=function(e){return arguments.length?(i=e,L):i},L.yScale=function(e){return arguments.length?(s=e,L):s},L.xDomain=function(e){return arguments.length?(w=e,L):w},L.yDomain=function(e){return arguments.length?(E=e,L):E},L.forceY=function(e){return arguments.length?(f=e,L):f},L.stacked=function(e){return arguments.length?(l=e,L):l},L.clipEdge=function(e){return arguments.length?(p=e,L):p},L.barColor=function(t){return arguments.length?(c=e.utils.getColor(t),L):c},L.disabled=function(e){return arguments.length?(h=e,L):h},L.id=function(e){return arguments.length?(o=e,L):o},L.delay=function(e){return arguments.length?(b=e,L):b},L.showValues=function(e){return arguments.length?(d=e,L):d},L.valueFormat=function(e){return arguments.length?(v=e,L):v},L.withLine=function(e){return arguments.length?(m=e,L):m},L.vertical=function(e){return arguments.length?(g=e,L):g},L.baseWidth=function(e){return arguments.length?(y=e,L):y},L},e.models.multiBarChart=function(){function E(f){return f.each(function(f){var S=f.properties,T=f.data,N=d3.select(this),C=this,k=(n||parseInt(N.style("width"),10)||960)-t.left-t.right,L=(r||parseInt(N.style("height"),10)||400)-t.top-t.bottom,A=k,O=L,M={top:0,right:0,bottom:0,left:0},_=0,D=0,P=0;E.update=function(){N.transition().call(E)},E.container=this;if(!T||!T.length||!T.filter(function(e){return e.values.length}).length){var H=N.selectAll(".nv-noData").data([p]);return H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),H.attr("x",t.left+k/2).attr("y",t.top+L/2).text(function(e){return e}),E}N.selectAll(".nv-noData").remove(),h.disabled=T.map(function(e){return!!e.disabled}),h.stacked=!v.stacked();var B=T.filter(function(e){return!e.disabled&&(!e.type||e.type==="bar")}),j=S.labels,F=S.values;B=B.length?B:[{values:[]}];var I=[{key:"Grouped",disabled:!h.stacked},{key:"Stacked",disabled:h.stacked}];l=v.xScale(),c=v.yScale(),m.scale(l),g.scale(c),j&&m.tickFormat(function(e,t){return j[t]?j[t].l:"undefined"});var q=N.selectAll("g.nv-wrap.nv-multiBarChart").data([T]),R=q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarChart").append("g"),U=q.select("g").attr("class","nv-chartWrap");R.append("g").attr("class","nv-titleWrap");var z=U.select(".nv-titleWrap");R.append("g").attr("class","nv-x nv-axis");var W=U.select(".nv-x.nv-axis");R.append("g").attr("class","nv-y nv-axis");var X=U.select(".nv-y.nv-axis");R.append("g").attr("class","nv-barsWrap");var V=U.select(".nv-barsWrap");R.append("g").attr("class","nv-controlsWrap");var $=U.select(".nv-controlsWrap");R.append("g").attr("class","nv-legendWrap");var J=U.select(".nv-legendWrap");q.attr("transform","translate("+t.left+","+t.top+")"),i&&S.title&&(z.select(".nv-title").remove(),z.append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("dy",".71em").attr("text-anchor","start").text(S.title).attr("stroke","none").attr("fill","black"),M.top+=parseInt(U.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(U.select(".nv-title").style("margin-top"),10)+parseInt(U.select(".nv-title").style("margin-bottom"),10)),s&&(b.id("controls_"+E.id()).height(L-M.top),$.datum(I).call(b),_=b.calculateWidth()+b.margin().left),o&&(v.barColor()&&T.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()}),y.id("legend_"+E.id()).height(L-M.top),J.datum(T).call(y),D=y.calculateWidth()+y.margin().right),P=k/(_+D),s&&(b.arrange(Math.floor(P*_)),$.attr("transform","translate(0,"+M.top+")")),o&&(y.arrange(Math.floor(k-b.width()+y.margin().right)),J.attr("transform","translate("+(b.width()-b.margin().left)+","+M.top+")")),M.top+=Math.max(y.height(),b.height())+4,O=L-M.top-M.bottom,v.disabled(T.map(function(e){return e.disabled})).width(A).height(O).id(E.id()),V.datum(B).call(v),W.call(m),M[m.orient()]+=m.height(),O=L-M.top-M.bottom,X.call(g),M[g.orient()]+=g.width(),A=k-M.left-M.right,v.width(A).height(O),V.attr("transform","translate("+M.left+","+M.top+")").transition().call(v),W.attr("transform","translate("+M.left+","+(m.orient()==="bottom"?O+M.top:M.top)+")").transition().call(m),g.ticks(O/36).tickSize(-A,0),X.attr("transform","translate("+(g.orient()==="left"?M.left:M.left+A)+","+M.top+")").transition().call(g),y.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,T.filter(function(e){return!e.disabled}).length||T.map(function(e){return e.disabled=!1,U.selectAll(".nv-series").classed("disabled",!1),e}),h.disabled=T.map(function(e){return!!e.disabled}),d.stateChange(h),N.transition().call(E)}),b.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;I=I.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":v.stacked(!1);break;case"Stacked":v.stacked(!0)}h.stacked=v.stacked(),d.stateChange(h),N.transition().call(E)}),d.on("tooltipShow",function(e){a&&w(e,C.parentNode,F)}),d.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),d.on("tooltipMove",function(t){u&&e.tooltip.position(u,t.pos,"s")}),d.on("changeState",function(e){typeof e.disabled!="undefined"&&(T.forEach(function(t,n){t.disabled=e.disabled[n]}),h.disabled=e.disabled),typeof e.stacked!="undefined"&&(v.stacked(e.stacked),h.stacked=e.stacked),N.transition().call(E)}),d.on("chartClick",function(e){b.enabled()&&b.dispatch.closeMenu(e),y.enabled()&&y.dispatch.closeMenu(e)})}),E}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!1,o=!0,u=null,a=!0,f=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},l,c,h={},p="No Data Available.",d=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),v=e.models.multiBar().vertical(!0).stacked(!1),m=e.models.axis().orient("bottom").tickSize(0).tickPadding(7).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),g=e.models.axis().orient("left").tickPadding(4).tickFormat(d3.format(",.1f")),y=e.models.legend().align("right"),b=e.models.legend().align("left").strings({close:"close",type:"controls"}).color(["#444"]),w=function(t,n,r){var i=t.pos[0],s=t.pos[1],o=r?(t.point.y*100/r[t.pointIndex].t).toFixed(1):m.tickFormat()(v.x()(t.point,t.pointIndex)),a=g.tickFormat()(v.y()(t.point,t.pointIndex)),l=f(t.series.key,o,a,t,E);u=e.tooltip.show([i,s],l,t.value<0?"n":"s",null,n)};return v.dispatch.on("elementMouseover.tooltip",function(e){d.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){d.tooltipHide(e)}),v.dispatch.on("elementMousemove.tooltip",function(e){d.tooltipMove(e)}),E.dispatch=d,E.multibar=v,E.legend=y,E.controls=b,E.xAxis=m,E.yAxis=g,d3.rebind(E,v,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(E,v,"stacked","showValues","valueFormat"),d3.rebind(E,m,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),E.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,n)},r=function(e,t){return"nv-group nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(t/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=t*(s.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var f=s.gradient?function(e,t){var n={orientation:s.orientation||"vertical",position:s.position||"middle"};return v.gradient(e,t,n)}:n;return v.color(n),v.fill(f),v.classes(r),y.color(n),y.classes(r),E},E.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return E},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.showTitle=function(e){return arguments.length?(i=e,E):i},E.showControls=function(e){return arguments.length?(s=e,E):s},E.showLegend=function(e){return arguments.length?(o=e,E):o},E.tooltip=function(e){return arguments.length?(u=e,E):u},E.tooltips=function(e){return arguments.length?(a=e,E):a},E.tooltipContent=function(e){return arguments.length?(f=e,E):f},E.noData=function(e){return arguments.length?(p=e,E):p},E.state=function(e){return arguments.length?(h=e,E):h},E},e.models.multiBarHorizontalChart=function(){function E(f){return f.each(function(f){var S=f.properties,T=f.data,N=d3.select(this),C=this,k=(n||parseInt(N.style("width"),10)||960)-t.left-t.right,L=(r||parseInt(N.style("height"),10)||400)-t.top-t.bottom,A=k,O=L,M={top:0,right:0,bottom:0,left:0},_=0,D=0,P=0;E.update=function(){N.transition().call(E)},E.container=this;if(!T||!T.length||!T.filter(function(e){return e.values.length}).length){var H=N.selectAll(".nv-noData").data([p]);return H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),H.attr("x",t.left+k/2).attr("y",t.top+L/2).text(function(e){return e}),E}N.selectAll(".nv-noData").remove(),h.disabled=T.map(function(e){return!!e.disabled}),h.stacked=!v.stacked();var B=T.filter(function(e){return!e.disabled&&(!e.type||e.type==="bar")}),j=S.labels,F=S.values;B=B.length?B:[{values:[]}];var I=[{key:"Grouped",disabled:!h.stacked},{key:"Stacked",disabled:h.stacked}];l=v.xScale(),c=v.yScale(),m.scale(l),g.scale(c),j&&m.tickFormat(function(e,t){return j[t]?j[t].l:"undefined"});var q=N.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([T]),R=q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),U=q.select("g").attr("class","nv-chartWrap");R.append("g").attr("class","nv-titleWrap");var z=U.select(".nv-titleWrap");R.append("g").attr("class","nv-x nv-axis");var W=U.select(".nv-x.nv-axis");R.append("g").attr("class","nv-y nv-axis"
);var X=U.select(".nv-y.nv-axis");R.append("g").attr("class","nv-barsWrap");var V=U.select(".nv-barsWrap");R.append("g").attr("class","nv-controlsWrap");var $=U.select(".nv-controlsWrap");R.append("g").attr("class","nv-legendWrap");var J=U.select(".nv-legendWrap");q.attr("transform","translate("+t.left+","+t.top+")"),i&&S.title&&(z.select(".nv-title").remove(),z.append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("dy",".71em").attr("text-anchor","start").text(S.title).attr("stroke","none").attr("fill","black"),M.top+=parseInt(U.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(U.select(".nv-title").style("margin-top"),10)+parseInt(U.select(".nv-title").style("margin-bottom"),10)),s&&(b.id("controls_"+E.id()).height(L-M.top),$.datum(I).call(b),_=b.calculateWidth()+b.margin().left),o&&(v.barColor()&&T.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()}),y.id("legend_"+E.id()).height(L-M.top),J.datum(T).call(y),D=y.calculateWidth()+y.margin().right),P=k/(_+D),s&&(b.arrange(Math.floor(P*_)),$.attr("transform","translate(0,"+M.top+")")),o&&(y.arrange(Math.floor(k-b.width()+y.margin().right)),J.attr("transform","translate("+(b.width()-b.margin().left)+","+M.top+")")),M.top+=Math.max(y.height(),b.height())+4,O=L-M.top-M.bottom,v.disabled(T.map(function(e){return e.disabled})).width(A).height(O).id(E.id()),V.datum(B).call(v),W.call(m),M[m.orient()]+=m.width(),A=k-M.left-M.right,X.call(g),M[g.orient()]+=g.height(),O=L-M.top-M.bottom,v.width(A).height(O),V.attr("transform","translate("+M.left+","+M.top+")").transition().call(v),W.attr("transform","translate("+(m.orient()==="left"?M.left:M.left+A)+","+M.top+")").transition().call(m),g.ticks(A/50).tickSize(-O,0),X.attr("transform","translate("+M.left+","+(g.orient()==="bottom"?O+M.top:M.top)+")").transition().call(g),y.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,T.filter(function(e){return!e.disabled}).length||T.map(function(e){return e.disabled=!1,U.selectAll(".nv-series").classed("disabled",!1),e}),h.disabled=T.map(function(e){return!!e.disabled}),d.stateChange(h),N.transition().call(E)}),b.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;I=I.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":v.stacked(!1);break;case"Stacked":v.stacked(!0)}h.stacked=v.stacked(),d.stateChange(h),N.transition().call(E)}),d.on("tooltipShow",function(e){a&&w(e,C.parentNode,F)}),d.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),d.on("tooltipMove",function(t){u&&e.tooltip.position(u,t.pos,"w")}),d.on("changeState",function(e){typeof e.disabled!="undefined"&&(T.forEach(function(t,n){t.disabled=e.disabled[n]}),h.disabled=e.disabled),typeof e.stacked!="undefined"&&(v.stacked(e.stacked),h.stacked=e.stacked),N.transition().call(E)}),d.on("chartClick",function(e){b.enabled()&&b.dispatch.closeMenu(e),y.enabled()&&y.dispatch.closeMenu(e)})}),E}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!1,o=!0,u=null,a=!0,f=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},l,c,h={},p="No Data Available.",d=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),v=e.models.multiBar().vertical(!1).stacked(!1),m=e.models.axis().orient("left").tickSize(0).tickPadding(7).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),g=e.models.axis().orient("bottom").tickPadding(4).tickFormat(d3.format(",.1f")),y=e.models.legend().align("right"),b=e.models.legend().align("left").strings({close:"close",type:"controls"}).color(["#444"]),w=function(t,n,r){var i=t.pos[0],s=t.pos[1],o=r?(t.point.y*100/r[t.pointIndex].t).toFixed(1):m.tickFormat()(v.x()(t.point,t.pointIndex)),a=g.tickFormat()(v.y()(t.point,t.pointIndex)),l=f(t.series.key,o,a,t,E);u=e.tooltip.show([i,s],l,t.value<0?"e":"w",null,n)};return v.dispatch.on("elementMouseover.tooltip",function(e){d.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){d.tooltipHide(e)}),v.dispatch.on("elementMousemove.tooltip",function(e){d.tooltipMove(e)}),E.dispatch=d,E.multibar=v,E.legend=y,E.controls=b,E.xAxis=m,E.yAxis=g,d3.rebind(E,v,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(E,v,"stacked","showValues","valueFormat"),d3.rebind(E,m,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),d3.rebind(E,y,"closeMenu"),E.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,n)},r=function(e,t){return"nv-group nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(t/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=t*(s.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var f=s.gradient?function(e,t){var n={orientation:s.orientation||"horizontal",position:s.position||"middle"};return v.gradient(e,t,n)}:n;return v.color(n),v.fill(f),v.classes(r),y.color(n),y.classes(r),E},E.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return E},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.showTitle=function(e){return arguments.length?(i=e,E):i},E.showControls=function(e){return arguments.length?(s=e,E):s},E.showLegend=function(e){return arguments.length?(o=e,E):o},E.tooltip=function(e){return arguments.length?(u=e,E):u},E.tooltips=function(e){return arguments.length?(a=e,E):a},E.tooltipContent=function(e){return arguments.length?(f=e,E):f},E.noData=function(e){return arguments.length?(p=e,E):p},E.state=function(e){return arguments.length?(h=e,E):h},E},e.models.paretoChart=function(){function O(l){return l.each(function(l){var c=l.properties,h=l.data,d=d3.select(this),A=this,M=(n||parseInt(d.style("width"),10)||960)-t.left-t.right,_=(r||parseInt(d.style("height"),10)||400)-t.top-t.bottom,D=M,P=_,H={top:0,right:0,bottom:0,left:0},B=0,j=0,F=0;O.update=function(){d.call(O)},O.container=this;if(!h||!h.length||!h.filter(function(e){return e.values.length}).length){var I=d.selectAll(".nv-noData").data([g]);return I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),I.attr("x",t.left+M/2).attr("y",t.top+_/2).text(function(e){return e}),O}d.selectAll(".nv-noData").remove();var q=h.filter(function(e){return!e.disabled&&(!e.type||e.type==="bar")}),R=h.filter(function(e){return!e.disabled&&e.type==="line"}).map(function(e){return b.stacked()?(e.values.map(function(e){e.y=0}),q.map(function(t,n){t.values.map(function(t,n){e.values[n].y+=t.y})}),e.values.map(function(t,n){n>0&&(t.y+=e.values[n-1].y)})):e.values=e.valuesOrig.map(function(e,t){return{series:e.series,x:e.x+e.series*.25-t*.25,y:e.y}}),e}),U=c.groupData,z=c.quota||0,W=c.quotaLabel||"",X=c.targetQuota||0,V=c.targetQuotaLabel||"";q=q.length?q:[{values:[]}],R=R.length?R:[{values:[]}];var $=[{key:W,type:"dash",color:"#444",values:{series:0,x:0,y:0}}];X>0&&$.push({key:V,type:"dash",color:"#777",values:{series:0,x:0,y:0}});var J=h.filter(function(e){return!e.disabled}).map(function(e){return e.valuesOrig.map(function(e,t){return i(e,t)})}),K=h.map(function(e){return e.valuesOrig.map(function(e,t){return s(e,t)})});v=b.xScale(),m=b.yScale(),S.scale(v),x.scale(m).tickFormat(p),U.length&&S.tickFormat(function(e,t){return U[t]?U[t].l:"asfd"});var Q=d.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([h]),G=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),Y=Q.select("g").attr("class","nv-chartWrap");G.append("g").attr("class","nv-titleWrap");var Z=Y.select(".nv-titleWrap");G.append("g").attr("class","nv-x nv-axis");var et=Y.select(".nv-x.nv-axis");G.append("g").attr("class","nv-y nv-axis");var tt=Y.select(".nv-y.nv-axis");G.append("g").attr("class","nv-barsWrap");var nt=Y.select(".nv-barsWrap");G.append("g").attr("class","nv-quotaWrap");var rt=Y.select(".nv-quotaWrap");G.append("g").attr("class","nv-linesWrap1");var it=Y.select(".nv-linesWrap1");G.append("g").attr("class","nv-linesWrap2");var st=Y.select(".nv-linesWrap2");G.append("g").attr("class","nv-legendWrap nv-barLegend");var ot=Y.select(".nv-legendWrap.nv-barLegend");G.append("g").attr("class","nv-legendWrap nv-lineLegend");var ut=Y.select(".nv-legendWrap.nv-lineLegend");Q.attr("transform","translate("+t.left+","+t.top+")"),o&&c.title&&(Z.select(".nv-title").remove(),Z.append("text").text(c.title).attr("class","nv-title").attr("x",0).attr("y",0).attr("dy",".71em").attr("text-anchor","start").attr("stroke","none").attr("fill","black"),H.top+=parseInt(Y.select(".nv-title").node().getBoundingClientRect().height/1.15,10)+parseInt(Y.select(".nv-title").style("margin-top"),10)+parseInt(Y.select(".nv-title").style("margin-bottom"),10)),u&&(T.id("barlegend_"+O.id()).height(_-H.top),ot.datum(h.filter(function(e){return e.type==="bar"})).call(T),B=T.calculateWidth()+T.margin().left,N.id("linelegend_"+O.id()).height(_-H.top),ut.datum(h.filter(function(e){return e.type==="line"}).concat($)).call(N),j=N.calculateWidth()+N.margin().right,F=M/(B+j),T.arrange(Math.floor(F*B)),ot.attr("transform","translate(0,"+H.top+")"),N.arrange(Math.floor(M-T.width()+N.margin().right)),ut.attr("transform","translate("+(T.width()-T.margin().left)+","+H.top+")")),H.top+=Math.max(T.height(),N.height())+4,P=_-H.top-H.bottom;var at=v.domain(d3.merge(J)).rangeBands([0,M-t.left-t.right],.3),ft=Math.max(d3.max(d3.merge(K)),z,X||0),lt=Math.round(ft*.1)*10,ct=at(1)+at.rangeBand()/(b.stacked()||R.length===1?2:4);b.width(D).height(P).forceY([0,lt]).id(O.id()),nt.datum(q).call(b),w.margin({top:0,right:ct,bottom:0,left:ct}).width(D).height(P).forceY([0,lt]).id("outline_"+O.id()),E.margin({top:0,right:ct,bottom:0,left:ct}).width(D).height(P).forceY([0,lt]).size(function(){return Math.pow(6,2)*Math.PI}).id("foreground_"+O.id()),it.datum(R).call(w),st.datum(R).call(E),et.call(S),tt.style("opacity",q.length?1:0).call(x),D=M-H.left-H.right-x.width(),P=_-H.top-H.bottom-S.height(),b.width(D).height(P),nt.call(b),et.call(S),tt.call(x),H[x.orient()]+=x.width(),D=M-H.left-H.right,H[S.orient()]+=S.height(),P=_-H.top-H.bottom,rt.selectAll("line").remove(),tt.selectAll("text.nv-quotaValue").remove(),tt.selectAll("text.nv-targetQuotaValue").remove();var ht=14;z>0&&(rt.append("line").attr("class","nv-quotaLine").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+m(z)+")").style("stroke-dasharray","8, 8"),rt.append("line").datum({key:W,val:z}).attr("class","nv-quotaLine nv-quotaLineBackground").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+m(z)+")"),tt.append("text").text(O.quotaTickFormat()(z)).attr("class","nv-quotaValue").attr("dy",".36em").attr("dx","0").attr("text-anchor","end").attr("transform","translate("+ -x.tickPadding()+","+m(z)+")"),ht=Math.round(parseInt(Y.select("text.nv-quotaValue").node().getBoundingClientRect().height,10)/1.15),tt.selectAll("g.tick").each(function(e,t){m(e)<=m(z)+ht&&m(e)>=m(z)-ht&&(d3.select(this).select("line").style("opacity",0),d3.select(this).select("text").style("opacity",0))}),x.showMaxMin&&tt.selectAll("g.nv-axisMaxMin").each(function(e,t){Math.abs(m(e)-m(z))<=ht&&d3.select(this).select("text").style("opacity",0)})),X>0&&(rt.append("line").attr("class","nv-quotaLineTarget").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+m(X)+")").style("stroke-dasharray","8, 8"),rt.append("line").datum({key:V,val:X}).attr("class","nv-quotaLineTarget nv-quotaLineBackground").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+m(X)+")"),tt.append("text").text(O.quotaTickFormat()(X)).attr("class","nv-targetQuotaValue").attr("dy",".36em").attr("dx","0").attr("text-anchor","end").attr("transform","translate("+ -x.tickPadding()+","+m(X)+")"),ht=Math.round(parseInt(Y.select("text.nv-targetQuotaValue").node().getBoundingClientRect().height,10)/1.15),tt.selectAll("g.tick").each(function(e,t){m(e)<=m(X)+ht&&m(e)>=m(X)-ht&&(d3.select(this).select("text").style("opacity",0),d3.select(this).select("line").style("opacity",0))}),x.showMaxMin&&tt.selectAll("g.nv-axisMaxMin").each(function(e,t){Math.abs(m(e)-m(X))<=ht&&d3.select(this).select("text").style("opacity",0)})),rt.selectAll("line.nv-quotaLineBackground").on("mouseover",function(e){var t={pos:[d3.event.pageX,d3.event.pageY],val:e.val,key:e.key};k(t,A.parentNode)}).on("mouseout",function(){y.tooltipHide()}).on("mousemove",function(){y.tooltipMove({pos:[d3.event.pageX,d3.event.pageY]})}),b.width(D).height(P),nt.attr("transform","translate("+H.left+","+H.top+")").call(b),w.width(D).height(P),E.width(D).height(P),it.attr("transform","translate("+H.left+","+H.top+")").call(w),st.attr("transform","translate("+H.left+","+H.top+")").call(E),rt.attr("transform","translate("+H.left+","+H.top+")"),et.attr("transform","translate("+H.left+","+(S.orient()==="bottom"?P+H.top:H.top)+")").call(S),x.ticks(P/100).tickSize(-D,0),tt.attr("transform","translate("+(x.orient()==="left"?H.left:H.left+D)+","+H.top+")").call(x),T.dispatch.on("legendClick",function(e,t){var n=e.series;e.disabled=!e.disabled,O.stacked()||h.filter(function(e){return e.series===n&&e.type==="line"}).map(function(e){return e.disabled=!e.disabled,e}),h.filter(function(e){return!e.disabled&&e.type==="bar"}).length||h.map(function(e){return e.disabled=!1,Y.selectAll(".nv-series").classed("disabled",!1),e}),d.call(O)}),y.on("tooltipShow",function(e){f&&C(e,A.parentNode,U)}),y.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),y.on("tooltipMove",function(t){a&&e.tooltip.position(a,t.pos,"s")}),y.on("chartClick",function(e){T.enabled()&&T.dispatch.closeMenu(e),N.enabled()&&N.dispatch.closeMenu(e)}),b.dispatch.on("elementClick",function(e){L(h,e,d)})}),O}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=function(e){return e.x},s=function(e){return e.y},o=!1,u=!0,a=null,f=!0,l=function(e,t,n,r,i){return"<p><b>"+e+"</b></p>"+"<p><b>"+n+"</b></p>"+"<p><b>"+t+"%</b></p>"},c=function(e,t,n,r,i){return"<p><p>"+e+": <b>"+n+"</b></p>"},h=function(e,t,n,r,i){return"<p>"+r.key+": <b>"+n+"</b></p>"},p=function(e){return d3.format(",.2s")(e)},d=function(e){return d3.format(",.3s")(e)},v,m,g="No Data Available.",y=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove"),b=e.models.multiBar().stacked(!0).clipEdge(!1).withLine(!0),w=e.models.line().useVoronoi(!1),E=e.models.line().useVoronoi(!0),S=e.models.axis().orient("bottom").tickSize(0).tickPadding(7).wrapTicks(!0).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),x=e.models.axis().orient("left").tickPadding(7).showMaxMin(!1),T=e.models.legend().align("left").position("middle").strings({close:"close",type:"bar legend"}),N=e.models.legend().align("right").position("middle").strings({close:"close",type:"line legend"}),C=function(t,n,r){var i=t.pos[0],s=t.pos[1],o=(t.point.y*100/r[t.pointIndex].t).toFixed(1),u=x.tickFormat()(E.y()(t.point,t.pointIndex)),f=t.series.type==="bar"?l(t.series.key,o,u,t,O):c(t.series.key,o,u,t,O);a=e.tooltip.show([i,s],f,"s",null,n)},k=function(t,n){var r=t.pos[0],i=t.pos[1],s=d3.format(",.2s")(t.val),o=h(t.key,0,s,t,O);a=e.tooltip.show([r,i],o,"s",null,n)},L=function(e,t,n){var r=t.series,i=t.seriesIndex;r.disabled=!r.disabled,O.stacked()||e.filter(function(e){return e.series===i&&e.type==="line"}).map(function(e){return e.disabled=!e.disabled,e}),e.filter(function(e){return!e.disabled&&e.type==="bar"}).length||e.map(function(e){return e.disabled=!1,n.selectAll(".nv-series").classed("disabled",!1),e}),n.call(O)},A=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,s=n.left+r,o=n.top+i;return{x:s,y:o}};return E.dispatch.on("elementMouseover.tooltip",function(e){y.tooltipShow(e)}),E.dispatch.on("elementMouseout.tooltip",function(e){y.tooltipHide(e)}),E.dispatch.on("elementMousemove",function(e){y.tooltipMove(e)}),b.dispatch.on("elementMouseover.tooltip",function(e){y.tooltipShow(e)}),b.dispatch.on("elementMouseout.tooltip",function(e){y.tooltipHide(e)}),b.dispatch.on("elementMousemove",function(e){y.tooltipMove(e)}),O.dispatch=y,O.lines1=w,O.lines2=E,O.multibar=b,O.barLegend=T,O.lineLegend=N,O.xAxis=S,O.yAxis=x,d3.rebind(O,b,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","color","fill","classes","gradient"),d3.rebind(O,b,"stacked","showValues","valueFormat"),d3.rebind(O,S,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),O.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,n)},r=function(e,t){return"nv-group nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(t/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=t*(s.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var f=s.gradient?function(e,t){var n={orientation:s.orientation||"vertical",position:s.position||"middle"};return b.gradient(e,t,n)}:n;return b.color(n),b.fill(f),b.classes(r),w.color(function(e,t){return"#FFF"}),w.fill(function(e,t){return"#FFF"}),E.color(function(e,t){return d3.interpolateHsl(d3.rgb("#1A8221"),d3.rgb("#62B464"))(t/1)}),E.fill(function(e,t){return d3.interpolateHsl(d3.rgb("#1A8221"),d3.rgb("#62B464"))(t/1)}),E.classes(r),T.color(n),T.classes(r),N.color(function(e,t){return e.color||d3.interpolateHsl(d3.rgb("#1A8221"),d3.rgb("#62B464"))(t/1)}),N.classes(r),O},O.x=function(e){return arguments.length?(i=e,lines.x(e),b.x(e),O):i},O.y=function(e){return arguments.length?(s=e,lines.y(e),b.y(e),O):s},O.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return O},O.width=function(e){return arguments.length?(n=e,O):n},O.height=function(e){return arguments.length?(r=e,O):r},O.showTitle=function(e){return arguments.length?(o=e,O):o},O.showLegend=function(e){return arguments.length?(u=e,O):u},O.showControls=function(e){return arguments.length?O:!1},O.tooltipBar=function(e){return arguments.length?(l=e,O):l},O.tooltipLine=function(e){return arguments.length?(c=e,O):c},O.tooltipQuota=function(e){return arguments.length?(h=e,O):h},O.tooltip=function(e){return arguments.length?(a=e,O):a},O.tooltips=function(e){return arguments.length?(f=e,O):f},O.tooltipContent=function(e){return arguments.length?(tooltipContent=e,O):tooltipContent},O.noData=function(e){return arguments.length?(g=e,O):g},O.barClick=function(e){return arguments.length?(L=e,O):L},O.colorFill=function(e){return O},O.yAxisTickFormat=function(e){return arguments.length?(p=e,O):p},O.quotaTickFormat=function(e){return arguments.length?(d=e,O):d},O},e.models.pie=function(){function x(i){return i.each(function(i){function F(e){var t=(e.startAngle+e.endAngle)*90/Math.PI-90;return t>90?t-180:t}function I(e){d||(e.innerRadius=0);var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){return _(t(e))}}function q(e){e.innerRadius=0;var t=d3.interpolate({startAngle:0,endAngle:0},e);return function(e){return _(t(e))}}var u=n-t.left-t.right,f=r-t.top-t.bottom,T=Math.min(u,f)/2,N=T-T/5,C=d3.select(this),k=C.selectAll(".nv-wrap.nv-pie").data([i]),L=k.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a),A=L.append("defs"),O=L.append("g"),M=k.select("g");x.gradient=function(t,n){return e.utils.colorRadialGradient(t,a+"-"+n,{x:0,y:0,r:T,s:d?"50%":"0%",u:"userSpaceOnUse"},b(t,n),k.select("defs"))},O.append("g").attr("class","nv-pie"),k.attr("transform","translate("+t.left+","+t.top+")"),M.select(".nv-pie").attr("transform","translate("+u/2+","+f/2+")"),C.on("click",function(e,t){S.chartClick({data:e,index:t,pos:d3.event,id:a})});var _=d3.svg.arc().outerRadius(N);m&&_.startAngle(m),g&&_.endAngle(g),d&&_.innerRadius(T*y);var D=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:o(e)}),P=k.select(".nv-pie").selectAll(".nv-slice").data(D);P.exit().remove();var H=P.enter().append("g").attr("class",function(e,t){return this.getAttribute("class")||E(e.data,t)}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),S.elementMouseover({label:s(e.data),value:o(e.data),point:e.data,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),S.elementMouseout({label:s(e.data),value:o(e.data),point:e.data,index:t,id:a})}).on("mousemove",function(e,t){S.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("click",function(e,t){S.elementClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}).on("dblclick",function(e,t){S.elementDblClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()});P.attr("fill",function(e,t){return w(e.data,t)}).attr("stroke",function(e,t){return w(e.data,t)});var B=H.append("path").each(function(e){this._current=e});d3.transition(P.select("path")).attr("d",_).attrTween("d",I);if(l){var j=d3.svg.arc().innerRadius(0);c&&(j=_),h&&(j=d3.svg.arc().outerRadius(_.outerRadius())),H.append("g").classed("nv-label",!0).each(function(e,t){var n=d3.select(this);n.attr("transform",function(e){if(v){e.outerRadius=N+10,e.innerRadius=N+15;var t=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?t-=90:t+=90,"translate("+j.centroid(e)+") rotate("+t+")"}return e.outerRadius=T+10,e.innerRadius=T+15,"translate("+j.centroid(e)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",v?(e.startAngle+e.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")}),P.select(".nv-label").transition().attr("transform",function(e){if(v){e.outerRadius=N+10,e.innerRadius=N+15;var t=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?t-=90:t+=90,"translate("+j.centroid(e)+") rotate("+t+")"}return e.outerRadius=T+10,e.innerRadius=T+15,"translate("+j.centroid(e)+")"}),P.each(function(e,t){var n=d3.select(this);n.select(".nv-label text").style("text-anchor",v?(e.startAngle+e.endAngle)/2<Math.PI?"start":"end":"middle").text(function(e,t){var n=(e.endAngle-e.startAngle)/(2*Math.PI);return e.value&&n>p?s(e.data):""});var r=n.select("text").node().getBBox();n.select(".nv-label rect").attr("width",r.width+10).attr("height",r.height+10).attr("transform",function(){return"translate("+[r.x-5,r.y-5]+")"})})}}),x}var t={top:0,right:0,bottom:0,left:0},n=500,r=500,i=function(e){return e},s=function(e){return e.key},o=function(e){return e.value},u=function(e){return e.description},a=Math.floor(Math.random()*1e4),f=d3.format(",.2f"),l=!0,c=!0,h=!1,p=.02,d=!1,v=!1,m=!1,g=!1,y=.5,b=e.utils.defaultColor(),w=b,E=function(e,t){return"nv-slice nv-series-"+t},S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return x.dispatch=S,x.color=function(e){return arguments.length?(b=e,x):b},x.fill=function(e){return arguments.length?(w=e,x):w},x.classes=function(e){return arguments.length?(E=e,x):E},x.gradient=function(e){return arguments.length?(gradient=e,x):gradient},x.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,x):t},x.width=function(e){return arguments.length?(n=e,x):n},x.height=function(e){return arguments.length?(r=e,x):r},x.values=function(e){return arguments.length?(i=e,x):i},x.x=function(e){return arguments.length?(s=e,x):s},x.y=function(e){return arguments.length?(o=d3.functor(e),x):o},x.description=function(e){return arguments.length?(u=e,x):u},x.showLabels=function(e){return arguments.length?(l=e,x):l},x.labelSunbeamLayout=function(e){return arguments.length?(v=e,x):v},x.donutLabelsOutside=function(e){return arguments.length?(h=e,x):h},x.pieLabelsOutside=function(e){return arguments.length?(c=e,x):c},x.donut=function(e){return arguments.length?(d=e,x):d},x.donutRatio=function(e){return arguments.length?(y=e,x):y},x.startAngle=function(e){return arguments.length?(m=e,x):m},x.endAngle=function(e){return arguments.length?(g=e,x):g},x.id=function(e){return arguments.length?(a=e,x):a},x.valueFormat=function(e){return arguments.length?(f=e,x):f},x.labelThreshold=function(e){return arguments.length?(p=e,x):p},x},e.models.pieChart=function(){function m(f){return f.each(function(f){var g=f.properties,y=f.data,b=d3.select(this),w=this,E=(n||parseInt(b.style("width"),10)||960)-t.left-t.right,S=(r||parseInt(b.style("height"),10)||400)-t.top-t.bottom,x=d3.sum(y.map(function(e){return e.value})),T=E,N=S,C={top:0,right:0,bottom:0,left:0};m.update=function(){b.transition().call(m)},m.container=this;if(!y||!y.length){var k=b.selectAll(".nv-noData").data([c]);return k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",t.left+E/2).attr("y",t.top+S/2).text(function(e){return e}),m}b.selectAll(".nv-noData").remove(),l.disabled=y.map(function(e){return!!e.disabled});var L=b.selectAll("g.nv-wrap.nv-pieChart").data([y]),A=L.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),O=L.select("g").attr("class","nv-chartWrap");A.append("g").attr("class","nv-titleWrap");var M=O.select(".nv-titleWrap");A.append("g").attr("class","nv-pieWrap");var _=O.select(".nv-pieWrap");A.append("g").attr("class","nv-holeWrap");var D=O.select(".nv-holeWrap");A.append("g").attr("class","nv-legendWrap");var P=O.select(".nv-legendWrap");L.attr("transform","translate("+t.left+","+t.top+")"),i&&g.title&&(M.select(".nv-title").remove(),M.append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("dy",".71em").attr("text-anchor","start").text(g.title).attr("stroke","none").attr("fill","black"),C.top+=parseInt(O.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(O.select(".nv-title").style("margin-top"),10)+parseInt(O.select(".nv-title").style("margin-bottom"),10)),s&&(d.id("legend_"+m.id()).height(S-C.top),P.datum(y).call(d),d.arrange(E),P.attr("transform","translate(0,"+C.top+")")),C.top+=d.height()+4,N=S-C.top-C.bottom,p.width(T).height(N),_.datum(y.filter(function(e){return!e.disabled})).attr("transform","translate("+C.left+","+C.top+")").transition().call(p),o&&(D.select("text").remove(),D.append("text").text(o).attr("text-anchor","middle").attr("dy","1em").attr("class","nv-pie-hole").attr("transform","translate("+E/2+","+S/2+")").attr("fill","#333")),d.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,p.values()(y).filter(function(e){return!e.disabled}).length||p.values()(y).map(function(e){return e.disabled=!1,L.selectAll(".nv-series").classed("disabled",!1),e}),l.disabled=y.map(function(e){return!!e.disabled}),h.stateChange(l),b.transition().call(m)}),h.on("tooltipShow",function(e){a&&v(e,w.parentNode,x)}),h.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),h.on("tooltipMove",function(t){u&&e.tooltip.position(u,t.pos)}),h.on("changeState",function(e){typeof e.disabled!="undefined"&&(y.forEach(function(t,n){t.disabled=e.disabled[n]}),l.disabled=e.disabled),b.transition().call(m)}),h.on("chartClick",function(e){d.enabled()&&d.dispatch.closeMenu(e)})}),m}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!0,o=!1,u=null,a=!0,f=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},l={},c="No Data Available.",h=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),p=e.models.pie(),d=e.models.legend().align("center"),v=function(t,n,r){var i=t.pos[0],s=t.pos[1],o=(p.y()(t.point)*100/r).toFixed(1),a=p.valueFormat()(p.y()(t.point)),l=f(t.point.key,o,a,t,m);u=e.tooltip.show([i,s],l,null,null,n)};return p.dispatch.on("elementMouseover.tooltip",function(e){h.tooltipShow(e)}),p.dispatch.on("elementMouseout.tooltip",function(e){h.tooltipHide(e)}),p.dispatch.on("elementMousemove.tooltip",function(e){h.tooltipMove(e)}),m.dispatch=h,m.pie=p,m.legend=d,d3.rebind(m,p,"id","x","y","color","fill","classes","gradient"),d3.rebind(m,p,"valueFormat","values","description","showLabels","donutLabelsOutside","pieLabelsOutside","donut","donutRatio","labelThreshold"),m.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,n)},r=function(e,t){return"nv-slice nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(t/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=t*(s.step||1)%20;return"nv-slice nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var f=s.gradient?function(e,t){return p.gradient(e,t)}:n;return p.color(n),p.fill(f),p.classes(r),d.color(n),d.classes(r),m},m.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return m},m.width=function(e){return arguments.length?(n=e,m):n},m.height=function(e){return arguments.length?(r=e,m):r},m.showTitle=function(e){return arguments.length?(i=e,m):i},m.showLegend=function(e){return arguments.length?(s=e,m):s},m.tooltip=function(e){return arguments.length?(u=e,m):u},m.tooltips=function(e){return arguments.length?(a=e,m):a},m.tooltipContent=function(e){return arguments.length?(f=e,m):f},m.noData=function(e){return arguments.length?(c=e,m):c},m.state=function(e){return arguments.length?(l=e,m):l},m.hole=function(e){return arguments.length?(o=e,m):o},m.colorFill=function(e){return m},m},e.models.sparkline=function(){function h(e){return e.each(function(e){var i=n-t.left-t.right,h=r-t.top-t.bottom,p=d3.select(this);s.domain(l||d3.extent(e,u)).range([0,i]),o.domain(c||d3.extent(e,a)).range([h,0]);var d=p.selectAll("g.nv-wrap.nv-sparkline").data([e]),v=d.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),m=v.append("g"),g=d.select("g");d.attr("transform","translate("+t.left+","+t.top+")");var b=d.selectAll("path").data(function(e){return[e]});b.enter().append("path"),b.exit().remove(),b.style("stroke",function(e,t){return e.color||f(e,t)}).attr("d",d3.svg.line().x(function(e,t){return s(u(e,t))}).y(function(e,t){return o(a(e,t))}));var w=d.selectAll("circle.nv-point").data(function(e){function n(t){if(t!=-1){var n=e[t];return n.pointIndex=t,n}return null}var t=e.map(function(e,t){return a(e,t)}),r=n(t.lastIndexOf(o.domain()[1])),i=n(t.indexOf(o.domain()[0])),s=n(t.length-1);return[i,r,s].filter(function(e){return e!=null})});w.enter().append("circle"),w.exit().remove(),w.attr("cx",function(e,t){return s(u(e,e.pointIndex))}).attr("cy",function(e,t){return o(a(e,e.pointIndex))}).attr("r",2).attr("class",function(e,t){return u(e,e.pointIndex)==s.domain()[1]?"nv-point nv-currentValue":a(e,e.pointIndex)==o.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),h}var t={top:2,right:0,bottom:2,left:0},n=400,r=32,i=!0,s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=e.utils.getColor(["#000"]),l,c;return h.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,h):t},h.width=function(e){return arguments.length?(n=e,h):n},h.height=function(e){return arguments.length?(r=e,h):r},h.x=function(e){return arguments.length?(u=d3.functor(e),h):u},h.y=function(e){return arguments.length?(a=d3.functor(e),h):a},h.xScale=function(e){return arguments.length?(s=e,h):s},h.yScale=function(e){return arguments.length?(o=e,h):o},h.xDomain=function(e){return arguments.length?(l=e,h):l},h.yDomain=function(e){return arguments.length?(c=e,h):c},h.animate=function(e){return arguments.length?(i=e,h):i},h.color=function(t){return arguments.length?(f=e.utils.getColor(t),h):f},h},e.models.sparklinePlus=function(){function v(e){return e.each(function(c){function O(){if(a)return;var e=C.selectAll(".nv-hoverValue").data(u),r=e.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);e.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),e.attr("transform",function(e){return"translate("+s(t.x()(c[e],e))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!u.length)return;r.append("line").attr("x1",0).attr("y1",-n.top).attr("x2",0).attr("y2",b),r.append("text").attr("class","nv-xValue").attr("x",-6).attr("y"
,-n.top).attr("text-anchor","end").attr("dy",".9em"),C.select(".nv-hoverValue .nv-xValue").text(f(t.x()(c[u[0]],u[0]))),r.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-n.top).attr("text-anchor","start").attr("dy",".9em"),C.select(".nv-hoverValue .nv-yValue").text(l(t.y()(c[u[0]],u[0])))}function M(){function r(e,n){var r=Math.abs(t.x()(e[0],0)-n),i=0;for(var s=0;s<e.length;s++)Math.abs(t.x()(e[s],s)-n)<r&&(r=Math.abs(t.x()(e[s],s)-n),i=s);return i}if(a)return;var e=d3.mouse(this)[0]-n.left;u=[r(c,Math.round(s.invert(e)))],O()}var m=d3.select(this),g=(r||parseInt(m.style("width"))||960)-n.left-n.right,b=(i||parseInt(m.style("height"))||400)-n.top-n.bottom,w=t.y()(c[c.length-1],c.length-1);v.update=function(){v(e)},v.container=this;if(!c||!c.length){var E=m.selectAll(".nv-noData").data([d]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",n.left+g/2).attr("y",n.top+b/2).text(function(e){return e}),v}m.selectAll(".nv-noData").remove(),s=t.xScale(),o=t.yScale();var S=m.selectAll("g.nv-wrap.nv-sparklineplus").data([c]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),N=T.append("g"),C=S.select("g");N.append("g").attr("class","nv-sparklineWrap"),N.append("g").attr("class","nv-valueWrap"),N.append("g").attr("class","nv-hoverArea"),S.attr("transform","translate("+n.left+","+n.top+")");var k=C.select(".nv-sparklineWrap");t.width(g).height(b),k.call(t);var L=C.select(".nv-valueWrap"),A=L.selectAll(".nv-currentValue").data([w]);A.enter().append("text").attr("class","nv-currentValue").attr("dx",p?-8:8).attr("dy",".9em").style("text-anchor",p?"end":"start"),A.attr("x",g+(p?n.right:0)).attr("y",h?function(e){return o(e)}:0).style("fill",t.color()(c[c.length-1],c.length-1)).text(l(w)),N.select(".nv-hoverArea").append("rect").on("mousemove",M).on("click",function(){a=!a}).on("mouseout",function(){u=[],O()}),C.select(".nv-hoverArea rect").attr("transform",function(e){return"translate("+ -n.left+","+ -n.top+")"}).attr("width",g+n.left+n.right).attr("height",b+n.top)}),v}var t=e.models.sparkline(),n={top:15,right:100,bottom:10,left:50},r=null,i=null,s,o,u=[],a=!1,f=d3.format(",r"),l=d3.format(",.2f"),c=!0,h=!0,p=!1,d="No Data Available.";return v.sparkline=t,d3.rebind(v,t,"x","y","xScale","yScale","color"),v.margin=function(e){return arguments.length?(n.top=typeof e.top!="undefined"?e.top:n.top,n.right=typeof e.right!="undefined"?e.right:n.right,n.bottom=typeof e.bottom!="undefined"?e.bottom:n.bottom,n.left=typeof e.left!="undefined"?e.left:n.left,v):n},v.width=function(e){return arguments.length?(r=e,v):r},v.height=function(e){return arguments.length?(i=e,v):i},v.xTickFormat=function(e){return arguments.length?(f=e,v):f},v.yTickFormat=function(e){return arguments.length?(l=e,v):l},v.showValue=function(e){return arguments.length?(c=e,v):c},v.alignValue=function(e){return arguments.length?(h=e,v):h},v.rightAlignValue=function(e){return arguments.length?(p=e,v):p},v.noData=function(e){return arguments.length?(d=e,v):d},v},e.models.stackedArea=function(){function b(o){return o.each(function(o){var p=n-t.left-t.right,w=r-t.top-t.bottom,E=d3.select(this);c=d.xScale(),h=d.yScale(),o=o.map(function(e,t){return e.values=e.values.map(function(t,n){return t.index=n,t.stackedY=e.disabled?0:s(t,n),t}),e}),o=d3.layout.stack().order(a).offset(u).values(function(e){return e.values}).x(i).y(function(e){return e.stackedY}).out(function(e,t,n){e.display={y:n,y0:t}})(o);var S=E.selectAll("g.nv-wrap.nv-stackedarea").data([o]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),N=T.append("defs"),C=T.append("g"),k=S.select("g");b.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,b.id()+"-"+n,r,v(t,n),S.select("defs"))},C.append("g").attr("class","nv-areaWrap"),C.append("g").attr("class","nv-scatterWrap"),S.attr("transform","translate("+t.left+","+t.top+")"),d.width(p).height(w).x(i).y(function(e){return e.display.y+e.display.y0}).forceY([0]);var L=k.select(".nv-scatterWrap").datum(o.filter(function(e){return!e.disabled}));L.call(d),N.append("clipPath").attr("id","nv-edge-clip-"+b.id()).append("rect"),S.select("#nv-edge-clip-"+b.id()+" rect").attr("width",p).attr("height",w),k.attr("clip-path",l?"url(#nv-edge-clip-"+b.id()+")":"");var A=d3.svg.area().x(function(e,t){return c(i(e,t))}).y0(function(e){return h(e.display.y0)}).y1(function(e){return h(e.display.y+e.display.y0)}).interpolate(f),O=d3.svg.area().x(function(e,t){return c(i(e,t))}).y0(function(e){return h(e.display.y0)}).y1(function(e){return h(e.display.y0)}),M=k.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e){return e});M.enter().append("path").on("mouseover",function(e,t){d3.select(this).classed("hover",!0),y.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t}),k.select(".nv-chart-"+b.id()+" .nv-area-"+t).classed("hover",!0)}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),y.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t}),k.select(".nv-chart-"+b.id()+" .nv-area-"+t).classed("hover",!1)}).on("mousemove",function(e,t){y.areaMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("click",function(e,t){d3.select(this).classed("hover",!1),y.areaClick({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}),M.exit().attr("d",function(e,t){return O(e.values,t)}).remove(),M.attr("class",function(e,t){return this.getAttribute("class")||g(e,t)}).attr("fill",function(e,t){return e.color||m(e,t)}).attr("stroke",function(e,t){return e.color||m(e,t)}),M.attr("d",function(e,t){return A(e.values,t)}),d.dispatch.on("elementMouseover.area",function(e){k.select(".nv-chart-"+b.id()+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),d.dispatch.on("elementMouseout.area",function(e){k.select(".nv-chart-"+b.id()+" .nv-area-"+e.seriesIndex).classed("hover",!1)})}),b}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=function(e){return e.x},s=function(e){return e.y},o="stack",u="zero",a="default",f="linear",l=!1,c,h,p=200,d=e.models.scatter(),v=e.utils.defaultColor(),m=v,g=function(e,t){return"nv-area nv-area-"+t},y=d3.dispatch("tooltipShow","tooltipHide","tooltipMove","areaClick","areaMouseover","areaMouseout","areaMousemove");return d.size(2.2).sizeDomain([2.2]),d.dispatch.on("elementClick.area",function(e){y.areaClick(e)}),d.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],y.tooltipShow(e)}),d.dispatch.on("elementMouseout.tooltip",function(e){y.tooltipHide(e)}),b.dispatch=y,b.scatter=d,d3.rebind(b,d,"interactive","size","id","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),b.color=function(e){return arguments.length?(v=e,d.color(v),b):v},b.fill=function(e){return arguments.length?(m=e,d.fill(m),b):m},b.classes=function(e){return arguments.length?(g=e,d.classes(g),b):g},b.gradient=function(e){return arguments.length?(gradient=e,b):gradient},b.x=function(e){return arguments.length?(i=d3.functor(e),b):i},b.y=function(e){return arguments.length?(s=d3.functor(e),b):s},b.delay=function(e){return arguments.length?(p=e,b):p},b.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,b):t},b.width=function(e){return arguments.length?(n=e,b):n},b.height=function(e){return arguments.length?(r=e,b):r},b.clipEdge=function(e){return arguments.length?(l=e,b):l},b.offset=function(e){return arguments.length?(u=e,b):u},b.order=function(e){return arguments.length?(a=e,b):a},b.style=function(e){if(!arguments.length)return o;o=e;switch(o){case"stack":b.offset("zero"),b.order("default");break;case"stream":b.offset("wiggle"),b.order("inside-out");break;case"stream-center":b.offset("silhouette"),b.order("inside-out");break;case"expand":b.offset("expand"),b.order("default")}return b},b.interpolate=function(e){return arguments.length?(f=e,f):f},b},e.models.stackedAreaChart=function(){function S(f){return f.each(function(f){var h=f.properties,T=f.data,N=d3.select(this),C=this,k=(n||parseInt(N.style("width"),10)||960)-t.left-t.right,L=(r||parseInt(N.style("height"),10)||400)-t.top-t.bottom,A=k,O=L,M={top:0,right:0,bottom:0,left:0},_=0,D=0,P=0;S.update=function(){N.transition().duration(S.delay()).call(S)},S.container=this;if(!T||!T.length||!T.filter(function(e){return e.values.length}).length){var H=N.selectAll(".nv-noData").data([d]);return H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),H.attr("x",t.left+k/2).attr("y",t.top+L/2).text(function(e){return e}),S}N.selectAll(".nv-noData").remove(),p.disabled=T.map(function(e){return!!e.disabled}),p.style=m.style();var B=[{key:"Stacked",disabled:m.offset()!=="zero"},{key:"Stream",disabled:m.offset()!=="wiggle"},{key:"Expanded",disabled:m.offset()!=="expand"}];l=m.xScale(),c=m.yScale(),g.scale(l),y.scale(c);var j=N.selectAll("g.nv-wrap.nv-stackedAreaChart").data([T]),F=j.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),I=j.select("g").attr("class","nv-chartWrap");F.append("g").attr("class","nv-titleWrap");var q=I.select(".nv-titleWrap");F.append("g").attr("class","nv-x nv-axis");var R=I.select(".nv-x.nv-axis");F.append("g").attr("class","nv-y nv-axis");var U=I.select(".nv-y.nv-axis");F.append("g").attr("class","nv-stackedWrap");var z=I.select(".nv-stackedWrap");F.append("g").attr("class","nv-controlsWrap");var W=I.select(".nv-controlsWrap");F.append("g").attr("class","nv-legendWrap");var X=I.select(".nv-legendWrap");j.attr("transform","translate("+t.left+","+t.top+")"),i&&h.title&&(q.select(".nv-title").remove(),q.append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("dy",".71em").attr("text-anchor","start").text(h.title).attr("stroke","none").attr("fill","black"),M.top+=parseInt(I.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(I.select(".nv-title").style("margin-top"),10)+parseInt(I.select(".nv-title").style("margin-bottom"),10)),s&&(w.id("controls_"+S.id()).height(L-M.top),W.datum(B).call(w),_=w.calculateWidth()+w.margin().left),o&&(b.id("legend_"+S.id()).height(L-M.top),X.datum(T).call(b),D=b.calculateWidth()+b.margin().right),P=k/(_+D),s&&(w.arrange(Math.floor(P*_)),W.attr("transform","translate(0,"+M.top+")")),o&&(b.arrange(Math.floor(k-w.width()+b.margin().right)),X.attr("transform","translate("+(w.width()-w.margin().left)+","+M.top+")")),M.top+=Math.max(b.height(),w.height())+4,O=L-M.top-M.bottom,m.width(A).height(O).id(S.id()),z.datum(T).call(m),R.call(g),M[g.orient()]+=g.height(),O=L-M.top-M.bottom,U.call(y),M[y.orient()]+=y.width(),A=k-M.left-M.right,m.width(A).height(O),z.attr("transform","translate("+M.left+","+M.top+")").transition().duration(S.delay()).call(m),g.ticks(A/100).tickSize(-O,0),R.attr("transform","translate("+M.left+","+(g.orient()==="bottom"?O+M.top:M.top)+")").transition().call(g),y.ticks(m.offset()==="wiggle"?0:O/36).tickSize(-A,0),U.attr("transform","translate("+(y.orient()==="left"?M.left:M.left+A)+","+M.top+")").transition().call(y),m.dispatch.on("areaClick.toggle",function(e){T.filter(function(e){return!e.disabled}).length===1?T=T.map(function(e){return e.disabled=!1,e}):T=T.map(function(t,n){return t.disabled=n!==e.seriesIndex,t}),p.disabled=T.map(function(e){return!!e.disabled}),v.stateChange(p),N.transition().duration(S.delay()).call(S)}),b.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,T.filter(function(e){return!e.disabled}).length||T.map(function(e){return e.disabled=!1,I.selectAll(".nv-series").classed("disabled",!1),e}),p.disabled=T.map(function(e){return!!e.disabled}),v.stateChange(p),N.transition().duration(S.delay()).call(S)}),w.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;B=B.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Stacked":m.style("stack");break;case"Stream":m.style("stream");break;case"Expanded":m.style("expand")}p.style=m.style(),v.stateChange(p),N.transition().duration(S.delay()).call(S)}),v.on("tooltipShow",function(e){a&&E(e,C.parentNode)}),v.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),v.on("tooltipMove",function(t){u&&e.tooltip.position(u,t.pos)}),v.on("changeState",function(e){typeof e.disabled!="undefined"&&(T.forEach(function(t,n){t.disabled=e.disabled[n]}),p.disabled=e.disabled),typeof e.style!="undefined"&&(m.style(e.style),p.style=e.style),N.transition().duration(S.delay()).call(S)}),v.on("chartClick",function(e){w.enabled()&&w.dispatch.closeMenu(e),b.enabled()&&b.dispatch.closeMenu(e)})}),S}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!1,o=!0,u=null,a=!0,f=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},l,c,h=d3.format(",.2f"),p={},d="No Data Available.",v=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),m=e.models.stackedArea().clipEdge(!0),g=e.models.axis().orient("bottom").tickPadding(7).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),y=e.models.axis().orient("left").tickPadding(4).tickFormat(m.offset()==="expand"?d3.format("%"):h),b=e.models.legend().align("right"),w=e.models.legend().align("left").strings({close:"close",type:"controls"}).color(["#444"]);m.scatter.pointActive(function(e){return!!Math.round(m.y()(e)*100)});var E=function(t,n){var r=t.pos[0],i=t.pos[1],s=g.tickFormat()(m.x()(t.point,t.pointIndex)),o=y.tickFormat()(m.y()(t.point,t.pointIndex)),a=f(t.series.key,s,o,t,S);u=e.tooltip.show([r,i],a,null,null,n)};return m.dispatch.on("areaMouseover.tooltip",function(e){}),m.dispatch.on("areaMouseout.tooltip",function(e){}),m.dispatch.on("areaMousemove.tooltip",function(e){}),m.dispatch.on("tooltipShow",function(e){v.tooltipShow(e)}),m.dispatch.on("tooltipHide",function(e){v.tooltipHide(e)}),S.dispatch=v,S.stacked=m,S.legend=b,S.controls=w,S.xAxis=g,S.yAxis=y,d3.rebind(S,m,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(S,m,"interactive","size","sizeDomain","forceSize","offset","order","style"),d3.rebind(S,g,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),S.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,n)},r=function(e,t){return"nv-area nv-area-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(t/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=t*(s.step||1)%20;return"nv-area nv-area-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n+" nv-stroke"+t)}}var f=s.gradient?function(e,t){var n={orientation:s.orientation||"horizontal",position:s.position||"base"};return m.gradient(e,t,n)}:n;return m.color(n),m.fill(f),m.classes(r),b.color(n),b.classes(r),S},S.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return S},S.width=function(e){return arguments.length?(n=e,S):n},S.height=function(e){return arguments.length?(r=e,S):r},S.showTitle=function(e){return arguments.length?(i=e,S):i},S.showControls=function(e){return arguments.length?(s=e,S):s},S.showLegend=function(e){return arguments.length?(o=e,S):o},S.tooltip=function(e){return arguments.length?(u=e,S):u},S.tooltips=function(e){return arguments.length?(a=e,S):a},S.tooltipContent=function(e){return arguments.length?(f=e,S):f},S.noData=function(e){return arguments.length?(d=e,S):d},S.state=function(e){return arguments.length?(p=e,S):p},y.tickFormat=function(e){return arguments.length?(h=e,y):h},S},e.models.treemap=function(){function y(b){return b.each(function(b){function E(e){var t,n;if(e.children&&a(e)&&l.indexOf(a(e))===-1){l.push(a(e)),n=e.children.length;for(t=0;t<n;t+=1)E(e.children[t])}}function D(e){function m(e){v.elementMouseout();if(C||!e)return;C=!0;var t=D(e),n=r.transition().duration(750),o=t.transition().duration(750);i.domain([e.x,e.x+e.dx]),s.domain([e.y,e.y+e.dy]),N.style("shape-rendering",null),N.selectAll(".nv-depth").sort(function(e,t){return e.depth-t.depth}),t.selectAll("text").style("fill-opacity",0),n.selectAll("text").call(y).style("fill-opacity",0),o.selectAll("text").call(y).style("fill-opacity",1),n.selectAll("rect").call(b),o.selectAll("rect").call(b),n.remove().each("end",function(){N.style("shape-rendering","crispEdges"),C=!1})}function g(e){e.children&&(n.nodes({children:e.children}),e.children.forEach(function(t){t.x=e.x+t.x*e.dx,t.y=e.y+t.y*e.dy,t.dx*=e.dx,t.dy*=e.dy,t.parent=e,g(t)}))}function y(e){e.attr("x",function(e){return i(e.x)+6}).attr("y",function(e){return s(e.y)+6})}function b(e){e.attr("x",function(e){return i(e.x)}).attr("y",function(e){return s(e.y)}).attr("width",function(e){return i(e.x+e.dx)-i(e.x)}).attr("height",function(e){return s(e.y+e.dy)-s(e.y)})}function w(e){return e.parent?w(e.parent)+" / "+a(e):a(e)}var n=d3.layout.treemap().value(u).sort(function(e,t){return u(e)-u(t)}).round(!1);g(e),_.datum(e.parent).on("click",m).select("text").text(w(e));var r=O.insert("g",".nv-grandparent").attr("class","nv-depth").attr("height",T).attr("transform","translate("+t.left+","+t.top+")"),f=r.selectAll("g").data(e.children).enter().append("g");f.filter(function(e){return e.children}).classed("nv-children",!0).on("click",m),f.filter(function(e){return!e.children}).on("click",c),f.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),v.elementMouseover({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:o})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),v.elementMouseout()}).on("mousemove",function(e,t){v.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:o})});var h=f.selectAll(".nv-child").data(function(e){return e.children||[e]}).enter().append("rect").attr("class",d).attr("fill",function(e,t){var n=e.parent.colorIndex||l.indexOf(a(e.parent))||t;return this.getAttribute("fill")||p(e,n,l.length)}).call(b);return h.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),v.elementMouseover({label:a(e),value:u(e),point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:o})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),v.elementMouseout()}),f.append("rect").attr("class","nv-parent").call(b),f.append("text").attr("dy",".75em").text(function(e){return a(e)}).call(y),f}var w=b[0];E(w);var S=n-t.left-t.right,T=r-t.top-t.bottom,N=d3.select(this),C;i=d3.scale.linear().domain([0,w.dx]).range([0,S]),s=d3.scale.linear().domain([0,w.dy]).range([0,T]),m=m||i,g=g||s;var k=N.selectAll("g.nv-wrap.nv-treemap").data([w]),L=k.enter().append("g").attr("class","nvd3 nv-wrap nv-treemap"),A=L.append("defs"),O=L.append("g"),M=k.select("g");y.gradient=function(t,n,r){var i=t.parent.colorIndex||l.indexOf(a(t.parent))||n;return e.utils.colorLinearGradient(t,o+"-"+n,r,h(t,i,l.length),k.select("defs"))},A.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),k.select("#nv-edge-clip-"+o+" rect").attr("width",n).attr("height",r),M.attr("clip-path",f?"url(#nv-edge-clip-"+o+")":"");var _=O.append("g").attr("class","nv-grandparent");_.append("rect").attr("width",n).attr("height",t.top),_.append("text").attr("x",6).attr("y",6).attr("dy",".75em"),D(w)}),y}var t={top:20,right:0,bottom:0,left:0},n=0,r=0,i,s,o=Math.floor(Math.random()*1e4),u=function(e){return e.size},a=function(e){return e.name},f=!0,l=[],c=function(){return!1},h=e.utils.defaultColor(),p=h,d=function(e,t){return"nv-child"},v=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),m,g;return y.dispatch=v,y.color=function(e){return arguments.length?(h=e,y):h},y.fill=function(e){return arguments.length?(p=e,y):p},y.classes=function(e){return arguments.length?(d=e,y):d},y.gradient=function(e){return arguments.length?(gradient=e,y):gradient},y.x=function(e){return arguments.length?(getX=e,y):getX},y.y=function(e){return arguments.length?(getY=e,y):getY},y.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,y):t},y.width=function(e){return arguments.length?(n=e,y):n},y.height=function(e){return arguments.length?(r=e,y):r},y.xScale=function(e){return arguments.length?(i=e,y):i},y.yScale=function(e){return arguments.length?(s=e,y):s},y.xDomain=function(e){return arguments.length?(xDomain=e,y):xDomain},y.yDomain=function(e){return arguments.length?(yDomain=e,y):yDomain},y.leafClick=function(e){return arguments.length?(c=e,y):c},y.getSize=function(e){return arguments.length?(u=e,y):u},y.groupBy=function(e){return arguments.length?(a=e,y):a},y.groups=function(e){return arguments.length?(l=e,y):l},y.id=function(e){return arguments.length?(o=e,y):o},y},e.models.treemapChart=function(){function g(e){return e.each(function(e){function C(e){var t,n;e.color&&c.indexOf(e.color)!==-1&&c.splice(c.indexOf(e.color),1);if(e.children){n=e.children.length;for(t=0;t<n;t+=1)C(e.children[t])}}var a=[e],l=d3.select(this),h=this,p=(i||parseInt(l.style("width"),10)||960)-r.left-r.right,y=(s||parseInt(l.style("height"),10)||400)-r.top-r.bottom;g.update=function(){l.transition().duration(300).call(g)},g.container=this;if(!a||!a.length||!a.filter(function(e){return e.children.length}).length){var b=l.selectAll(".nv-noData").data([d]);return b.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),b.attr("x",r.left+p/2).attr("y",r.top+y/2).text(function(e){return e}),g}l.selectAll(".nv-noData").remove(),colorData==="data"&&C(a[0]);var w=l.selectAll("g.nv-wrap.nv-treemapWithLegend").data(a),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-treemapWithLegend").append("g"),S=w.select("g");E.append("g").attr("class","nv-treemapWrap");var x=0,T=0;u&&(E.append("g").attr("class","nv-legendWrap"),n.id("legend_"+g.id()).width(p+r.left).height(y),S.select(".nv-legendWrap").datum(a).call(n),T=n.height()+10,r.top!==T+x&&(r.top=T+x,y=(s||parseInt(l.style("height"),10)||400)-r.top-r.bottom),S.select(".nv-legendWrap").attr("transform","translate("+ -r.left+","+ -r.top+")")),o&&properties.title&&(E.append("g").attr("class","nv-titleWrap"),S.select(".nv-title").remove(),S.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(properties.title).attr("stroke","none").attr("fill","black"),x=parseInt(S.select(".nv-title").style("height"),10)+parseInt(S.select(".nv-title").style("margin-top"),10)+parseInt(S.select(".nv-title").style("margin-bottom"),10),r.top!==x+T&&(r.top=x+T,y=(s||parseInt(l.style("height"),10)||400)-r.top-r.bottom),S.select(".nv-titleWrap").attr("transform","translate(0,"+(-r.top+parseInt(S.select(".nv-title").style("height"),10))+")")),w.attr("transform","translate("+r.left+","+r.top+")"),t.width(p).height(y);var N=S.select(".nv-treemapWrap").datum(a.filter(function(e){return!e.disabled}));N.transition().call(t),n.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,a.filter(function(e){return!e.disabled}).length||a.map(function(e){return e.disabled=!1,w.selectAll(".nv-series").classed("disabled",!1),e}),l.transition().duration(300).call(g)}),v.on("tooltipShow",function(e){f&&m(e,h.parentNode)})}),g}var t=e.models.treemap(),n=e.models.legend(),r={top:0,right:10,bottom:10,left:10},i=null,s=null,o=!1,u=!1,a=null,f=!0,l=function(e){var t="<p>Value: <b>"+d3.format(",.2s")(e.value)+"</b></p>"+"<p>Name: <b>"+e.name+"</b></p>";return t},c=d3.scale.category20().range().map(function(e){return e}),h,p,d="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide","tooltipMove","elementMousemove"),m=function(t,n){var r=t.pos[0],i=t.pos[1],s=l(t.point);a=e.tooltip.show([r,i],s,null,null,n)};return t.dispatch.on("elementMouseover",function(e){e.pos=[e.pos[0]+r.left,e.pos[1]+r.top],v.tooltipShow(e)}),t.dispatch.on("elementMouseout",function(e){v.tooltipHide(e)}),v.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),t.dispatch.on("elementMousemove",function(e){v.tooltipMove(e)}),v.on("tooltipMove",function(t){a&&e.tooltip.position(a,t.pos)}),g.dispatch=v,g.legend=n,g.treemap=t,d3.rebind(g,t,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","leafClick","getSize","getName","groups","color","fill","classes","gradient"),g.colorData=function(r){if(!arguments.length)return colorData;var i=arguments[0],s=arguments[1]||{},o=function(t,n){var r=i==="data"&&t.color?{color:t.color}:{};return e.utils.getColor(c)(r,n)},u=function(e,t){return"nv-child"};switch(i){case"graduated":o=function(e,t,n){return d3.interpolateHsl(d3.rgb(s.c1),d3.rgb(s.c2))(t/n)};break;case"class":o=function(){return"inherit"},u=function(e,t){var n=t*(s.step||1)%20;return"nv-child "+(e.className||"nv-fill"+(n>9?"":"0")+n)}}var a=s.gradient?function(e,n){var r={orientation:s.orientation||"horizontal",position:s.position||"base"};return t.gradient(e,n,r)}:o;return t.color(o),t.fill(a),t.classes(u),n.color(o),n.classes(u),colorData=arguments[0],g},g.x=function(e){return arguments.length?(getX=e,t.x(e),g):getX},g.y=function(e){return arguments.length?(getY=e,t.y(e),g):getY},g.margin=function(e){return arguments.length?(r.top=typeof e.top!="undefined"?e.top:r.top,r.right=typeof e.right!="undefined"?e.right:r.right,r.bottom=typeof e.bottom!="undefined"?e.bottom:r.bottom,r.left=typeof e.left!="undefined"?e.left:r.left,g):r},g.width=function(e){return arguments.length?(i=e,g):i},g.height=function(e){return arguments.length?(s=e,g):s},g.showTitle=function(e){return arguments.length?(o=e,g):o},g.showLegend=function(e){return arguments.length?(u=e,g):u},g.tooltip=function(e){return arguments.length?(a=e,g):a},g.tooltips=function(e){return arguments.length?(f=e,g):f},g.tooltipContent=function(e){return arguments.length?(l=e,g):l},g.noData=function(e){return arguments.length?(d=e,g):d},g},e.models.tree=function(){function k(e){return e.each(function(e){var o=d3.svg.diagonal().projection(function(e){return[g(e),y(e)]}),l=d3.behavior.zoom().scaleExtent([i.min,i.max]).on("zoom",function(){N.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}),c=d3.select(this),h=c.selectAll(".nv-wrap").data([1]),p=h.enter().append("g").attr("class","nvd3 nv-wrap").attr("id","nv-chart-"+f).call(l),x=p.append("defs"),T=p.append("svg:rect").attr("id","backg").attr("transform","translate("+n.left+","+n.top+")").style("fill","transparent"),N=p.append("g"),C=N.append("g").attr("class","nv-tree").attr("id","vis"),L=d3.layout.tree().size(null).elementsize([a?s.height:s.width,1]).separation(function(t,n){return t.parent==n.parent?1:1}),A={width:parseInt(c.style("width"),10),height:parseInt(c.style("height"),10)};e.x0=e.x0||0,e.y0=e.y0||0;var O=e;k.showall=function(){function e(t){if(t.children&&t.children.length||t._children&&t._children.length)t._children&&t._children.length&&(t.children=t._children,t._children=null),t.children.forEach(e)}e(O),l.translate([0,0]).scale(1),N.attr("transform","translate("+[0,0]+")scale("+1+")"),k.update(O)},k.resize=function(){A={width:parseInt(c.style("width"),10),height:parseInt(c.style("height"),10)},k.reset(),k.update(O)},k.orientation=function(e){a=e==="horizontal"||!a?!0:!1,L.elementsize([a?s.height:s.width,1]),k.reset(),k.update(O)},k.reset=function(){l.translate([0,0]).scale(1),N.attr("transform","translate("+[0,0]+")scale("+1+")")},k.zoom=function(e){var t=e>0?i.max:i.min,n=Math.min(Math.max(l.scale()+e,i.min),i.max);return n!==t&&(l.translate([0,0]).scale(n),N.attr("transform","translate("+[0,0]+")scale("+n+")")),n},k.zoomLevel=function(e){var t=Math.min(Math.max(e,i.min),i.max);return l.translate([0,0]).scale(t),N.attr("transform","translate("+[0,0]+")scale("+t+")"),t},k.filter=function(t){function i(e){E(e)===t?(n=e,r=!0):!r&&e.children&&e.children.forEach(i)}var n={},r=!1;i(e),n.x0=0,n.y0=0,O=n,k.update(O)},k.update=function(e){function i(e){f(e),k.update(e)}function f(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null)}var l=L.nodes(O),c=l[0],h={width:A.width-n.left-n.right,height:A.height-n.top-n.bottom},p={width:d3.min(l,g)+d3.max(l,g),height:d3.min(l,y)+d3.max(l,y)};a?p.width=p.width*s.width*2+s.width:p.height=p.height*s.height*2+s.height;var S=d3.min([h.width/p.width,h.height/p.height]),x=h.width/p.width<h.height/p.height?[0,(h.height/S-p.height)/2]:[(h.width/S-p.width)/2,0],N={top:a?n.top/2:s.height,left:a?s.width:n.left/2};T.attr("width",h.width).attr("height",h.height),C.attr("transform","translate("+[(N.left+x[0])*S,(N.top+x[1])*S]+")scale("+S+")"),l.forEach(function(e){d(e,e.depth*(a?2*s.width:2*s.height))});var M=C.selectAll("g.nv-card").data(l,E),_=M.enter().append("svg:g").attr("class","nv-card").attr("id",function(e){return"nv-card-"+E(e)}).attr("transform",function(t){return y(e)===0?"translate("+g(c)+","+y(c)+")":"translate("+b(e)+","+w(e)+")"});_.append("foreignObject").attr("class","nv-foreign-object").attr("width",1).attr("height",1).attr("x",-1).attr("y",-1).attr("externalResourcesRequired",!0).append("xhtml:body").style("font","14px 'Helvetica Neue'").html(u);var D=_.append("svg:g").attr("class","nv-expcoll").style("opacity",1e-6).on("click",i);D.append("svg:circle").attr("class","nv-circ-back").attr("r",t),D.append("svg:line").attr("class","nv-line-vert").attr("x1",0).attr("y1",.5-t).attr("x2",0).attr("y2",t-.5).style("stroke","#bbb"),D.append("svg:line").attr("class","nv-line-hrzn").attr("x1",.5-t).attr("y1",0).attr("x2",t-.5).attr("y2",0).style("stroke","#fff");var P=M.transition().duration(r).attr("transform",function(e){return"translate("+g(e)+","+y(e)+")"});P.select(".nv-expcoll").style("opacity",function(e){return e.children&&e.children.length||e._children&&e._children.length?1:0}),P.select(".nv-circ-back").style("fill",function(e){return e._children&&e._children.length?"#777":e.children?"#bbb":"none"}),P.select(".nv-line-vert").style("stroke",function(e){return e._children&&e._children.length?"#fff":"#bbb"}),P.selectAll(".nv-foreign-object").attr("width",s.width).attr("height",s.height).attr("x",a?-s.width+t:-s.width/2).attr("y",a?-s.height/2+t:-s.height+t*2);var H=M.exit().transition().duration(r).attr("transform",function(t){return"translate("+g(e)+","+y(e)+")"}).remove();H.selectAll(".nv-expcoll").style("stroke-opacity",1e-6),H.selectAll(".nv-foreign-object").attr("width",1).attr("height",1).attr("x",-1).attr("y",-1);var B=C.selectAll("path.link").data(L.links(l),function(e){return E(e.source)+"-"+E(e.target)});B.enter().insert("svg:path","g").attr("class","link").attr("d",function(t){var n=y(e)===0?{x:e.x,y:e.y}:{x:e.x0,y:e.y0};return o({source:n,target:n})}),B.transition().duration(r).attr("d",o),B.exit().transition().duration(r).attr("d",function(t){var n={x:e.x,y:e.y};return o({source:n,target:n})}).remove(),l.forEach(function(e){v(e,g(e)),m(e,y(e))})},k.gradient(S),k.update(O)}),k}var t=5.5,n={top:10,right:10,bottom:10,left:10},r=300,i={min:.25,max:2},s={width:100,height:50},o="../img/",u=function(e){return'<div class="nv-tree-node"></div>'},a=!1,f=Math.floor(Math.random()*1e4),l=e.utils.defaultColor(),c=function(e,t){return l(e,t)},h=function(e,t){return l(e,t)},p=function(e,t){e.x=t},d=function(e,t){e.y=t},v=function(e,t){a?e.y0=t:e.x0=t},m=function(e,t){a?e.x0=t:e.y0=t},g=function(e){return a?e.y:e.x},y=function(e){return a?e.x:e.y},b=function(e){return a?e.y0:e.x0},w=function(e){return a?e.x0:e.y0},E=function(e){return e.id},S=function(t,n){return e.utils.colorRadialGradient(t,n,0,0,"35%","35%",l(t,n),wrap.select("defs"))},x=!1,T=d3.format(",.2f"),N=!0,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return k.dispatch=C,k.color=function(e){return arguments.length?(l=e,k):l},k.fill=function(e){return arguments.length?(c=e,k):c},k.gradient=function(e){return arguments.length?(h=e,k):h},k.useClass=function(e){return arguments.length?(x=e,k):x},k.width=function(e){return arguments.length?(width=e,k):width},k.height=function(e){return arguments.length?(height=e,k):height},k.values=function(e){return arguments.length?(getValues=e,k):getValues},k.x=function(e){return arguments.length?(g=e,k):g},k.y=function(e){return arguments.length?(y=d3.functor(e),k):y},k.showLabels=function(e){return arguments.length?(N=e,k):N},k.id=function(e){return arguments.length?(f=e,k):f},k.valueFormat=function(e){return arguments.length?(T=e,k):T},k.labelThreshold=function(e){return arguments.length?(labelThreshold=e,k):
labelThreshold},k.radius=function(e){return arguments.length?(t=e,k):t},k.duration=function(e){return arguments.length?(r=e,k):r},k.zoomExtents=function(e){return arguments.length?(i=e,k):i},k.padding=function(e){return arguments.length?(n=e,k):n},k.nodeSize=function(e){return arguments.length?(s=e,k):s},k.nodeImgPath=function(e){return arguments.length?(o=e,k):o},k.nodeRenderer=function(e){return arguments.length?(u=e,k):u},k.horizontal=function(e){return arguments.length?(a=e,k):a},k.getId=function(e){return arguments.length?(E=e,k):E},k}})();