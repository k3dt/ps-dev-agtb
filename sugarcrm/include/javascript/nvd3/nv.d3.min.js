(function(){function t(e,t){return(new Date(t,e+1,0)).getDate()}function n(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s===0&&u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}var e=window.nv||{};e.version="0.0.1a",e.dev=!1,window.nv=e,e.tooltip={},e.utils={},e.models={},e.charts={},e.graphs=[],e.logs={},e.dispatch=d3.dispatch("render_start","render_end"),e.dev&&(e.dispatch.on("render_start",function(t){e.logs.startTime=+(new Date)}),e.dispatch.on("render_end",function(t){e.logs.endTime=+(new Date),e.logs.totalTime=e.logs.endTime-e.logs.startTime,e.log("total",e.logs.totalTime)})),e.log=function(){if(e.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(e.dev&&console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},e.render=function(n){n=n||1,e.render.active=!0,e.dispatch.render_start(),setTimeout(function(){var t,r;for(var i=0;i<n&&(r=e.render.queue[i]);i++)t=r.generate(),typeof r.callback==typeof Function&&r.callback(t),e.graphs.push(t);e.render.queue.splice(0,i),e.render.queue.length?setTimeout(arguments.callee,0):(e.render.active=!1,e.dispatch.render_end())},0)},e.render.active=!1,e.render.queue=[],e.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),e.render.queue.push(t),e.render.active||e.render()},e.identity=function(e){return e},e.strip=function(e){return e.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)},d3.time.monthEnds=n(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(e){return e.getMonth()}),d3.svg.axisStatic=function(){function h(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function p(e){return e.rangeExtent?e.rangeExtent():h(e.range())}function d(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function v(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function m(e,t,n){i=[];if(n&&t.length>1){var r=h(e.domain()),i,s=-1,o=t.length,u=(t[1]-t[0])/++n,a,f;while(++s<o)for(a=n;--a>0;)(f=+t[s]-a*u)>=r[0]&&i.push(f);for(--s,a=0;++a<n&&(f=+t[s]+a*u)<r[1];)i.push(f)}return i}function g(l){l.each(function(){var l=d3.select(this),c=u==null?e.ticks?e.ticks.apply(e,o):e.domain():u,h=a==null?e.tickFormat?e.tickFormat.apply(e,o):String:a,g=m(e,c,f),y=l.selectAll(".tick.minor").data(g,String),b=y.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1),w=y.exit().remove(),E=y.style("opacity",1),S=l.selectAll(".tick.major").data(c,String),x=S.enter().insert("g","path").attr("class","tick major").style("opacity",1),T=S.exit().remove(),N=S.style("opacity",1),C,k=p(e),L=l.selectAll(".domain").data([0]),A=(L.enter().append("path").attr("class","domain"),L),O=e.copy();x.append("line"),x.append("text");var M=x.select("line"),_=N.select("line"),D=S.select("text").text(h),P=x.select("text"),H=N.select("text");switch(t){case"bottom":C=d,b.attr("y2",r),E.attr("x2",0).attr("y2",r),M.attr("y2",n),P.attr("y",Math.max(n,0)+s),_.attr("x2",0).attr("y2",n),H.attr("x",0).attr("y",Math.max(n,0)+s),D.attr("dy",".71em").style("text-anchor","middle"),A.attr("d","M"+k[0]+","+i+"V0H"+k[1]+"V"+i);break;case"top":C=d,b.attr("y2",-r),E.attr("x2",0).attr("y2",-r),M.attr("y2",-n),P.attr("y",-(Math.max(n,0)+s)),_.attr("x2",0).attr("y2",-n),H.attr("x",0).attr("y",-(Math.max(n,0)+s)),D.attr("dy","0em").style("text-anchor","middle"),A.attr("d","M"+k[0]+","+ -i+"V0H"+k[1]+"V"+ -i);break;case"left":C=v,b.attr("x2",-r),E.attr("x2",-r).attr("y2",0),M.attr("x2",-n),P.attr("x",-(Math.max(n,0)+s)),_.attr("x2",-n).attr("y2",0),H.attr("x",-(Math.max(n,0)+s)).attr("y",0),D.attr("dy",".32em").style("text-anchor","end"),A.attr("d","M"+ -i+","+k[0]+"H0V"+k[1]+"H"+ -i);break;case"right":C=v,b.attr("x2",r),E.attr("x2",r).attr("y2",0),M.attr("x2",n),P.attr("x",Math.max(n,0)+s),_.attr("x2",n).attr("y2",0),H.attr("x",Math.max(n,0)+s).attr("y",0),D.attr("dy",".32em").style("text-anchor","start"),A.attr("d","M"+i+","+k[0]+"H0V"+k[1]+"H"+i)}if(e.ticks)x.call(C,O),N.call(C,O),T.call(C,O),b.call(C,O),E.call(C,O),w.call(C,O);else{var B=O.rangeBand()/2,j=function(e){return O(e)+B};x.call(C,j),N.call(C,j)}})}var e=d3.scale.linear(),t=l,n=6,r=6,i=6,s=3,o=[10],u=null,a,f=0,l="bottom",c={top:1,right:1,bottom:1,left:1};return g.scale=function(t){return arguments.length?(e=t,g):e},g.orient=function(e){return arguments.length?(t=e in c?e+"":l,g):t},g.ticks=function(){return arguments.length?(o=arguments,g):o},g.tickValues=function(e){return arguments.length?(u=e,g):u},g.tickFormat=function(e){return arguments.length?(a=e,g):a},g.tickSize=function(e,t){if(!arguments.length)return n;var s=arguments.length-1;return n=+e,r=s>1?+t:n,i=s>0?+arguments[s]:n,g},g.tickPadding=function(e){return arguments.length?(s=+e,g):s},g.tickSubdivide=function(e){return arguments.length?(f=+e,g):f},g},function(){var t=window.nv.tooltip={};t.show=function(e,n,r,i,s,o){var u=document.createElement("div"),a=document.createElement("div"),f=document.createElement("div"),l=document.getElementsByTagName("body")[0];return r=r||"s",i=i||10,a.className="tooltip-inner",f.className="tooltip-arrow",a.innerHTML=n,u.style.left=0,u.style.top=-1e3,u.style.opacity=0,u.className="tooltip xy-tooltip in",u.appendChild(a),u.appendChild(f),l.appendChild(u),t.position(u,e,r,i),u.style.opacity=1,u},t.cleanup=function(){var e=document.getElementsByClassName("tooltip"),t=[],n=0;while(n<e.length)e[n].className.indexOf("xy-tooltip")!==-1&&(t.push(e[n]),e[n].style.transitionDelay="0 !important",e[n].style.opacity=0,e[n].className="nvtooltip-pending-removal out"),n+=1;setTimeout(function(){var e;while(t.length)e=t.pop(),e.parentNode.removeChild(e)},500)},t.position=function(t,n,r,i){function v(){var e=n[0]-u/2;return e<c&&(e=c+5),e+u>a&&(e=a-u-5),e}function m(){var e=n[1]-o/2;return e<l&&(e=l+5),e+o>l+f&&(e=l-o-5),e}var s=document.getElementsByTagName("body")[0];r=r||"s",i=i||10;var o=parseInt(t.offsetHeight,10),u=parseInt(t.offsetWidth,10),a=e.utils.windowSize().width,f=e.utils.windowSize().height,l=s.scrollTop,c=s.scrollLeft,h=t.className.replace(/ top| right| bottom| left/g,""),p,d;switch(r){case"e":d=m(),p=n[0]-u-i,p<c?(p=n[0]+i,h+=" right"):h+=" left";break;case"w":d=m(),p=n[0]+i,p+u>a?(p=n[0]-u-i,h+=" left"):h+=" right";break;case"n":p=v(),d=n[1]+i,d+o>l+f?(d=n[1]-o-i,h+=" top"):h+=" bottom";break;case"s":p=v(),d=n[1]-o-i,l>d?(d=n[1]+10,h+=" bottom"):h+=" top"}t.style.left=p+"px",t.style.top=d+"px",t.className=h}}(),e.utils.windowSize=function(){var e={width:640,height:480};return document.body&&document.body.offsetWidth&&(e.width=document.body.offsetWidth,e.height=document.body.offsetHeight),document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(e.width=document.documentElement.offsetWidth,e.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e.width=window.innerWidth,e.height=window.innerHeight),e},e.utils.windowResize=function(e){window.attachEvent?window.attachEvent("onresize",e):window.addEventListener&&window.addEventListener("resize",e,!0)},e.utils.windowUnResize=function(e){window.detachEvent?window.detachEvent("onresize",e):window.removeEventListener&&window.removeEventListener("resize",e,!0)},e.utils.resizeOnPrint=function(e){if(window.matchMedia){var t=window.matchMedia("print");t.addListener(function(t){t.matches&&e()})}else window.attachEvent?window.attachEvent("onbeforeprint",e):window.onbeforeprint=e},e.utils.unResizeOnPrint=function(e){if(window.matchMedia){var t=window.matchMedia("print");t.removeListener(function(t){t.matches&&e()})}else window.detachEvent?window.detachEvent("onbeforeprint",e):window.onbeforeprint=null},e.utils.getColor=function(t){return arguments.length?Object.prototype.toString.call(t)==="[object Array]"?function(e,n){return e.color||t[n%t.length]}:t:e.utils.defaultColor()},e.utils.defaultColor=function(){var e=d3.scale.category20().range();return function(t,n){return t.color||e[n%e.length]}},e.utils.customTheme=function(e,t,n){t=t||function(e){return e.key},n=n||d3.scale.category20().range();var r=n.length;return function(i,s){var o=t(i);return r||(r=n.length),typeof e[o]!="undefined"?typeof e[o]=="function"?e[o]():e[o]:n[--r]}},e.utils.pjax=function(t,n){function r(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),e.utils.pjax(t,n)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},e.utils.colorLinearGradient=function(t,n,r,i,s){var o="lg_gradient_"+n,u=s.select("#"+o);return u.empty()&&(r.position==="middle"?e.utils.createLinearGradient(o,r,s,[{offset:"0%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1},{offset:"20%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1},{offset:"80%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1}]):e.utils.createLinearGradient(o,r,s,[{offset:"0%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1}])),"url(#"+o+")"},e.utils.createLinearGradient=function(e,t,n,r){var i=t.orientation==="horizontal"?"0%":"100%",s=t.orientation==="horizontal"?"100%":"0%",o=n.append("linearGradient").attr("id",e).attr("x1","0%").attr("y1","0%").attr("x2",i).attr("y2",s).attr("spreadMethod","pad");for(var u=0;u<r.length;u+=1){var a=r[u],f=o.append("stop");for(var l in a)a.hasOwnProperty(l)&&f.attr(l,a[l])}},e.utils.colorRadialGradient=function(t,n,r,i,s){var o="rg_gradient_"+n,u=s.select("#"+o);return u.empty()&&e.utils.createRadialGradient(o,r,s,[{offset:r.s,"stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1}]),"url(#"+o+")"},e.utils.createRadialGradient=function(e,t,n,r){var i=n.append("radialGradient").attr("id",e).attr("r",t.r).attr("cx",t.x).attr("cy",t.y).attr("gradientUnits",t.u).attr("spreadMethod","pad");for(var s=0;s<r.length;s+=1){var o=r[s],u=i.append("stop");for(var a in o)o.hasOwnProperty(a)&&u.attr(a,o[a])}},e.utils.getAbsoluteXY=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,s=n.left+r,o=n.top+i;return{left:s,top:o}},e.utils.roundedRectangle=function(e,t,n,r,i){return"M"+e+","+t+"h"+(n-i*2)+"a"+i+","+i+" 0 0 1 "+i+","+i+"v"+(r-2-i*2)+"a"+i+","+i+" 0 0 1 "+ -i+","+i+"h"+(i*2-n)+"a"+ -i+","+i+" 0 0 1 "+ -i+","+ -i+"v"+(-r+i*2+2)+"a"+i+","+i+" 0 0 1 "+i+","+ -i+"z"},e.utils.dropShadow=function(e,t,n){var r=n||{},i=r.height||"130%",s=r.offset||2,o=r.blur||1,u=t.append("filter").attr("id",e).attr("height",i),a=u.append("feOffset").attr("in","SourceGraphic").attr("result","offsetBlur").attr("dx",s).attr("dy",s),f=u.append("feColorMatrix").attr("in","offsetBlur").attr("result","matrixOut").attr("type","matrix").attr("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"),l=u.append("feGaussianBlur").attr("in","matrixOut").attr("result","blurOut").attr("stdDeviation",o),c=u.append("feMerge");return c.append("feMergeNode"),c.append("feMergeNode").attr("in","SourceGraphic"),"url(#"+e+")"},e.utils.stringSetLengths=function(e,t,n){var r=[];t.append("g").attr("class","tmp-text-strings");var i=t.select(".tmp-text-strings").selectAll("text").data(e).enter().append("text").text(n);return i.each(function(e,t){r.push(this.getBBox().width)}),t.select(".tmp-text-strings").remove(),r},e.utils.maxStringSetLength=function(e,t,n){var r=0;t.append("g").attr("class","tmp-text-strings");var i=t.select(".tmp-text-strings").selectAll("text").data(e).enter().append("text").text(n);return i.each(function(e,t){r=Math.max(this.getBBox().width,r)}),t.select(".tmp-text-strings").remove(),r},e.utils.getTextContrast=function(e,t,n){var r=e,i=d3.lab(r),s=i.l,o=s>50?i.darker(4+(s-75)/25).l:i.brighter(4+(25-s)/25).l,u=d3.lab(o,0,0),a=u.toString();return n&&n(i,u),a},e.utils.isRTLChar=function(e){var t="֑-߿יִ-﷿ﹰ-ﻼ",n=new RegExp("["+t+"]");return n.test(e)},e.utils.polarToCartesian=function(e,t,n,r){var i=r*Math.PI/180,s=e+n*Math.cos(i),o=t+n*Math.sin(i);return[s,o]},e.models.axis=function(){function y(t){return t.each(function(t){function H(){var e=0,t=0;M.each(function(n,r){var i=this.getBoundingClientRect(),s=parseInt(i.width,10),o=parseInt(i.height/1.15,10);s>e&&(e=s),o>t&&(t=o)}),D=e,P=t}function B(t){return e.scale().rangeBand?e.scale().rangeBand()*t<D:!1}function j(t){var r=u==="rtl"?t%360>0?"end":"start":t%360>0?"start":"end",i=Math.abs(Math.sin(t*Math.PI/180));n=I()+2,n+=i?i*D:D,n+=i?i*P:0,M.attr("transform",function(n,r,i){return"translate(0,"+e.tickPadding()+") rotate("+t+")"}).attr("y","0").style("text-anchor",r)}function F(){M.selectAll("tspan").remove(),M.attr("dy",".71em").attr("y",e.tickPadding()).attr("transform","translate(0,0)").text(function(e,t){return _[t]}),H()}function I(){return e.tickPadding()+(i?m:0)}var b=d3.select(this),w=b.selectAll("g.nv-wrap.nv-axis").data([t]),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g").attr("class","nv-axis-inner"),S=w.select(".nv-axis-inner"),x=e.orient()==="left"||e.orient()==="right"?"vertical":"horizontal",T=null,N="",C=e.tickFormat(),k=typeof r.rangeExtent=="function"?r.rangeExtent()[1]:Math.abs(r.range()[0]-r.range()[1]),L={y:0,dy:0,x:0,a:"middle",t:""},A={};v!==null?e.ticks(v):(e.orient()==="top"||e.orient()==="bottom")&&e.ticks(Math.ceil(Math.abs(r.range()[1]-r.range()[0])/100)),l&&!isFinite(String(l))&&(l=30);var O=S.selectAll(".tick").data(t,function(e){return e});O.exit().remove(),S.call(e),g=g||e.scale(),C===null&&(C=g.tickFormat()),n=I();var M=S.selectAll("g.tick").select("text"),_=M[0].map(function(e,t,n){return d3.select(e).text()}),D=0,P=0;H();switch(e.orient()){case"top":i&&(L.y=-n,L.dy="-.71em",L.x=k/2),s&&(A={data:r.domain(),translate:function(e,t){return"translate("+r(e)+",0)"},dy:"0em",x:0,y:-e.tickPadding(),transform:"",anchor:l?l%360>0?"start":"end":"middle"});break;case"bottom":var q=!1,R=!1,U=!1;a&&B(1.25)&&(M.each(function(t){var n=this.textContent,r=d3.select(this),i=n.replace("/","/ ").split(" "),s=0,o=i.length,u=.71,a=e.scale().rangeBand();if(this.getBoundingClientRect().width>a){this.textContent="";do{var f,l=r.append("tspan").text(i[s]+" ").attr("dy",u+"em").attr("x","0px");s===0&&(u=1),s+=1;while(s<o){f=l.text(),l.text(f+" "+i[s]);if(!(this.getBoundingClientRect().width<=a)){l.text(f);break}s+=1}}while(s<o)}}),H(),B(1.25)?F():(q=!0,n=1)),!q&&f&&B(1.25)&&(M.text(function(e,t){return _[t]}),H(),M.attr("transform",function(e,t){return"translate(0,"+t%2*(P+2)+")"}),B(2.5)?F():(R=!0,n=P+2)),!q&&!R&&l%360&&B(1.25)?(j(l),U=!0):(N="middle",n+=I()+P),i&&(L.y=n,L.dy=".71em",L.x=k/2),c&&S.selectAll(".tick").each(function(e,n){d3.select(this).selectAll("text,line").style("opacity",n%Math.ceil(t[0].values.length/(k/100))!==0?0:1)}),s&&(A={data:[r.domain()[0],r.domain()[r.domain().length-1]],translate:function(e,t){return"translate("+(r(e)+(p?r.rangeBand()/2:e>0?-8:4))+",0)"},dy:".71em",x:0,y:e.tickPadding(),rotate:function(e){return"rotate("+l+" 0,0)"},anchor:l?l%360>0?"start":"end":"middle"});break;case"right":n+=D,i&&(L={y:h?-(n+2):-10,dy:0,x:h?k/2:e.tickPadding(),a:h?"middle":"begin",t:h?"rotate(90)":""}),s&&(A={data:r.domain(),translate:function(e,t){return"translate(0,"+r(e)+")"},dy:".32em",x:e.tickPadding(),y:0,rotate:"",anchor:u==="rtl"?"end":"start"}),d?u==="rtl"?d==="start"?N="end":d==="end"?N="start":N=d:N=d:N=u==="rtl"?"end":"start";break;case"left":n+=D+2,i&&(L={y:h?-(n+2):-10,dy:0,x:h?-k/2:-e.tickPadding(),a:h?"middle":"end",t:h?"rotate(-90)":""}),s&&(A={data:r.domain(),translate:function(e,t){return"translate(0,"+r(e)+")"},dy:".32em",x:-e.tickPadding(),y:0,rotate:"",anchor:u==="rtl"?"start":"end"}),d?u==="rtl"?d==="start"?N="end":d==="end"?N="start":N=d:N=d:N=u==="rtl"?"start":"end"}var z=S.selectAll("text.nv-axislabel").data([i]);N!==""&&S.selectAll("g.tick").each(function(e,t){d3.select(this).select("text").style("text-anchor",N)}),z.exit().remove(),z.enter().append("text").attr("class","nv-axislabel"),i&&(z.text(function(e){return e}).attr("y",L.y).attr("dy",L.dy).attr("x",L.x).attr("transform",L.t).style("text-anchor",L.a),z.each(function(t,n){T+=e.orient()==="left"||e.orient()==="right"?parseInt(this.getBoundingClientRect().width/1.15,10):parseInt(this.getBoundingClientRect().height/1.15,10)}),n+=T);if(s){var W=w.selectAll("g.nv-axisMaxMin").data(A.data);W.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),W.exit().remove(),W.attr("transform",A.translate).select("text").text(function(e,t){var n=C(e);return(""+n).match("NaN")?"":n}).attr("dy",A.dy).attr("x",A.x).attr("y",A.y).attr("transform",A.rotate).style("text-anchor",A.anchor),W.attr("transform",A.translate).select("text").style("opacity",1)}s&&(e.orient()==="left"||e.orient()==="right")&&(S.selectAll("g.tick").each(function(e,t){d3.select(this).select("text").style("opacity",1);if(r(e)>r.range()[0]-10||r(e)<r.range()[1]+10)e<1e-10&&e>-1e-10&&(d3.select(this).select("text").style("opacity",0),d3.select(this).select("line").style("opacity",0)),d3.select(this).select("text").style("opacity",0)}),r.domain()[0]===r.domain()[1]&&r.domain()[0]===0&&w.selectAll("g.nv-axisMaxMin").style("opacity",function(e,t){return t?0:1}));if(s&&(e.orient()==="top"||e.orient()==="bottom")){var X=[];w.selectAll("g.nv-axisMaxMin").each(function(e,t){try{t?X.push(r(e)-this.getBoundingClientRect().width-4):X.push(r(e)+this.getBoundingClientRect().width+4)}catch(n){t?X.push(r(e)-4):X.push(r(e)+4)}}),S.selectAll("g.tick").each(function(e,t){d3.select(this).select("text").style("opacity",1);if(r(e)<X[0]||r(e)>X[1])e<1e-10&&e>-1e-10&&(d3.select(this).select("text").style("opacity",0),d3.select(this).select("line").style("opacity",0)),d3.select(this).select("text").style("opacity",0)})}o&&S.selectAll("line.tick").filter(function(e){return!parseFloat(Math.round(e*1e5)/1e6)}).classed("zero",!0),g=r.copy(),y.labelThickness=function(){return T}}),y}var e=d3.svg.axisStatic(),t={top:0,right:0,bottom:0,left:0},n=0,r=d3.scale.linear(),i=null,s=!0,o=!0,u="ltr",a=!1,f=!1,l=0,c=!1,h=!0,p=!1,d=null,v=null,m=8;e.scale(r).orient("bottom").tickFormat(function(e){return e});var g;return y.axis=e,d3.rebind(y,e,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(y,r,"domain","range","rangeBand","rangeBands"),y.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return y},y.width=function(e){return arguments.length?(n=e,y):n},y.height=function(e){return arguments.length?(n=e,y):n},y.ticks=function(e){return arguments.length?(v=e,y):v},y.axisLabel=function(e){return arguments.length?(i=e,y):i},y.showMaxMin=function(e){return arguments.length?(s=e,y):s},y.highlightZero=function(e){return arguments.length?(o=e,y):o},y.scale=function(t){return arguments.length?(r=t,e.scale(r),p=typeof r.rangeBands=="function",d3.rebind(y,r,"domain","range","rangeBand","rangeBands"),y):r},y.wrapTicks=function(e){return arguments.length?(a=e,y):a},y.rotateTicks=function(e){return arguments.length?(l=e,y):l},y.staggerTicks=function(e){return arguments.length?(f=e,y):f},y.reduceXTicks=function(e){return arguments.length?(c=e,y):c},y.rotateYLabel=function(e){return arguments.length?(h=e,y):h},y.axisLabelDistance=function(e){return arguments.length?(m=e,y):m},y.maxTickWidth=function(e){return arguments.length?(maxTickWidth=e,y):maxTickWidth},y.textAnchor=function(e){return arguments.length?(d=e,y):d},y.direction=function(e){return arguments.length?(u=e,y):u},y},e.models.legend=function(){function E(d){return d.each(function(d){function q(e){var t=d3.transform(B.attr("transform")).translate,n=t[0],r=t[1]+d3.event.sourceEvent.wheelDelta/4,i=k-C,s=Math.max(r,i);s&&B.attr("transform","translate("+n+","+Math.min(s,0)+")")}function R(){D.style("opacity",w*.9).style("display",w?"inline":"none"),B.style("opacity",w).style("display",w?"inline":"none"),P.text(w===1?E.strings().close:E.strings().open)}var S=d3.select(this),x=n,T=r,N=[],C=0,k=0,L="";if(!d||!d.length||!d.filter(function(e){return!e.values||e.values.length}).length)return E;p=!0,L=!d[0].type||d[0].type==="bar"?"bar":"line",s==="rtl"&&(i==="left"?i="right":i==="right"&&(i="left"));var A=S.selectAll("g.nv-chart-legend").data([d]),O=A.enter().append("g").attr("class","nv-chart-legend");O.append("defs").append("clipPath").attr("id","nv-edge-clip-"+v).append("rect");var M=A.select("defs"),_=A.select("#nv-edge-clip-"+v+" rect");O.append("rect").attr("class","nv-legend-background");var D=S.select(".nv-legend-background");O.append("text").attr("class","nv-legend-link");var P=S.select(".nv-legend-link");O.append("g").attr("class","nv-legend-mask").append("g").attr("class","nv-legend");var H=S.select(".nv-legend-mask"),B=S.select("g.nv-legend");B.attr("transform","translate(0,0)");var j=B.selectAll(".nv-series").data(function(e){return e},function(e){return e.key}),F=j.enter().append("g").attr("class","nv-series");j.exit().remove();var I=d3.behavior.zoom();_.attr("x",.5).attr("y",.5).attr("width",0).attr("height",0),D.attr("x",.5).attr("y",.5).attr("width",0).attr("height",0).style("opacity",0).style("pointer-events","all"),P.text(w===1?E.strings().close:E.strings().open).attr("text-anchor",i==="left"?s==="rtl"?"end":"start":s==="rtl"?"start":"end").attr("dy",".32em").attr("dx",0).style("opacity",0).on("click",function(e,t){b.toggleMenu(e,t)}),F.on("mouseover",function(e,t){b.legendMouseover(e,t)}).on("mouseout",function(e,t){b.legendMouseout(e,t)}).on("click",function(e,t){b.legendClick(e,t),d3.event.stopPropagation()}),L==="bar"?(F.append("circle").attr("r",u).style("stroke-width",2),j.selectAll("circle").attr("class",function(e,t){return y(e,e.hasOwnProperty("series")?e.series:t)}).attr("fill",function(e,t){return g(e,e.hasOwnProperty("series")?e.series:t)}).attr("stroke",function(e,t){return g(e,e.hasOwnProperty("series")?e.series:t)}),F.append("text").attr("dy",".36em"),j.select("text").text(m)):(F.append("circle").style("stroke-width",0),F.append("line").attr("x0",0).attr("y0",0).attr("y1",0).style("stroke-width","4px"),F.append("circle").style("stroke-width",0),j.select("line").attr("class",function(e,t){return y(e,e.hasOwnProperty("series")?e.series:t)}).attr("stroke",function(e,t){return g(e,e.hasOwnProperty("series")?e.series:t)}),j.selectAll("circle").attr("r",function(e,t){return e.type==="dash"?0:u}).attr("class",function(e,t){return y(e,e.hasOwnProperty("series")?e.series:t)}).attr("fill",function(e,t){return g(e,e.hasOwnProperty("series")?e.series:t)}),F.append("text").attr("dy",".32em").attr("dx",0),j.select("text").text(m).attr("text-anchor",o)),j.classed("disabled",function(e){return e.disabled}),E.calculateWidth=function(){var e=a+(o==="start"?2*u+3:0);return N=[],B.style("display","inline"),j.select("text").each(function(t,n){var r=d3.select(this).node().getBBox().width;N.push(Math.max(Math.floor(r)+e,50))}),E.width(d3.sum(N)-a),E.width()},E.getLineHeight=function(){B.style("display","inline");var e=Math.floor(j.select("text").node().getBBox().height);return e},E.arrange=function(n){N.length===0&&this.calculateWidth();var r=N.length,p=1,d=r,m=[],g=[],y=n-t.left-t.right,b=0,S=0,x=o==="start"?10:6,A=this.getLineHeight(),O=x+u*2+(o==="start"?0:A),F=0,R=0,U,z,W,X=u+u*2;if(f){while(d>0){m=[];for(U=0;U<r;U+=1)N[U]>(m[U%d]||0)&&(m[U%d]=N[U]);if(d3.sum(m)-a<y)break;d-=1}d=d||1,p=Math.ceil(r/d),b=d3.sum(m)-a;for(U=0;U<r;U+=1)z=U%d,o==="start"?z===0?F=s==="rtl"?b:0:F+=m[z-1]*(s==="rtl"?-1:1):z===0?F=(s==="rtl"?b:0)+(m[z]-a)/2*(s==="rtl"?-1:1):F+=(m[z-1]+m[z])/2*(s==="rtl"?-1:1),R=Math.floor(U/d)*O,g[U]={x:F,y:R}}else if(s==="rtl"){F=y;for(U=0;U<r;U+=1)F-N[U]+a<0&&(b=Math.max(b,N[U]-a),F=y,U&&(p+=1)),F-N[U]+a>b&&(b=F-N[U]+a),g[U]={x:F,y:(p-1)*(x+u*2)},F-=N[U]}else{F=0;for(U=0;U<r;U+=1)U&&F+N[U]-a>y&&(F=0,p+=1),F+N[U]-a>b&&(b=F+N[U]-a),g[U]={x:F,y:(p-1)*(x+u*2)},F+=N[U]}if(l||p<h+1){w=0,c=!1,E.width(t.left+b+t.right).height(t.top+p*O-x+t.bottom+1);switch(i){case"left":W=0;break;case"center":W=(n-E.width())/2;break;case"right":W=0}I.on("zoom",null),_.attr("y",0).attr("width",E.width()).attr("height",E.height()),D.attr("x",W).attr("width",E.width()).attr("height",E.height()).attr("rx",0).attr("ry",0).attr("filter","none").style("display","inline").style("opacity",0),H.attr("clip-path","none").attr("transform",function(e,n){var r=W+t.left+(o==="start"?s==="rtl"?-5:5:0);return"translate("+r+","+(1+t.top+u)+")"}),B.style("opacity",1).style("display","inline"),j.attr("transform",function(e,t){var n=g[t];return"translate("+n.x+","+n.y+")"}),j.selectAll("text").attr("text-anchor",o).attr("transform",function(e,t){var n=o==="start"?s==="rtl"?-8:8:0,r=o==="start"?0:A;return"translate("+n+","+r+")"}),j.selectAll("circle").attr("transform",function(e,t){var n=o==="start"||L==="bar"?0:t?15:-15;return"translate("+n+",0)"}),j.selectAll("line").attr("x1",function(e,t){return e.type==="dash"?40:30}).attr("transform",function(e,t){return e.type==="dash"?"translate(-20,0)":"translate(-15,0)"}).style("stroke-dasharray",function(e,t){return e.type==="dash"?"8, 8":"0,0"})}else c=!0,E.width(u*2+d3.max(N)-a+(o==="start"?0:u*2+3)+u*2).height(u*2+u*2+u*2),C=u*2+u*2*r+(r-1)*10+u*2,k=Math.min(T-E.height(),C),I.on("zoom",q),_.attr("x",.5-X).attr("y",.5-X).attr("width",E.width()).attr("height",k),D.attr("x",.5).attr("y",.5+E.height()).attr("width",E.width()).attr("height",k).attr("rx",2).attr("ry",2).attr("filter",e.utils.dropShadow("legend_back_"+v,M,{blur:2})).style("opacity",w*.9).style("display",w?"inline":"none").call(I),P.attr("transform",function(e,n){var r=i==="left"?.5:.5+E.width(),s=t.top+u;return"translate("+r+","+s+")"}).style("opacity",1),H.attr("clip-path","url(#nv-edge-clip-"+v+")").attr("transform",function(e,n){var r=X,i=.5+E.height()+t.top+u;return"translate("+r+","+i+")"}),B.style("opacity",w).style("display",w?"inline":"none").attr("transform",function(e,t){var n=s==="rtl"?E.width()-X*2:0;return"translate("+n+",0)"}).call(I),j.attr("transform",function(e,t){return"translate(0,"+t*(10+u*2)+")"}),j.selectAll("circle").attr("transform",""),j.selectAll("line").attr("x1",16).attr("transform","translate(-8,0)").style("stroke-dasharray","inherit"),j.selectAll("text").attr("text-anchor","start").attr("transform",function(e,t){var n=s==="rtl"?-8:8;return"translate("+n+",0)"})},b.on("toggleMenu",function(e){d3.event.stopPropagation(),w=1-w,R()}),b.on("closeMenu",function(e){w===1&&(w=0,R())})}),E}var t={top:0,right:0,bottom:0,left:0},n=0,r=0,i="right",s="ltr",o="start",u=5,a=10,f=!0,l=!1,c=!1,h=3,p=!1,d={close:"Hide legend",type:"Show legend"},v=Math.floor(Math.random()*1e4),m=function(e){return e.key.length>0||!isNaN(parseFloat(e.key))&&isFinite(e.key)?e.key:"undefined"},g=function(t,n){return e.utils.defaultColor()(t,n)},y=function(e,t){return""},b=d3.dispatch("legendClick","legendMouseover","legendMouseout","toggleMenu","closeMenu"),w=0;return E.dispatch=b,E.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,E):t},E.width=function(e){return arguments.length?(n=Math.round(e),E):n},E.height=function(e){return arguments.length?(r=Math.round(e),E):r},E.id=function(e){return arguments.length?(v=e,E):v},E.key=function(e){return arguments.length?(m=e,E):m},E.color=function(t){return arguments.length?(g=e.utils.getColor(t),E):g},E.classes=function(e){return arguments.length?(y=e,E):y},E.align=function(e){return arguments.length?(i=e,E):i},E.position=function(e){return arguments.length?(o=e,E):o},E.showAll=function(e){return arguments.length?(l=e,E):l},E.collapsed=function(e){return c},E.rowsCount=function(e){return arguments.length?(h=e,E):h},E.lineSpacing=function(e){return arguments.length?(lineSpacing=e,E):lineSpacing},E.strings=function(e){return arguments.length?(d=e,E):d},E.equalColumns=function(e){return arguments.length?(f=e,E):f},E.enabled=function(e){return arguments.length?(p=e,E):p},E.direction=function(e){return arguments.length?(s=e,E):s},E},e.models.scroll=function(){function f(l,c,h,p){var d=l.select("defs"),v=c.select("defs"),m,g,y=h.select(".nv-x.nv-axis"),b=h.select(".nv-barsWrap"),w,E,S=0;return f.init=function(e,t){S=e,u=t,this.gradients(a),this.mask(a),this.scrollTarget(a),this.backShadows(a),this.foreShadows(a),this.assignEvents(a),this.resize(a)},f.pan=function(e){var t=0,r=0,i="",s=0,o=0;if(d3.event){if(d3.event.type==="zoom")s=d3.event.sourceEvent.deltaX||0,o=d3.event.sourceEvent.deltaY||0,t=(Math.abs(s)>Math.abs(o)?s:o)*-1;else if(d3.event.type==="drag")s=d3.event.dx||0,o=d3.event.dy||0,t=n?s:o;else if(d3.event.type!=="click")return 0;r=Math.abs(o)>Math.abs(s)?o:0}return S=Math.min(Math.max(S+t,e),-1),i="translate("+(n?S+",0":"0,"+S)+")",(S+t>0||S+t<e)&&u(r),E.attr("transform",i),b.attr("transform",i),y.select(".nv-wrap.nv-axis").attr("transform",i),S},f.assignEvents=function(e){var t=e?o:null,n=d3.behavior.zoom().on("zoom",t),r=d3.behavior.drag().origin(function(e){return e}).on("drag",t);h.call(n),g.call(n),h.call(r),g.call(r)},f.resize=function(e){if(!e)return;var o=p.labelThickness()+p.tickPadding()/2,u=n,a=u?t.left:o,f=t.top,l=r+(u?0:t[p.orient()]-o),c=i+(u?t[p.orient()]-o:0),h=u?"height":"width",d=u?c:l;m.attr("x",u?0:-t.left).attr("y",0).attr("width",r+(u?0:t.left)).attr("height",i+(u?t.bottom:0)),g.attr("x",a).attr("y",f).attr("width",l).attr("height",c),w.select(".nv-back-shadow-prev").attr("x",a).attr("y",f).attr(h,d),w.select(".nv-back-shadow-more").attr("x",a+(u?r-5:1)).attr("y",f+(u?0:i-4)).attr(h,d),E.select(".nv-fore-shadow-prev").attr("x",a+(u?1:0)).attr("y",f+(u?0:1)).attr(h,d),E.select(".nv-fore-shadow-more").attr("x",a+(u?s-20:0)).attr("y",f+(u?0:s-19)).attr(h,d)},f.gradients=function(t){v.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-back-gradient-prev-"+e);var r=v.select("#nv-back-gradient-prev-"+e);v.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-back-gradient-more-"+e);var i=v.select("#nv-back-gradient-more-"+e);v.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-fore-gradient-prev-"+e);var s=v.select("#nv-fore-gradient-prev-"+e);v.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-fore-gradient-more-"+e);var o=v.select("#nv-fore-gradient-more-"+e);d.selectAll(".nv-scroll-gradient").attr("gradientUnits","objectBoundingBox").attr("x1",0).attr("y1",0).attr("x2",n?1:0).attr("y2",n?0:1),r.append("stop").attr("stop-color","#000").attr("stop-opacity","0.3").attr("offset",0),r.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",1),i.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",0),i.append("stop").attr("stop-color","#000").attr("stop-opacity","0.3").attr("offset",1),s.append("stop").attr("stop-color","#FFF").attr("stop-opacity","1").attr("offset",0),s.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",1),o.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",0),o.append("stop").attr("stop-color","#FFF").attr("stop-opacity","1").attr("offset",1)},f.mask=function(t){v.append("clipPath").attr("class","nv-scroll-mask").attr("id","nv-edge-clip-"+e).append("rect"),m=d.select(".nv-scroll-mask rect"),h.attr("clip-path",t?"url(#nv-edge-clip-"+e+")":"")},f.scrollTarget=function(e){c.select(".nv-scroll-background").append("rect").attr("class","nv-scroll-target").attr("fill","transparent"),g=l.select(".nv-scroll-target")},f.backShadows=function(t){var r=c.select(".nv-scroll-background").append("g").attr("class","nv-back-shadow-wrap");r.append("rect").attr("class","nv-back-shadow-prev"),r.append("rect").attr("class","nv-back-shadow-more"),w=l.select(".nv-back-shadow-wrap");if(t){var i=n?"width":"height";w.select("rect.nv-back-shadow-prev").attr("fill","url(#nv-back-gradient-prev-"+e+")").attr(i,7),w.select("rect.nv-back-shadow-more").attr("fill","url(#nv-back-gradient-more-"+e+")").attr(i,7)}else w.selectAll("rect").attr("fill","transparent")},f.foreShadows=function(t){var r=c.select(".nv-scroll-background").insert("g"
).attr("class","nv-fore-shadow-wrap");r.append("rect").attr("class","nv-fore-shadow-prev"),r.append("rect").attr("class","nv-fore-shadow-more"),E=l.select(".nv-fore-shadow-wrap");if(t){var i=n?"width":"height";E.select("rect.nv-fore-shadow-prev").attr("fill","url(#nv-fore-gradient-prev-"+e+")").attr(i,20),E.select("rect.nv-fore-shadow-more").attr("fill","url(#nv-fore-gradient-more-"+e+")").attr(i,20)}else E.selectAll("rect").attr("fill","transparent")},f}var e,t={},n,r,i,s,o,u,a;return f.id=function(t){return arguments.length?(e=t,f):e},f.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,f):t},f.width=function(e){return arguments.length?(r=e,f):r},f.height=function(e){return arguments.length?(i=e,f):i},f.vertical=function(e){return arguments.length?(n=e,f):n},f.minDimension=function(e){return arguments.length?(s=e,f):s},f.panHandler=function(e){return arguments.length?(o=d3.functor(e),f):o},f.enable=function(e){return arguments.length?(a=e,f):a},f},e.models.scatter=function(){function I(q){return q.each(function(q){function G(){if(!b)return!1;var e,i=d3.merge(q.map(function(e,t){return e.values.map(function(e,n){return[a(c(e,n))*(Math.random()/1e12+1),f(h(e,n))*(Math.random()/1e12+1),t,n,e]}).filter(function(e,t){return w(e[4],t)})}));if(_===!0){if(T){var s=V.select("defs").selectAll(".nv-point-clips").data([u]).enter();s.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+u);var o=V.select("#nv-points-clip-"+u).selectAll("circle").data(i);o.enter().append("circle").attr("r",N),o.exit().remove(),o.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}),V.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+u+")")}i.length<3&&(i.push([a.range()[0]-20,f.range()[0]-20,null,null]),i.push([a.range()[1]+20,f.range()[1]+20,null,null]),i.push([a.range()[0]-20,f.range()[0]+20,null,null]),i.push([a.range()[1]+20,f.range()[1]-20,null,null]));var l=d3.geom.polygon([[-10,-10],[-10,r+10],[n+10,r+10],[n+10,-10]]),p=d3.geom.voronoi(i).map(function(e,t){return{data:l.clip(e),series:i[t][2],point:i[t][3]}}).filter(function(e){return e.series!==null}),d=V.select(".nv-point-paths").selectAll("path").data(p);d.enter().append("path").attr("class",function(e,t){return"nv-path-"+t}),d.exit().remove(),d.attr("d",function(e){return"M"+e.data.join("L")+"Z"}),d.on("click",function(e){if(F)return 0;var n=q[e.series],r=n.values[e.point];M.elementClick({point:r,series:n,pos:[a(c(r,e.point))+t.left,f(h(r,e.point))+t.top],seriesIndex:e.series,pointIndex:e.point})}).on("mouseover",function(e){if(F)return 0;var t=q[e.series],n=t.values[e.point];M.elementMouseover({point:n,series:t,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.series,pointIndex:e.point})}).on("mouseout",function(e,t){if(F)return 0;var n=q[e.series],r=n.values[e.point];M.elementMouseout({point:r,series:n,seriesIndex:e.series,pointIndex:e.point})}).on("mousemove",function(e,t){var n=q[e.series],r=n.values[e.point];M.elementMousemove({point:r,pointIndex:e.point,pos:[d3.event.pageX,d3.event.pageY],id:u})})}else V.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").style("pointer-events","auto").on("click",function(e,n){if(F||!q[e.series])return 0;var r=q[e.series],i=r.values[n];M.elementClick({point:i,series:r,pos:[a(c(i,n))+t.left,f(h(i,n))+t.top],seriesIndex:e.series,pointIndex:n})}).on("mouseover",function(e,t){if(F||!q[e.series])return 0;var n=q[e.series],r=n.values[t];M.elementMouseover({point:r,series:n,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.series,pointIndex:t})}).on("mouseout",function(e,t){if(F||!q[e.series])return 0;var n=q[e.series],r=n.values[t];M.elementMouseout({point:r,series:n,seriesIndex:e.series,pointIndex:t})}).on("mousemove",function(e,t){var n=q[e.series],r=n.values[t];M.elementMousemove({point:r,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:u})});F=!1}var R=n-t.left-t.right,U=r-t.top-t.bottom,W=d3.select(this);q=q.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var X=C&&k&&L?[]:d3.merge(q.map(function(e){return e.values.map(function(e,t){return{x:c(e,t),y:h(e,t),size:p(e,t)}})}));a.domain(C||d3.extent(X.map(function(e){return e.x}).concat(m))),E&&q[0]?S!==0?a.range([(R*S+R)/(2*q[0].values.length),R-R*(1+S)/(2*q[0].values.length)]):a.range([0+Math.sqrt(A[1]/Math.PI),R-Math.sqrt(A[1]/Math.PI)]):a.range([0,R]),f.domain(k||d3.extent(X.map(function(e){return e.y}).concat(g))).range([U,0]),D&&f.nice(),l.domain(L||d3.extent(X.map(function(e){return e.size}).concat(y))).range(A);if(a.domain()[0]===a.domain()[1]||f.domain()[0]===f.domain()[1])O=!0;a.domain()[0]===a.domain()[1]&&(a.domain()[0]?a.domain([a.domain()[0]-a.domain()[0]*.01,a.domain()[1]+a.domain()[1]*.01]):a.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+f.domain()[0]*.01,f.domain()[1]-f.domain()[1]*.01]):f.domain([-1,1])),P=P||a,H=H||f,B=B||l;var V=W.selectAll("g.nv-wrap.nv-scatter").data([q]),$=V.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+u+(O?" nv-single-point":"")),J=$.append("defs"),K=$.append("g"),Q=V.select("g");I.gradient=function(t,n){return e.utils.colorRadialGradient(t,u+"-"+n,{x:.5,y:.5,r:.5,s:0,u:"objectBoundingBox"},i(t,n),V.select("defs"))},K.append("g").attr("class","nv-groups"),K.append("g").attr("class","nv-point-paths"),V.attr("transform","translate("+t.left+","+t.top+")"),J.append("clipPath").attr("id","nv-edge-clip-"+u).append("rect"),V.select("#nv-edge-clip-"+u+" rect").attr("width",R).attr("height",U),Q.attr("clip-path",x?"url(#nv-edge-clip-"+u+")":""),F=!0;var Y=V.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});Y.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(Y.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),Y.attr("class",function(e,t){return o(e,e.series)}).attr("fill",function(e,t){return s(e,e.series)}).attr("stroke",function(e,t){return s(e,e.series)}).classed("hover",function(e){return e.hover}),d3.transition(Y).style("stroke-opacity",1).style("fill-opacity",.5);if(v){var Z=Y.selectAll("circle.nv-point").data(function(e){return e.values});Z.enter().append("circle").attr("cx",function(e,t){return P(c(e,t))}).attr("cy",function(e,t){return H(h(e,t))}).attr("r",function(e,t){return Math.sqrt(l(p(e,t))/Math.PI)}),Z.exit().remove(),d3.transition(Y.exit().selectAll("path.nv-point")).attr("cx",function(e,t){return a(c(e,t))}).attr("cy",function(e,t){return f(h(e,t))}).remove(),Z.attr("class",function(e,t){return"nv-point nv-point-"+t}),d3.transition(Z).attr("cx",function(e,t){return a(c(e,t))}).attr("cy",function(e,t){return f(h(e,t))}).attr("r",function(e,t){return Math.sqrt(l(p(e,t))/Math.PI)})}else{var Z=Y.selectAll("path.nv-point").data(function(e){return e.values});Z.enter().append("path").attr("transform",function(e,t){return"translate("+P(c(e,t))+","+H(h(e,t))+")"}).attr("d",d3.svg.symbol().type(d).size(function(e,t){return l(p(e,t))})),Z.exit().remove(),d3.transition(Y.exit().selectAll("path.nv-point")).attr("transform",function(e,t){return"translate("+a(c(e,t))+","+f(h(e,t))+")"}).remove(),Z.attr("class",function(e,t){return"nv-point nv-point-"+t}),d3.transition(Z).attr("transform",function(e,t){return"translate("+a(c(e,t))+","+f(h(e,t))+")"}).attr("d",d3.svg.symbol().type(d).size(function(e,t){return l(p(e,t))}))}clearTimeout(j),j=setTimeout(G,300),P=a.copy(),H=f.copy(),B=l.copy()}),I}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=i,o=function(e,t){return"nv-group nv-series-"+e.series},u=Math.floor(Math.random()*1e5),a=d3.scale.linear(),f=d3.scale.linear(),l=d3.scale.linear(),c=function(e){return e.x},h=function(e){return e.y},p=function(e){return e.size||1},d=function(e){return e.shape||"circle"},v=!0,m=[],g=[],y=[],b=!0,w=function(e){return!e.notActive},E=!1,S=.1,x=!1,T=!0,N=function(){return 10},C=null,k=null,L=null,A=[16,256],O=!1,M=d3.dispatch("elementClick","elementMouseover","elementMouseout","elementMousemove"),_=!0,D=!1,P,H,B,j,F=!1;return M.on("elementMouseover.point",function(e){b&&d3.select(".nv-chart-"+u+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!0)}),M.on("elementMouseout.point",function(e){b&&d3.select(".nv-chart-"+u+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!1)}),I.dispatch=M,I.color=function(e){return arguments.length?(i=e,I):i},I.fill=function(e){return arguments.length?(s=e,I):s},I.classes=function(e){return arguments.length?(o=e,I):o},I.gradient=function(e){return arguments.length?(gradient=e,I):gradient},I.x=function(e){return arguments.length?(c=d3.functor(e),I):c},I.y=function(e){return arguments.length?(h=d3.functor(e),I):h},I.size=function(e){return arguments.length?(p=d3.functor(e),I):p},I.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,I):t},I.width=function(e){return arguments.length?(n=e,I):n},I.height=function(e){return arguments.length?(r=e,I):r},I.xScale=function(e){return arguments.length?(a=e,I):a},I.yScale=function(e){return arguments.length?(f=e,I):f},I.zScale=function(e){return arguments.length?(l=e,I):l},I.xDomain=function(e){return arguments.length?(C=e,I):C},I.yDomain=function(e){return arguments.length?(k=e,I):k},I.sizeDomain=function(e){return arguments.length?(L=e,I):L},I.sizeRange=function(e){return arguments.length?(A=e,I):A},I.forceX=function(e){return arguments.length?(m=e,I):m},I.forceY=function(e){return arguments.length?(g=e,I):g},I.forceSize=function(e){return arguments.length?(y=e,I):y},I.interactive=function(e){return arguments.length?(b=e,I):b},I.pointActive=function(e){return arguments.length?(w=e,I):w},I.padData=function(e){return arguments.length?(E=e,I):E},I.padDataOuter=function(e){return arguments.length?(S=e,I):S},I.clipEdge=function(e){return arguments.length?(x=e,I):x},I.clipVoronoi=function(e){return arguments.length?(T=e,I):T},I.useVoronoi=function(e){return arguments.length?(_=e,_===!1&&(T=!1),I):_},I.clipRadius=function(e){return arguments.length?(N=e,I):N},I.shape=function(e){return arguments.length?(d=e,I):d},I.onlyCircles=function(e){return arguments.length?(v=e,I):v},I.id=function(e){return arguments.length?(u=e,I):u},I.singlePoint=function(e){return arguments.length?(O=e,I):O},I.nice=function(e){return arguments.length?(D=e,I):D},I},e.models.bubbleChart=function(){function H(n){return n.each(function(n){function p(e){function t(e){return 32-(new Date(e.getFullYear(),e.getMonth(),32)).getDate()}var n=d3.extent(d3.merge(e.map(function(e){return e.values.map(function(e,t){return d3.time.format("%Y-%m-%d").parse(a(e))})}))),r=d3.time.month.range(d3.time.month.floor(n[0]),d3.time.month.ceil(n[1])),i=r.map(function(e){return d3.time.day.offset(d3.time.month.floor(e),t(e)/2-1)});return i}function m(e){var t=d3.nest().key(d).entries(e),n=1e3/t.length,r=n*.25,i=[0,1],s=[0,1],o=d3.scale.linear().domain(i).range(s),u=[],a=0;return t.map(function(e,t){return e.total=0,e.values=e.values.sort(function(e,t){return t.y<e.y?-1:t.y>e.y?1:0}).map(function(t){return e.total+=t.y,t}),e.group=t,e}).sort(function(e,t){return e.total<t.total?-1:e.total>t.total?1:0}).map(function(e,t){return a+=e.total,i=d3.extent(e.values.map(function(e){return e.y})),s=[n*t+r,n*(t+1)-r],o.domain(i).range(s),e.values=e.values.map(function(t){return t.group=e.group,t.opportunity=t.y,t.y=o(t.opportunity),t}),u.push({y:d3.min(e.values.map(function(e){return e.y})),key:e.key}),e}),u}var r=n.properties,s=n.data,c=d3.select(this),h=this;H.update=function(){c.transition().call(H)},H.container=this;if(!s||!s.length)return H;k.disabled=s.map(function(e){return!!e.disabled});var y=d3.nest().key(v).entries(s);y=y.sort(function(e,t){return parseInt(e.key,10)<parseInt(t.key,10)?-1:parseInt(e.key,10)>parseInt(t.key,10)?1:0}).map(function(e,t){return e.series=t,e.classes=e.values[0].classes,e.color=e.values[0].color,e});var b=d3.extent(d3.merge(y.map(function(e){return e.values.map(function(e,t){return d3.time.format("%Y-%m-%d").parse(e.x)})}))),w=[d3.time.month.floor(b[0]),d3.time.day.offset(d3.time.month.ceil(b[1]),-1)],E=m(s),T=d3.extent(d3.merge(y.map(function(e){return e.values.map(function(e,t){return f(e,t)})})).concat(l));N=O.xScale(),C=O.yScale(),M.scale(N),_.scale(C),H.render=function(){var e=e||parseInt(c.style("width"),10),n=n||parseInt(c.style("height"),10),a=e-t.left-t.right,f=n-t.top-t.bottom,l=a,h=f,d={top:0,right:0,bottom:0,left:0},v=Math.sqrt(O.sizeRange()[1]/Math.PI);if(!s||!s.length){var m=c.selectAll(".nv-noData").data([H.strings().noData]);return m.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),m.attr("x",t.left+a/2).attr("y",t.top+f/2).text(function(e){return e}),H}c.selectAll(".nv-noData").remove();var g=c.selectAll("g.nv-wrap.nv-bubbleChart").data([y]),b=g.enter().append("g").attr("class","nvd3 nv-wrap nv-bubbleChart").append("g"),S=g.select("g").attr("class","nv-chartWrap");b.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("width",a+t.left+t.right).attr("height",f+t.top+t.bottom).attr("fill","#FFF"),b.append("g").attr("class","nv-titleWrap");var x=S.select(".nv-titleWrap");b.append("g").attr("class","nv-x nv-axis");var N=S.select(".nv-x.nv-axis");b.append("g").attr("class","nv-y nv-axis");var C=S.select(".nv-y.nv-axis");b.append("g").attr("class","nv-bubblesWrap");var k=S.select(".nv-bubblesWrap");b.append("g").attr("class","nv-legendWrap");var L=S.select(".nv-legendWrap");g.attr("transform","translate("+t.left+","+t.top+")"),i&&r.title&&(x.select(".nv-title").remove(),x.append("text").attr("class","nv-title").attr("x",u==="rtl"?a:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(r.title).attr("stroke","none").attr("fill","black"),d.top+=parseInt(S.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(S.select(".nv-title").style("margin-top"),10)+parseInt(S.select(".nv-title").style("margin-bottom"),10)),o&&(D.id("legend_"+H.id()).strings(H.strings().legend).margin({top:10,right:10,bottom:10,left:10}).align("center").height(f-d.top).key(function(e){return e.key+"%"}),L.datum(y).call(D),D.arrange(a),L.attr("transform","translate(0,"+d.top+")")),d.top+=D.height(),h=f-d.top-d.bottom,M.tickValues(p(y)),N.call(M),d[M.orient()]+=M.height(),d.top+=v,h=f-d.top-d.bottom,_.ticks(E.length).tickValues(E.map(function(e,t){return E[t].y})).tickFormat(function(e,t){return E[t].key}),C.call(_),d[_.orient()]+=_.width(),l=a-d.left-d.right,O.xDomain(w).yDomain(T).width(l).height(h).id(H.id()),k.datum(y.filter(function(e){return!e.disabled})).attr("transform","translate("+d.left+","+d.top+")").transition().duration(H.delay()).call(O),N.attr("transform","translate("+d.left+","+(M.orient()==="bottom"?h+d.top:d.top)+")").transition().call(M),_.tickSize(-l,0),C.attr("transform","translate("+(_.orient()==="left"?d.left:d.left+l)+","+d.top+")").transition().call(_)},D.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,s.filter(function(e){return!e.disabled}).length||s.map(function(e){return e.disabled=!1,g.selectAll(".nv-series").classed("disabled",!1),e}),k.disabled=s.map(function(e){return!!e.disabled}),A.stateChange(k),c.transition().call(H.render)}),A.on("tooltipShow",function(e){x&&P(e,h.parentNode)}),A.on("tooltipHide",function(){x&&e.tooltip.cleanup()}),A.on("tooltipMove",function(t){S&&e.tooltip.position(S,t.pos)}),A.on("changeState",function(e){typeof e.disabled!="undefined"&&(s.forEach(function(t,n){t.disabled=e.disabled[n]}),k.disabled=e.disabled),c.transition().call(H)}),A.on("chartClick",function(e){D.enabled()&&D.dispatch.closeMenu(e)}),H.render()}),H}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!1,o=!0,u="ltr",a=function(e){return e.x},f=function(e){return e.y},l=[0],c,h,p=200,d=function(e){return e.y},v=function(e){return e.y},m=!1,y=0,b=!1,w=function(e){return},E=d3.time.format("%Y-%m-%d"),S=null,x=!0,T=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},N,C,k={},L={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},A=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),O=e.models.scatter().padData(!0).padDataOuter(0).size(function(e){return e.y}).sizeRange([256,1024]).singlePoint(!0),M=e.models.axis().orient("bottom").tickSize(0).tickPadding(4).highlightZero(!1).showMaxMin(!1).ticks(d3.time.months,1).tickFormat(function(e){return d3.time.format("%b")(new Date(e))}),_=e.models.axis().orient("left").tickPadding(7).highlightZero(!1).showMaxMin(!1),D=e.models.legend().align("center"),P=function(t,n,r){var i=t.pos[0],s=t.pos[1],o=t.point.x,u=t.point.y,a=T(t.series.key,o,u,t,H);S=e.tooltip.show([i,s],a,t.value<0?"n":"s",null,n)};return O.dispatch.on("elementMouseover.tooltip",function(e){A.tooltipShow(e)}),O.dispatch.on("elementMouseout.tooltip",function(e){A.tooltipHide(e)}),O.dispatch.on("elementMousemove.tooltip",function(e){A.tooltipMove(e)}),O.dispatch.on("elementClick",function(t){w(t),e.tooltip.cleanup()}),H.dispatch=A,H.scatter=O,H.legend=D,H.xAxis=M,H.yAxis=_,d3.rebind(H,O,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(H,O,"size","zScale","sizeDomain","forceSize","interactive","clipVoronoi","clipRadius"),d3.rebind(H,M,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),H.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var o=r.gradient?function(e,t){return O.gradient(e,e.series)}:i;return O.color(i),O.fill(o),O.classes(s),D.color(i),D.classes(s),H},H.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return H},H.width=function(e){return arguments.length?(n=e,H):n},H.height=function(e){return arguments.length?(r=e,H):r},H.showTitle=function(e){return arguments.length?(i=e,H):i},H.showLegend=function(e){return arguments.length?(o=e,H):o},H.tooltip=function(e){return arguments.length?(S=e,H):S},H.tooltips=function(e){return arguments.length?(x=e,H):x},H.tooltipContent=function(e){return arguments.length?(T=e,H):T},H.state=function(e){return arguments.length?(k=e,H):k},H.delay=function(e){return arguments.length?(p=e,H):p},H.bubbleClick=function(e){return arguments.length?(w=e,H):w},H.groupBy=function(e){return arguments.length?(d=e,H):d},H.filterBy=function(e){return arguments.length?(v=e,H):v},H.colorFill=function(e){return H},H.strings=function(e){if(!arguments.length)return L;for(var t in e)e.hasOwnProperty(t)&&(L[t]=e[t]);return H},H.direction=function(e){return arguments.length?(u=e,_.direction(e),D.direction(e),H):u},H},e.models.funnel=function(){function N(u){return u.each(function(u){function D(){E=G(_),S=Y(),T=Z(_)}function P(){var e=Q(S,E),t=E-2*i*S,n=0,r=24;u.map(function(s,o){return s.values=s.values.map(function(s){return s.height=0,M>0&&(s.height=K(e*s.value/M,t)),s.height<r/2?(n+=s.height-r/2,s.height=r/2):n<0&&s.height+n>r/2&&(s.height+=n,n=0),t+=2*i*s.height,s}),s}),u=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(f)(u);var o=p?[]:d3.extent(d3.merge(u.map(function(e){return e.values.map(function(e,t){return f(e,t)+e.y0})})).concat(c));s.domain(p||o).range([S,0])}function W(){U.selectAll("text").remove(),U.append("text").text(at).call(ct,"nv-label",.85,"11px","middle",ut),U.select(".nv-label").call($,et,function(e,t){ct(e,"nv-label",t,"11px","middle",ut)}),U.append("text").text(m).call(ct,"nv-value",.85,"15px","middle",ut),U.select(".nv-value").append("tspan").text(ft),U.call(ht),U.call(rt),U.classed("nv-label-side",function(e){return e.tooTall||e.tooWide})}function X(){z=U.filter(".nv-label-side"),U.selectAll("polyline").remove(),z.selectAll(".nv-label").remove(),z.append("text").text(at).call(ct,"nv-label",.85,"11px","start","#555"),z.select(".nv-label").call($,tt,function(e,t){ct(e,"nv-label",t,"11px","start","#555")}),z.call(ht),z.select(".nv-value").style({"font-size":"15px","text-anchor":"start",fill:"#555"}),z.call(it);var e=0;z.reverse().each(function(t,n){if(!e){t.labelBottom=t.labelTop+t.labelHeight+A,e=t.labelBottom;return}t.labelTop=Math.max(e,t.labelTop),t.labelBottom=t.labelTop+t.labelHeight+A,e=t.labelBottom}),z.reverse(),e&&e-A>d3.max(s.range())&&(e=0,z.each(function(t,n){if(!e){t.labelBottom=d3.max(s.range())-1,t.labelTop=t.labelBottom-t.labelHeight,e=t.labelTop;return}t.labelBottom=Math.min(e,t.labelBottom),t.labelTop=t.labelBottom-t.labelHeight-A,e=t.labelTop}),e<0&&z.each(function(t,n){t.labelTop-=e,t.labelBottom-=e})),e=0,z.call(ot)}function V(){W(),X()}function $(e,t,n){e.each(function(e){var r=d3.select(this),i=t(e.y,e.y0,0),s=d3.select(r.node().parentNode),o=r.text().split(/\s+/).reverse(),u,a=[],f=0,l=parseFloat(r.attr("dy"));r.text(null);while(u=o.pop())a.push(u),r.text(a.join(" ")),r.node().getComputedTextLength()>i&&a.length>1&&(a.pop(),r.text(a.join(" ")),a=[u],r=s.append("text"),r.text(u).call(n,++f*1.1+l))})}function J(e,t,n,r){var o=s(t),u=s(t+e),a=r/2-i*o,f=r/2-i*u,l=T;return l-a+","+o*n+" "+(l-f)+","+u*n+" "+(l+f)+","+u*n+" "+(l+a)+","+o*n}function K(e,t){var n=t/i/2;return Math.abs(Math.sqrt(e/i+n*n))-n}function Q(e,t){return e*(t-e*i)}function G(e){return Math.round(Math.max(Math.min(C/1.1,x-e),40))}function Y(){return Math.min(E*1.1,(E-E*i)/(2*i))}function Z(e){return E/2+e}function et(e,t){var n=s(t+e/2);return E-n*i*2}function tt(e,t,n){var r=Math.max((x-E)/2,n),o=s(t+e);return r+o*i}function nt(e){return d3.select(e).node().getBBox()}function rt(e){e.each(function(e){var t=nt(this);e.labelHeight=t.height,e.labelWidth=t.width,e.labelTop=s(e.y0+e.y/2)-e.labelHeight/2,e.labelBottom=e.labelTop+e.labelHeight+A,e.tooWide=e.labelWidth>et(e.y-e.labelHeight,e.y0),e.tooTall=e.labelHeight>e.height})}function it(e){e.each(function(e){var t=nt(this);e.labelHeight=t.height,e.labelWidth=t.width,e.labelTop=s(e.y0+e.y),e.labelBottom=e.labelTop+e.labelHeight+A})}function st(e,t){var n=e.length;e.each(function(t,r,o){var u=o?d3.select(e[o-1][r]).data()[0]:null,a=o<n-1?d3.select(e[o+1][r]).data()[0]:null,f=Math.round(t.labelHeight)+.5,l=Math.round(s(t.y0)-t.labelTop)-.5,c=u?u.labelWidth-(t.labelBottom-u.labelBottom)*i:0,h=t.labelWidth,p=a&&f<l?a.labelWidth:0,d=Math.round(Math.max(c,h,p))+L,v=Math.round(tt(0,t.y0,_))-O-L,u="0,"+f+" "+d+","+f+" "+(d+Math.abs(f-l)*i)+","+l+" "+v+","+l;t.labelWidth=d,d3.select(this).attr("points",u)})}function ot(e){var t=(x-E)/2,n=0;e.each(function(e){var t=s(e.y0),r=e.labelBottom>=t?1:0,o=Math.abs(e.labelBottom+L-t)*i,u=t*i,a=e.labelWidth+o+L*3-u;a>=n&&(n=a)}),n=Math.round(n*10)/10,n<=0?(O=t,_=t):n>0&&n<t?(O=t-n,_=t):(O=0,_=n)}function ut(t,n,r){var i=d3.select(this.parentNode).style("fill"),s=e.utils.getTextContrast(i,n);return s}function at(e){return u[e.series].key}function ft(e){var t=u[e.series].count;return t?" ("+t+")":""}function lt(t){var n=e.utils.isRTLChar(t.slice(-1)),r=n?"rtl":"ltr";return"ltr"}function ct(e,t,n,r,i,s){e.attr("x",0).attr("y",0).attr("dy",n+"em").attr("class",t).attr("direction",function(){return lt(e.text())}).style("pointer-events","none").style("text-anchor",i).style("font-size",r).style("fill",s)}function ht(e){e.each(function(e){var t=d3.select(this),n=t.selectAll(".nv-label")[0].length+1,r=.85*n+"em";t.select(".nv-value").attr("dy",r)})}var x=n-t.left-t.right,C=r-t.top-t.bottom,k=d3.select(this),L=5,A=5,O=0,M=0,_=0;u.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,typeof e.value=="undefined"&&(e.value=a(e)),M+=e.value,e}),e}),D(),P();var H=k.selectAll("g.nv-wrap.nv-funnel").data([u]),B=H.enter().append("g").attr("class","nvd3 nv-wrap nv-funnel"),j=B.append("defs"),F=B.append("g"),I=H.select("g");N.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,o+"-"+n,r,g(t,n),H.select("defs"))},F.append("g").attr("class","nv-groups"),H.attr("transform","translate("+t.left+","+t.top+")"),j.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),H.select("#nv-edge-clip-"+o+" rect").attr("width",x+1).attr("height",C+1),I.attr("clip-path",h?"url(#nv-edge-clip-"+o+")":"");var q=H.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});q.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),q.attr("class",b).attr("fill",y).classed("hover",function(e){return e.hover}).classed("nv-active",function(e){return e.active==="active"}).classed("nv-inactive",function(e){return e.active==="inactive"}).style({stroke:"#FFFFFF","stroke-width":3}),q.transition().duration(v).style("stroke-opacity",1).style("fill-opacity",1),q.exit().transition().duration(v).selectAll("polygon.nv-bar").delay(function(e,t){return t*d/u[0].values.length}).attr("points",function(e){return J(e.y,e.y0,0,E)}).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),q.exit().transition().duration(v).selectAll("g.nv-label-value").delay(function(e,t){return t*d/u[0].values.length}).attr("y",0).attr("transform","translate("+T+",0)").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();var R=q.selectAll("polygon.nv-bar").data(function(e){return e.values});R.exit().remove(),R.enter().append("polygon").attr("class","nv-bar").attr("points",function(e){return J(e.y,e.y0,0,E)}),R.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),w.elementMouseover({value:l(e,t),point:e,series:u[e.series],pos:[d3.event.pageX,d3.event.pageY],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),w.elementMouseout({value:l(e,t),point:e,series:u[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mousemove",function(e,t){w.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:o})}).on("click",function(e,t){w.elementClick({value:l(e,t),point:e,series:u[e.series],pos:[d3.event.pageX,d3.event.pageY],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){w.elementDblClick({value:l(e,t),point:e,series:u[e.series],pos:[d3.event.pageX,d3.event.pageY],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()});var U=q.selectAll(".nv-label-value").data(function(e){return e.values});U.enter().append("g").attr("class","nv-label-value").attr("transform","translate("+T+",0)");var z=U.filter(".nv-label-side");V(),D(),P(),V(),D(),P(),V(),D(),R.attr("points",function(e){var t=e.active&&e.active==="active"?1.05:1;return J(e.y,e.y0,1,E*t)}),U.attr("transform",function(e){var t=e.tooTall?0:T,n=e.tooTall?0:e.labelTop;return"translate("+t+","+n+")"}),z.attr("transform",function(e){return"translate("+O+","+e.labelTop+")"}),z.append("polyline").attr("class","nv-label-leader").style({"fill-opacity":0,stroke:"#999","stroke-width":1,"stroke-opacity":.5}),z.reverse(),z.selectAll("polyline").call(st),z.reverse()}),N}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=.3,s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=function(e){return e.height},l=function(e){return e.value},c=[0],h=!0,p,d=0,v=0,m=function(e){return e.label||e.value||e},g=function(t,n){return e.utils.defaultColor()(t,t.series)},y=g,b=function(e,t){return"nv-group nv-series-"+e.series},w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),E=0,S=0,T=0;return N.dispatch=w,N.color=function(e){return arguments.length?(g=e,N):g},N.fill=function(e){return arguments.length?(y=e,N):y},N.classes=function(e){return arguments.length?(b=e,N):b},N.gradient=function(e){return arguments.length?(gradient=e,N):gradient},N.x=function(e){return arguments.length?(u=e,N):u},N.y=function(e){return arguments.length?(a=e,N):a},N.margin=function(e){return arguments.length?(t=e,N):t},N.width=function(e){return arguments.length?(n=e,N):n},N.height=function(e){return arguments.length?(r=e,N):r},N.xScale=function(e){return arguments.length?(x=e,N):x},N.yScale=function(e){return arguments.length?(s=e,N):s},N.yDomain=function(e){return arguments.length?(p=e,N):p},N.forceY=function(e){return arguments.length?(c=e,N):c},N.id=function(e){return arguments.length?(o=e,N):o},N.delay=function(e){return arguments.length?(d=e,N):d},N.clipEdge=function(e){return arguments.length?(h=e,N):h},N.fmtValueLabel=function(e){return arguments.length?(m=d3.functor(e),N):m},N},e.models.funnelChart=function(){function E(f){return f.each(function(f){function q(e,t){var n=[[0]],r=t.filter(function(e){return!e.disabled}).map(function(e){return e.values.map(function(e,t){return e.y0+e.y})}),i=d3.merge(n.concat(r));return y.domain(i).range(i.map(function(e){return c(e)})),i}function R(){S.select(".nvd3.nv-wrap").remove();var e=S.selectAll(".nv-noData").data([E.strings().noData]);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),e.attr("x",t.left+T/2).attr("y",t.top+N/2).text(function(e){return e})}var l=f.properties,d=f.data,S=d3.select(this),x=this,T=(n||parseInt(S.style("width"),10)||960)-t.left-t.right,N=(r||parseInt(S.style("height"),10)||400)-t.top-t.bottom,C=T,k=N,L={top:0,right:0,bottom:0,left:0},A=30;E.update=function(){S.transition().duration(h).call(E)},E.dataSeriesActivate=function(e){var t=e.series;t.active=!t.active||t.active==="inactive"?"active":"inactive",t.values[0].active=t.active,t.active==="active"&&d.filter(function(e){return e.active!=="active"}).map(function(e){return e.values[0].active="inactive",e.active="inactive",e}),d.filter(function(e){return e.active==="active"}).length||d.map(function(e){return e.active="",e.values[0].active="",S.selectAll(".nv-series").classed("nv-inactive",!1),e}),S.call(E)},E.container=this;if(!d||!d.length||!d.filter(function(e){return e.values.length}).length)return R(),E;d.map(function(e,t){return e.series=t,e.values.map(function(t){t.series=e.series}),e.total=d3.sum(e.values,function(e,t){return m.y()(e,t)}),e.total||(e.disabled=!0),e});var O=d.filter(function(e,t){return!e.disabled});O.length||(O=[{values:[]}]);var M=d3.sum(O,function(e){return e.total}),_=d3.sum(O,function(e){return e.count});p.disabled=d.map(function(e){return!!e.disabled}),c=m.yScale();if(!M)return R(),E;S.selectAll(".nv-noData").remove();var D=S.selectAll("g.nv-wrap.nv-funnelChart").data([O]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-funnelChart").append("g"),H=D.select("g").attr("class","nv-chartWrap");P.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF"),H.select(".nv-background").attr("width",T+t.left+t.right).attr("height",N+t.top+t.bottom),P.append("g").attr("class","nv-titleWrap");var B=H.select(".nv-titleWrap");P.append("g").attr("class","nv-funnelWrap");var j=H.select(".nv-funnelWrap");P.append("g").attr("class","nv-legendWrap");var F=H.select(".nv-legendWrap");D.attr("transform","translate("+t.left+","+t.top+")"),i&&l.title&&(B.select(".nv-title").remove(),B.append("text").attr("class","nv-title").attr("x",o==="rtl"?T:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(l.title).attr("stroke","none").attr("fill","black"),L.top+=parseInt(H.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(H.select(".nv-title").style("margin-top"),10)+parseInt(H.select(".nv-title").style("margin-bottom"),10),s||(L.top+=4)),s&&(g.id("legend_"+E.id()).strings(E.strings().legend).margin({top:10,right:10,bottom:10,left:10}).align("center").height(N-L.top),F.datum(d).call(g),g.arrange(T),F.attr("transform","translate("+(o==="rtl"||!g.collapsed()?0:T-g.width())+","+L.top+")"),L.top+=g.height()+4),k=N-L.top-L.bottom,m.width(C).height(k),j.datum(O).attr("transform","translate("+L.left+","+L.top+")").call(m);var I=q(y,O);g.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled
,O.filter(function(e){return!e.disabled}).length||O.map(function(e){return e.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),e}),p.disabled=O.map(function(e){return!!e.disabled}),v.stateChange(p),S.transition().duration(h).call(E)}),v.on("tooltipShow",function(e){a&&b(e,x.parentNode,l)}),v.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),v.on("tooltipMove",function(t){u&&e.tooltip.position(u,t.pos)}),v.on("changeState",function(e){typeof e.disabled!="undefined"&&(O.forEach(function(t,n){t.disabled=e.disabled[n]}),p.disabled=e.disabled),S.transition().duration(h).call(E)}),v.on("chartClick",function(e){g.enabled()&&g.dispatch.closeMenu(e)}),m.dispatch.on("elementClick",function(e){w(d,e)})}),E}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!0,o="ltr",u=null,a=!0,f=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},l,c,h=0,p={},d={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},v=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),m=e.models.funnel(),g=e.models.legend().align("center"),y=d3.scale.linear(),b=function(t,n,r){var i=0;r.total>0&&(i=(t.point.value*100/r.total).toFixed(1));var s=t.pos[0],o=t.pos[1],a=i,l=t.point.value,c=f(t.series.key,a,l,t,E);u=e.tooltip.show([s,o],c,t.value<0?"n":"s",null,n)},w=function(e,t){return};return m.dispatch.on("elementMouseover.tooltip",function(e){v.tooltipShow(e)}),m.dispatch.on("elementMouseout.tooltip",function(e){v.tooltipHide(e)}),m.dispatch.on("elementMousemove.tooltip",function(e){v.tooltipMove(e)}),E.dispatch=v,E.funnel=m,E.legend=g,d3.rebind(E,m,"id","x","y","xDomain","yDomain","forceX","forceY","color","fill","classes","gradient"),d3.rebind(E,m,"fmtValueLabel","clipEdge","delay"),E.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var o=r.gradient?function(e,t){var n={orientation:r.orientation||"vertical",position:r.position||"middle"};return m.gradient(e,e.series,n)}:i;return m.color(i),m.fill(o),m.classes(s),g.color(i),g.classes(s),E},E.x=function(e){return arguments.length?(getX=e,funnelWrap.x(e),E):getX},E.y=function(e){return arguments.length?(getY=e,m.y(e),E):getY},E.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return E},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.showTitle=function(e){return arguments.length?(i=e,E):i},E.showLegend=function(e){return arguments.length?(s=e,E):s},E.tooltip=function(e){return arguments.length?(u=e,E):u},E.tooltips=function(e){return arguments.length?(a=e,E):a},E.tooltipContent=function(e){return arguments.length?(f=e,E):f},E.state=function(e){return arguments.length?(p=e,E):p},E.strings=function(e){if(!arguments.length)return d;for(var t in e)e.hasOwnProperty(t)&&(d[t]=e[t]);return E},E.seriesClick=function(e){return arguments.length?(w=e,E):w},E.direction=function(e){return arguments.length?(o=e,g.direction(e),E):o},E},e.models.gauge=function(){function k(i){return i.each(function(i){function J(e){V.transition().duration(N).ease("elastic").attr("transform","rotate("+Q(e)+")")}function K(e){return e*Math.PI/180}function Q(e){return x+O(e)*A}function G(){return"translate("+b+","+b+")"}var s=i.properties,o=i.data,u=n-t.left-t.right,c=r-t.top-t.bottom,b=Math.min(u/2,c)/((100+C)/100),L=d3.select(this),A=T-x,O=d3.scale.linear().range([0,1]).domain([E,S]),M=0,_=o.map(function(e,t){var n={key:e.key,series:e.series,y0:M,y1:e.y,color:e.color,classes:e.classes};return M=e.y,n}),D=[0].concat(o.map(function(e){return e.y})),P=function(e){return e*b/100},H=s.values[0].t,B=L.selectAll("g.nv-wrap.nv-gauge").data([o]),j=B.enter().append("g").attr("class","nvd3 nv-wrap nv-gauge"),F=j.append("defs"),I=j.append("g"),q=B.select("g");k.gradient=function(t,n){return e.utils.colorRadialGradient(t,a+"-"+n,{x:0,y:0,r:b,s:g/100,u:"userSpaceOnUse"},p(t,n),B.select("defs"))},I.append("g").attr("class","nv-arc-group"),I.append("g").attr("class","nv-labels"),I.append("g").attr("class","nv-pointer"),I.append("g").attr("class","nv-odometer"),B.attr("transform","translate("+(t.left/2+t.right/2+P(C))+","+(t.top+P(C))+")");var R=d3.svg.arc().innerRadius(P(g)).outerRadius(b).startAngle(function(e,t){return K(Q(e.y0))}).endAngle(function(e,t){return K(Q(e.y1))}),U=q.select(".nv-arc-group").attr("transform",G);U.selectAll(".nv-arc-path").data(_).enter().append("path").attr("class","nv-arc-path").attr("stroke","#ffffff").attr("stroke-width",3).attr("d",R).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),m.elementMouseover({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),m.elementMouseout({point:e,index:t,id:a})}).on("mousemove",function(e,t){m.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("click",function(e,t){m.elementClick({point:e,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}).on("dblclick",function(e,t){m.elementDblClick({point:e,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}),U.selectAll(".nv-arc-path").transition().duration(10).attr("class",v).attr("fill",d).attr("d",R);var z=q.select(".nv-labels").attr("transform",G);z.selectAll("text").transition().duration(0).attr("transform",function(e){return"rotate("+Q(e)+") translate(0,"+(-b-P(1.5))+")"}).style("font-size",P(.6)+"em"),z.selectAll("text").data(D).enter().append("text").attr("transform",function(e){return"rotate("+Q(e)+") translate(0,"+(-b-P(1.5))+")"}).text(f).style("text-anchor","middle").style("font-size",P(.6)+"em");if(h){var W=[[Math.round(P(y)/2),0],[0,-Math.round(P(w))],[-Math.round(P(y)/2),0],[0,Math.round(P(y))],[Math.round(P(y)/2),0]],X=q.select(".nv-pointer").attr("transform",G);X.selectAll("path").transition().duration(120).attr("d",d3.svg.line().interpolate("monotone"));var V=X.selectAll("path").data([W]).enter().append("path").attr("d",d3.svg.line().interpolate("monotone")).attr("transform","rotate("+x+")");J(H),q.selectAll(".nv-odom").remove(),q.select(".nv-odomText").transition().duration(0).style("font-size",P(.7)+"em"),q.select(".nv-odometer").append("text").attr("class","nv-odom nv-odomText").attr("x",0).attr("y",0).attr("text-anchor","middle").text(l(H)).style("stroke","none").style("fill","black").style("font-size",P(.7)+"em");var $=q.select(".nv-odomText").node().getBBox();q.select(".nv-odometer").insert("path",".nv-odomText").attr("class","nv-odom nv-odomBox").attr("d",e.utils.roundedRectangle(-$.width/2,-$.height+P(1.5),$.width+P(4),$.height+P(2),P(2))).attr("fill","#eeffff").attr("stroke","black").attr("stroke-width","2px").attr("opacity",.8),q.select(".nv-odometer").attr("transform","translate("+b+","+(t.top+P(70)+$.width)+")")}else q.select(".nv-odometer").select(".nv-odomText").remove(),q.select(".nv-odometer").select(".nv-odomBox").remove(),q.select(".nv-pointer").selectAll("path").remove();k.setGaugePointer=J}),k}var t={top:0,right:0,bottom:0,left:0},n=null,r=null,i=!0,s=function(e){return e.values},o=function(e){return e.key},u=function(e){return e.y},a=Math.floor(Math.random()*1e4),f=d3.format(",g"),l=d3.format(",.f"),c=!0,h=!0,p=function(t,n){return e.utils.defaultColor()(t,t.series)},d=p,v=function(e,t){return"nv-arc-path nv-series-"+e.series},m=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),g=50,y=5,b=5,w=90,E=0,S=10,x=-90,T=90,N=750,C=10;return k.dispatch=m,k.color=function(e){return arguments.length?(p=e,k):p},k.fill=function(e){return arguments.length?(d=e,k):d},k.classes=function(e){return arguments.length?(v=e,k):v},k.gradient=function(e){return arguments.length?(gradient=e,k):gradient},k.margin=function(e){return arguments.length?(t=e,k):t},k.width=function(e){return arguments.length?(n=e,k):n},k.height=function(e){return arguments.length?(r=e,k):r},k.values=function(e){return arguments.length?(s=e,k):s},k.x=function(e){return arguments.length?(o=e,k):o},k.y=function(e){return arguments.length?(u=d3.functor(e),k):u},k.showLabels=function(e){return arguments.length?(c=e,k):c},k.id=function(e){return arguments.length?(a=e,k):a},k.valueFormat=function(e){return arguments.length?(l=e,k):l},k.labelThreshold=function(e){return arguments.length?(labelThreshold=e,k):labelThreshold},k.ringWidth=function(e){return arguments.length?(g=e,k):g},k.pointerWidth=function(e){return arguments.length?(y=e,k):y},k.pointerTailLength=function(e){return arguments.length?(b=e,k):b},k.pointerHeadLength=function(e){return arguments.length?(w=e,k):w},k.minValue=function(e){return arguments.length?(E=e,k):E},k.maxValue=function(e){return arguments.length?(S=e,k):S},k.minAngle=function(e){return arguments.length?(x=e,k):x},k.maxAngle=function(e){return arguments.length?(T=e,k):T},k.transitionMs=function(e){return arguments.length?(N=e,k):N},k.labelFormat=function(e){return arguments.length?(f=e,k):f},k.labelInset=function(e){return arguments.length?(C=e,k):C},k.setPointer=function(e){return arguments.length?(k.setGaugePointer(e),k):k.setGaugePointer},k.isRendered=function(e){return svg!==undefined},k.showPointer=function(e){return arguments.length?(h=e,k):h},k},e.models.gaugeChart=function(){function g(f){return f.each(function(f){var l=f.properties,c=f.data,h=d3.select(this),y=this,b=(n||parseInt(h.style("width"),10)||960)-t.left-t.right,w=(r||parseInt(h.style("height"),10)||400)-t.top-t.bottom,E=b,S=w,x={top:0,right:0,bottom:0,left:0};g.update=function(){h.transition().call(g)},g.container=this;if(!c||!c.length){var T=h.selectAll(".nv-noData").data([g.strings().noData]);return T.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),T.attr("x",t.left+b/2).attr("y",t.top+w/2).text(function(e){return e}),g}h.selectAll(".nv-noData").remove(),c.map(function(e,t){e.series=t});var N=h.selectAll("g.nv-wrap.nv-gaugeChart").data([c]),C=N.enter().append("g").attr("class","nvd3 nv-wrap nv-gaugeChart").append("g"),k=N.select("g").attr("class","nv-chartWrap");C.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("width",b+t.left+t.right).attr("height",w+t.top+t.bottom).attr("fill","#FFF"),C.append("g").attr("class","nv-titleWrap");var L=k.select(".nv-titleWrap");C.append("g").attr("class","nv-gaugeWrap");var A=k.select(".nv-gaugeWrap");C.append("g").attr("class","nv-legendWrap");var O=k.select(".nv-legendWrap");N.attr("transform","translate("+t.left+","+t.top+")"),i&&l.title&&(L.select(".nv-title").remove(),L.append("text").attr("class","nv-title").attr("x",o==="rtl"?b:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(l.title).attr("stroke","none").attr("fill","black"),x.top+=parseInt(k.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(k.select(".nv-title").style("margin-top"),10)+parseInt(k.select(".nv-title").style("margin-bottom"),10)),s&&(v.id("legend_"+g.id()).strings(g.strings().legend).margin({top:10,right:10,bottom:10,left:10}).align("center").height(w-x.top),O.datum(c).call(v),v.arrange(b),O.attr("transform","translate(0,"+x.top+")")),x.top+=v.height()+4,S=w-x.top-x.bottom,d.width(E).height(S),A.datum(f).attr("transform","translate("+x.left+","+x.top+")").transition().call(d),p.on("tooltipShow",function(e){a&&m(e)}),p.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),p.on("tooltipMove",function(t){u&&e.tooltip.position(u,t.pos)})}),g}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!0,o="ltr",u=null,a=!0,f=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},l,c,h={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},p=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove"),d=e.models.gauge(),v=e.models.legend().align("center"),m=function(t,n){var r=t.pos[0],i=t.pos[1],s=d.valueFormat()(t.point.y1-t.point.y0),o=f(t.point.key,s,t,g);u=e.tooltip.show([r,i],o,null,null,n)};return p.on("chartClick",function(e){p.tooltipHide(),v.enabled()&&v.dispatch.closeMenu(e)}),d.dispatch.on("elementMouseover.tooltip",function(e){p.tooltipShow(e)}),d.dispatch.on("elementMouseout.tooltip",function(e){p.tooltipHide(e)}),d.dispatch.on("elementMousemove.tooltip",function(e){p.tooltipMove(e)}),g.dispatch=p,g.gauge=d,g.legend=v,d3.rebind(g,d,"id","x","y","color","fill","classes","gradient"),d3.rebind(g,d,"valueFormat","values","showLabels","showPointer","setPointer","ringWidth","labelThreshold","maxValue","minValue","transitionMs"),g.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-arc-path nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-arc-path nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-arc-path nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var o=r.gradient?function(e,t){return d.gradient(e,e.series)}:i;return d.color(i),d.fill(o),d.classes(s),v.color(i),v.classes(s),g},g.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return g},g.width=function(e){return arguments.length?(n=e,g):n},g.height=function(e){return arguments.length?(r=e,g):r},g.showTitle=function(e){return arguments.length?(i=e,g):i},g.showLegend=function(e){return arguments.length?(s=e,g):s},g.tooltip=function(e){return arguments.length?(u=e,g):u},g.tooltips=function(e){return arguments.length?(a=e,g):a},g.tooltipContent=function(e){return arguments.length?(f=e,g):f},g.strings=function(e){if(!arguments.length)return h;for(var t in e)e.hasOwnProperty(t)&&(h[t]=e[t]);return g},g.direction=function(e){return arguments.length?(o=e,v.direction(e),g):o},g},e.models.line=function(){function b(h){return h.each(function(h){var v=r-n.left-n.right,w=i-n.top-n.bottom,E=d3.select(this);l=t.xScale(),c=t.yScale(),g=g||l,y=y||c;var S=E.selectAll("g.nv-wrap.nv-line").data([h]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),N=T.append("defs"),C=T.append("g"),k=S.select("g");b.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,b.id()+"-"+n,r,d(t,n),S.select("defs"))},C.append("g").attr("class","nv-groups"),C.append("g").attr("class","nv-scatterWrap"),S.attr("transform","translate("+n.left+","+n.top+")"),t.width(v).height(w);var L=S.select(".nv-scatterWrap");d3.transition(L).call(t),N.append("clipPath").attr("id","nv-edge-clip-"+t.id()).append("rect"),S.select("#nv-edge-clip-"+t.id()+" rect").attr("width",v).attr("height",w),k.attr("clip-path",f?"url(#nv-edge-clip-"+t.id()+")":""),L.attr("clip-path",f?"url(#nv-edge-clip-"+t.id()+")":"");var A=S.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});A.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(A.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),A.classed("hover",function(e){return e.hover}).attr("class",m).attr("fill",d).attr("stroke",d),d3.transition(A).style("stroke-opacity",1).style("fill-opacity",.5);var O=A.selectAll("path.nv-area").data(function(e){return a(e)?[e]:[]});O.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y0(function(e,t){return y(o(e,t))}).y1(function(e,t){return y(c.domain()[0]<=0?c.domain()[1]>=0?0:c.domain()[1]:c.domain()[0])}).apply(this,[e.values])}),O.exit().remove(),d3.transition(A.exit().selectAll("path.nv-area")).attr("d",function(e){return d3.svg.area().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y0(function(e,t){return y(o(e,t))}).y1(function(e,t){return y(c.domain()[0]<=0?c.domain()[1]>=0?0:c.domain()[1]:c.domain()[0])}).apply(this,[e.values])}),d3.transition(O).attr("d",function(e){return d3.svg.area().interpolate(p).defined(u).x(function(e,t){return l(s(e,t))}).y0(function(e,t){return c(o(e,t))}).y1(function(e,t){return y(c.domain()[0]<=0?c.domain()[1]>=0?0:c.domain()[1]:c.domain()[0])}).apply(this,[e.values])});var M=A.selectAll("path.nv-line").data(function(e){return[e.values]});M.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y(function(e,t){return y(o(e,t))})),d3.transition(A.exit().selectAll("path.nv-line")).attr("d",d3.svg.line().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y(function(e,t){return y(o(e,t))})),d3.transition(M).attr("d",d3.svg.line().interpolate(p).defined(u).x(function(e,t){return l(s(e,t))}).y(function(e,t){return c(o(e,t))})),g=l.copy(),y=c.copy()}),b}var t=e.models.scatter(),n={top:0,right:0,bottom:0,left:0},r=960,i=500,s=function(e){return e.x},o=function(e){return e.y},u=function(e,t){return!isNaN(o(e,t))&&o(e,t)!==null},a=function(e){return e&&e.area||!1},f=!1,l,c,h=200,p="linear",d=function(t,n){return e.utils.defaultColor()(t,t.series)},v=d,m=function(e,t){return"nv-group nv-series-"+e.series};t.size(16).sizeDomain([16,256]);var g,y;return b.dispatch=t.dispatch,b.scatter=t,d3.rebind(b,t,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","useVoronoi","clipVoronoi","clipRadius","padData","nice"),b.color=function(e){return arguments.length?(d=e,t.color(d),b):d},b.fill=function(e){return arguments.length?(v=e,t.fill(v),b):v},b.classes=function(e){return arguments.length?(m=e,t.classes(m),b):m},b.gradient=function(e){return arguments.length?(gradient=e,b):gradient},b.margin=function(e){return arguments.length?(n.top=typeof e.top!="undefined"?e.top:n.top,n.right=typeof e.right!="undefined"?e.right:n.right,n.bottom=typeof e.bottom!="undefined"?e.bottom:n.bottom,n.left=typeof e.left!="undefined"?e.left:n.left,b):n},b.width=function(e){return arguments.length?(r=e,b):r},b.height=function(e){return arguments.length?(i=e,b):i},b.x=function(e){return arguments.length?(s=e,t.x(e),b):s},b.y=function(e){return arguments.length?(o=e,t.y(e),b):o},b.delay=function(e){return arguments.length?(h=e,b):h},b.clipEdge=function(e){return arguments.length?(f=e,b):f},b.interpolate=function(e){return arguments.length?(p=e,b):p},b.defined=function(e){return arguments.length?(u=e,b):u},b.isArea=function(e){return arguments.length?(a=d3.functor(e),b):a},b},e.models.lineChart=function(){function S(l){return l.each(function(l){function $(){N.select(".nvd3.nv-wrap").remove();var e=N.selectAll(".nv-noData").data([S.strings().noData]);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),e.attr("x",t.left+k/2).attr("y",t.top+L/2).text(function(e){return e})}var d=l.properties,T=l.data,N=d3.select(this),C=this,k=(n||parseInt(N.style("width"),10)||960)-t.left-t.right,L=(r||parseInt(N.style("height"),10)||400)-t.top-t.bottom,A=k,O=L,M={top:0,right:0,bottom:0,left:0},_=0,D=0,P=0;S.update=function(){N.transition().duration(S.delay()).call(S)},S.container=this;if(!T||!T.length||!T.filter(function(e){return e.values.length}).length)return $(),S;T.map(function(e,t){e.series=t,e.total=d3.sum(e.values,function(e,t){return m.y()(e,t)}),e.total||(e.disabled=!0)});var H=T.filter(function(e){return!e.disabled});H=H.length?H:[{values:[]}];var B=d3.sum(H,function(e){return e.total});p.disabled=T.map(function(e){return!!e.disabled}),p.interpolate=m.interpolate(),p.isArea=!m.isArea();var j=[{key:"Linear",disabled:m.interpolate()!=="linear"},{key:"Basis",disabled:m.interpolate()!=="basis"},{key:"Monotone",disabled:m.interpolate()!=="monotone"},{key:"Cardinal",disabled:m.interpolate()!=="cardinal"},{key:"Line",disabled:m.isArea()()===!0},{key:"Area",disabled:m.isArea()()===!1}];c=m.xScale(),h=m.yScale(),g.scale(c),y.scale(h);if(!B)return $(),S;N.selectAll(".nv-noData").remove();var F=N.selectAll("g.nv-wrap.nv-lineChart").data([T]),I=F.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),q=F.select("g").attr("class","nv-chartWrap");I.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("width",k+t.left+t.right).attr("height",L+t.top+t.bottom).attr("fill","#FFF"),I.append("g").attr("class","nv-titleWrap");var R=q.select(".nv-titleWrap");I.append("g").attr("class","nv-x nv-axis");var U=q.select(".nv-x.nv-axis");I.append("g").attr("class","nv-y nv-axis");var z=q.select(".nv-y.nv-axis");I.append("g").attr("class","nv-linesWrap");var W=q.select(".nv-linesWrap");I.append("g").attr("class","nv-controlsWrap");var X=q.select(".nv-controlsWrap");I.append("g").attr("class","nv-legendWrap");var V=q.select(".nv-legendWrap");F.attr("transform","translate("+t.left+","+t.top+")"),i&&d.title&&(R.select(".nv-title").remove(),R.append("text").attr("class","nv-title").attr("x",u==="rtl"?k:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(d.title).attr("stroke","none").attr("fill","black"),M.top+=parseInt(q.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(q.select(".nv-title").style("margin-top"),10)+parseInt(q.select(".nv-title").style("margin-bottom"),10)),s&&(w.id("controls_"+S.id()).strings(S.strings().controls).margin({top:10,right:10,bottom:10,left:10}).align("left").height(L-M.top),X.datum(j).call(w),_=w.calculateWidth()),o&&(b.id("legend_"+S.id()).strings(S.strings().legend).margin({top:10,right:10,bottom:10,left:10}).align("right").height(L-M.top),V.datum(T).call(b),D=b.calculateWidth()),P=k/(_+D),_=Math.floor(_*P),D=Math.floor(D*P),s&&(w.arrange(_),D=k-w.width()),o&&(b.arrange(D),_=k-b.width()),s&&X.attr("transform","translate("+(u==="rtl"?k-w.width():0)+","+M.top+")"),o&&V.attr("transform","translate("+(u==="rtl"?0:k-b.width())+","+M.top+")"),M.top+=Math.max(b.height(),w.height())+4,O=L-M.top-M.bottom,m.width(A).height(O).id(S.id()),W.datum(H).call(m),U.call(g),M[g.orient()]+=g.height(),O=L-M.top-M.bottom,z.call(y),M[y.orient()]+=y.width(),A=k-M.left-M.right,m.width(A).height(O),W.attr("transform","translate("+M.left+","+M.top+")").transition().duration(S.delay()).call(m),g.ticks(A/100).tickSize(-O,0),U.attr("transform","translate("+M.left+","+(g.orient()==="bottom"?O+M.top:M.top)+")").transition().call(g),y.ticks(O/36).tickSize(-A,0),z.attr("transform","translate("+(y.orient()==="left"?M.left:M.left+A)+","+M.top+")").transition().call(y),b.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,T.filter(function(e){return!e.disabled}).length||T.map(function(e){return e.disabled=!1,q.selectAll(".nv-series").classed("disabled",!1),e}),p.disabled=T.map(function(e){return!!e.disabled}),v.stateChange(p),N.transition().duration(S.delay()).call(S)}),w.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;j=j.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Basis":m.interpolate("basis");break;case"Linear":m.interpolate("linear");break;case"Monotone":m.interpolate("monotone");break;case"Cardinal":m.interpolate("cardinal");break;case"Line":m.isArea(!1);break;case"Area":m.isArea(!0)}p.interpolate=m.interpolate(),p.isArea=m.isArea(),v.stateChange(p),N.transition().duration(S.delay()).call(S)}),v.on("tooltipShow",function(e){f&&E(e,C.parentNode)}),v.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),v.on("tooltipMove",function(t){a&&e.tooltip.position(a,t.pos,"s")}),v.on("changeState",function(e){typeof e.disabled!="undefined"&&(T.forEach(function(t,n){t.disabled=e.disabled[n]}),p.disabled=e.disabled),typeof e.interpolate!="undefined"&&(m.interpolate(e.interpolate),p.interpolate=e.interpolate),typeof e.isArea!="undefined"&&(m.isArea(e.isArea),p.isArea=e.isArea),N.transition().duration(S.delay()).call(S)}),v.on("chartClick",function(e){w.enabled()&&w.dispatch.closeMenu(e),b.enabled()&&b.dispatch.closeMenu(e)})}),S}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!1,o=!0,u="ltr",a=null,f=!0,l=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},c,h,p={},d={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},v=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),m=e.models.line().clipEdge(!0),g=e.models.axis().orient("bottom").tickPadding(4).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),y=e.models.axis().orient("left").tickPadding(4).tickFormat(d3.format("s")),b=e.models.legend().align("right"),w=e.models.legend().align("left").color(["#444"]),E=function(t,n){var r=t.pos[0],i=t.pos[1],s=g.tickFormat()(m.x()(t.point,t.pointIndex)),o=y.tickFormat()(m.y()(t.point,t.pointIndex)),u=l(t.series.key,s,o,t,S);a=e.tooltip.show([r,i],u,null,null,n)};return m.dispatch.on("elementMouseover.tooltip",function(e){v.tooltipShow(e)}),m.dispatch.on("elementMouseout.tooltip",function(e){v.tooltipHide(e)}),m.dispatch.on("elementMousemove.tooltip",function(e){v.tooltipMove(e)}),S.dispatch=v,S.lines=m,S.legend=b,S.controls=w,S.xAxis=g,S.yAxis=y,d3.rebind(S,m,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(S,m,"defined","isArea","interpolate","size","clipVoronoi","useVoronoi","interactive","nice"),d3.rebind(S,g,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),S.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n+" nv-stroke"+n};break;case"data":i=function(t,n){return t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var o=r.gradient?function(e,t){var n={orientation:r.orientation||"horizontal",position:r.position||"base"};return m.gradient(e,e.series,n)}:i;return m.color(i),m.fill(o),m.classes(s),b.color(i),b.classes(s),S},S.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return S},S.width=function(e){return arguments.length?(n=e,S):n},S.height=function(e){return arguments.length?(r=e,S):r},S.showTitle=function(e){return arguments.length?(i=e,S):i},S.showControls=function(e){return arguments.length?(s=e,S):s},S.showLegend=function(e){return arguments.length?(o=e,S):o},S.tooltip=function(e){return arguments.length?(a=e,S):a},S.tooltips=function(e){return arguments.length?(f=e,S):f},S.tooltipContent=function(e){return arguments.length?(l=e,S):l},S.state=function(e){return arguments.length?(p=e,S):p},S.strings=function(e){if(!arguments.length)return d;for(var t in e)e.hasOwnProperty(t)&&(d[t]=e[t]);return S},S.direction=function(e){return arguments.length?(u=e,y.direction(e),b.direction(e),w.direction(e),S):u},S},e.models.lineWithFocusChart=function(){function C(e){return e.each(function(S){function R(e){var t=+(e=="e"),n=t?1:-1,r=M/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function U(){a.empty()||a.extent(w),I.data([a.empty()?g.domain():w]).each(function(e,t){var n=g(e[0])-v.range()[0],r=v.range()[1]-g(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",g(e[1])).attr("width",r<0?0:r)})}function z(){w=a.empty()?null:a.extent(),extent=a.empty()?g.domain():a.extent(),T.brush({extent:extent,brush:a}),U();var e=H.select(".nv-focus .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}).map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return t.x()(e,n)>=extent[0]&&t.x()(e,n)<=extent[1]})}}));d3.transition(e).call(t),d3.transition(H.select(".nv-focus .nv-x.nv-axis")).call(r),d3.transition(H.select(".nv-focus .nv-y.nv-axis")).call(i)}var k=d3.select(this),L=this,A=(h||parseInt(k.style("width"))||960)-f.left-f.right,O=(p||parseInt(k.style("height"))||400)-f.top-f.bottom-d,M=d-l.top-l.bottom;C.update=function(){C(e)},C.container=this;if(!S||!S.length||!S.filter(function(e){return e.values.length}).length){var _=k.selectAll(".nv-noData").data([x]);return _.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),_.attr("x",f.left+A/2).attr("y",f.top+O/2).text(function(e){return e}),C}k.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale(),g=n.xScale(),y=n.yScale();var D=k.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([S]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),H=D.select("g");P.append("g").attr("class","nv-legendWrap");var B=P.append("g").attr("class","nv-focus");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-linesWrap");var j=P.append("g").attr("class","nv-context");j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-linesWrap"),j.append("g").attr("class","nv-brushBackground"),j.append("g").attr("class","nv-x nv-brush"),b&&(u.id("legend_"+C.id()).margin({top:10,right:10,bottom:10,left:10}).align("right").height(O-f.top),H.select(".nv-legendWrap").datum(S).call(u),u.arrange(A),f.top!=u.height()&&(f.top=u.height(),O=(p||parseInt(k.style("height"))||400)-f.top-f.bottom-d),H.select(".nv-legendWrap").attr("transform","translate(0,"+ -f.top+")")),D.attr("transform","translate("+f.left+","+f.top+")"),t.width(A).height(O).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),n.defined(t.defined()).width(A).height(M).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),H.select(".nv-context").attr("transform","translate(0,"+(O+f.bottom+l.top)+")");var F=H.select(".nv-context .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}));d3.transition(F).call(n),r.scale(v).ticks(A/100).tickSize(-O,0),i.scale(m).ticks(O/36).tickSize(-A,0),H.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+O+")"),a.x(g).on("brush",z),w&&a.extent(w);var I=H.select(".nv-brushBackground").selectAll("g").data([w||a.extent()]),q=I.enter().append("g");q.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",M),q.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",M),gBrush=H.select(".nv-x.nv-brush").call(a),gBrush.selectAll("rect").attr("height",M),gBrush.selectAll(".resize").append("path").attr("d",R),z(),s.scale(g).ticks(A/100).tickSize(-M,0),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),d3.transition(H.select(".nv-context .nv-x.nv-axis")).call(s),o.scale(y).ticks(M/36).tickSize(-A,0),d3.transition(H.select(".nv-context .nv-y.nv-axis")).call(o),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),u.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,S.filter(function(e){return!e.disabled}).length||S.map(function(e){return e.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(C)}),T.on("tooltipShow",function(e){E&&N(e,L.parentNode)})}),C}var t=e.models.line(),n=e.models.line(),r=e.models.axis(),i=e.models.axis(),s=e.models.axis(),o=e.models.axis(),u=e.models.legend(),a=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},l={top:0,right:30,bottom:20,left:60},c=e.utils.defaultColor(),h=null,p=null,d=100,v,m,g,y,b=!0,w=null,E=!0,S=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},x="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","brush");t.clipEdge(!0),n.interactive(!1),r.orient("bottom").tickPadding(5),i.orient("left"),s.orient("bottom").tickPadding(5),o.orient("left"
);var N=function(n,s){var o=n.pos[0]+(s.offsetLeft||0),u=n.pos[1]+(s.offsetTop||0),a=r.tickFormat()(t.x()(n.point,n.pointIndex)),f=i.tickFormat()(t.y()(n.point,n.pointIndex)),l=S(n.series.key,a,f,n,C);e.tooltip.show([o,u],l,null,null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+f.left,e.pos[1]+f.top],T.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){T.tooltipHide(e)}),T.on("tooltipHide",function(){E&&e.tooltip.cleanup()}),C.dispatch=T,C.legend=u,C.lines=t,C.lines2=n,C.xAxis=r,C.yAxis=i,C.x2Axis=s,C.y2Axis=o,d3.rebind(C,t,"defined","isArea","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),C.x=function(e){return arguments.length?(t.x(e),n.x(e),C):t.x},C.y=function(e){return arguments.length?(t.y(e),n.y(e),C):t.y},C.margin=function(e){return arguments.length?(f.top=typeof e.top!="undefined"?e.top:f.top,f.right=typeof e.right!="undefined"?e.right:f.right,f.bottom=typeof e.bottom!="undefined"?e.bottom:f.bottom,f.left=typeof e.left!="undefined"?e.left:f.left,C):f},C.margin2=function(e){return arguments.length?(l=e,C):l},C.width=function(e){return arguments.length?(h=e,C):h},C.height=function(e){return arguments.length?(p=e,C):p},C.height2=function(e){return arguments.length?(d=e,C):d},C.color=function(t){return arguments.length?(c=e.utils.getColor(t),u.color(c),C):c},C.showLegend=function(e){return arguments.length?(b=e,C):b},C.tooltips=function(e){return arguments.length?(E=e,C):E},C.tooltipContent=function(e){return arguments.length?(S=e,C):S},C.interpolate=function(e){return arguments.length?(t.interpolate(e),n.interpolate(e),C):t.interpolate()},C.noData=function(e){return arguments.length?(x=e,C):x},C.xTickFormat=function(e){return arguments.length?(r.tickFormat(e),s.tickFormat(e),C):r.tickFormat()},C.yTickFormat=function(e){return arguments.length?(i.tickFormat(e),o.tickFormat(e),C):i.tickFormat()},C},e.models.multiBar=function(){function O(c){return c.each(function(c){y=l?g?72:30:20;var h=d3.select(this),w=g?"vertical":"horizontal",M=n-t.left-t.right,_=r-t.top-t.bottom,D=g?M:_,P=g?_:M,H=g?"width":"height",B=g?"height":"width",j=0,F=0,I=g?"x":"y",q=g?"y":"x",R=0,U=0,z=0,W=function(e,t){return Math.max(Math.round(Math.abs(s(a(e,t))-s(0))),0)},X=function(){return i.rangeBand()/(l?1:c.length)};l&&(c=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(c)),l&&c[0].values.map(function(e,t){var n=0,r=0;c.map(function(e){var i=e.values[t];i.size=Math.abs(i.y),i.y<0?(i.y1=r-(g?0:i.size),r-=i.size):(i.y1=n+(g?i.size:0),n+=i.size)})});var V=E&&S?[]:d3.merge(c.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0,y1:e.y1}})}));z=c[0].values.length,U=c.length,O.resetDimensions=function(e,i){n=e,r=i,M=e-t.left-t.right,_=i-t.top-t.bottom,D=g?M:_,P=g?_:M},O.resetScale=function(){M=n-t.left-t.right,_=r-t.top-t.bottom,j=g?M:_,F=g?_:M;var o=l?y:y*U+y,u=y*(l?.25:1),a=Math.max(.25,(D-(z*o+u))/(2*o));m?i.domain(E||V.map(function(e){return e.x})).rangeBands([0,D],.3):i.domain(E||V.map(function(e){return e.x})).rangeRoundBands([0,D],.25,a),s.domain(S||d3.extent(V.map(function(e){var t=g?0:e.y,n=g?e.y:0;return l?e.y>0?e.y1+t:e.y1+n:e.y}).concat(f))).range(g?[_,0]:[0,M]),x&&s.nice(),L=L||i,A=A||s,!l&&(d==="top"||d===!0)&&(R=e.utils.maxStringSetLength(V.map(function(e){return e.y}),h,v),R+=8,g?s.range([P-(s.domain()[0]<0?R:0),s.domain()[1]>0?R:0]):s.range([s.domain()[0]<0?R:0,P-(s.domain()[1]>0?R:0)]))},O.resetScale();var $=h.selectAll(".nvd3.nv-wrap").data([c]),J=$.enter().append("g"),K=J.append("defs"),Q=J.append("g"),G=$.select("g");$.attr("class","nvd3 nv-wrap nv-multibar"+(g?"":"Horizontal")),O.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,o+"-"+n,r,T(t,n),$.select("defs"))},Q.append("g").attr("class","nv-groups"),$.attr("transform","translate("+t.left+","+t.top+")"),p&&(K.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),$.select("#nv-edge-clip-"+o+" rect").attr("width",M).attr("height",_)),G.attr("clip-path",p?"url(#nv-edge-clip-"+o+")":"");var Y=$.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});Y.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),Y.exit().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).selectAll("g.nv-bar").attr("y",function(e){return l?A(e.y0):A(0)}).attr(H,0).remove(),Y.attr("class",C).attr("fill",N).classed("hover",function(e){return e.hover}).classed("nv-active",function(e){return e.active==="active"}).classed("nv-inactive",function(e){return e.active==="inactive"}).style({"stroke-opacity":1,"fill-opacity":1});var Z=Y.selectAll("g.nv-bar").data(function(e){return e.values},function(e,t){return e.series+"-"+e.x});Z.exit().remove();var et=Z.enter().append("g").attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(e,t,n){var r={x:l?0:n*X()+i(u(e,t)),y:A(l?e.y0:0)};return"translate("+r[I]+","+r[q]+")"});et.append("rect").attr(H,0).attr(B,0),Z.on("mouseover",function(e,t,n){d3.select(this).classed("hover",!0),k.elementMouseover({value:a(e,t),point:e,series:c[n],pos:[d3.event.pageX,d3.event.pageY],pointIndex:t,seriesIndex:n,e:d3.event})}).on("mouseout",function(e,t,n){d3.select(this).classed("hover",!1),k.elementMouseout({value:a(e,t),point:e,series:c[n],pointIndex:t,seriesIndex:n,e:d3.event})}).on("mousemove",function(e,t,n){k.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:o})}).on("click",function(e,t,n){k.elementClick({value:a(e,t),point:e,series:c[n],pos:[i(u(e,t))+i.rangeBand()*(l?c.length/2:n+.5)/c.length,s(a(e,t)+(l?e.y0:0))],pointIndex:t,seriesIndex:n,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t,n){k.elementDblClick({value:a(e,t),point:e,series:c[n],pos:[i(u(e,t))+i.rangeBand()*(l?c.length/2:n+.5)/c.length,s(a(e,t)+(l?e.y0:0))],pointIndex:t,seriesIndex:n,e:d3.event}),d3.event.stopPropagation()}),l?Z.attr("transform",function(e,t){var n=e.active&&e.active==="active"?i.rangeBand()*.1:0,r={x:Math.round(i(u(e,t))-n),y:Math.round(s(e.y1))};return"translate("+r[I]+","+r[q]+")"}).select("rect").attr(q,function(e,t){return g?a(e,t)<0?2:-2:a(e,t)<0?-2:2}).attr(I,0).attr(B,W).attr(H,function(e,t){var n=e.active&&e.active==="active"?1.2:1;return i.rangeBand()*n}):Z.attr("transform",function(e,t,n){var r=e.active&&e.active==="active"?i.rangeBand()*.1/c.length:0,o={x:Math.round(n*X()+i(u(e,t))-r),y:Math.round(a(e,t)<0?g?s(0):s(a(e,t)):g?s(a(e,t)):s(0))};return"translate("+o[I]+","+o[q]+")"}).select("rect").attr(q,function(e,t){return g?a(e,t)<0?2:-2:a(e,t)<0?-2:2}).attr(I,0).attr(B,W).attr(H,function(e,t){var n=e.active&&e.active==="active"?1.2:1;return Math.round(i.rangeBand()*n/c.length)}),et.append("text").attr("class","nv-label-value");var tt=Z.select(".nv-label-value");tt.text(function(e,t){return d?v(a(e,t)):""}).attr("fill-opacity",0).attr("stroke-opacity-opacity",0);if(d){var nt=tt[0][0].getBBox(),rt=g?nt.height:nt.width;tt.attr("text-anchor",function(e,t){var n="middle",r=a(e,t)<0;if(g&&l)n="middle";else{switch(d){case"start":n=r?"end":"start";break;case"middle":n="middle";break;case"end":n=r?"start":"end";break;case"top":default:n=g?r?"end":"start":l?r?"start":"end":r?"end":"start"}n=b==="rtl"&&n!=="middle"?n==="start"?"end":"start":n}return n}).attr("dy",function(e,t){var n=0,r=a(e,t)<0;if(l&&g)switch(d){case"start":n=r?"0.71em":0;break;case"middle":n="0.35em";break;case"top":case"end":default:n=r?0:"0.71em"}else n="0.35em";return n}).attr("x",function(e,t){var n=0,r=a(e,t)<0;if(g&&l)n=X()/2;else{switch(d){case"start":n=W(e,t)*(r?0:-1)+6*(r?-1:1);break;case"middle":n=-W(e,t)/2;break;case"end":n=W(e,t)*(r?-1:0)+4*(r?1:-1);break;case"top":default:n=W(e,t)*(r?-1:0)+4*(r?-1:1)*(l?-1:1)}g||(n+=W(e,t))}return n}).attr("y",function(e,t){var n=0,r=a(e,t)<0;if(g&&l)switch(d){case"start":n=W(e,t)*(r?0:1)+6*(r?1:-1);break;case"middle":n=W(e,t)/2+(r?1:-1);break;case"end":case"top":default:n=W(e,t)*(r?1:0)+4*(r?-1:1)}else n=X()/2;return n}).attr("transform","rotate("+(!l&&g?-90:0)+" 0,0)").style("fill",function(t,n,r){if(!!l||d!=="top"&&d!==!0){var i=d3.select(this.previousSibling).style("fill"),s=e.utils.getTextContrast(i,n);return s}return"#000"}).attr("fill-opacity",function(e,t){var n=W(e,t);return a(e,t)===0||n<rt?0:1}).attr("stroke-opacity",function(e,t){var n=W(e,t);return a(e,t)===0||n<rt?0:1})}L=i.copy(),A=s.copy()}),O}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=!1,c=null,h,p=!0,d=!1,v=d3.format(",.2s"),m=!1,g=!0,y=60,b="ltr",w=200,E,S,x=!1,T=function(t,n){return e.utils.defaultColor()(t,t.series)},N=T,c=null,C=function(e,t){return"nv-group nv-series-"+e.series},k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),L,A;return O.dispatch=k,O.color=function(e){return arguments.length?(T=e,O):T},O.fill=function(e){return arguments.length?(N=e,O):N},O.classes=function(e){return arguments.length?(C=e,O):C},O.gradient=function(e){return arguments.length?(gradient=e,O):gradient},O.x=function(e){return arguments.length?(u=e,O):u},O.y=function(e){return arguments.length?(a=e,O):a},O.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return O},O.width=function(e){return arguments.length?(n=e,O):n},O.height=function(e){return arguments.length?(r=e,O):r},O.xScale=function(e){return arguments.length?(i=e,O):i},O.yScale=function(e){return arguments.length?(s=e,O):s},O.xDomain=function(e){return arguments.length?(E=e,O):E},O.yDomain=function(e){return arguments.length?(S=e,O):S},O.forceY=function(e){return arguments.length?(f=e,O):f},O.stacked=function(e){return arguments.length?(l=e,O):l},O.clipEdge=function(e){return arguments.length?(p=e,O):p},O.barColor=function(t){return arguments.length?(c=e.utils.getColor(t),O):c},O.disabled=function(e){return arguments.length?(h=e,O):h},O.id=function(e){return arguments.length?(o=e,O):o},O.delay=function(e){return arguments.length?(w=e,O):w},O.showValues=function(e){return arguments.length?(d=e,O):d},O.valueFormat=function(e){return arguments.length?(v=e,O):v},O.withLine=function(e){return arguments.length?(m=e,O):m},O.vertical=function(e){return arguments.length?(g=e,O):g},O.baseDimension=function(e){return arguments.length?(y=e,O):y},O.direction=function(e){return arguments.length?(b=e,O):b},O.nice=function(e){return arguments.length?(x=e,O):x},O},e.models.multiBarChart=function(){function O(m){return m.each(function(m){function ct(e){return e==="width"?t&&c?Math.max(z,Q):z:e==="height"?!t&&c?Math.max(W,Q):W:0}function ht(){q.select(".nvd3.nv-wrap").remove();var e=q.selectAll(".nv-noData").data([O.strings().noData]);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),e.attr("x",n.left+R/2).attr("y",n.top+U/2).text(function(e){return e})}var k=this,M=t?"multibarChart":"multiBarHorizontalChart",_=m?m.properties:{},D=m?m.data:null,P=[],H=[],B=0,j=[],F=0,I=0,q=d3.select(this),R=(r||parseInt(q.style("width"),10)||960)-n.left-n.right,U=(i||parseInt(q.style("height"),10)||400)-n.top-n.bottom,z=z||R,W=W||U,X={top:0,right:0,bottom:0,left:0},V="",$=0,J=0,K=0,Q=0,G=0,Y=E.stacked()?t?60:30:20,Z=0;O.update=function(){q.transition().call(O)},O.dataSeriesActivate=function(e){var t=e.series;t.active=!t.active||t.active==="inactive"?"active":"inactive",t.values.map(function(e){e.active=t.active}),t.active==="active"&&D.filter(function(e){return e.active!=="active"}).map(function(e){return e.active="inactive",e.values.map(function(e){e.active="inactive"}),e}),D.filter(function(e){return e.active==="active"}).length||D.map(function(e){return e.active="",e.values.map(function(e){e.active=""}),q.selectAll(".nv-series").classed("nv-inactive",!1),e}),q.call(O)},O.container=this;if(!D||!D.length||!D.filter(function(e){return e.values.length}).length)return ht(),O;s=s&&_.title;var et=[{key:"Grouped",disabled:v.stacked},{key:"Stacked",disabled:!v.stacked}];g&&D.map(function(e){return e._values||(e._values=e.values),e}),D.map(function(e,t){e.series=t,e.total=d3.sum(e.values,function(e){return e.y}),e.total||(e.disabled=!0)}),H=_.values.map(function(e,t){return e.t=d3.sum(D.map(function(t,n){return t.disabled?0:(g?t._values:t.values).filter(function(t,n){return E.x()(t,n)===e.group}).map(function(e,t){return E.y()(e,t)})})),e}),B=d3.sum(H,function(e){return e.t}),P=_.labels.filter(function(e,t){return g?H[t].t!==0:!0}).map(function(e){return e.l}),j=D.filter(function(e,t){return!e.disabled&&(!e.type||e.type==="bar")}),g&&j.map(function(e,t){return e.values=e._values.filter(function(e,t){return H[t].t!==0}).map(function(t,n){return{series:e.series,x:n+1,y:t.y,y0:t.y0,active:typeof e.active!="undefined"?e.active:""}}),e});if(!B)return ht(),O;q.selectAll(".nv-noData").remove(),j.length||(j=[{values:[]}]),v.disabled=D.map(function(e){return!!e.disabled}),v.stacked=E.stacked(),I=P.length,F=j.length,G=v.stacked?Y:Y*F+Y,Z=Y*(v.stacked?.25:1),Q=I*G+Z,b=Q>(t?z:W),p=E.xScale(),d=E.yScale(),S.orient(t?"bottom":"left").scale(p).tickFormat(function(e,t){return P[t]||"undefined"}),x.orient(t?"left":"bottom").scale(d);var tt=q.selectAll(".nvd3.nv-wrap").data([D]),nt=tt.enter().append("g").attr("class","nvd3 nv-wrap").append("g"),rt=tt.select("g").attr("class","nv-chartWrap");tt.attr("class","nvd3 nv-wrap nv-"+M),nt.append("defs"),nt.append("g").attr("class","nv-scroll-background"),nt.append("g").attr("class","nv-titleWrap");var it=rt.select(".nv-titleWrap");nt.append("g").attr("class","nv-y nv-axis");var st=rt.select(".nv-y.nv-axis");nt.append("g").attr("class","nv-scroll-wrap");var ot=rt.select(".nv-scroll-wrap");nt.select(".nv-scroll-wrap").append("g").attr("class","nv-x nv-axis");var ut=rt.select(".nv-x.nv-axis");nt.select(".nv-scroll-wrap").append("g").attr("class","nv-barsWrap");var at=rt.select(".nv-barsWrap");nt.append("g").attr("class","nv-controlsWrap");var ft=rt.select(".nv-controlsWrap");nt.append("g").attr("class","nv-legendWrap");var lt=rt.select(".nv-legendWrap");tt.attr("transform","translate("+n.left+","+n.top+")"),s&&(it.select(".nv-title").remove(),it.append("text").attr("class","nv-title").attr("x",a==="rtl"?R:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(_.title).attr("stroke","none").attr("fill","black"),X.top+=parseInt(rt.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(rt.select(".nv-title").style("margin-top"),10)+parseInt(rt.select(".nv-title").style("margin-bottom"),10)),o&&(N.id("controls_"+O.id()).strings(O.strings().controls).margin({top:10,right:10,bottom:10,left:10}).align("left").height(U-X.top),ft.datum(et).call(N),$=N.calculateWidth()),u&&(E.barColor()&&D.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()}),T.id("legend_"+O.id()).strings(O.strings().legend).margin({top:10,right:10,bottom:10,left:10}).align("right").height(U-X.top),lt.datum(D).call(T),J=T.calculateWidth()),K=R/($+J),$=Math.floor($*K),J=Math.floor(J*K),o&&(N.arrange($),J=R-N.width()),u&&(T.arrange(J),$=R-T.width()),o&&ft.attr("transform","translate("+(a==="rtl"?R-N.width():0)+","+X.top+")"),u&&lt.attr("transform","translate("+(a==="rtl"?0:R-T.width())+","+X.top+")"),X.top+=Math.max(T.height(),N.height())+4,W=U-X.top-X.bottom,E.vertical(t).baseDimension(Y).disabled(D.map(function(e){return e.disabled})).width(ct("width")).height(ct("height")).clipEdge(!1),at.data([j]).call(E),st.call(x),X[x.orient()]+=t?x.width():x.height(),z=R-X.left-X.right,W=U-X.top-X.bottom,E.resetDimensions(ct("width"),ct("height")),E.resetScale(),ut.call(S),X[S.orient()]+=t?S.height():S.width(),z=R-X.left-X.right,W=U-X.top-X.bottom,E.resetDimensions(ct("width"),ct("height")),E.resetScale(),ot.attr("transform","translate("+X.left+","+X.top+")"),at.transition().call(E),V="translate(",V+=t?0:S.orient()==="left"?0:z,V+=",",V+=t?S.orient()==="bottom"?W:0:0,V+=")",ut.attr("transform",V).transition().call(S),ut.select(".nv-axislabel").attr("x",(t?z:-W)/2),V="translate(",V+=X.left+(t?x.orient()==="left"?0:z:0),V+=",",V+=X.top+(t?0:x.orient()==="bottom"?W:0),V+=")",x.tickSize(t?-z:-W,0),st.attr("transform",V).transition().call(x);if(c){var pt=(t?z:W)-Q,dt=function(){y.tooltipHide(d3.event),w=C.pan(pt),ut.select(".nv-axislabel").attr("x",(t?z-w*2:w*2-W)/2)};C.id(O.id()).enable(b).vertical(t).width(z).height(W).margin(X).minDimension(Q).panHandler(dt),C(rt,nt,ot,S),C.init(w,h),C.panHandler()()}T.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,g&&D.map(function(n,r){return n._values.map(function(n,r){return n.disabled=r===t?e.disabled:n.disabled?!0:!1,n}),n}),D.filter(function(e){return!e.disabled}).length||D.map(function(e){return e.disabled=!1,rt.selectAll(".nv-series").classed("disabled",!1),e}),v.disabled=D.map(function(e){return!!e.disabled}),y.stateChange(v),q.transition().call(O)}),N.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;et=et.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":E.stacked(!1);break;case"Stacked":E.stacked(!0)}v.stacked=E.stacked(),y.stateChange(v),q.transition().call(O)}),y.on("tooltipShow",function(e){l&&L(e,k.parentNode,H)}),y.on("tooltipHide",function(){l&&e.tooltip.cleanup()}),y.on("tooltipMove",function(n){f&&e.tooltip.position(f,n.pos,t?"s":"w")}),y.on("changeState",function(e){typeof e.disabled!="undefined"&&(D.forEach(function(t,n){t.disabled=e.disabled[n]}),v.disabled=e.disabled),typeof e.stacked!="undefined"&&(E.stacked(e.stacked),v.stacked=e.stacked),q.transition().call(O)}),y.on("chartClick",function(e){N.enabled()&&N.dispatch.closeMenu(e),T.enabled()&&T.dispatch.closeMenu(e)}),E.dispatch.on("elementClick",function(e){A(D,e)})}),O}var t=!0,n={top:10,right:10,bottom:10,left:10},r=null,i=null,s=!1,o=!1,u=!0,a="ltr",f=null,l=!0,c=!0,h=function(e){return},p,d,v={},m={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},g=!0,y=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),b=!1,w=0,E=e.models.multiBar().stacked(!1),S=e.models.axis().tickSize(0).tickPadding(4).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),x=e.models.axis().tickPadding(4).tickFormat(d3.format("s")),T=e.models.legend(),N=e.models.legend().color(["#444"]),C=e.models.scroll(),k=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},L=function(n,r,i){var s=n.pos[0],o=n.pos[1],u=i?(n.point.y*100/i[n.pointIndex].t).toFixed(1):S.tickFormat()(E.x()(n.point,n.pointIndex)),a=x.tickFormat()(E.y()(n.point,n.pointIndex)),l=k(n.series.key,u,a,n,O),c=n.value<0?t?"n":"e":t?"s":"w";f=e.tooltip.show([s,o],l,c,null,r)},A=function(e,t){return};return E.dispatch.on("elementMouseover.tooltip",function(e){y.tooltipShow(e)}),E.dispatch.on("elementMouseout.tooltip",function(e){y.tooltipHide(e)}),E.dispatch.on("elementMousemove.tooltip",function(e){y.tooltipMove(e)}),O.dispatch=y,O.multibar=E,O.legend=T,O.controls=N,O.xAxis=S,O.yAxis=x,d3.rebind(O,E,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(O,E,"stacked","showValues","valueFormat","nice"),d3.rebind(O,S,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),O.colorData=function(n){var r=arguments[0],i=arguments[1]||{},s=function(t,n){return e.utils.defaultColor()(t,t.series)},o=function(e,t){return"nv-group nv-series-"+e.series};switch(r){case"graduated":s=function(e,t){return d3.interpolateHsl(d3.rgb(i.c1),d3.rgb(i.c2))(e.series/i.l)};break;case"class":s=function(){return"inherit"},o=function(e,t){var n=e.series*(i.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":s=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},o=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var u=i.gradient?function(e,n){var r={orientation:i.orientation||(t?"vertical":"horizontal"),position:i.position||"middle"};return E.gradient(e,e.series,r)}:s;return E.color(s),E.fill(u),E.classes(o),T.color(s),T.classes(o),O},O.margin=function(e){if(!arguments.length)return n;for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return O},O.vertical=function(e){return arguments.length?(t=e,O):t},O.width=function(e){return arguments.length?(r=e,O):r},O.height=function(e){return arguments.length?(i=e,O):i},O.showTitle=function(e){return arguments.length?(s=e,O):s},O.showControls=function(e){return arguments.length?(o=e,O):o},O.showLegend=function(e){return arguments.length?(u=e,O):u},O.tooltip=function(e){return arguments.length?(f=e,O):f},O.tooltips=function(e){return arguments.length?(l=e,O):l},O.tooltipContent=function(e){return arguments.length?(k=e,O):k},O.state=function(e){return arguments.length?(v=e,O):v},O.strings=function(e){if(!arguments.length)return m;for(var t in e)e.hasOwnProperty(t)&&(m[t]=e[t]);return O},O.allowScroll=function(e){return arguments.length?(c=e,O):c},O.overflowHandler=function(e){return arguments.length?(h=d3.functor(e),O):h},O.seriesClick=function(e){return arguments.length?(A=e,O):A},O.hideEmptyGroups=function(e){return arguments.length?(g=e,O):g},O.direction=function(e){return arguments.length?(a=e,E.direction(e),S.direction(e),x.direction(e),T.direction(e),N.direction(e),O):a},O},e.models.paretoChart=function(){function M(c){return c.each(function(c){var h=c.properties,p=c.data,v=d3.select(this),y=this,O=(n||parseInt(v.style("width"),10)||960)-t.left-t.right,_=(r||parseInt(v.style("height"),10)||400)-t.top-t.bottom,D=O,P=_,H={top:0,right:0,bottom:0,left:0},B=0,j=0,F=0;M.update=function(){v.call(M)},M.container=this;if(!p||!p.length||!p.filter(function(e){return e.values.length}).length){var I=v.selectAll(".nv-noData").data([M.strings().noData]);return I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),I.attr("x",t.left+O/2).attr("y",t.top+_/2).text(function(e){return e}),M}v.selectAll(".nv-noData").remove();var q=p.filter(function(e){return!e.disabled&&(!e.type||e.type==="bar")}),R=p.filter(function(e){return!e.disabled&&e.type==="line"}).map(function(e){return w.stacked()?(e.values.map(function(e){e.y=0}),q.map(function(t,n){t.values.map(function(t,n){e.values[n].y+=t.y})}),e.values.map(function(t,n){n>0&&(t.y+=e.values[n-1].y)})):e.values=e.valuesOrig.map(function(e,t){return{series:e.series,x:e.x+e.series*.25-t*.25,y:e.y}}),e}),U=h.groupData,z=h.quota||0,W=h.quotaLabel||"",X=h.targetQuota||0,V=h.targetQuotaLabel||"";q=q.length?q:[{values:[]}],R=R.length?R:[{values:[]}];var $=[{key:W,type:"dash",color:"#444",values:{series:0,x:0,y:0}}];X>0&&$.push({key:V,type:"dash",color:"#777",values:{series:0,x:0,y:0}});var J=p.filter(function(e){return!e.disabled}).map(function(e){return e.valuesOrig.map(function(e,t){return i(e,t)})}),K=p.map(function(e){return e.valuesOrig.map(function(e,t){return s(e,t)})});m=w.xScale(),g=w.yScale(),x.scale(m),T.scale(g).tickFormat(d),U.length&&x.tickFormat(function(e,t){return U[t]?U[t].l:"asfd"});var Q=v.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([p]),G=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),Y=Q.select("g").attr("class","nv-chartWrap");G.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("width",O+t.left+t.right).attr("height",_+t.top+t.bottom).attr("fill","#FFF"),G.append("g").attr("class","nv-titleWrap");var Z=Y.select(".nv-titleWrap");G.append("g").attr("class","nv-x nv-axis");var et=Y.select(".nv-x.nv-axis");G.append("g").attr("class","nv-y nv-axis");var tt=Y.select(".nv-y.nv-axis");G.append("g").attr("class","nv-barsWrap");var nt=Y.select(".nv-barsWrap");G.append("g").attr("class","nv-quotaWrap");var rt=Y.select(".nv-quotaWrap");G.append("g").attr("class","nv-linesWrap1");var it=Y.select(".nv-linesWrap1");G.append("g").attr("class","nv-linesWrap2");var st=Y.select(".nv-linesWrap2");G.append("g").attr("class","nv-legendWrap nv-barLegend");var ot=Y.select(".nv-legendWrap.nv-barLegend");G.append("g").attr("class","nv-legendWrap nv-lineLegend");var ut=Y.select(".nv-legendWrap.nv-lineLegend");Q.attr("transform","translate("+t.left+","+t.top+")"),o&&h.title&&(Z.select(".nv-title").remove(),Z.append("text").text(h.title).attr("class","nv-title").attr("x",l==="rtl"?O:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").attr("stroke","none").attr("fill","black"),H.top+=parseInt(Y.select(".nv-title").node().getBoundingClientRect().height/1.15,10)+parseInt(Y.select(".nv-title").style("margin-top"),10)+parseInt(Y.select(".nv-title").style("margin-bottom"),10)),u&&(N.id("barlegend_"+M.id()).strings(M.strings().barlegend).margin({top:10,right:10,bottom:10,left:10}).align("left").height(_-H.top),ot.datum(p.filter(function(e){return e.type==="bar"})).call(N),B=N.calculateWidth(),C.id("linelegend_"+M.id()).strings(M.strings().linelegend).margin({top:10,right:10,bottom:10,left:10}).align("right").height(_-H.top),ut.datum(p.filter(function(e){return e.type==="line"}).concat($)).call(C),j=C.calculateWidth(),F=O/(B+j),N.arrange(Math.floor(F*B)),C.arrange(Math.floor(F*j)),ot.attr("transform","translate("+(l==="rtl"?O-N.width():0)+","+H.top+")"),ut.attr("transform","translate("+(l==="rtl"?0:O-C.width())+","+H.top+")")),H.top+=Math.max(N.height(),C.height())+4,P=_-H.top-H.bottom;var at=m.domain(d3.merge(J)).rangeBands([0,O-t.left-t.right],.3),ft=Math.max(d3.max(d3.merge(K)),z,X||0),lt=Math.ceil(ft*.1)*10,ct=at(1)+at.rangeBand()/(w.stacked()||R.length===1?2:4);w.width(D).height(P).forceY([0,lt]).id(M.id()),nt.datum(q).call(w),E.margin({top:0,right:ct,bottom:0,left:ct}).width(D).height(P).forceY([0,lt]).useVoronoi(!1).id("outline_"+M.id()),S.margin({top:0,right:ct,bottom:0,left:ct}).width(D).height(P).forceY([0,lt]).useVoronoi(!1).size(function(){return Math.pow(6,2)*Math.PI}).id("foreground_"+M.id()),it.datum(R).call(E),st.datum(R).call(S),et.call(x),tt.style("opacity",q.length?1:0).call(T),D=O-H.left-H.right-T.width(),P=_-H.top-H.bottom-x.height(),w.width(D).height(P),nt.call(w),et.call(x),tt.call(T),H[T.orient()]+=T.width(),D=O-H.left-H.right,H[x.orient()]+=x.height(),P=_-H.top-H.bottom,w.width(D).height(P),nt.attr("transform","translate("+H.left+","+H.top+")").call(w),E.width(D).height(P),S.width(D).height(P),it.attr("transform","translate("+H.left+","+H.top+")").call(E),st.attr("transform","translate("+H.left+","+H.top+")").call(S),rt.attr("transform","translate("+H.left+","+H.top+")"),et.attr("transform","translate("+H.left+","+(x.orient()==="bottom"?P+H.top:H.top)+")").call(x),T.ticks(P/100).tickSize(-D,0),tt.attr("transform","translate("+(T.orient()==="left"?H.left:H.left+D)+","+H.top+")").call(T),rt.selectAll("line").remove(),tt.selectAll("text.nv-quotaValue").remove(),tt.selectAll("text.nv-targetQuotaValue").remove();var ht=14;X>0&&(rt.append("line").attr("class","nv-quotaLineTarget").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+g(X)+")").style("stroke-dasharray","8, 8"),rt.append("line").datum({key:V,val:X}).attr("class","nv-quotaLineTarget nv-quotaLineBackground").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+g(X)+")"),tt.append("text").text(M.quotaTickFormat()(X)).attr("class","nv-targetQuotaValue").attr("dy",".36em").attr("dx","0").attr("text-anchor",l==="rtl"?"start":"end").attr("transform","translate("+ -T.tickPadding()+","+g(X)+")"),ht=Math.round(parseInt(Y.select("text.nv-targetQuotaValue").node().getBoundingClientRect().height,10)/1.15),tt.selectAll("g.tick").each(function(e,t){g(e)<=g(X)+ht&&g(e)>=g(X)-ht&&(d3.select(this).select("text").style("opacity",0),d3.select(this).select("line").style("opacity",0))}),T.showMaxMin&&tt.selectAll("g.nv-axisMaxMin").each(function(e,t){Math.abs(g(e)-g(X))<=ht&&d3.select(this).select("text").style("opacity",0)})),z>0&&(rt.append("line").attr("class","nv-quotaLine").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+g(z)+")").style("stroke-dasharray","8, 8"),rt.append("line").datum({key:W,val:z}).attr("class","nv-quotaLine nv-quotaLineBackground").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+g(z)+")"),tt.append("text").text(M.quotaTickFormat()(z)).attr("class","nv-quotaValue").attr("dy",".36em").attr("dx","0").attr("text-anchor",l==="rtl"?"start":"end").attr("transform","translate("+ -T.tickPadding()+","+g(z)+")"),ht=Math.round(parseInt(Y.select("text.nv-quotaValue").node().getBoundingClientRect().height,10)/1.15),tt.selectAll("g.tick").each(function(e,t){g(e)<=g(z)+ht&&g(e)>=g(z)-ht&&(d3.select(this).select("line").style("opacity",0),d3.select(this).select("text").style("opacity",0))}),T.showMaxMin&&tt.selectAll("g.nv-axisMaxMin").each(function(e,t){Math.abs(g(e)-g(z))<=ht&&d3.select(this).select("text").style("opacity",0)}),X>0&&Math.abs(g(z)-g(X))<=ht&&tt.select(".nv-targetQuotaValue").style("opacity",0)),rt.selectAll("line.nv-quotaLineBackground").on("mouseover",function(e){var t={pos:[d3.event.pageX,d3.event.pageY],val:e.val,key:e.key};L(t,y.parentNode)}).on("mouseout",function(){b.tooltipHide()}).on("mousemove",function(){b.tooltipMove({pos:[d3.event.pageX,d3.event.pageY]})}),N.dispatch.on("legendClick",function(e,t){var n=e.series;e.disabled=!e.disabled,M.stacked()||p.filter(function(e){return e.series===n&&e.type==="line"}).map(function(e){return e.disabled=!e.disabled,e}),p.filter(function(e){return!e.disabled&&e.type==="bar"}).length||p.map(function(e){return e.disabled=!1,Y.selectAll(".nv-series").classed("disabled",!1),e}),v.call(M)}),b.on("tooltipShow",function(e){f&&k(e,y.parentNode,U)}),b.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),b.on("tooltipMove",function(t){a&&e.tooltip.position(a,t.pos,"s")}),b.on("chartClick",function(e){N.enabled()&&N.dispatch.closeMenu(e),C.enabled()&&C.dispatch.closeMenu(e)}),w.dispatch.on("elementClick",function(e){A(p,e,v)})}),M}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=function(e){return e.x},s=function(e){return e.y},o=!1,u=!0,a=null,f=!0,l="ltr",c=function(e,t,n,r,i){return"<p><b>"+e+"</b></p>"+"<p><b>"+n+"</b></p>"+"<p><b>"+t+"%</b></p>"},h=function(e,t,n,r,i){return"<p><p>"+e+": <b>"+n+"</b></p>"},p=function(e,t,n,r,i){return"<p>"+r.key+": <b>"+n+"</b></p>"},d=function(e){return d3.format(",.2s")(e)},v=function(e){return d3.format(",.3s")(e)},m,g,y={barlegend:{close:"Hide bar legend",open:"Show bar legend"},linelegend:{close:"Hide line legend",open:"Show line legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},b=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove"),w=e.models.multiBar().stacked(!0).clipEdge(!1).withLine(!0).nice(!0),E=e.models.line().color(function(e,t){return"#FFF"}).fill(function(e,t){return"#FFF"}).useVoronoi(!1).nice(!0),S=e.models.line().useVoronoi(!1).nice(!0),x=e.models.axis().orient("bottom").tickSize(0).tickPadding(4).wrapTicks(!0).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),T=e.models.axis().orient("left").tickPadding(7).showMaxMin(!1),N=e.models.legend().align("left").position("middle"),C=e.models.legend().align("right").position("middle"),k=function(t,n,r){var i=t.pos[0],s=t.pos[1],o=(t.point.y*100/r[t.pointIndex].t).toFixed(1),u=T.tickFormat()(S.y()(t.point,t.pointIndex)),f=t.series.type==="bar"?c(t.series.key,o,u,t,M):h(t.series.key,o,u,t,M);a=e.tooltip.show([i,s],f,"s",null,n)},L=function(t,n){var r=t.pos[0],i=t.pos[1],s=d3.format(",.2s")(t.val),o=p(t.key,0,s,t,M);a=e.tooltip.show([r,i],o,"s",null,n)},A=function(e,t,n){var r=t.series,i=t.seriesIndex;r.disabled=!r.disabled,M.stacked()||e.filter(function(e){return e.series===i&&e.type==="line"}).map(function(e){return e.disabled=!e.disabled,e}),e.filter(function(e){return!e.disabled&&e.type==="bar"}).length||e.map(function(e){return e.disabled=!1,n.selectAll(".nv-series").classed("disabled",!1),e}),n.call(M)},O=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,s=n.left+r,o=n.top+i;return{x:s,y:o}};return S.dispatch.on("elementMouseover.tooltip",function(e){b.tooltipShow(e)}),S.dispatch.on("elementMouseout.tooltip",function(e){b.tooltipHide(e)}),S.dispatch.on("elementMousemove",function(e){b.tooltipMove(e)}),w.dispatch.on("elementMouseover.tooltip",function(e){b.tooltipShow(e)}),w.dispatch.on("elementMouseout.tooltip",function(e){b.tooltipHide(e)}),w.dispatch.on("elementMousemove",function(e){b.tooltipMove(e)}),M.dispatch=b,M.lines1=E,M.lines2=S,M.multibar=
w,M.barLegend=N,M.lineLegend=C,M.xAxis=x,M.yAxis=T,d3.rebind(M,w,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","color","fill","classes","gradient"),d3.rebind(M,w,"stacked","showValues","valueFormat","nice"),d3.rebind(M,x,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),M.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series},o=function(e,t){var n=r.lineColor?r.lineColor:{c1:"#1A8221",c2:"#62B464",l:1};return e.color||d3.interpolateHsl(d3.rgb(n.c1),d3.rgb(n.c2))(t/1)},u=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.barColor.c1),d3.rgb(r.barColor.c2))(e.series/r.barColor.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n},u=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n+" nv-stroke"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")},u=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var a=r.gradient?function(e,t){var n={orientation:r.orientation||"vertical",position:r.position||"middle"};return w.gradient(e,e.series,n)}:i;return w.color(i),w.fill(a),w.classes(s),S.color(o),S.fill(o),S.classes(u),N.color(i),N.classes(s),C.color(o),C.classes(u),M},M.x=function(e){return arguments.length?(i=e,lines.x(e),w.x(e),M):i},M.y=function(e){return arguments.length?(s=e,lines.y(e),w.y(e),M):s},M.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return M},M.width=function(e){return arguments.length?(n=e,M):n},M.height=function(e){return arguments.length?(r=e,M):r},M.showTitle=function(e){return arguments.length?(o=e,M):o},M.showLegend=function(e){return arguments.length?(u=e,M):u},M.showControls=function(e){return arguments.length?M:!1},M.tooltipBar=function(e){return arguments.length?(c=e,M):c},M.tooltipLine=function(e){return arguments.length?(h=e,M):h},M.tooltipQuota=function(e){return arguments.length?(p=e,M):p},M.tooltip=function(e){return arguments.length?(a=e,M):a},M.tooltips=function(e){return arguments.length?(f=e,M):f},M.tooltipContent=function(e){return arguments.length?(tooltipContent=e,M):tooltipContent},M.barClick=function(e){return arguments.length?(A=e,M):A},M.colorFill=function(e){return M},M.yAxisTickFormat=function(e){return arguments.length?(d=e,M):d},M.quotaTickFormat=function(e){return arguments.length?(v=e,M):v},M.strings=function(e){if(!arguments.length)return y;for(var t in e)e.hasOwnProperty(t)&&(y[t]=e[t]);return M},M.direction=function(e){return arguments.length?(l=e,w.direction(e),T.direction(e),N.direction(e),C.direction(e),M):l},M},e.models.pie=function(){function L(i){return i.each(function(i){function G(e){var t=(w(e)-b(e))/(2*Math.PI);return t>d?1:0}function Y(e,t){var n=Math.PI*2,r=((b(e)+w(e))/2+n)%n;return r>0&&r<Math.PI?1:-1}function Z(e){v||(e.innerRadius=0);var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){var n=t(e);return K(n)}}function et(e){e.innerRadius=0;var t=d3.interpolate({startAngle:0,endAngle:0},e);return function(e){return K(t(e))}}var u=n-t.left-t.right,f=r-t.top-t.bottom,S=d3.select(this),A=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:o(e)}),O=[];l&&h&&(O=e.utils.stringSetLengths(i.map(function(e){return e.key}),S,function(e){return e}));var M=S.selectAll(".nv-wrap.nv-pie").data([i]),_=M.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a),D=_.append("defs"),P=_.append("g"),H=M.select("g");L.gradient=function(t,n){var r={x:0,y:0,r:$,s:v?E*100+"%":"0%",u:"userSpaceOnUse"};return e.utils.colorRadialGradient(t,a+"-"+n,r,T(t,n),M.select("defs"))},P.append("g").attr("class","nv-pie");var B=H.select(".nv-pie");P.append("g").attr("class","nv-holeWrap");var j=H.select(".nv-holeWrap");M.attr("transform","translate("+t.left+","+t.top+")"),B.attr("transform","translate("+u/2+","+f/2+")"),S.on("click",function(e,t){k.chartClick({data:e,index:t,pos:d3.event,id:a})});var F=M.select(".nv-pie").selectAll(".nv-slice").data(A);F.exit().remove();var I=F.enter().append("g").on("mouseover",function(e,t){d3.select(this).classed("hover",!0),k.elementMouseover({label:s(e.data),value:o(e.data),point:e.data,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),k.elementMouseout({label:s(e.data),value:o(e.data),point:e.data,index:t,id:a})}).on("mousemove",function(e,t){k.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("click",function(e,t){k.elementClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}).on("dblclick",function(e,t){k.elementDblClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()});I.append("path").style("stroke","#ffffff").style("stroke-width",3).style("stroke-opacity",0).each(function(e,t){this._current=e}),I.append("g").attr("transform","translate(0,0)").attr("class","nv-label"),I.select(".nv-label").append("rect").style("fill-opacity",0).style("stroke-opacity",0),I.select(".nv-label").append("text").style("fill-opacity",0),I.append("polyline").attr("class","nv-label-leader").style("stroke-opacity",0);if(hole&&v){j.selectAll("text").remove(),j.append("text").attr("text-anchor","middle").attr("class","nv-pie-hole-value").attr("dy",".35em").style("fill","#333").style("font-size","32px").style("font-weight","bold"),j.select("text").text(function(e){return hole(e,this)});var q=j.node().getBBox();f-=q.height+q.y}var R=u/2,U=f/2,z=[];F.select("path").each(function(e,t){var n=b(e),r=w(e),i=n<=0&&r>=0,s=n<=Math.PI&&r>=Math.PI,o=Math.cos(n),u=Math.cos(r);i&&z.push(1),s&&z.push(-1),z.push(o),z.push(u)}),z=d3.extent(z),U*=2/(Math.abs(z[0])+Math.abs(z[1]));if(l&&h){var W=[R],X=[U];F.select("path").each(function(e,t){if(!G(e))return;var n=(b(e)+w(e))/2,r=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n)),s=R-g-y-O[t],o=U-7,u=r?s/r:s,a=i?o/i:o;W.push(u),X.push(a)}),R=d3.min(W),U=d3.min(X)}var V=Math.min(R,U),$=V-(l&&h?g:0),J=f/2;U>f/2&&(J+=V-V/2),B.attr("transform","translate("+u/2+","+J+")"),hole&&v&&j.attr("transform","translate("+u/2+","+J+")");var K=d3.svg.arc().innerRadius(0).outerRadius($).startAngle(b).endAngle(w);v&&K.innerRadius($*E);var Q=d3.svg.arc().innerRadius(0).outerRadius($).startAngle(b).endAngle(w);h&&(!v||p?Q.innerRadius(V).outerRadius(V):Q.outerRadius($*E)),F.classed("nv-active",function(e){return e.data.active==="active"}).classed("nv-inactive",function(e){return e.data.active==="inactive"}).attr("class",function(e){return C(e.data,e.data.series)}).attr("fill",function(e){return N(e.data,e.data.series)}),F.select("path").attr("d",K).style("stroke-opacity",function(e){return b(e)===w(e)?0:1}),l?(F.select(".nv-label").attr("transform",function(e){if(m){e.outerRadius=$+10,e.innerRadius=$+15;var t=(b(e)+w(e))/2*(180/Math.PI);return t+=90*Y(e,Q),"translate("+Q.centroid(e)+") rotate("+t+")"}var n=Q.centroid(e),r=c?(g+y)*Y(e,Q):0;return"translate("+[n[0]+r,n[1]]+")"}),F.select(".nv-label text").text(function(e){return G(e)?s(e.data):""}).attr("dy",".35em").style("fill","#555").style("fill-opacity",G).style("text-anchor",function(e){var t=Y(e,Q)===1?"start":"end";return h||(t="middle"),t=x==="rtl"?t==="start"?"end":"start":t,t}),h?c&&F.select(".nv-label-leader").attr("points",function(e){if(!G(e))return"0,0";var t=d3.svg.arc().innerRadius($).outerRadius($).startAngle(b).endAngle(w),n=c?g*Y(e,t):0,r=t.centroid(e),i=Q.centroid(e),s=[i[0]+n,i[1]];return r+" "+i+" "+s}).style("stroke","#aaa").style("fill","none").style("stroke-opacity",G):F.select(".nv-label").each(function(e){if(!G(e))return;var t=d3.select(this),n=t.select("text").node().getBBox();t.select("rect").attr("rx",3).attr("ry",3).attr("width",n.width+10).attr("height",n.height+10).attr("transform",function(){return"translate("+[n.x-5,n.y-5]+")"}).style("fill","#fff").style("fill-opacity",G)})):(F.select(".nv-label-leader").style("stroke-opacity",0),F.select(".nv-label rect").style("fill-opacity",0),F.select(".nv-label text").style("fill-opacity",0))}),L}var t={top:0,right:0,bottom:0,left:0},n=500,r=500,i=function(e){return e},s=function(e){return e.key},o=function(e){return e.value},u=function(e){return e.description},a=Math.floor(Math.random()*1e4),f=d3.format(",.2f"),l=!0,c=!0,h=!0,p=!0,d=.01,v=!1,m=!1,g=20,y=5,b=function(e){return e.startAngle},w=function(e){return e.endAngle},E=.447,S=0,x="ltr",T=function(t,n){return e.utils.defaultColor()(t,t.series)},N=T,C=function(e,t){return"nv-slice nv-series-"+e.series},k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return L.dispatch=k,L.color=function(e){return arguments.length?(T=e,L):T},L.fill=function(e){return arguments.length?(N=e,L):N},L.classes=function(e){return arguments.length?(C=e,L):C},L.gradient=function(e){return arguments.length?(gradient=e,L):gradient},L.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,L):t},L.width=function(e){return arguments.length?(n=e,L):n},L.height=function(e){return arguments.length?(r=e,L):r},L.values=function(e){return arguments.length?(i=e,L):i},L.x=function(e){return arguments.length?(s=e,L):s},L.y=function(e){return arguments.length?(o=d3.functor(e),L):o},L.description=function(e){return arguments.length?(u=e,L):u},L.showLabels=function(e){return arguments.length?(l=e,L):l},L.labelSunbeamLayout=function(e){return arguments.length?(m=e,L):m},L.donutLabelsOutside=function(e){return arguments.length?(p=e,L):p},L.pieLabelsOutside=function(e){return arguments.length?(h=e,L):h},L.showLeaders=function(e){return arguments.length?(c=e,L):c},L.donut=function(e){return arguments.length?(v=e,L):v},L.hole=function(e){return arguments.length?(hole=d3.functor(e),L):hole},L.donutRatio=function(e){return arguments.length?(E=e,L):E},L.startAngle=function(e){return arguments.length?(b=e,L):b},L.endAngle=function(e){return arguments.length?(w=e,L):w},L.id=function(e){return arguments.length?(a=e,L):a},L.valueFormat=function(e){return arguments.length?(f=e,L):f},L.labelThreshold=function(e){return arguments.length?(d=e,L):d},L.direction=function(e){return arguments.length?(x=e,L):x},L},e.models.pieChart=function(){function b(u){return u.each(function(u){function B(){w.select(".nvd3.nv-wrap").remove();var e=w.selectAll(".nv-noData").data([b.strings().noData]);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),e.attr("x",t.left+S/2).attr("y",t.top+x/2).text(function(e){return e})}var c=u.properties,p=u.data,w=d3.select(this),E=this,S=(n||parseInt(w.style("width"),10)||960)-t.left-t.right,x=(r||parseInt(w.style("height"),10)||400)-t.top-t.bottom,T=d3.sum(p.map(function(e){return e.value})),N=S,C=x,k={top:0,right:0,bottom:0,left:0};b.update=function(){w.transition().duration(f).call(b)},b.dataSeriesActivate=function(e){var t=e.point;t.active=!t.active||t.active==="inactive"?"active":"inactive",t.active==="active"&&p.filter(function(e){return e.active!=="active"}).map(function(e){return e.active="inactive",e}),p.filter(function(e){return e.active==="active"}).length||p.map(function(e){return e.active="",w.selectAll(".nv-series").classed("nv-inactive",!1),e}),w.call(b)},b.container=this;if(!p||!p.length)return B(),b;var L=p.map(function(e,t){return e.series=t,e.value||(e.disabled=!0),e}),A=d3.sum(L.filter(function(e,t){return!e.disabled}).map(function(e,t){return e.value}));h.disabled=L.map(function(e){return!!e.disabled});if(!A)return B(),b;w.selectAll(".nv-noData").remove();var O=w.selectAll("g.nv-wrap.nv-pieChart").data([L]),M=O.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),_=O.select("g").attr("class","nv-chartWrap");M.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("width",S+t.left+t.right).attr("height",x+t.top+t.bottom).attr("fill","#FFF"),M.append("g").attr("class","nv-titleWrap");var D=_.select(".nv-titleWrap");M.append("g").attr("class","nv-pieWrap");var P=_.select(".nv-pieWrap");M.append("g").attr("class","nv-legendWrap");var H=_.select(".nv-legendWrap");O.attr("transform","translate("+t.left+","+t.top+")"),i&&c.title&&(D.select(".nv-title").remove(),D.append("text").attr("class","nv-title").attr("x",o==="rtl"?S:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(c.title).attr("stroke","none").attr("fill","black"),k.top+=parseInt(_.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(_.select(".nv-title").style("margin-top"),10)+parseInt(_.select(".nv-title").style("margin-bottom"),10)),s&&(m.id("legend_"+b.id()).strings(b.strings().legend).margin({top:10,right:10,bottom:10,left:10}).align("center").height(x-k.top),H.datum(L).call(m),m.arrange(S),H.attr("transform","translate(0,"+k.top+")"),k.top+=m.height()+4),C=x-k.top-k.bottom,N=S-k.left-k.right,v.width(N).height(C),P.datum(L.filter(function(e){return!e.disabled})).attr("transform","translate("+k.left+","+k.top+")").transition().duration(f).call(v),m.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,v.values()(L).filter(function(e){return!e.disabled}).length||v.values()(p).map(function(e){return e.disabled=!1,O.selectAll(".nv-series").classed("disabled",!1),e}),h.disabled=L.map(function(e){return!!e.disabled}),d.stateChange(h),w.transition().duration(f).call(b)}),d.on("tooltipShow",function(e){l&&g(e,E.parentNode,T)}),d.on("tooltipHide",function(){l&&e.tooltip.cleanup()}),d.on("tooltipMove",function(t){a&&e.tooltip.position(a,t.pos)}),d.on("changeState",function(e){typeof e.disabled!="undefined"&&(L.forEach(function(t,n){t.disabled=e.disabled[n]}),h.disabled=e.disabled),w.transition().duration(f).call(b)}),d.on("chartClick",function(e){m.enabled()&&m.dispatch.closeMenu(e)}),v.dispatch.on("elementClick",function(e){y(p,e)})}),b}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!0,o="ltr",u=!1,a=null,f=0,l=!0,c=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},h={},p={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},d=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),v=e.models.pie(),m=e.models.legend().align("center"),g=function(t,n,r){var i=t.pos[0],s=t.pos[1],o=(v.y()(t.point)*100/r).toFixed(1),u=v.valueFormat()(v.y()(t.point)),f=c(t.point.key,o,u,t,b);a=e.tooltip.show([i,s],f,null,null,n)},y=function(e,t){return};return v.dispatch.on("elementMouseover.tooltip",function(e){d.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){d.tooltipHide(e)}),v.dispatch.on("elementMousemove.tooltip",function(e){d.tooltipMove(e)}),b.dispatch=d,b.pie=v,b.legend=m,d3.rebind(b,v,"id","x","y","color","fill","classes","gradient"),d3.rebind(b,v,"valueFormat","values","description","showLabels","showLeaders","donutLabelsOutside","pieLabelsOutside","startAngle","endAngle","donut","hole","donutRatio","labelThreshold"),b.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-slice nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-slice nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-slice nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var o=r.gradient?function(e,t){return v.gradient(e,e.series)}:i;return v.color(i),v.fill(o),v.classes(s),m.color(i),m.classes(s),b},b.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return b},b.width=function(e){return arguments.length?(n=e,b):n},b.height=function(e){return arguments.length?(r=e,b):r},b.showTitle=function(e){return arguments.length?(i=e,b):i},b.showLegend=function(e){return arguments.length?(s=e,b):s},b.tooltip=function(e){return arguments.length?(a=e,b):a},b.tooltips=function(e){return arguments.length?(l=e,b):l},b.tooltipContent=function(e){return arguments.length?(c=e,b):c},b.state=function(e){return arguments.length?(h=e,b):h},b.colorFill=function(e){return b},b.strings=function(e){if(!arguments.length)return p;for(var t in e)e.hasOwnProperty(t)&&(p[t]=e[t]);return b},b.seriesClick=function(e){return arguments.length?(y=e,b):y},b.direction=function(e){return arguments.length?(o=e,v.direction(e),m.direction(e),b):o},b},e.models.sparkline=function(){function h(e){return e.each(function(e){var i=n-t.left-t.right,h=r-t.top-t.bottom,p=d3.select(this);s.domain(l||d3.extent(e,u)).range([0,i]),o.domain(c||d3.extent(e,a)).range([h,0]);var d=p.selectAll("g.nv-wrap.nv-sparkline").data([e]),v=d.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),m=v.append("g"),g=d.select("g");d.attr("transform","translate("+t.left+","+t.top+")");var b=d.selectAll("path").data(function(e){return[e]});b.enter().append("path"),b.exit().remove(),b.style("stroke",function(e,t){return e.color||f(e,t)}).attr("d",d3.svg.line().x(function(e,t){return s(u(e,t))}).y(function(e,t){return o(a(e,t))}));var w=d.selectAll("circle.nv-point").data(function(e){function n(t){if(t!=-1){var n=e[t];return n.pointIndex=t,n}return null}var t=e.map(function(e,t){return a(e,t)}),r=n(t.lastIndexOf(o.domain()[1])),i=n(t.indexOf(o.domain()[0])),s=n(t.length-1);return[i,r,s].filter(function(e){return e!=null})});w.enter().append("circle"),w.exit().remove(),w.attr("cx",function(e,t){return s(u(e,e.pointIndex))}).attr("cy",function(e,t){return o(a(e,e.pointIndex))}).attr("r",2).attr("class",function(e,t){return u(e,e.pointIndex)==s.domain()[1]?"nv-point nv-currentValue":a(e,e.pointIndex)==o.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),h}var t={top:2,right:0,bottom:2,left:0},n=400,r=32,i=!0,s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=e.utils.getColor(["#000"]),l,c;return h.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,h):t},h.width=function(e){return arguments.length?(n=e,h):n},h.height=function(e){return arguments.length?(r=e,h):r},h.x=function(e){return arguments.length?(u=d3.functor(e),h):u},h.y=function(e){return arguments.length?(a=d3.functor(e),h):a},h.xScale=function(e){return arguments.length?(s=e,h):s},h.yScale=function(e){return arguments.length?(o=e,h):o},h.xDomain=function(e){return arguments.length?(l=e,h):l},h.yDomain=function(e){return arguments.length?(c=e,h):c},h.animate=function(e){return arguments.length?(i=e,h):i},h.color=function(t){return arguments.length?(f=e.utils.getColor(t),h):f},h},e.models.sparklinePlus=function(){function v(e){return e.each(function(c){function O(){if(a)return;var e=C.selectAll(".nv-hoverValue").data(u),r=e.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);e.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),e.attr("transform",function(e){return"translate("+s(t.x()(c[e],e))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!u.length)return;r.append("line").attr("x1",0).attr("y1",-n.top).attr("x2",0).attr("y2",b),r.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-n.top).attr("text-anchor","end").attr("dy",".9em"),C.select(".nv-hoverValue .nv-xValue").text(f(t.x()(c[u[0]],u[0]))),r.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-n.top).attr("text-anchor","start").attr("dy",".9em"),C.select(".nv-hoverValue .nv-yValue").text(l(t.y()(c[u[0]],u[0])))}function M(){function r(e,n){var r=Math.abs(t.x()(e[0],0)-n),i=0;for(var s=0;s<e.length;s++)Math.abs(t.x()(e[s],s)-n)<r&&(r=Math.abs(t.x()(e[s],s)-n),i=s);return i}if(a)return;var e=d3.mouse(this)[0]-n.left;u=[r(c,Math.round(s.invert(e)))],O()}var m=d3.select(this),g=(r||parseInt(m.style("width"))||960)-n.left-n.right,b=(i||parseInt(m.style("height"))||400)-n.top-n.bottom,w=t.y()(c[c.length-1],c.length-1);v.update=function(){v(e)},v.container=this;if(!c||!c.length){var E=m.selectAll(".nv-noData").data([d]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",n.left+g/2).attr("y",n.top+b/2).text(function(e){return e}),v}m.selectAll(".nv-noData").remove(),s=t.xScale(),o=t.yScale();var S=m.selectAll("g.nv-wrap.nv-sparklineplus").data([c]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),N=T.append("g"),C=S.select("g");N.append("g").attr("class","nv-sparklineWrap"),N.append("g").attr("class","nv-valueWrap"),N.append("g").attr("class","nv-hoverArea"),S.attr("transform","translate("+n.left+","+n.top+")");var k=C.select(".nv-sparklineWrap");t.width(g).height(b),k.call(t);var L=C.select(".nv-valueWrap"),A=L.selectAll(".nv-currentValue").data([w]);A.enter().append("text").attr("class","nv-currentValue").attr("dx",p?-8:8).attr("dy",".9em").style("text-anchor",p?"end":"start"),A.attr("x",g+(p?n.right:0)).attr("y",h?function(e){return o(e)}:0).style("fill",t.color()(c[c.length-1],c.length-1)).text(l(w)),N.select(".nv-hoverArea").append("rect").on("mousemove",M).on("click",function(){a=!a}).on("mouseout",function(){u=[],O()}),C.select(".nv-hoverArea rect").attr("transform",function(e){return"translate("+ -n.left+","+ -n.top+")"}).attr("width",g+n.left+n.right).attr("height",b+n.top)}),v}var t=e.models.sparkline(),n={top:15,right:100,bottom:10,left:50},r=null,i=null,s,o,u=[],a=!1,f=d3.format(",r"),l=d3.format(",.2f"),c=!0,h=!0,p=!1,d="No Data Available.";return v.sparkline=t,d3.rebind(v,t,"x","y","xScale","yScale","color"),v.margin=function(e){return arguments.length?(n.top=typeof e.top!="undefined"?e.top:n.top,n.right=typeof e.right!="undefined"?e.right:n.right,n.bottom=typeof e.bottom!="undefined"?e.bottom:n.bottom,n.left=typeof e.left!="undefined"?e.left:n.left,v):n},v.width=function(e){return arguments.length?(r=e,v):r},v.height=function(e){return arguments.length?(i=e,v):i},v.xTickFormat=function(e){return arguments.length?(f=e,v):f},v.yTickFormat=function(e){return arguments.length?(l=e,v):l},v.showValue=function(e){return arguments.length?(c=e,v):c},v.alignValue=function(e){return arguments.length?(h=e,v):h},v.rightAlignValue=function(e){return arguments.length?(p=e,v):p},v.noData=function(e){return arguments.length?(d=e,v):d},v},e.models.stackedArea=function(){function b(o){return o.each(function(o){var p=n-t.left-t.right,m=r-t.top-t.bottom,w=d3.select(this);c=d.xScale(),h=d.yScale(),o=o.map(function(e,t){return e.values=e.values.map(function(t,n){return t.index=n,t.stackedY=e.disabled?0:s(t,n),t}),e}),o=d3.layout.stack().order(a).offset(u).values(function(e){return e.values}).x(i).y(function(e){return e.stackedY}).out(function(e,t,n){e.display={y:n,y0:t}})(o);var E=w.selectAll("g.nv-wrap.nv-stackedarea").data([o]),S=E.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),T=S.append("defs"),N=S.append("g"),C=E.select("g");b.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,b.id()+"-"+n,r,v(t,n),E.select("defs"))},N.append("g").attr("class","nv-areaWrap"),N.append("g").attr("class","nv-scatterWrap"),E.attr("transform","translate("+t.left+","+t.top+")"),d.width(p).height(m).x(i).y(function(e){return e.display.y+e.display.y0}).forceY([0]);var k=C.select(".nv-scatterWrap").datum(o.filter(function(e){return!e.disabled}));k.call(d),T.append("clipPath").attr("id","nv-edge-clip-"+b.id()).append("rect"),E.select("#nv-edge-clip-"+b.id()+" rect").attr("width",p).attr("height",m),C.attr("clip-path",l?"url(#nv-edge-clip-"+b.id()+")":"");var L=d3.svg.area().x(function(e,t){return c(i(e,t))}).y0(function(e){return h(e.display.y0)}).y1(function(e){return h(e.display.y+e.display.y0)}).interpolate(f),A=d3.svg.area().x(function(e,t){return c(i(e,t))}).y0(function(e){return h(e.display.y0)}).y1(function(e){return h(e.display.y0)}),O=C.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e){return e});O.enter().append("path").on("mouseover",function(e,t){d3.select(this).classed("hover",!0),y.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t}),C.select(".nv-chart-"+b.id()+" .nv-area-"+t).classed("hover",!0)}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),y.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t}),C.select(".nv-chart-"+b.id()+" .nv-area-"+t).classed("hover",!1)}).on("mousemove",function(e,t){y.areaMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("click",function(e,t){d3.select(this).classed("hover",!1),y.areaClick({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}),O.exit().attr("d",function(e,t){return A(e.values,t)}).remove(),O.attr("class",g).attr("fill",v).attr("stroke",v),O.attr("d",function(e,t){return L(e.values,t)}),d.dispatch.on("elementMouseover.area",function(e){C.select(".nv-chart-"+b.id()+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),d.dispatch.on("elementMouseout.area",function(e){C.select(".nv-chart-"+b.id()+" .nv-area-"+e.seriesIndex).classed("hover",!1)})}),b}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=function(e){return e.x},s=function(e){return e.y},o="stack",u="zero",a="default",f="linear",l=!1,c,h,p=200,d=e.models.scatter(),v=function(t,n){return e.utils.defaultColor()(t,t.series)},m=v,g=function(e,t){return"nv-area nv-area-"+e.series},y=d3.dispatch("tooltipShow","tooltipHide","tooltipMove","areaClick","areaMouseover","areaMouseout","areaMousemove");return d.size(2.2).sizeDomain([2.2]),d.dispatch.on("elementClick.area",function(e){y.areaClick(e)}),d.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],y.tooltipShow(e)}),d.dispatch.on("elementMouseout.tooltip",function(e){y.tooltipHide(e)}),b.dispatch=y,b.scatter=d,d3.rebind(b,d,"interactive","size","id","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius"),b.color=function(e){return arguments.length?(v=e,d.color(v),b):v},b.fill=function(e){return arguments.length?(m=e,d.fill(m),b):m},b.classes=function(e){return arguments.length?(g=e,d.classes(g),b):g},b.gradient=function(e){return arguments.length?(gradient=e,b):gradient},b.x=function(e){return arguments.length?(i=d3.functor(e),b):i},b.y=function(e){return arguments.length?(s=d3.functor(e),b):s},b.delay=function(e){return arguments.length?(p=e,b):p},b.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,b):t},b.width=function(e){return arguments.length?(n=e,b):n},b.height=function(e){return arguments.length?(r=e,b):r},b.clipEdge=function(e){return arguments.length?(l=e,b):l},b.offset=function(e){return arguments.length?(u=e,b):u},b.order=function(e){return arguments.length?(a=e,b):a},b.style=function(e){if(!arguments.length)return o;o=e;switch(o){case"stack":b.offset("zero"),b.order("default");break;case"stream":b.offset("wiggle"),b.order("inside-out");break;case"stream-center":b.offset("silhouette"),b.order("inside-out");break;case"expand":b.offset("expand"),b.order("default")}return b},b.interpolate=function(e){return arguments.length?(f=e,f):f},b},e.models.stackedAreaChart=function(){function x(l){return l.each(function(l){var p=l.properties,v=l.data,T=d3.select(this),N=this,C=(n||parseInt(T.style("width"),10)||960)-t.left-t.right,k=(r||parseInt(T.style("height"),10)||400)-t.top-t.bottom,L=C,A=k,O={top:0,right:0,bottom:0,left:0},M=0,_=0,D=0;x.update=function(){T.transition().duration(x.delay()).call(x)},x.container=this;if(!v||!v.length||!v.filter(function(e){return e.values.length}).length){var P=T.selectAll(".nv-noData").data([x.strings().noData]);return P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),P.attr("x",t.left+C/2).attr("y",t.top+k/2).text(function(e){return e}),x}T.selectAll(".nv-noData").remove(),v.map(function(e,t){e.series=t});var H=v.filter(function(e){return!e.disabled});H=H.length?H:[{values:[]}],d.disabled=v.map(function(e){return!!e.disabled}),d.style=g.style();var B=[{key:"Stacked",disabled:g.offset()!=="zero"},{key:"Stream",disabled:g.offset()!=="wiggle"},{key:"Expanded",disabled:g.offset()!=="expand"}];c=g.xScale(),h=g.yScale(),y.scale(c),b.scale(h);var j=T.selectAll("g.nv-wrap.nv-stackedAreaChart").data([v]),F=j.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),I=j.select("g").attr("class","nv-chartWrap");F.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("width",C+t.left+t.right).attr("height",k+t.top+t.bottom).attr("fill","#FFF"),F.append("g").attr("class","nv-titleWrap");var q=I.select(".nv-titleWrap");F.append("g").attr("class","nv-x nv-axis");var R=I.select(".nv-x.nv-axis");F.append("g").attr("class","nv-y nv-axis");var U=I.select(".nv-y.nv-axis");F.append("g").attr("class","nv-stackedWrap");var z=I.select(".nv-stackedWrap");F.append("g").attr("class","nv-controlsWrap");var W=I.select(".nv-controlsWrap");F.append("g").attr("class","nv-legendWrap");var X=I.select(".nv-legendWrap");j.attr("transform","translate("+t.left+","+t.top+")"),i&&p.title&&(q.select(".nv-title").remove(),q.append("text").attr("class","nv-title").attr("x",u==="rtl"?C:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(p.title).attr("stroke","none").attr("fill","black"),O.top+=parseInt(I.select(".nv-title").node().getBBox().height/1.15,10)+parseInt(I.select(".nv-title").style("margin-top"),10)+parseInt(I.select(".nv-title").style("margin-bottom"),10)),s&&(E.id("controls_"+x.id()).strings(x.strings().controls).margin({top:10,right:10,bottom:10,left:10}).align("left").height(k-O.top),W.datum(B).call(E),M=E.calculateWidth()),o&&(w.id("legend_"+x.id()).strings(x.strings().legend).margin({top:10,right:10,bottom:10,left:10}).align("right").height(k-O.top),X.datum(v).call(w),_=w.calculateWidth()),D=C/(M+_),M=Math.floor(M*D),_=Math.floor(_*D),s&&(E.arrange(M),_=C-E.width()),o&&(w.arrange(_),M=C-w.width()),s&&W.attr("transform","translate("+(u==="rtl"?C-E.width():0)+","+O.top+")"),o&&X.attr("transform","translate("+(u==="rtl"?0:C-w.width())+","+O.top+")"),O.top+=Math.max(w.height(),E.height())+4,A=k-O.top-O.bottom,g.width(L).height(A).id(x.id()),z.datum(H).call(g),R.call(y),O[y.orient()]+=y.height(),A=k-O.top-O.bottom,U.call(b),O[b.orient()]+=b.width(),L=C-O.left-O.right,g.width(L).height(A),z.attr("transform","translate("+O.left+","+O.top+")").transition().duration(x.delay()).call(g),y.ticks(L/100).tickSize(-A,0),R.attr("transform","translate("+O.left+","+(y.orient()==="bottom"?A+O.top:O.top)+")").transition().call(y),b.ticks(g.offset()==="wiggle"?0:A/36).tickSize(-L,0),U.attr("transform","translate("+(b.orient()==="left"?O.left:O.left+L)+","+O.top+")").transition().call(b),g.dispatch.on("areaClick.toggle",function(e){v.filter(function(e){return!e.disabled}).length===1?v=v.map(function(e){return e.disabled=!1,e}):v=v.map(function(t,n){return t.disabled=n!==e.seriesIndex,t}),d.disabled=v.map(function(e){return!!e.disabled}),m.stateChange(d),T.transition().duration(x.delay()).call(x)}),w.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,v.filter(function(e){return!e.disabled}).length||v.map(function(e){return e.disabled=!1,I.selectAll(".nv-series").classed("disabled",!1),e}),d.disabled=v.map(function(e){return!!e.disabled}),m.stateChange(d),T.transition().duration(x.delay()).call(x)}),E.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;B=B.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Stacked":g.style("stack");break;case"Stream":g.style
("stream");break;case"Expanded":g.style("expand")}d.style=g.style(),m.stateChange(d),T.transition().duration(x.delay()).call(x)}),m.on("tooltipShow",function(e){f&&S(e,N.parentNode)}),m.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),m.on("tooltipMove",function(t){a&&e.tooltip.position(a,t.pos,"s")}),m.on("changeState",function(e){typeof e.disabled!="undefined"&&(v.forEach(function(t,n){t.disabled=e.disabled[n]}),d.disabled=e.disabled),typeof e.style!="undefined"&&(g.style(e.style),d.style=e.style),T.transition().duration(x.delay()).call(x)}),m.on("chartClick",function(e){E.enabled()&&E.dispatch.closeMenu(e),w.enabled()&&w.dispatch.closeMenu(e)})}),x}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!1,o=!0,u="ltr",a=null,f=!0,l=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},c,h,p=d3.format(",.2f"),d={},v={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},m=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),g=e.models.stackedArea().clipEdge(!0),y=e.models.axis().orient("bottom").tickPadding(4).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),b=e.models.axis().orient("left").tickPadding(4).tickFormat(g.offset()==="expand"?d3.format("%"):p),w=e.models.legend().align("right"),E=e.models.legend().align("left").color(["#444"]);g.scatter.pointActive(function(e){return!!Math.round(g.y()(e)*100)});var S=function(t,n){var r=t.pos[0],i=t.pos[1],s=y.tickFormat()(g.x()(t.point,t.pointIndex)),o=b.tickFormat()(g.y()(t.point,t.pointIndex)),u=l(t.series.key,s,o,t,x);a=e.tooltip.show([r,i],u,null,null,n)};return g.dispatch.on("areaMouseover.tooltip",function(e){}),g.dispatch.on("areaMouseout.tooltip",function(e){}),g.dispatch.on("areaMousemove.tooltip",function(e){}),g.dispatch.on("tooltipShow",function(e){m.tooltipShow(e)}),g.dispatch.on("tooltipHide",function(e){m.tooltipHide(e)}),x.dispatch=m,x.stacked=g,x.legend=w,x.controls=E,x.xAxis=y,x.yAxis=b,d3.rebind(x,g,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(x,g,"size","sizeDomain","forceSize","offset","order","style","interactive","useVoronoi","clipVoronoi"),d3.rebind(x,y,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),x.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-area nv-area-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-area nv-area-"+e.series+" nv-fill"+n+" nv-stroke"+n};break;case"data":i=function(t,n){return t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-area nv-area-"+e.series+(e.classes?" "+e.classes:"")}}var o=r.gradient?function(e,t){var n={orientation:r.orientation||"horizontal",position:r.position||"base"};return g.gradient(e,e.series,n)}:i;return g.color(i),g.fill(o),g.classes(s),w.color(i),w.classes(s),x},x.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return x},x.width=function(e){return arguments.length?(n=e,x):n},x.height=function(e){return arguments.length?(r=e,x):r},x.showTitle=function(e){return arguments.length?(i=e,x):i},x.showControls=function(e){return arguments.length?(s=e,x):s},x.showLegend=function(e){return arguments.length?(o=e,x):o},x.tooltip=function(e){return arguments.length?(a=e,x):a},x.tooltips=function(e){return arguments.length?(f=e,x):f},x.tooltipContent=function(e){return arguments.length?(l=e,x):l},x.state=function(e){return arguments.length?(d=e,x):d},b.tickFormat=function(e){return arguments.length?(p=e,b):p},x.strings=function(e){if(!arguments.length)return v;for(var t in e)e.hasOwnProperty(t)&&(v[t]=e[t]);return x},x.direction=function(e){return arguments.length?(u=e,b.direction(e),w.direction(e),E.direction(e),x):u},x},e.models.treemap=function(){function b(w){return w.each(function(w){function S(e){var t,n;if(e.children&&a(e)&&l.indexOf(a(e))===-1){l.push(a(e)),n=e.children.length;for(t=0;t<n;t+=1)S(e.children[t])}}function P(e){function g(e){m.elementMouseout();if(k||!e)return;k=!0;var t=P(e),n=r.transition().duration(750),o=t.transition().duration(750);i.domain([e.x,e.x+e.dx]),s.domain([e.y,e.y+e.dy]),C.style("shape-rendering",null),C.selectAll(".nv-depth").sort(function(e,t){return e.depth-t.depth}),t.selectAll("text").style("fill-opacity",0),n.selectAll("text").call(b).style("fill-opacity",0),o.selectAll("text").call(b).style("fill-opacity",1),n.selectAll("rect").call(w),o.selectAll("rect").call(w),n.remove().each("end",function(){C.style("shape-rendering","crispEdges"),k=!1})}function y(e){e.children&&(n.nodes({children:e.children}),e.children.forEach(function(t){t.x=e.x+t.x*e.dx,t.y=e.y+t.y*e.dy,t.dx*=e.dx,t.dy*=e.dy,t.parent=e,y(t)}))}function b(e){e.attr("x",function(e){var t=v==="rtl"?i(e.x+e.dx)-i(e.x)-6:6;return i(e.x)+t}).attr("y",function(e){return s(e.y)+6})}function w(e){e.attr("x",function(e){return i(e.x)}).attr("y",function(e){return s(e.y)}).attr("width",function(e){return i(e.x+e.dx)-i(e.x)}).attr("height",function(e){return s(e.y+e.dy)-s(e.y)})}function E(e){return e.parent?E(e.parent)+" / "+a(e):a(e)}var n=d3.layout.treemap().value(u).sort(function(e,t){return u(e)-u(t)}).round(!1);y(e),D.datum(e.parent).on("click",g).select("text").text(E(e));var r=M.insert("g",".nv-grandparent").attr("class","nv-depth").attr("height",N).attr("transform","translate("+t.left+","+t.top+")"),f=r.selectAll("g").data(e.children).enter().append("g");f.filter(function(e){return e.children}).classed("nv-children",!0).on("click",g),f.filter(function(e){return!e.children}).on("click",c),f.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),m.elementMouseover({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:o})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),m.elementMouseout()}).on("mousemove",function(e,t){m.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:o})});var h=f.selectAll(".nv-child").data(function(e){return e.children||[e]}).enter().append("rect").attr("class",d).attr("fill",function(e,t){var n=e.parent.colorIndex||l.indexOf(a(e.parent))||t;return this.getAttribute("fill")||p(e,n,l.length)}).call(w);return h.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),m.elementMouseover({label:a(e),value:u(e),point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:o})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),m.elementMouseout()}),f.append("rect").attr("class","nv-parent").call(w),f.append("text").attr("dy",".75em").text(function(e){return a(e)}).call(b),f}var E=w[0];S(E);var T=n-t.left-t.right,N=r-t.top-t.bottom,C=d3.select(this),k;i=d3.scale.linear().domain([0,E.dx]).range([0,T]),s=d3.scale.linear().domain([0,E.dy]).range([0,N]),g=g||i,y=y||s;var L=C.selectAll("g.nv-wrap.nv-treemap").data([E]),A=L.enter().append("g").attr("class","nvd3 nv-wrap nv-treemap"),O=A.append("defs"),M=A.append("g"),_=L.select("g");b.gradient=function(t,n,r){var i=t.parent.colorIndex||l.indexOf(a(t.parent))||n;return e.utils.colorLinearGradient(t,o+"-"+n,r,h(t,i,l.length),L.select("defs"))},O.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),L.select("#nv-edge-clip-"+o+" rect").attr("width",n).attr("height",r),_.attr("clip-path",f?"url(#nv-edge-clip-"+o+")":"");var D=M.append("g").attr("class","nv-grandparent");D.append("rect").attr("width",n).attr("height",t.top),D.append("text").attr("x",v==="rtl"?n-6:6).attr("y",6).attr("dy",".75em"),P(E)}),b}var t={top:20,right:0,bottom:0,left:0},n=0,r=0,i,s,o=Math.floor(Math.random()*1e4),u=function(e){return e.size},a=function(e){return e.name},f=!0,l=[],c=function(){return!1},h=function(t,n){return e.utils.defaultColor()(t,n)},p=h,d=function(e,t){return"nv-child"},v="ltr",m=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),g,y;return b.dispatch=m,b.color=function(e){return arguments.length?(h=e,b):h},b.fill=function(e){return arguments.length?(p=e,b):p},b.classes=function(e){return arguments.length?(d=e,b):d},b.gradient=function(e){return arguments.length?(gradient=e,b):gradient},b.x=function(e){return arguments.length?(getX=e,b):getX},b.y=function(e){return arguments.length?(getY=e,b):getY},b.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,b):t},b.width=function(e){return arguments.length?(n=e,b):n},b.height=function(e){return arguments.length?(r=e,b):r},b.xScale=function(e){return arguments.length?(i=e,b):i},b.yScale=function(e){return arguments.length?(s=e,b):s},b.xDomain=function(e){return arguments.length?(xDomain=e,b):xDomain},b.yDomain=function(e){return arguments.length?(yDomain=e,b):yDomain},b.leafClick=function(e){return arguments.length?(c=e,b):c},b.getSize=function(e){return arguments.length?(u=e,b):u},b.groupBy=function(e){return arguments.length?(a=e,b):a},b.groups=function(e){return arguments.length?(l=e,b):l},b.id=function(e){return arguments.length?(o=e,b):o},b.direction=function(e){return arguments.length?(v=e,b):v},b},e.models.treemapChart=function(){function b(e){return e.each(function(e){function C(e){var t,n;e.color&&c.indexOf(e.color)!==-1&&c.splice(c.indexOf(e.color),1);if(e.children){n=e.children.length;for(t=0;t<n;t+=1)C(e.children[t])}}var o=[e],u=d3.select(this),f=this,h=(n||parseInt(u.style("width"),10)||960)-t.left-t.right,p=(r||parseInt(u.style("height"),10)||400)-t.top-t.bottom;b.update=function(){u.transition().duration(300).call(b)},b.container=this;if(!o||!o.length||!o.filter(function(e){return e&&e.children.length}).length){u.select(".nvd3.nv-wrap").remove();var d=u.selectAll(".nv-noData").data([b.strings().noData]);return d.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),d.attr("x",t.left+h/2).attr("y",t.top+p/2).text(function(e){return e}),b}u.selectAll(".nv-noData").remove(),l==="data"&&C(o[0]);var w=u.selectAll("g.nv-wrap.nv-treemapWithLegend").data(o),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-treemapWithLegend").append("g"),S=w.select("g");E.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("width",h+t.left+t.right).attr("height",p+t.top+t.bottom).attr("fill","#FFF"),E.append("g").attr("class","nv-treemapWrap");var x=0,T=0;s&&(E.append("g").attr("class","nv-legendWrap"),g.id("legend_"+b.id()).strings(b.strings().legend).width(h+t.left).height(p),S.select(".nv-legendWrap").datum(o).call(g),T=g.height()+10,t.top!==T+x&&(t.top=T+x,p=(r||parseInt(u.style("height"),10)||400)-t.top-t.bottom),S.select(".nv-legendWrap").attr("transform","translate("+ -t.left+","+ -t.top+")")),i&&properties.title&&(E.append("g").attr("class","nv-titleWrap"),S.select(".nv-title").remove(),S.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(properties.title).attr("stroke","none").attr("fill","black"),x=parseInt(S.select(".nv-title").style("height"),10)+parseInt(S.select(".nv-title").style("margin-top"),10)+parseInt(S.select(".nv-title").style("margin-bottom"),10),t.top!==x+T&&(t.top=x+T,p=(r||parseInt(u.style("height"),10)||400)-t.top-t.bottom),S.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt(S.select(".nv-title").style("height"),10))+")")),w.attr("transform","translate("+t.left+","+t.top+")"),m.width(h).height(p);var N=S.select(".nv-treemapWrap").datum(o.filter(function(e){return!e.disabled}));N.transition().call(m),g.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,o.filter(function(e){return!e.disabled}).length||o.map(function(e){return e.disabled=!1,w.selectAll(".nv-series").classed("disabled",!1),e}),u.transition().duration(300).call(b)}),v.on("tooltipShow",function(e){a&&y(e,f.parentNode)})}),b}var t={top:0,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!1,o="ltr",u=null,a=!0,f=function(e){var t="<p>Value: <b>"+d3.format(",.2s")(e.value)+"</b></p>"+"<p>Name: <b>"+e.name+"</b></p>";return t},l="default",c=d3.scale.category20().range().map(function(e){return e}),h,p,d={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},v=d3.dispatch("tooltipShow","tooltipHide","tooltipMove","elementMousemove"),m=e.models.treemap(),g=e.models.legend(),y=function(t,n){var r=t.pos[0],i=t.pos[1],s=f(t.point);u=e.tooltip.show([r,i],s,null,null,n)};return m.dispatch.on("elementMouseover",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],v.tooltipShow(e)}),m.dispatch.on("elementMouseout",function(e){v.tooltipHide(e)}),v.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),m.dispatch.on("elementMousemove",function(e){v.tooltipMove(e)}),v.on("tooltipMove",function(t){u&&e.tooltip.position(u,t.pos)}),b.dispatch=v,b.legend=g,b.treemap=m,d3.rebind(b,m,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","leafClick","getSize","getName","groups","color","fill","classes","gradient","direction"),b.colorData=function(t){if(!arguments.length)return l;var n=arguments[0],r=arguments[1]||{},i=function(t,r){var i=n==="data"&&t.color?{color:t.color}:{};return e.utils.getColor(c)(i,r)},s=function(e,t){return"nv-child"};switch(n){case"graduated":i=function(e,t,n){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(t/n)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=t*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-child "+(e.className||"nv-fill"+n)}}var o=r.gradient?function(e,t){var n={orientation:r.orientation||"horizontal",position:r.position||"base"};return m.gradient(e,t,n)}:i;return m.color(i),m.fill(o),m.classes(s),g.color(i),g.classes(s),l=arguments[0],b},b.x=function(e){return arguments.length?(getX=e,m.x(e),b):getX},b.y=function(e){return arguments.length?(getY=e,m.y(e),b):getY},b.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,b):t},b.width=function(e){return arguments.length?(n=e,b):n},b.height=function(e){return arguments.length?(r=e,b):r},b.showTitle=function(e){return arguments.length?(i=e,b):i},b.showLegend=function(e){return arguments.length?(s=e,b):s},b.tooltip=function(e){return arguments.length?(u=e,b):u},b.tooltips=function(e){return arguments.length?(a=e,b):a},b.tooltipContent=function(e){return arguments.length?(f=e,b):f},b.strings=function(e){if(!arguments.length)return d;for(var t in e)e.hasOwnProperty(t)&&(d[t]=e[t]);return b},b},e.models.tree=function(){function L(e){return e.each(function(e){var o=d3.svg.diagonal().projection(function(e){return[y(e),b(e)]}),c=null;L.setZoom=function(){c=d3.behavior.zoom().scaleExtent([i.min,i.max]).on("zoom",function(){A.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")"),a(d3.event.scale)})},L.setZoom();var h=d3.select(this),p={width:parseInt(h.style("width"),10)-n.left-n.right,height:parseInt(h.style("height"),10)-n.top-n.bottom},d=h.selectAll(".nv-wrap").data([1]),T=d.enter().append("g").attr("class","nvd3 nv-wrap nv-treeChart").attr("id","nv-chart-"+l);d.call(c),T.append("defs");var N=d.select("defs");T.append("svg:rect").attr("class","nv-chartBackground").attr("width",p.width).attr("height",p.height).attr("transform","translate("+n.left+","+n.top+")").style("fill","transparent");var C=d.select(".nv-chartBackground"),k=T.append("g").attr("class","nv-chartWrap"),A=d.select(".nv-chartWrap");k.append("g").attr("class","nv-tree");var O=d.select(".nv-tree"),M=d3.layout.tree().size(null).nodeSize([f?s.height:s.width,1]).separation(function(t,n){return t.parent==n.parent?1:1});e.x0=e.x0||0,e.y0=e.y0||0;var _=e,D=null;L.resize=function(){L.reset(),p={width:parseInt(h.style("width"),10)-n.left-n.right,height:parseInt(h.style("height"),10)-n.top-n.bottom};var e=[Math.abs(d3.min(D,y))+Math.abs(d3.max(D,y))+s.width,Math.abs(d3.min(D,b))+Math.abs(d3.max(D,b))+s.height],t=p.width/e[0],r=p.height/e[1],i=d3.min([t,r]),o=[Math.abs(d3.min(D,y))+(t<r?0:(p.width/i-e[0])/2),Math.abs(d3.min(D,b))+(t<r?(p.height/i-e[1])/2:0)],u=[s.width/(f?1:2),s.height/(f?2:1)],a=[(o[0]+u[0])*i+n.left/(f?2:1),(o[1]+u[1])*i+n.top/(f?1:2)];C.attr("width",p.width).attr("height",p.height),O.attr("transform","translate("+a+")scale("+i+")")},L.orientation=function(e){f=e==="horizontal"||!f?!0:!1,M.nodeSize([f?s.height:s.width,1]),L.update(_)},L.showall=function(){function e(t){if(t.children&&t.children.length||t._children&&t._children.length)t._children&&t._children.length&&(t.children=t._children,t._children=null),t.children.forEach(e)}e(_),L.update(_)},L.reset=function(){L.setZoom(),c.translate([0,0]).scale(1),d.call(c),A.attr("transform","translate("+[0,0]+")scale("+1+")")},L.zoomStep=function(e){var t=c.scale()+e;return this.zoomLevel(t)},L.zoomLevel=function(e){var t=Math.min(Math.max(e,i.min),i.max),n=c.scale(),r=c.translate(),s=C.node().getBBox(),o=[s.width,s.height],u=[(o[0]-o[0]*t)/2,(o[1]-o[1]*t)/2],a=[t*(r[0]-(o[0]-o[0]*n)/2)/n,t*(r[1]-(o[1]-o[1]*n)/2)/n],f=[u[0]+a[0],u[1]+a[1]];return c.translate(f).scale(t),A.attr("transform","translate("+f+")scale("+t+")"),t},L.zoomScale=function(){return c.scale()},L.filter=function(t){function i(e){S(e)===t?(n=e,r=!0):!r&&e.children&&e.children.forEach(i)}var n={},r=!1;i(e),n.x0=0,n.y0=0,_=n,L.update(_)},L.update=function(e){function n(e){i(e),L.update(e)}function i(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null)}D=M.nodes(_);var a=D[0];D.forEach(function(e){v(e,e.depth*2*(f?s.width:s.height))});var l=O.selectAll("g.nv-card").data(D,S),c=l.enter().append("svg:g").attr("class","nv-card").attr("id",function(e){return"nv-card-"+S(e)}).attr("transform",function(t){return b(e)===0?"translate("+y(a)+","+b(a)+")":"translate("+w(e)+","+E(e)+")"});c.append("foreignObject").attr("class","nv-foreign-object").attr("width",1).attr("height",1).attr("x",-1).attr("y",-1).attr("externalResourcesRequired",!0).append("xhtml:body").style("font",'14px "Helvetica Neue"').html(u);var h=c.append("svg:g").attr("class","nv-expcoll").style("opacity",1e-6).on("click",n);h.append("svg:circle").attr("class","nv-circ-back").attr("r",t),h.append("svg:line").attr("class","nv-line-vert").attr("x1",0).attr("y1",.5-t).attr("x2",0).attr("y2",t-.5).style("stroke","#bbb"),h.append("svg:line").attr("class","nv-line-hrzn").attr("x1",.5-t).attr("y1",0).attr("x2",t-.5).attr("y2",0).style("stroke","#fff");var p=l.transition().duration(r).attr("transform",function(e){return"translate("+y(e)+","+b(e)+")"});p.select(".nv-expcoll").style("opacity",function(e){return e.children&&e.children.length||e._children&&e._children.length?1:0}),p.select(".nv-circ-back").style("fill",function(e){return e._children&&e._children.length?"#777":e.children?"#bbb":"none"}),p.select(".nv-line-vert").style("stroke",function(e){return e._children&&e._children.length?"#fff":"#bbb"}),p.selectAll(".nv-foreign-object").attr("width",s.width).attr("height",s.height).attr("x",f?-s.width+t:-s.width/2).attr("y",f?-s.height/2+t:-s.height+t*2);var d=l.exit().transition().duration(r).attr("transform",function(t){return"translate("+y(e)+","+b(e)+")"}).remove();d.selectAll(".nv-expcoll").style("stroke-opacity",1e-6),d.selectAll(".nv-foreign-object").attr("width",1).attr("height",1).attr("x",-1).attr("y",-1);var x=O.selectAll("path.link").data(M.links(D),function(e){return S(e.source)+"-"+S(e.target)});x.enter().insert("svg:path","g").attr("class","link").attr("d",function(t){var n=b(e)===0?{x:e.x,y:e.y}:{x:e.x0,y:e.y0};return o({source:n,target:n})}),x.transition().duration(r).attr("d",o),x.exit().transition().duration(r).attr("d",function(t){var n={x:e.x,y:e.y};return o({source:n,target:n})}).remove(),D.forEach(function(e){m(e,y(e)),g(e,b(e))}),L.resize()},L.gradient(x),L.update(_)}),L}var t=5.5,n={top:10,right:10,bottom:10,left:10},r=300,i={min:.25,max:2},s={width:100,height:50},o="../img/",u=function(e){return'<div class="nv-tree-node"></div>'},a=function(e){return},f=!1,l=Math.floor(Math.random()*1e4),c=function(t,n){return e.utils.defaultColor()(t,n)},h=function(e,t){return c(e,t)},p=function(e,t){return c(e,t)},d=function(e,t){e.x=t},v=function(e,t){e.y=t},m=function(e,t){f?e.y0=t:e.x0=t},g=function(e,t){f?e.x0=t:e.y0=t},y=function(e){return f?e.y:e.x},b=function(e){return f?e.x:e.y},w=function(e){return f?e.y0:e.x0},E=function(e){return f?e.x0:e.y0},S=function(e){return e.id},x=function(t,n){return e.utils.colorRadialGradient(t,n,0,0,"35%","35%",c(t,n),wrap.select("defs"))},T=!1,N=d3.format(",.2f"),C=!0,k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return L.dispatch=k,L.color=function(e){return arguments.length?(c=e,L):c},L.fill=function(e){return arguments.length?(h=e,L):h},L.gradient=function(e){return arguments.length?(p=e,L):p},L.useClass=function(e){return arguments.length?(T=e,L):T},L.width=function(e){return arguments.length?(width=e,L):width},L.height=function(e){return arguments.length?(height=e,L):height},L.values=function(e){return arguments.length?(getValues=e,L):getValues},L.x=function(e){return arguments.length?(y=e,L):y},L.y=function(e){return arguments.length?(b=d3.functor(e),L):b},L.showLabels=function(e){return arguments.length?(C=e,L):C},L.id=function(e){return arguments.length?(l=e,L):l},L.valueFormat=function(e){return arguments.length?(N=e,L):N},L.labelThreshold=function(e){return arguments.length?(labelThreshold=e,L):labelThreshold},L.radius=function(e){return arguments.length?(t=e,L):t},L.duration=function(e){return arguments.length?(r=e,L):r},L.zoomExtents=function(e){return arguments.length?(i=e,L):i},L.zoomCallback=function(e){return arguments.length?(a=e,L):a},L.padding=function(e){return arguments.length?(n=e,L):n},L.nodeSize=function(e){return arguments.length?(s=e,L):s},L.nodeImgPath=function(e){return arguments.length?(o=e,L):o},L.nodeRenderer=function(e){return arguments.length?(u=e,L):u},L.horizontal=function(e){return arguments.length?(f=e,L):f},L.getId=function(e){return arguments.length?(S=e,L):S},L}})();