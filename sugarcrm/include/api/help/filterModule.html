<!--
/*********************************************************************************
 * The contents of this file are subject to the SugarCRM Master Subscription
 * Agreement (""License"") which can be viewed at
 * http://www.sugarcrm.com/crm/master-subscription-agreement
 * By installing or using this file, You have unconditionally agreed to the
 * terms and conditions of the License, and You may not use this file except in
 * compliance with the License.  Under the terms of the license, You shall not,
 * among other things: 1) sublicense, resell, rent, lease, redistribute, assign
 * or otherwise transfer Your rights to the Software, and 2) use the Software
 * for timesharing or service bureau purposes such as hosting the Software for
 * commercial gain and/or for the benefit of a third party.  Use of the Software
 * may be subject to applicable fees and any use of the Software without first
 * paying applicable fees is strictly prohibited.  You do not have the right to
 * remove SugarCRM copyrights from the source code or user interface.
 *
 * All copies of the Covered Code must include on each user interface screen:
 *  (i) the ""Powered by SugarCRM"" logo and
 *  (ii) the SugarCRM copyright notice
 * in the same form as they appear in the distribution.  See full license for
 * requirements.
 *
 * Your Warranty, Limitations of liability and Indemnity are expressly stated
 * in the License.  Please refer to the License for the specific language
 * governing these rights and limitations under the License.  Portions created
 * by SugarCRM are Copyright (C) 2004-2012 SugarCRM, Inc.; All Rights Reserved.
 ********************************************************************************/
-->
<div class="longHelpTitle">Get a list of records from a module filtered by an expresssion</div>
<div class="summary">
<h2>Summary:</h2>
  This endpoint will return a set of records filtered by an expression. The filter can be applied to multiple fields and have multiple and/or conditions in it. The filter can also be applied to fields on related records. Care will need to be taken to make sure this filter has appropriate indexes on the server side otherwise the runtime of the endpoint will be very long. Related fields can be searched by specifying the field name as: "link_name.remote_field", so if you wished to search the Accounts module by a related member account you would use "members.sic_code".
</div>
<div class="params">
<h2>Query Parameters:</h2>
<table>
  <tr><th>Param</td><th>Description</td><th>Optional</td></tr>
  <tr><td>filter</td><td>The filter expression. Filter expressions are explained later on in this document.</td><td>Optional</td></tr>
  <tr><td>max_num</td><td>A maximum number of records to return (Default 20)</td><td>Optional</td></tr>
  <tr><td>offset</td><td>How many records to skip over before records are returned (Default 0)</td><td>Optional</td></tr>
  <tr><td>fields</td><td>Comma delimited list of what fields you want returned.<br>The field date_modified will always be added</td><td>Optional</td></tr>
  <tr><td>order_by</td><td>How to sort the returned records, in a comma delimited list with the direction appended to the column name after a colon.<br>Example: last_name:DESC,first_name:DESC,date_modified:ASC (Default "date_modified:DESC")</td><td>Optional</td></tr>
</table>
</div>
<div class="input">
<h2>Input Example:</h2>
<code class="codesample">
{
  "filter":[
      {"$or":
          {"name":"Nelson Inc"},
          {"name":"Nelson LLC"}
      },
      {"$owner":"_this"}
  ],
  "max_num":30
}
</code>
<br>
  This would filter the records in the module and find records that had the name of either "Nelson Inc" or "Nelson LLC" and were assigned to the current user.
</div>
<div class="output">
  <h2>Output Example:</h2>
<code class="codesample"> 
{
    "next_offset": 31, <span class="note">This will be set to -1 when there are no more records after this "page"</span>
    "records": [
        {
             "id":"514eab95-4e5b-63f1-1658-4f8c7675955c",
             "name":"Nelson Inc",
             "date_entered":"2012-04-16 19:41:10",
             "date_modified":"2012-04-16 19:41:10",
             "modified_user_id":"1",
             "created_by":"1","description":null,
             "deleted":"0",
             "assigned_user_id":"seed_sarah_id",
             ... additional fields ...
        },
        ... additional records ...
    ]
}
</code>
</div>
<div class="additional">
  <h2>Filter Expressions</h2>
  There are four types of filters:<br>
  <b>Basic:</b> {"name":"Nelson Inc"}<br>
  This will filter the results by checking the field "name" for value "Nelson Inc". This will only find exact matches.<br>
  <b>Full:</b> {"name": {"$starts":"Nelson"} }<br>
  This expression allows you to specify what operation you want to use for filtering on the field. In the example you would match any record where the field "name" starts with the value "Nelson". Here is a list of operation types:<br>
  <table>
    <tr><th colspan="2">Operation types</td></tr>
    <tr><td>$equals</td>    <td>Does an exact match on that field</td></tr>
    <tr><td>$not_equals</td><td>Matches on things that are not the value</td></tr>
    <tr><td>$starts</td>    <td>Matches on anything that starts with the value</td></tr>
    <tr><td>$ends</td>      <td>Matches anything that ends with the value</td></tr>
    <tr><td>$contains</td>  <td>Matches anything that contains the value</td></tr>
    <tr><td>$in</td>        <td>Finds anything where field matches one of the values as specified as an array</td></tr>
    <tr><td>$not_in</td>    <td>Finds anything where field does not matches any of the values as specified as an array</td></tr>
    <tr><td>$is_null</td>   <td>Checks if the field is null (this operation does not need a specified value)</td></tr>
    <tr><td>$not_null</td>  <td>Checks if the field is not null (this operation does not need a specified value)</td></tr>
    <tr><td>$lt</td>        <td>Matches when the field is less than the value</td></tr>
    <tr><td>$lte</td>       <td>Matches when the field is less than or equal to the value</td></tr>
    <tr><td>$gt</td>        <td>Matches when the field is greater than the value</td></tr>
    <tr><td>$gte</td>       <td>Matches when the field is greater than or equal to the value</td></tr>
  </table><br>
  <b>Sub-expressions:</b> {"$or":[ {"name":"Nelson Inc"} , {"name":"Nelson LLC"} ] }<br>
  This allows you to group filter expressions into or/and groupings. By default all expressions are and'ed together. The example expression would match if the field "name" was either "Nelson Inc" or "Nelson LLC". The only currently accepted sub-expression types are "$and" and "$or".<br>
  <b>Module:</b> {"$favorite":"_this"}<br>
  There are two module expressions, they operate on modules instead of fields. The current module can be specified by either using the module name "_this" or by leaving the module name as a blank string. The example expression would filter the records in the current module to only your favorites. The only currently accepted module expressions are "$favorite" and "$owner".<br>
  
</div>
