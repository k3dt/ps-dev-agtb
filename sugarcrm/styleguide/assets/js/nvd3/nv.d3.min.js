(function(){function t(e,t){return(new Date(t,e+1,0)).getDate()}function n(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s===0&&u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}var e=window.nv||{};e.version="0.0.1a",e.dev=!0,window.nv=e,e.tooltip={},e.utils={},e.models={},e.charts={},e.graphs=[],e.logs={},e.dispatch=d3.dispatch("render_start","render_end"),e.dev&&(e.dispatch.on("render_start",function(t){e.logs.startTime=+(new Date)}),e.dispatch.on("render_end",function(t){e.logs.endTime=+(new Date),e.logs.totalTime=e.logs.endTime-e.logs.startTime,e.log("total",e.logs.totalTime)})),e.log=function(){if(e.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(e.dev&&console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},e.render=function(n){n=n||1,e.render.active=!0,e.dispatch.render_start(),setTimeout(function(){var t,r;for(var i=0;i<n&&(r=e.render.queue[i]);i++)t=r.generate(),typeof r.callback==typeof Function&&r.callback(t),e.graphs.push(t);e.render.queue.splice(0,i),e.render.queue.length?setTimeout(arguments.callee,0):(e.render.active=!1,e.dispatch.render_end())},0)},e.render.active=!1,e.render.queue=[],e.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),e.render.queue.push(t),e.render.active||e.render()},e.identity=function(e){return e},e.strip=function(e){return e.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)},d3.time.monthEnds=n(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(e){return e.getMonth()}),function(){var t=window.nv.tooltip={};t.show=function(e,n,r,i,s,o){var u=document.createElement("div"),a=document.getElementsByTagName("body")[0];return u.className="nvtooltip "+(o?o:"xy-tooltip"),r=r||"s",i=i||20,u.innerHTML=n,u.style.left=0,u.style.top=-1e3,u.style.opacity=0,u.style.position="absolute",u.style.pointerEvents="none",a.appendChild(u),t.position(u,e,r,i),u.style.opacity=1,u},t.cleanup=function(){var e=document.getElementsByClassName("nvtooltip"),t=[];while(e.length)t.push(e[0]),e[0].style.transitionDelay="0 !important",e[0].style.opacity=0,e[0].className="nvtooltip-pending-removal";setTimeout(function(){while(t.length){var e=t.pop();e.parentNode.removeChild(e)}},500)},t.position=function(t,n,r,i){var s=document.getElementsByTagName("body")[0];r=r||"s",i=i||20;var o=parseInt(t.offsetHeight),u=parseInt(t.offsetWidth),a=e.utils.windowSize().width,f=e.utils.windowSize().height,l=s.scrollTop,c=s.scrollLeft,h,p;switch(r){case"e":h=n[0]-u-i,p=n[1]-o/2,h<c&&(h=n[0]+i),p<l&&(p=l+5),p+o>l+f&&(p=l-o-5);break;case"w":h=n[0]+i,p=n[1]-o/2,h+u>a&&(h=n[0]-u-i),p<l&&(p=l+5),p+o>l+f&&(p=l-o-5);break;case"n":h=n[0]-u/2,p=n[1]+i,h<c&&(h=c+5),h+u>a&&(h=a-u-5),p+o>l+f&&(p=n[1]-o-i);break;case"s":h=n[0]-u/2,p=n[1]-o-i,h<c&&(h=c+5),h+u>a&&(h=a-u-5),l>p&&(p=n[1]+20)}t.style.left=h+"px",t.style.top=p+"px"}}(),e.utils.windowSize=function(){var e={width:640,height:480};return document.body&&document.body.offsetWidth&&(e.width=document.body.offsetWidth,e.height=document.body.offsetHeight),document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(e.width=document.documentElement.offsetWidth,e.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e.width=window.innerWidth,e.height=window.innerHeight),e},e.utils.windowResize=function(e){window.attachEvent?window.attachEvent("onresize",e):window.addEventListener&&window.addEventListener("resize",e,!0)},e.utils.windowUnResize=function(e){window.detachEvent?window.detachEvent("onresize",e):window.removeEventListener&&window.removeEventListener("resize",e,!0)},e.utils.getColor=function(t){return arguments.length?Object.prototype.toString.call(t)==="[object Array]"?function(e,n){return e.color||t[n%t.length]}:t:e.utils.defaultColor()},e.utils.defaultColor=function(){var e=d3.scale.category20().range();return function(t,n){return t.color||e[n%e.length]}},e.utils.customTheme=function(e,t,n){t=t||function(e){return e.key},n=n||d3.scale.category20().range();var r=n.length;return function(i,s){var o=t(i);return r||(r=n.length),typeof e[o]!="undefined"?typeof e[o]=="function"?e[o]():e[o]:n[--r]}},e.utils.pjax=function(t,n){function r(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),e.utils.pjax(t,n)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},e.utils.colorLinearGradient=function(t,n,r,i,s){var o="lg_gradient_"+n,u=s.select("#"+o);return u.empty()&&(r.position==="middle"?e.utils.createLinearGradient(o,r,s,[{offset:"0%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1},{offset:"20%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1},{offset:"80%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1}]):e.utils.createLinearGradient(o,r,s,[{offset:"0%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1}])),"url(#"+o+")"},e.utils.createLinearGradient=function(e,t,n,r){var i=t.orientation==="horizontal"?"0%":"100%",s=t.orientation==="horizontal"?"100%":"0%",o=n.append("linearGradient").attr("id",e).attr("x1","0%").attr("y1","0%").attr("x2",i).attr("y2",s).attr("spreadMethod","pad");for(var u=0;u<r.length;u++){var a=r[u],f=o.append("stop");for(var l in a)a.hasOwnProperty(l)&&f.attr(l,a[l])}},e.utils.colorRadialGradient=function(t,n,r,i,s){var o="rg_gradient_"+n,u=s.select("#"+o);return u.empty()&&e.utils.createRadialGradient(o,r,s,[{offset:r.s+"%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1}]),"url(#"+o+")"},e.utils.createRadialGradient=function(e,t,n,r){var i=n.append("radialGradient").attr("id",e).attr("r",t.radius).attr("cx",t.x).attr("cy",t.y).attr("gradientUnits",t.u).attr("spreadMethod","pad");for(var s=0;s<r.length;s++){var o=r[s],u=i.append("stop");for(var a in o)o.hasOwnProperty(a)&&u.attr(a,o[a])}},e.utils.getAbsoluteXY=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,s=n.left+r,o=n.top+i;return{left:s,top:o}},e.utils.roundedRectangle=function(e,t,n,r,i){return"M"+e+","+t+"h"+(n-i*2)+"a"+i+","+i+" 0 0 1 "+i+","+i+"v"+(r-2-i*2)+"a"+i+","+i+" 0 0 1 "+ -i+","+i+"h"+(i*2-n)+"a"+ -i+","+i+" 0 0 1 "+ -i+","+ -i+"v"+(-r+i*2+2)+"a"+i+","+i+" 0 0 1 "+i+","+ -i+"z"},e.utils.dropShadow=function(e,t,n){var r=n||{},i=r.height||"130%",s=r.offset||2,o=r.blur||1,u=t.append("filter").attr("id",e).attr("height",i),a=u.append("feOffset").attr("in","SourceGraphic").attr("result","offsetBlur").attr("dx",s).attr("dy",s),f=u.append("feColorMatrix").attr("in","offsetBlur").attr("result","matrixOut").attr("type","matrix").attr("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"),l=u.append("feGaussianBlur").attr("in","matrixOut").attr("result","blurOut").attr("stdDeviation",o),c=u.append("feMerge");return c.append("feMergeNode"),c.append("feMergeNode").attr("in","SourceGraphic"),"url(#"+e+")"},e.models.axis=function(){function d(r){return r.each(function(r){var d=d3.select(this),v=d.selectAll("g.nv-wrap.nv-axis").data([r]),m=v.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),g=m.append("g"),y=v.select("g");h!==null?e.ticks(h):(e.orient()=="top"||e.orient()=="bottom")&&e.ticks(Math.abs(i.range()[1]-i.range()[0])/100),d3.transition(y).call(e),p=p||e.scale();var b=e.tickFormat();b==null&&(b=p.tickFormat());var w=y.selectAll("text.nv-axislabel").data([s||null]);w.exit().remove();switch(e.orient()){case"top":w.enter().append("text").attr("class","nv-axislabel");var E=i.range().length==2?i.range()[1]:i.range()[i.range().length-1]+(i.range()[1]-i.range()[0]);w.attr("text-anchor","middle").attr("y",0).attr("x",E/2);if(o){var S=v.selectAll("g.nv-axisMaxMin").data(i.domain());S.enter().append("g").attr("class","nv-axisMaxMin").append("text"),S.exit().remove(),S.attr("transform",function(e,t){return"translate("+i(e)+",0)"}).select("text").attr("dy","0em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(e,t){var n=b(e);return(""+n).match("NaN")?"":n}),d3.transition(S).attr("transform",function(e,t){return"translate("+i.range()[t]+",0)"})}break;case"bottom":var x=36,T=30,N=y.selectAll("g").select("text");if(a%360){N.each(function(e,t){var n=this.getBBox().width;n>T&&(T=n)});var C=Math.abs(Math.sin(a*Math.PI/180)),x=(C?C*T:T)+30;N.attr("transform",function(e,t,n){return"rotate("+a+" 0,0)"}).attr("text-anchor",a%360>0?"start":"end")}w.enter().append("text").attr("class","nv-axislabel");var E=i.range().length==2?i.range()[1]:i.range()[i.range().length-1]+(i.range()[1]-i.range()[0]);w.attr("text-anchor","middle").attr("y",x).attr("x",E/2);if(o){var S=v.selectAll("g.nv-axisMaxMin").data([i.domain()[0],i.domain()[i.domain().length-1]]);S.enter().append("g").attr("class","nv-axisMaxMin").append("text"),S.exit().remove(),S.attr("transform",function(e,t){return"translate("+(i(e)+(c?i.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",function(e,t,n){return"rotate("+a+" 0,0)"}).attr("text-anchor",a?a%360>0?"start":"end":"middle").text(function(e,t){var n=b(e);return(""+n).match("NaN")?"":n}),d3.transition(S).attr("transform",function(e,t){return"translate("+(i(e)+(c?i.rangeBand()/2:0))+",0)"})}l&&N.attr("transform",function(e,t){return"translate(0,"+(t%2==0?"0":"12")+")"});break;case"right":w.enter().append("text").attr("class","nv-axislabel"),w.attr("text-anchor",f?"middle":"begin").attr("transform",f?"rotate(90)":"").attr("y",f?-Math.max(t.right,n)+12:-10).attr("x",f?i.range()[0]/2:e.tickPadding());if(o){var S=v.selectAll("g.nv-axisMaxMin").data(i.domain());S.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),S.exit().remove(),S.attr("transform",function(e,t){return"translate(0,"+i(e)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).attr("text-anchor","start").text(function(e,t){var n=b(e);return(""+n).match("NaN")?"":n}),d3.transition(S).attr("transform",function(e,t){return"translate(0,"+i.range()[t]+")"}).select("text").style("opacity",1)}break;case"left":w.enter().append("text").attr("class","nv-axislabel"),w.attr("text-anchor",f?"middle":"end").attr("transform",f?"rotate(-90)":"").attr("y",f?-Math.max(t.left,n)+12:-10).attr("x",f?-i.range()[0]/2:-e.tickPadding());if(o){var S=v.selectAll("g.nv-axisMaxMin").data(i.domain());S.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),S.exit().remove(),S.attr("transform",function(e,t){return"translate(0,"+p(e)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(e,t){var n=b(e);return(""+n).match("NaN")?"":n}),d3.transition(S).attr("transform",function(e,t){return"translate(0,"+i.range()[t]+")"}).select("text").style("opacity",1)}}w.text(function(e){return e}),o&&(e.orient()==="left"||e.orient()==="right")&&(y.selectAll("g").each(function(e,t){d3.select(this).select("text").attr("opacity",1);if(i(e)<i.range()[1]+10||i(e)>i.range()[0]-10)(e>1e-10||e<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),i.domain()[0]==i.domain()[1]&&i.domain()[0]==0&&v.selectAll("g.nv-axisMaxMin").style("opacity",function(e,t){return t?0:1}));if(o&&(e.orient()==="top"||e.orient()==="bottom")){var k=[];v.selectAll("g.nv-axisMaxMin").each(function(e,t){try{t?k.push(i(e)-this.getBBox().width-4):k.push(i(e)+this.getBBox().width+4)}catch(n){t?k.push(i(e)-4):k.push(i(e)+4)}}),y.selectAll("g").each(function(e,t){if(i(e)<k[0]||i(e)>k[1])e>1e-10||e<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove()})}u&&y.selectAll("line.tick").filter(function(e){return!parseFloat(Math.round(e*1e5)/1e6)}).classed("zero",!0),p=i.copy()}),d}var e=d3.svg.axis(),t={top:0,right:0,bottom:0,left:0},n=75,r=60,i=d3.scale.linear(),s=null,o=!0,u=!0,a=0,f=!0,l=!1,c=!1,h=null;e.scale(i).orient("bottom").tickFormat(function(e){return e});var p;return d.axis=e,d3.rebind(d,e,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(d,i,"domain","range","rangeBand","rangeBands"),d.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,d):t},d.width=function(e){return arguments.length?(n=e,d):n},d.ticks=function(e){return arguments.length?(h=e,d):h},d.height=function(e){return arguments.length?(r=e,d):r},d.axisLabel=function(e){return arguments.length?(s=e,d):s},d.showMaxMin=function(e){return arguments.length?(o=e,d):o},d.highlightZero=function(e){return arguments.length?(u=e,d):u},d.scale=function(t){return arguments.length?(i=t,e.scale(i),c=typeof i.rangeBands=="function",d3.rebind(d,i,"domain","range","rangeBand","rangeBands"),d):i},d.rotateYLabel=function(e){return arguments.length?(f=e,d):f},d.rotateLabels=function(e){return arguments.length?(a=e,d):a},d.staggerLabels=function(e){return arguments.length?(l=e,d):l},d},e.models.legend=function(){function f(e){return e.each(function(e){var f=n-t.left-t.right,l=d3.select(this),c=l.selectAll("g.nv-legend").data([e]),h=c.enter().append("g").attr("class","nvd3 nv-legend").append("g"),p=c.select("g");c.attr("transform","translate("+t.left+","+t.top+")");var d=p.selectAll(".nv-series").data(function(e){return e}),v=d.enter().append("g").attr("class","nv-series").on("mouseover",function(e,t){a.legendMouseover(e,t)}).on("mouseout",function(e,t){a.legendMouseout(e,t)}).on("click",function(e,t){a.legendClick(e,t)}).on("dblclick",function(e,t){a.legendDblclick(e,t)});v.append("circle").style("stroke-width",2).attr("r",5),v.append("text").attr("text-anchor","start").attr("dy",".32em").attr("dx","8"),d.classed("disabled",function(e){return e.disabled}),d.exit().remove(),d.select("circle").attr("class",function(e,t){return this.getAttribute("class")||o(e,t)}).attr("fill",function(e,t){return this.getAttribute("fill")||s(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||s(e,t)}),d.select("text").text(i);if(u){var m=[];d.each(function(e,t){m.push(d3.select(this).select("text").node().getComputedTextLength()+28)});var g=0,y=0,b=[];while(y<f&&g<m.length)b[g]=m[g],y+=m[g++];while(y>f&&g>1){b=[],g--;for(k=0;k<m.length;k++)m[k]>(b[k%g]||0)&&(b[k%g]=m[k]);y=b.reduce(function(e,t,n,r){return e+t})}var w=[];for(var E=0,S=0;E<g;E++)w[E]=S,S+=b[E];d.attr("transform",function(e,t){return"translate("+w[t%g]+","+(5+Math.floor(t/g)*20)+")"}),p.attr("transform","translate("+(n-t.right-y)+","+t.top+")"),r=t.top+t.bottom+Math.ceil(m.length/g)*20}else{var x=5,T=5,N=0,C;d.attr("transform",function(e,r){var i=d3.select(this).select("text").node().getComputedTextLength()+28;return C=T,n<t.left+t.right+C+i&&(T=C=5,x+=20),T+=i,T>N&&(N=T),"translate("+C+","+x+")"}),p.attr("transform","translate("+(n-t.right-N)+","+t.top+")"),r=t.top+t.bottom+x+15}}),f}var t={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(e){return e.key},s=e.utils.defaultColor(),o=function(e,t){return""},u=!0,a=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout");return f.dispatch=a,f.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,f):t},f.width=function(e){return arguments.length?(n=e,f):n},f.height=function(e){return arguments.length?(r=e,f):r},f.key=function(e){return arguments.length?(i=e,f):i},f.color=function(t){return arguments.length?(s=e.utils.getColor(t),f):s},f.classes=function(e){return arguments.length?(o=e,f):o},f.align=function(e){return arguments.length?(u=e,f):u},f},e.models.scatter=function(){function F(I){return I.each(function(I){function Q(){if(!b)return!1;var e,i=d3.merge(I.map(function(e,t){return e.values.map(function(e,n){return[a(c(e,n))*(Math.random()/1e12+1),f(h(e,n))*(Math.random()/1e12+1),t,n,e]}).filter(function(e,t){return w(e[4],t)})}));if(_===!0){if(T){var s=X.select("defs").selectAll(".nv-point-clips").data([u]).enter();s.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+u);var o=X.select("#nv-points-clip-"+u).selectAll("circle").data(i);o.enter().append("circle").attr("r",N),o.exit().remove(),o.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}),X.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+u+")")}i.length<3&&(i.push([a.range()[0]-20,f.range()[0]-20,null,null]),i.push([a.range()[1]+20,f.range()[1]+20,null,null]),i.push([a.range()[0]-20,f.range()[0]+20,null,null]),i.push([a.range()[1]+20,f.range()[1]-20,null,null]));var l=d3.geom.polygon([[-10,-10],[-10,r+10],[n+10,r+10],[n+10,-10]]),p=d3.geom.voronoi(i).map(function(e,t){return{data:l.clip(e),series:i[t][2],point:i[t][3]}}),d=X.select(".nv-point-paths").selectAll("path").data(p);d.enter().append("path").attr("class",function(e,t){return"nv-path-"+t}),d.exit().remove(),d.attr("d",function(e){return"M"+e.data.join("L")+"Z"}),d.on("click",function(e){if(j)return 0;var n=I[e.series],r=n.values[e.point];M.elementClick({point:r,series:n,pos:[a(c(r,e.point))+t.left,f(h(r,e.point))+t.top],seriesIndex:e.series,pointIndex:e.point})}).on("mouseover",function(e){if(j)return 0;var n=I[e.series],r=n.values[e.point];M.elementMouseover({point:r,series:n,pos:[a(c(r,e.point))+t.left,f(h(r,e.point))+t.top],seriesIndex:e.series,pointIndex:e.point})}).on("mouseout",function(e,t){if(j)return 0;var n=I[e.series],r=n.values[e.point];M.elementMouseout({point:r,series:n,seriesIndex:e.series,pointIndex:e.point})})}else X.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,n){if(j||!I[e.series])return 0;var r=I[e.series],i=r.values[n];M.elementClick({point:i,series:r,pos:[a(c(i,n))+t.left,f(h(i,n))+t.top],seriesIndex:e.series,pointIndex:n})}).on("mouseover",function(e,n){if(j||!I[e.series])return 0;var r=I[e.series],i=r.values[n];M.elementMouseover({point:i,series:r,pos:[a(c(i,n))+t.left,f(h(i,n))+t.top],seriesIndex:e.series,pointIndex:n})}).on("mouseout",function(e,t){if(j||!I[e.series])return 0;var n=I[e.series],r=n.values[t];M.elementMouseout({point:r,series:n,seriesIndex:e.series,pointIndex:t})});j=!1}var q=n-t.left-t.right,R=r-t.top-t.bottom,U=d3.select(this);I=I.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var W=C&&k&&L?[]:d3.merge(I.map(function(e){return e.values.map(function(e,t){return{x:c(e,t),y:h(e,t),size:p(e,t)}})}));a.domain(C||d3.extent(W.map(function(e){return e.x}).concat(m))),E&&I[0]?a.range([(q*S+q)/(2*I[0].values.length),q-q*(1+S)/(2*I[0].values.length)]):a.range([0,q]),f.domain(k||d3.extent(W.map(function(e){return e.y}).concat(g))).range([R,0]),l.domain(L||d3.extent(W.map(function(e){return e.size}).concat(y))).range(A||[16,256]);if(a.domain()[0]===a.domain()[1]||f.domain()[0]===f.domain()[1])O=!0;a.domain()[0]===a.domain()[1]&&(a.domain()[0]?a.domain([a.domain()[0]-a.domain()[0]*.01,a.domain()[1]+a.domain()[1]*.01]):a.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+f.domain()[0]*.01,f.domain()[1]-f.domain()[1]*.01]):f.domain([-1,1])),D=D||a,P=P||f,H=H||l;var X=U.selectAll("g.nv-wrap.nv-scatter").data([I]),V=X.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+u+(O?" nv-single-point":"")),$=V.append("defs"),J=V.append("g"),K=X.select("g");F.gradient=function(t,n){return e.utils.colorRadialGradient(t,u+"-"+n,{x:.5,y:.5,r:.5,s:0,u:"objectBoundingBox"},i(t,n),X.select("defs"))},J.append("g").attr("class","nv-groups"),J.append("g").attr("class","nv-point-paths"),X.attr("transform","translate("+t.left+","+t.top+")"),$.append("clipPath").attr("id","nv-edge-clip-"+u).append("rect"),X.select("#nv-edge-clip-"+u+" rect").attr("width",q).attr("height",R),K.attr("clip-path",x?"url(#nv-edge-clip-"+u+")":""),j=!0;var G=X.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});G.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(G.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),G.attr("class",function(e,t){return this.getAttribute("class")||o(e,e.iClass)}).attr("fill",function(e,t){return this.getAttribute("fill")||s(e,e.iClass)}).attr("stroke",function(e,t){return this.getAttribute("stroke")||s(e,e.iClass)}).classed("hover",function(e){return e.hover}),d3.transition(G).style("stroke-opacity",1).style("fill-opacity",.5);if(v){var Y=G.selectAll("circle.nv-point").data(function(e){return e.values});Y.enter().append("circle").attr("cx",function(e,t){return D(c(e,t))}).attr("cy",function(e,t){return P(h(e,t))}).attr("r",function(e,t){return Math.sqrt(l(p(e,t))/Math.PI)}),Y.exit().remove(),d3.transition(G.exit().selectAll("path.nv-point")).attr("cx",function(e,t){return a(c(e,t))}).attr("cy",function(e,t){return f(h(e,t))}).remove(),Y.attr("class",function(e,t){return"nv-point nv-point-"+t}),d3.transition(Y).attr("cx",function(e,t){return a(c(e,t))}).attr("cy",function(e,t){return f(h(e,t))}).attr("r",function(e,t){return Math.sqrt(l(p(e,t))/Math.PI)})}else{var Y=G.selectAll("path.nv-point").data(function(e){return e.values});Y.enter().append("path").attr("transform",function(e,t){return"translate("+D(c(e,t))+","+P(h(e,t))+")"}).attr("d",d3.svg.symbol().type(d).size(function(e,t){return l(p(e,t))})),Y.exit().remove(),d3.transition(G.exit().selectAll("path.nv-point")).attr("transform",function(e,t){return"translate("+a(c(e,t))+","+f(h(e,t))+")"}).remove(),Y.attr("class",function(e,t){return"nv-point nv-point-"+t}),d3.transition(Y).attr("transform",function(e,t){return"translate("+a(c(e,t))+","+f(h(e,t))+")"}).attr("d",d3.svg.symbol().type(d).size(function(e,t){return l(p(e,t))}))}clearTimeout(B),B=setTimeout(Q,300),D=a.copy(),P=f.copy(),H=l.copy()}),F}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=i,o=function(e,t){return"nv-group nv-series-"+t},u=Math.floor(Math.random()*1e5),a=d3.scale.linear(),f=d3.scale.linear(),l=d3.scale.linear(),c=function(e){return e.x},h=function(e){return e.y},p=function(e){return e.size||1},d=function(e){return e.shape||"circle"},v=!0,m=[],g=[],y=[],b=!0,w=function(e){return!e.notActive},E=!1,S=.1,x=!1,T=!0,N=function(){return 25},C=null,k=null,L=null,A=null,O=!1,M=d3.dispatch("elementClick","elementMouseover","elementMouseout"),_=!0,D,P,H,B,j=!1;return M.on("elementMouseover.point",function(e){b&&d3.select(".nv-chart-"+u+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!0)}),M.on("elementMouseout.point",function(e){b&&d3.select(".nv-chart-"+u+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!1)}),F.dispatch=M,F.color=function(e){return arguments.length?(i=e,F):i},F.fill=function(e){return arguments.length?(s=e,F):s},F.classes=function(e){return arguments.length?(o=e,F):o},F.gradient=function(e){return arguments.length?(gradient=e,F):gradient},F.x=function(e){return arguments.length?(c=d3.functor(e),F):c},F.y=function(e){return arguments.length?(h=d3.functor(e),F):h},F.size=function(e){return arguments.length?(p=d3.functor(e),F):p},F.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,F):t},F.width=function(e){return arguments.length?(n=e,F):n},F.height=function(e){return arguments.length?(r=e,F):r},F.xScale=function(e){return arguments.length?(a=e,F):a},F.yScale=function(e){return arguments.length?(f=e,F):f},F.zScale=function(e){return arguments.length?(l=e,F):l},F.xDomain=function(e){return arguments.length?(C=e,F):C},F.yDomain=function(e){return arguments.length?(k=e,F):k},F.sizeDomain=function(e){return arguments.length?(L=e,F):L},F.sizeRange=function(e){return arguments.length?(A=e,F):A},F.forceX=function(e){return arguments.length?(m=e,F):m},F.forceY=function(e){return arguments.length?(g=e,F):g},F.forceSize=function(e){return arguments.length?(y=e,F):y},F.interactive=function(e){return arguments.length?(b=e,F):b},F.pointActive=function(e){return arguments.length?(w=e,F):w},F.padData=function(e){return arguments.length?(E=e,F):E},F.padDataOuter=function(e){return arguments.length?(S=e,F):S},F.clipEdge=function(e){return arguments.length?(x=e,F):x},F.clipVoronoi=function(e){return arguments.length?(T=e,F):T},F.useVoronoi=function(e){return arguments.length?(_=e,_===!1&&(T=!1),F):_},F.clipRadius=function(e){return arguments.length?(N=e,F):N},F.shape=function(e){return arguments.length?(d=e,F):d},F.onlyCircles=function(e){return arguments.length?(v=e,F):v},F.id=function(e){return arguments.length?(u=e,F):u},F.singlePoint=function(e){return arguments.length?(O=e,F):O},F},e.models.bubbleChart=function(){function M(e){return e.each(function(n){function h(e){function t(e){return 32-(new Date(e.getFullYear(),e.getMonth(),32)).getDate()}var n=d3.extent(d3.merge(e.map(function(e){return e.values.map(function(e,t){return d3.time.format("%Y-%m-%d").parse(i(e))})}))),r=d3.time.month.range(d3.time.month.floor(n[0]),d3.time.month.ceil(n[1])),s=r.map(function(e){return d3.time.day.offset(d3.time.month.floor(e),-1+t(e)/2)});return s}function v(e,t){var n=d3.nest().key(l).entries(e),r=t/n.length,i=r*.25,s=[0,1],o=[0,1],u=d3.scale.linear().domain(s).range(o),a=[],f=0;return n.map(function(e,t){return e.total=0,e.values=e.values.sort(function(e,t){return t.y<e.y?-1:t.y>e.y?1:0}).map(function(t){return e.total+=t.y,t}),e.group=t,e}).sort(function(e,t){return e.total<t.total?-1:e.total>t.total?1:0}).map(function(e,t){return f+=e.total,s=d3.extent(e.values.map(function(e){return e.y})),o=[r*t+i,r*(t+1)-i],u.domain(s).range(o),e.values=e.values.map(function(t){return t.group=e.group,t.opportunity=t.y,t.y=u(t.opportunity),t}),a.push({y:d3.min(e.values.map(function(e){return e.y})),key:e.key}),e}),a}var r=n.properties,u=n.data,a=d3.select(this),f=this,m=m||parseInt(a.style("width"),10),g=g||parseInt(a.style("height"),10),b=(m||960)-t.left-t.right,E=(g||400)-t.top-t.bottom,S=v(u,E);if(!u||!u.length)return a.selectAll(".nv-bubbleChart").remove(),a.append("text").attr("class","nvd3 nv-noData").attr("x",b/2).attr("y",E/2).attr("dy","-.7em").style("text-anchor","middle").text(w),M;var _=d3.nest().key(c).entries(u);_=_.map(function(e,t){return e.series=t,e.className=e.values[0].classes,e}),M.render=function(){a.selectAll(".nv-noData").remove();var e=e||parseInt(a.style("width"),10),n=n||parseInt(a.style("height"),10),i=(e||960)-t.left-t.right,u=(n||400)-t.top-t.bottom,f=a.selectAll("g.nv-wrap.nv-bubbleChart").data([_]),l=f.enter().append("g").attr("class","nvd3 nv-wrap nv-bubbleChart").append("g"),c=f.select("g");l.append("g").attr("class","nv-x nv-axis"),l.append("g").attr("class","nv-y nv-axis"),l.append("g").attr("class","nv-bubblesWrap");var v=0,m=0;p&&(l.append("g").attr("class","nv-legendWrap"),L.width(e*(d?.7:1)-10).key(function(e){return e.key+"%"}),c.select(".nv-legendWrap").datum(_).call(L),m=L.height(),t.top<Math.max(m,v)&&(t.top=Math.max(m,v),u=(n||parseInt(a.style("height"),10)||400)-t.top-t.bottom),c.select(".nv-legendWrap").attr("transform","translate("+(e*(d?.3:0)-t.left+10)+","+ -t.top+")")),d&&r.title&&(l.append("g").attr("class","nv-titleWrap"),c.select(".nv-title").remove(),c.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(r.title).attr("stroke","none").attr("fill","black"),v=parseInt(c.select(".nv-title").node().getBBox().height,10)+parseInt(c.select(".nv-title").style("margin-top"),10)+parseInt(c.select(".nv-title").style("margin-bottom"),10),t.top<Math.max(m,v)&&(t.top=Math.max(m,v),u=(n||parseInt(a.style("height"),10)||400)-t.top-t.bottom),c.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt(c.select(".nv-title").node().getBBox().height,10))+")")),f.attr("transform","translate("+t.left+","+t.top+")");var g=d3.extent(d3.merge(_.map(function(e){return e.values.map(function(e,t){return d3.time.format("%Y-%m-%d").parse(e.x)})}))),y=[d3.time.month.floor(g[0]),d3.time.day.offset(d3.time.month.ceil(g[1]),-1)],b=d3.extent(d3.merge(_.map(function(e){return e.values.map(function(e,t){return s(e,t)})})).concat(o));x.size(function(e){return e.y}).sizeRange([256,2048]).singlePoint(!0).xScale(T).xDomain(y).yScale(N).yDomain(b).width(i).height(u).id(M.id());var w=c.select(".nv-bubblesWrap").datum(_.filter(function(e){return!e.disabled}));d3.transition(w).call(x),C.scale(T).ticks(d3.time.months,1).tickSize(0).tickValues(h(_)).showMaxMin(!1).tickFormat(function(e){return d3.time.format("%b")(new Date(e))}),c.select(".nv-x.nv-axis").attr("transform","translate(0,"+N.range()[0]+")"),d3.transition(c.select(".nv-x.nv-axis")).call(C),k.scale(N).ticks(S.length).tickValues(S.map(function(e,t){return S[t].y})).tickSize(-i,0).tickFormat(function(e,t){return S[t].key}),d3.transition(c.select(".nv-y.nv-axis")).call(k)},L.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,u.filter(function(e){return!e.disabled}).length||u.map(function(e){return e.disabled=!1,wrap.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(M.render)}),A.on("tooltipShow",function(e){y&&O(e,f.parentNode)}),M.render(),M.update=function(){M(e)},M.container=this}),M}var t={top:70,right:20,bottom:30,left:100},n=null,r=null,i=function(e){return e.x},s=function(e){return e.y},o=[0],u=!1,a,f,l=function(e){return e.y},c=function(e){return e.y},h=0,p=!0,d=!1,v=!0,m=!1,g=0,y=!0,b=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},w="No Data Available.",E=function(e){return},S=d3.time.format("%Y-%m-%d"),x=e.models.scatter(),T=x.xScale(),N=x.yScale(),C=e.models.axis().orient("bottom").tickPadding(5).highlightZero(!1).showMaxMin(!1),k=e.models.axis().orient("left").highlightZero(!1).showMaxMin(!1),L=e.models.legend(),A=d3.dispatch("tooltipShow","tooltipHide"),O=function(n,r){var i={left:0,right:0};if(r){var s=d3.select(r).select("svg"),o=s.attr("viewBox");i=e.utils.getAbsoluteXY(r);if(o){o=o.split(" ");var u=parseInt(s.style("width"),10)/o[2];n.pos[0]=n.pos[0]*u,n.pos[1]=n.pos[1]*u}}var a=n.pos[0]+(i.left||0)+t.left,f=n.pos[1]+(i.top||0)+t.top,l=n.point.x,c=n.point.y,h=b(n.series.key,l,c,n,M);e.tooltip.show([a,f],h,null,null,r)};return x.dispatch.on("elementMouseover.tooltip",function(e){A.tooltipShow(e)}),x.dispatch.on("elementMouseout.tooltip",function(e){A.tooltipHide(e)}),A.on("tooltipHide",function(){y&&e.tooltip.cleanup()}),x.dispatch.on("elementClick",function(t){E(t),e.tooltip.cleanup()}),M.dispatch=A,M.scatter=x,M.legend=L,M.xAxis=C,M.yAxis=k,d3.rebind(M,x,"interactive","size","x","y","id","forceX","forceY","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceSize","clipEdge","clipVoronoi","clipRadius","color","fill","classes","gradient"),M.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,t.series)},r=function(e,t){return"nv-group nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(e.series/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=e.series*(s.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var f=s.gradient?function(e,t){return x.gradient(e,e.series)}:n;return x.color(n),x.fill(f),x.classes(r),L.color(n),L.classes(r),M},M.margin=function(e){return arguments.length?(t=e,M):t},M.width=function(e){return arguments.length?(n=e,M):n},M.height=function(e){return arguments.length?(r=e,M):r},M.showLegend=function(e){return arguments.length?(p=e,M):p},M.showTitle=function(e){return arguments.length?(d=e,M):d},M.tooltips=function(e){return arguments.length?(y=e,M):y},M.tooltip=function(e){return arguments.length?(b=e,M):b},
M.noData=function(e){return arguments.length?(w=e,M):w},M.bubbleClick=function(e){return arguments.length?(E=e,M):E},M.groupBy=function(e){return arguments.length?(l=e,M):l},M.filterBy=function(e){return arguments.length?(c=e,M):c},M},e.models.funnel=function(){function E(S){return S.each(function(S){var T=n-t.left-t.right,N=r-t.top-t.bottom,C=d3.select(this),k=20;S=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(S),S=S.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var L=h&&p?[]:S.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});i.domain(d3.merge(L).map(function(e){return e.x})).rangeBands([0,T],.1),s.domain(p||d3.extent(d3.merge(L).map(function(e){return e.y+e.y0}).concat(f))).range([N,0]);if(i.domain()[0]===i.domain()[1]||s.domain()[0]===s.domain()[1])singlePoint=!0;i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1])),s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]+s.domain()[0]*.01,s.domain()[1]-s.domain()[1]*.01]):s.domain([-1,1])),b=b||i,w=w||s;var A=C.selectAll("g.nv-wrap.nv-funnel").data([S]),O=A.enter().append("g").attr("class","nvd3 nv-wrap nv-funnel"),M=O.append("defs"),_=O.append("g"),D=A.select("g");E.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,o+"-"+n,r,v(t,n),A.select("defs"))},_.append("g").attr("class","nv-groups"),A.attr("transform","translate("+t.left+","+t.top+")"),M.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),A.select("#nv-edge-clip-"+o+" rect").attr("width",T).attr("height",N),D.attr("clip-path",l?"url(#nv-edge-clip-"+o+")":"");var P=Math.min(N/1.1,T-40),H=(P/3-P)/2/N,B=T/2,j=A.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});j.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(j.exit()).selectAll("polygon.nv-bar").delay(function(e,t){return t*c/S[0].values.length}).attr("points",function(e){var t=H*s(e.y0)+P/2,n=H*s(e.y0+e.y)+P/2;return B-t+","+0+" "+(B-n)+","+0+" "+(B+n)+","+0+" "+(B+t)+","+0}).remove(),d3.transition(j.exit()).selectAll("g.nv-label-value").delay(function(e,t){return t*c/S[0].values.length}).attr("y",0).style("fill-opacity",1e-6).attr("transform","translate("+B+",0)").remove(),d3.transition(j.exit()).selectAll("text.nv-label-group").delay(function(e,t){return t*c/S[0].values.length}).attr("y",0).style("fill-opacity",1e-6).attr("transform","translate("+T+",0)").remove(),j.attr("class",function(e,t){return this.getAttribute("class")||g(e,t)}).classed("hover",function(e){return e.hover}).attr("fill",function(e,t){return this.getAttribute("fill")||m(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||m(e,t)}),d3.transition(j).style("stroke-opacity",1).style("fill-opacity",1);var F=j.selectAll("polygon.nv-bar").data(function(e){return e.values}),I=F.enter().append("polygon").attr("class","nv-bar positive").attr("points",function(e){var t=H*s(e.y0)+P/2,n=H*s(e.y0+e.y)+P/2;return B-t+","+0+" "+(B-n)+","+0+" "+(B+n)+","+0+" "+(B+t)+","+0});d3.transition(F).delay(function(e,t){return t*c/S[0].values.length}).attr("points",function(e){var t=H*s(e.y0)+P/2,n=H*s(e.y0+e.y)+P/2;return B-t+","+s(e.y0)+" "+(B-n)+","+s(e.y0+e.y)+" "+(B+n)+","+s(e.y0+e.y)+" "+(B+t)+","+s(e.y0)});var q=j.selectAll(".nv-label-value").data(function(e){return e.values}),R=q.enter().append("g").attr("class","nv-label-value").attr("transform","translate("+B+",0)");R.append("text").attr("x",0).attr("y",5).attr("text-anchor","middle").text(function(e){return d(e)}).attr("stroke","none").style("fill","#fff"),q.selectAll("text").each(function(e,t){var n=this.getBBox().width+20;n>k&&(k=n)}),d3.transition(q).delay(function(e,t){return t*c/S[0].values.length}).attr("transform",function(e){return"translate("+B+","+s(e.y0+e.y/2)+")"});var U=j.selectAll("text.nv-label-group").data(function(e){return[{y:e.values[0].y,y0:e.values[0].y0,key:e.count}]}),z=U.enter().append("text").attr("class","nv-label-group").attr("x",0).attr("y",0).attr("dx",-10).attr("dy",5).attr("text-anchor","middle").text(function(e){return e.key}).attr("stroke","none").style("fill","black").style("fill-opacity",1e-6).attr("transform","translate("+T+",0)");d3.transition(U).delay(function(e,t){return t*c/S[0].values.length}).style("fill-opacity",1).attr("transform",function(e){return"translate("+T+","+s(e.y0+e.y/2)+")"}),F.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),y.elementMouseover({value:a(e,t),point:e,series:S[e.series],pos:[i(u(e,t))+i.rangeBand()*(S.length/2)/S.length,s(a(e,t)+e.y0)],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),y.elementMouseout({value:a(e,t),point:e,series:S[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){y.elementClick({value:a(e,t),point:e,series:S[e.series],pos:[i(u(e,t))+i.rangeBand()*(S.length/2)/S.length,s(a(e,t)+e.y0)],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){y.elementDblClick({value:a(e,t),point:e,series:S[e.series],pos:[i(u(e,t))+i.rangeBand()*(S.length/2)/S.length,s(a(e,t)+e.y0)],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),b=i.copy(),w=s.copy()}),E}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=!0,c=1200,h,p,d=function(e){return e.y},v=e.utils.defaultColor(),m=v,g=function(e,t){return"nv-group nv-series-"+t},y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),b,w;return E.dispatch=y,E.color=function(e){return arguments.length?(v=e,E):v},E.fill=function(e){return arguments.length?(m=e,E):m},E.classes=function(e){return arguments.length?(g=e,E):g},E.gradient=function(e){return arguments.length?(gradient=e,E):gradient},E.x=function(e){return arguments.length?(u=e,E):u},E.y=function(e){return arguments.length?(a=e,E):a},E.margin=function(e){return arguments.length?(t=e,E):t},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.xScale=function(e){return arguments.length?(i=e,E):i},E.yScale=function(e){return arguments.length?(s=e,E):s},E.xDomain=function(e){return arguments.length?(h=e,E):h},E.yDomain=function(e){return arguments.length?(p=e,E):p},E.forceY=function(e){return arguments.length?(f=e,E):f},E.id=function(e){return arguments.length?(o=e,E):o},E.delay=function(e){return arguments.length?(c=e,E):c},E.clipEdge=function(e){return arguments.length?(l=e,E):l},E.fmtValueLabel=function(e){return arguments.length?(d=e,E):d},E},e.models.funnelChart=function(){function g(e){return e.each(function(n){var f=n.properties,c=n.data,b=d3.select(this),w=this,E=(s||parseInt(b.style("width"),10)||960)-i.left-i.right,S=(o||parseInt(b.style("height"),10)||400)-i.top-i.bottom;if(!c||!c.length||!c.filter(function(e){return e.values.length}).length)return b.append("text").attr("class","nvd3 nv-noData").attr("x",E/2).attr("y",S/2).attr("dy","-.7em").style("text-anchor","middle").text(d),g;b.select(".nv-noData").remove(),h=t.xScale();var T=b.selectAll("g.nv-wrap.nv-funnelWithLegend").data([c]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-funnelWithLegend").append("g"),C=T.select("g");N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-funnelWrap");var k=0,L=0;u&&(N.append("g").attr("class","nv-legendWrap"),r.width(E+i.left),C.select(".nv-legendWrap").datum(c).call(r),L=r.height()+10,i.top!==L+k&&(i.top=L+k,S=(o||parseInt(b.style("height"),10)||400)-i.top-i.bottom),C.select(".nv-legendWrap").attr("transform","translate("+ -i.left+","+ -i.top+")")),a&&f.title&&(N.append("g").attr("class","nv-titleWrap"),C.select(".nv-title").remove(),C.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(f.title).attr("stroke","none").attr("fill","black"),k=parseInt(C.select(".nv-title").node().getBBox().height,10)+parseInt(C.select(".nv-title").style("margin-top"),10)+parseInt(C.select(".nv-title").style("margin-bottom"),10),i.top!==k+L&&(i.top=k+L,S=(o||parseInt(b.style("height"),10)||400)-i.top-i.bottom),C.select(".nv-titleWrap").attr("transform","translate(0,"+(-i.top+parseInt(C.select(".nv-title").node().getBBox().height,10))+")")),T.attr("transform","translate("+i.left+","+i.top+")"),t.width(E).height(S);var A=C.select(".nv-funnelWrap").datum(c.filter(function(e){return!e.disabled}));d3.transition(A).call(t);var O=[{x:0,y:0}],M=c.filter(function(e){return!e.disabled}).map(function(e){return e.values.map(function(e,t){return{x:e.x,y:e.y0+e.y}})}),_=d3.merge(O.concat(M)),D=d3.extent(_,function(e){return e.y}),P=d3.merge(_).map(function(e){return e.y});p=d3.scale.linear().domain(D).range([S,0]),yScale=d3.scale.quantile().domain(P).range(P.map(function(e){return p(e)}));var H=S/1.1,B=(H/8-H)/2/S,j=E/2,F=d3.svg.axis().scale(yScale).orient("left").tickSize(-E,0).tickValues(P).tickFormat(function(e,t){return""});d3.transition(C.select(".nv-y.nv-axis")).call(F).style("stroke-width","1").selectAll("line"),r.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,c.filter(function(e){return!e.disabled}).length||c.map(function(e){return e.disabled=!1,T.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(g)}),v.on("tooltipShow",function(e){l&&m(e,w.parentNode,f)}),g.update=function(){e.transition().call(g)},g.container=this}),g}var t=e.models.funnel(),n=e.models.axis(),r=e.models.legend(),i={top:30,right:20,bottom:20,left:20},s=null,o=null,u=!0,a=!1,f=!1,l=!0,c=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},h,p,d="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide"),m=function(r,i,s){var o=r.pos[0]+(i&&i.offsetLeft||0),u=r.pos[1]+(i&&i.offsetTop||0),a=(r.point.y*100/s.total).toFixed(1),f=n.tickFormat()(t.y()(r.point,r.pointIndex)),l=c(r.series.key,a,f,r,g);e.tooltip.show([o,u],l,r.value<0?"n":"s",null,i)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+i.left,e.pos[1]+i.top],v.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){v.tooltipHide(e)}),v.on("tooltipHide",function(){l&&e.tooltip.cleanup()}),g.dispatch=v,g.legend=r,g.funnel=t,g.yAxis=n,d3.rebind(g,t,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","fmtValueLabel","color","fill","classes","gradient"),g.colorData=function(n){var i=function(t,n){return e.utils.defaultColor()(t,n)},s=function(e,t){return"nv-group nv-series-"+t},o=arguments[0],u=arguments[1]||{};switch(o){case"graduated":var a=u.c1,f=u.c2,l=u.l;i=function(e,t){return d3.interpolateHsl(d3.rgb(a),d3.rgb(f))(t/l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=t*(u.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var c=u.gradient?function(e,n){var r={orientation:u.orientation||"vertical",position:u.position||"middle"};return t.gradient(e,n,r)}:i;return t.color(i),t.fill(c),t.classes(s),r.color(i),r.classes(s),g},g.x=function(e){return arguments.length?(getX=e,lines.x(e),funnelWrap.x(e),g):getX},g.y=function(e){return arguments.length?(getY=e,lines.y(e),t.y(e),g):getY},g.margin=function(e){return arguments.length?(i=e,g):i},g.width=function(e){return arguments.length?(s=e,g):s},g.height=function(e){return arguments.length?(o=e,g):o},g.showLegend=function(e){return arguments.length?(u=e,g):u},g.showTitle=function(e){return arguments.length?(a=e,g):a},g.tooltip=function(e){return arguments.length?(c=e,g):c},g.tooltips=function(e){return arguments.length?(l=e,g):l},g.tooltipContent=function(e){return arguments.length?(c=e,g):c},g.noData=function(e){return arguments.length?(d=e,g):d},g},e.models.gauge=function(){function C(i){return i.each(function(i){function V(e){W.transition().duration(T).ease("elastic").attr("transform","rotate("+J(e)+")")}function $(e){return e*Math.PI/180}function J(e){return S+A(e)*L}function K(){return"translate("+y+","+y+")"}var s=i.properties,o=i.data,u=n-t.left-t.right,c=r-t.top-t.bottom,y=Math.min(u/2,c)/((100+N)/100),k=d3.select(this),L=x-S,A=d3.scale.linear().range([0,1]).domain([w,E]),O=0,M=o.map(function(e,t){var n={key:e.key,y0:O,y1:e.y,color:e.color,classes:e.classes};return O=e.y,n}),_=[0].concat(o.map(function(e){return e.y})),D=function(e){return e*y/100},P=k.selectAll("g.nv-wrap.nv-gauge").data([o]),H=P.enter().append("g").attr("class","nvd3 nv-wrap nv-gauge"),B=H.append("defs"),j=H.append("g"),F=P.select("g");C.gradient=function(t,n){return e.utils.colorRadialGradient(t,a+"-"+n,{x:0,y:0,r:y,s:m/100,u:"userSpaceOnUse"},h(t,n),P.select("defs"))},j.append("g").attr("class","nv-arc-group"),j.append("g").attr("class","nv-labels"),j.append("g").attr("class","nv-pointer"),j.append("g").attr("class","nv-odometer"),P.attr("transform","translate("+(t.left/2+t.right/2+D(N))+","+(t.top+D(N))+")");var I=d3.svg.arc().innerRadius(D(m)).outerRadius(y).startAngle(function(e,t){return $(J(e.y0))}).endAngle(function(e,t){return $(J(e.y1))}),q=F.select(".nv-arc-group").attr("transform",K);q.selectAll(".nv-arc-path").transition().duration(10).attr("fill",function(e,t){return p(e,t)}).attr("d",I),q.selectAll(".nv-arc-path").data(M).enter().append("path").attr("class",function(e,t){return this.getAttribute("class")||d(e,t)}).attr("fill",function(e,t){return p(e,t)}).attr("stroke","#ffffff").attr("stroke-width",3).attr("d",I).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),v.elementMouseover({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),v.elementMouseout({point:e,index:t,id:a})}).on("click",function(e,t){v.elementClick({point:e,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}).on("dblclick",function(e,t){v.elementDblClick({point:e,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()});var R=F.select(".nv-labels").attr("transform",K);R.selectAll("text").transition().duration(0).attr("transform",function(e){return"rotate("+J(e)+") translate(0,"+(-y-D(1.5))+")"}).style("font-size",D(.6)+"em"),R.selectAll("text").data(_).enter().append("text").attr("transform",function(e){return"rotate("+J(e)+") translate(0,"+(-y-D(1.5))+")"}).text(f).style("text-anchor","middle").style("font-size",D(.6)+"em");var U=[[Math.round(D(g)/2),0],[0,-Math.round(D(b))],[-Math.round(D(g)/2),0],[0,Math.round(D(g))],[Math.round(D(g)/2),0]],z=F.select(".nv-pointer").attr("transform",K);z.selectAll("path").transition().duration(120).attr("d",d3.svg.line().interpolate("monotone"));var W=z.selectAll("path").data([U]).enter().append("path").attr("d",d3.svg.line().interpolate("monotone")).attr("transform","rotate("+S+")");V(s.value),F.selectAll(".nv-odom").remove(),F.select(".nv-odomText").transition().duration(0).style("font-size",D(.7)+"em"),F.select(".nv-odometer").append("text").attr("class","nv-odom nv-odomText").attr("x",0).attr("y",0).attr("text-anchor","middle").text(l(s.value)).style("stroke","none").style("fill","black").style("font-size",D(.7)+"em");var X=F.select(".nv-odomText").node().getBBox();F.select(".nv-odometer").insert("path",".nv-odomText").attr("class","nv-odom nv-odomBox").attr("d",e.utils.roundedRectangle(-X.width/2,-X.height+D(1.5),X.width+D(4),X.height+D(2),D(2))).attr("fill","#eeffff").attr("stroke","black").attr("stroke-width","2px").attr("opacity",.8),F.select(".nv-odometer").attr("transform","translate("+y+","+(t.top+D(70)+X.width)+")"),C.setGaugePointer=V}),C}var t={top:0,right:0,bottom:0,left:0},n=null,r=null,i=!0,s=function(e){return e.values},o=function(e){return e.key},u=function(e){return e.y},a=Math.floor(Math.random()*1e4),f=d3.format(",g"),l=d3.format(",.f"),c=!0,h=e.utils.defaultColor(),p=h,d=function(e,t){return"nv-group nv-series-"+t},v=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),m=50,g=5,y=5,b=90,w=0,E=10,S=-90,x=90,T=750,N=10;return C.dispatch=v,C.color=function(e){return arguments.length?(h=e,C):h},C.fill=function(e){return arguments.length?(p=e,C):p},C.classes=function(e){return arguments.length?(d=e,C):d},C.gradient=function(e){return arguments.length?(gradient=e,C):gradient},C.margin=function(e){return arguments.length?(t=e,C):t},C.width=function(e){return arguments.length?(n=e,C):n},C.height=function(e){return arguments.length?(r=e,C):r},C.values=function(e){return arguments.length?(s=e,C):s},C.x=function(e){return arguments.length?(o=e,C):o},C.y=function(e){return arguments.length?(u=d3.functor(e),C):u},C.showLabels=function(e){return arguments.length?(c=e,C):c},C.id=function(e){return arguments.length?(a=e,C):a},C.valueFormat=function(e){return arguments.length?(l=e,C):l},C.labelThreshold=function(e){return arguments.length?(labelThreshold=e,C):labelThreshold},C.ringWidth=function(e){return arguments.length?(m=e,C):m},C.pointerWidth=function(e){return arguments.length?(g=e,C):g},C.pointerTailLength=function(e){return arguments.length?(y=e,C):y},C.pointerHeadLength=function(e){return arguments.length?(b=e,C):b},C.minValue=function(e){return arguments.length?(w=e,C):w},C.maxValue=function(e){return arguments.length?(E=e,C):E},C.minAngle=function(e){return arguments.length?(S=e,C):S},C.maxAngle=function(e){return arguments.length?(x=e,C):x},C.transitionMs=function(e){return arguments.length?(T=e,C):T},C.labelFormat=function(e){return arguments.length?(f=e,C):f},C.labelInset=function(e){return arguments.length?(N=e,C):N},C.setPointer=function(e){return arguments.length?(C.setGaugePointer(e),C):C.setGaugePointer},C.isRendered=function(e){return svg!==undefined},C},e.models.gaugeChart=function(){function v(e){return e.each(function(f){var l=f.properties,c=f.data,m=d3.select(this),g=this,y=(i||parseInt(m.style("width"),10)||960)-r.left-r.right,b=(s||parseInt(m.style("height"),10)||400)-r.top-r.bottom;v.update=function(){v(e)},v.container=this;if(!c||!c.length)return m.append("text").attr("class","nvd3 nv-noData").attr("x",y/2).attr("y",b/2).attr("dy","-.7em").style("text-anchor","middle").text(h),v;m.select(".nv-noData").remove();var w=m.selectAll("g.nv-wrap.nv-gaugeChart").data([c]),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-gaugeChart").append("g"),S=w.select("g");E.append("g").attr("class","nv-gaugeWrap");var x=0,T=0;o&&(E.append("g").attr("class","nv-legendWrap"),n.width(y).key(t.x()),S.select(".nv-legendWrap").datum(c).call(n),T=n.height(),r.top!==T+x&&(r.top=T+x,b=(s||parseInt(m.style("height"),10)||400)-r.top-r.bottom),S.select(".nv-legendWrap").attr("transform","translate(0,"+ -r.top+")")),u&&l.title&&(E.append("g").attr("class","nv-titleWrap"),S.select(".nv-title").remove(),S.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(l.title).attr("stroke","none").attr("fill","black"),x=parseInt(S.select(".nv-title").node().getBBox().height,10)+parseInt(S.select(".nv-title").style("margin-top"),10)+parseInt(S.select(".nv-title").style("margin-bottom"),10),r.top!==x+T&&(r.top=x+T,b=(s||parseInt(m.style("height"),10)||400)-r.top-r.bottom),S.select(".nv-titleWrap").attr("transform","translate(0,"+(-r.top+parseInt(S.select(".nv-title").node().getBBox().height,10))+")")),w.attr("transform","translate("+r.left+","+r.top+")"),t.width(y).height(b);var N=S.select(".nv-gaugeWrap").datum(f);d3.transition(N).call(t),p.on("tooltipShow",function(e){a&&d(e)})}),v}var t=e.models.gauge(),n=e.models.legend(),r={top:30,right:20,bottom:20,left:20},i=null,s=null,o=!0,u=!1,a=!0,f=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},l,c,h="No Data Available.",p=d3.dispatch("tooltipShow","tooltipHide"),d=function(n,r){var i=n.pos[0]+(r&&r.offsetLeft||0),s=n.pos[1]+(r&&r.offsetTop||0),o=t.valueFormat()(n.point.y1-n.point.y0),u=f(n.point.key,o,n,v);e.tooltip.show([i,s],u,n.value<0?"n":"s",null,r)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+r.left,e.pos[1]+r.top],p.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){p.tooltipHide(e)}),p.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),v.dispatch=p,v.legend=n,v.gauge=t,d3.rebind(v,t,"valueFormat","values","x","y","id","showLabels","setPointer","ringWidth","labelThreshold","maxValue","minValue","transitionMs","color","fill","classes","gradient"),v.colorData=function(r){var i=function(t,n){return e.utils.defaultColor()(t,n)},s=function(e,t){return"nv-group nv-series-"+t},o=arguments[0],u=arguments[1]||{};switch(o){case"graduated":var a=u.c1,f=u.c2,l=u.l;i=function(e,t){return d3.interpolateHsl(d3.rgb(a),d3.rgb(f))(t/l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=t*(u.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var c=u.gradient?function(e,n){return t.gradient(e,n)}:i;return t.color(i),t.fill(c),t.classes(s),n.color(i),n.classes(s),v},v.margin=function(e){return arguments.length?(r=e,v):r},v.width=function(e){return arguments.length?(i=e,v):i},v.height=function(e){return arguments.length?(s=e,v):s},v.showLegend=function(e){return arguments.length?(o=e,v):o},v.showTitle=function(e){return arguments.length?(u=e,v):u},v.tooltip=function(e){return arguments.length?(f=e,v):f},v.tooltips=function(e){return arguments.length?(a=e,v):a},v.tooltipContent=function(e){return arguments.length?(f=e,v):f},v.noData=function(e){return arguments.length?(h=e,v):h},v},e.models.line=function(){function y(b){return b.each(function(b){var w=n-t.left-t.right,E=r-t.top-t.bottom,S=d3.select(this);f=v.xScale(),l=v.yScale(),m=m||f,g=g||l;var T=S.selectAll("g.nv-wrap.nv-line").data([b]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),C=N.append("defs"),k=N.append("g"),L=T.select("g");y.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,y.id()+"-"+n,r,h(t,n),T.select("defs"))},k.append("g").attr("class","nv-groups"),k.append("g").attr("class","nv-scatterWrap"),T.attr("transform","translate("+t.left+","+t.top+")"),v.width(w).height(E);var A=T.select(".nv-scatterWrap");d3.transition(A).call(v),C.append("clipPath").attr("id","nv-edge-clip-"+y.id()).append("rect"),T.select("#nv-edge-clip-"+y.id()+" rect").attr("width",w).attr("height",E),L.attr("clip-path",a?"url(#nv-edge-clip-"+y.id()+")":""),A.attr("clip-path",a?"url(#nv-edge-clip-"+y.id()+")":"");var O=T.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});O.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(O.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),O.classed("hover",function(e){return e.hover}).attr("class",function(e,t){return this.getAttribute("class")||d(e,t)}).attr("fill",function(e,t){return this.getAttribute("fill")||p(e,t)}).attr("stroke",function(e,t){return this.getAttribute("stroke")||p(e,t)}),d3.transition(O).style("stroke-opacity",1).style("fill-opacity",.5);var M=O.selectAll("path.nv-area").data(function(e){return u(e)?[e]:[]});M.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(c).defined(o).x(function(e,t){return m(i(e,t))}).y0(function(e,t){return g(s(e,t))}).y1(function(e,t){return g(l.domain()[0]<=0?l.domain()[1]>=0?0:l.domain()[1]:l.domain()[0])}).apply(this,[e.values])}),M.exit().remove(),d3.transition(O.exit().selectAll("path.nv-area")).attr("d",function(e){return d3.svg.area().interpolate(c).defined(o).x(function(e,t){return m(i(e,t))}).y0(function(e,t){return g(s(e,t))}).y1(function(e,t){return g(l.domain()[0]<=0?l.domain()[1]>=0?0:l.domain()[1]:l.domain()[0])}).apply(this,[e.values])}),d3.transition(M).attr("d",function(e){return d3.svg.area().interpolate(c).defined(o).x(function(e,t){return m(i(e,t))}).y0(function(e,t){return g(s(e,t))}).y1(function(e,t){return g(l.domain()[0]<=0?l.domain()[1]>=0?0:l.domain()[1]:l.domain()[0])}).apply(this,[e.values])});var _=O.selectAll("path.nv-line").data(function(e){return[e.values]});_.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(c).defined(o).x(function(e,t){return m(i(e,t))}).y(function(e,t){return g(s(e,t))})),d3.transition(O.exit().selectAll("path.nv-line")).attr("d",d3.svg.line().interpolate(c).defined(o).x(function(e,t){return f(i(e,t))}).y(function(e,t){return l(s(e,t))})),d3.transition(_).attr("d",d3.svg.line().interpolate(c).defined(o).x(function(e,t){return f(i(e,t))}).y(function(e,t){return l(s(e,t))})),m=f.copy(),g=l.copy()}),y}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=function(e){return e.x},s=function(e){return e.y},o=function(e,t){return!isNaN(s(e,t))&&s(e,t)!==null},u=function(e){return e&&e.area||!1},a=!1,f,l,c="linear",h=e.utils.defaultColor(),p=h,d=function(e,t){return"nv-group nv-series-"+t},v=e.models.scatter();v.size(16).sizeDomain([16,256]);var m,g;return y.dispatch=v.dispatch,y.scatter=v,d3.rebind(y,v,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius","padData"),y.color=function(e){return arguments.length?(h=e,v.color(h),y):h},y.fill=function(e){return arguments.length?(p=e,v.fill(p),y):p},y.classes=function(e){return arguments.length?(d=e,v.classes(d),y):d},y.gradient=function(e){return arguments.length?(gradient=e,y):gradient},y.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,y):t},y.width=function(e){return arguments.length?(n=e,y):n},y.height=function(e){return arguments.length?(r=e,y):r},y.x=function(e){return arguments.length?(i=e,v.x(e),y):i},y.y=function(e){return arguments.length?(s=e,v.y(e),y):s},y.clipEdge=function(e){return arguments.length?(a=e,y):a},y.interpolate=function(e){return arguments.length?(c=e,y):c},y.defined=function(e){return arguments.length?(o=e,y):o},y.isArea=function(e){return arguments.length?(u=d3.functor(e),y):u},y},e.models.lineChart=function(){function b(e){return e.each(function(a){var w=a.properties,E=a.data,S=d3.select(this),T=this,N=(n||parseInt(S.style("width"),10)||960)-t.left-t.right,C=(r||parseInt(S.style("height"),10)||400)-t.top-t.bottom;if(!E||!E.length||!E.filter(function(e){return e.values.length}).length)return S.append("text").attr("class","nvd3 nv-noData").attr("x",N/2).attr("y",C/2).attr("dy","-.7em").style("text-anchor","middle").text(c),b;S.select(".nv-noData").remove(),E=E.map(function(e,t){return e.series=t,e}),f=p.xScale(),l=p.yScale();var k=S.selectAll("g.nv-wrap.nv-lineChart").data([E]),L=k.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),A=k.select("g");L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis"),L.append("g").attr("class","nv-linesWrap");var O=0,M=0;s&&(L.append("g").attr("class","nv-legendWrap"),m.width(N*(i?.7:1)),A.select(".nv-legendWrap").datum(E).call(m),M=m.height(),t.top!==M+O&&(t.top=M+O,C=(r||parseInt(S.style("height"),10)||400)-t.top-t.bottom),A.select(".nv-legendWrap").attr("transform","translate("+N*(i?.3:0)+","+ -t.top+")")),o&&w.title&&(L.append("g").attr("class","nv-titleWrap"),A.select(".nv-title").remove(),A.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(w.title).attr("stroke","none").attr("fill","black"),O=parseInt(A.select(".nv-title").node().getBBox().height,10)+parseInt(A.select(".nv-title").style("margin-top"),10)+parseInt(A.select(".nv-title").style("margin-bottom"),10),t.top!==O+M&&(t.top=O+M,C=(r||parseInt(S.style("height"),10)||400)-t.top-t.bottom),A.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt(A.select(".nv-title").node().getBBox().height,10))+")"));var _=[{key:"Linear",disabled:p.interpolate()!=="linear"},{key:"Basis",disabled:p.interpolate()!=="basis"},{key:"Monotone",disabled:p.interpolate()!=="monotone"},{key:"Cardinal",disabled:p.interpolate()!=="cardinal"},{key:"Line",disabled:p.isArea()()===!0},{key:"Area",disabled:p.isArea()()===!1}];i&&(L.append("g").attr("class","nv-controlsWrap"),g.width(N*.3).color(["#444"]),A.select(".nv-controlsWrap").datum(_).attr("transform","translate(0,"+(-t.top+O)+")").call(g)),k.attr("transform","translate("+t.left+","+t.top+")"),p.width(N).height(C);var D=A.select(".nv-linesWrap").datum(E.filter(function(e){return!e.disabled}));d3.transition(D).call(p),d.scale(f).ticks(N/100).tickSize(-C,0),A.select(".nv-x.nv-axis").attr("transform","translate(0,"+l.range()[0]+")"),d3.transition(A.select(".nv-x.nv-axis")).call(d),v.scale(l).ticks(C/36).tickSize(-N,0),d3.transition(A.select(".nv-y.nv-axis")).call(v),m.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,E.filter(function(e){return!e.disabled}).length||E.map(function(e){return e.disabled=!1,k.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(b)}),g.dispatch.on("legendClick",function(t,n){if(!t.disabled)return;_=_.map(function(e){return e.disabled=!0,e}),t.disabled=!1;switch(t.key){case"Basis":p.interpolate("basis");break;case"Linear":p.interpolate("linear");break;case"Monotone":p.interpolate("monotone");break;case"Cardinal":p.interpolate("cardinal");break;case"Line":p.isArea(!1);break;case"Area":p.isArea(!0)}e.transition().call(b)}),h.on("tooltipShow",function(e){u&&y(e,T.parentNode)}),b.update=function(){b(e)},b.container=this}),b}var t={top:30,right:20,bottom:50,left:60},n=null,r=null,i=!1,s=!0,o=!1,u=!0,a=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},f,l,c="No Data Available.",h=d3.dispatch("tooltipShow","tooltipHide"),p=e.models.line(),d=e.models.axis().orient("bottom").tickPadding(5),v=e.models.axis().orient("left"),m=e.models.legend(),g=e.models.legend(),y=function(t,n){if(n){var r=d3.select(n).select("svg"),i=r.attr("viewBox");if(i){i=i.split(" ");var s=parseInt(r.style("width"),10)/i[2];t.pos[0]=t.pos[0]*s,t.pos[1]=t.pos[1]*s}}var o=t.pos[0]+(n.offsetLeft||0),u=t.pos[1]+(n.offsetTop||0),f=d.tickFormat()(p.x()(t.point,t.pointIndex)),l=v.tickFormat()(p.y()(t.point,t.pointIndex)),c=a(t.series.key,f,l,t,b);e.tooltip.show([o,u],c,null,null,n)};return p.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],h.tooltipShow(e)}),p.dispatch.on("elementMouseout.tooltip",function(e){h.tooltipHide(e)}),h.on("tooltipHide",function(){u&&e.tooltip.cleanup()}),b.dispatch=h,b.lines=p,b.legend=m,b.xAxis=d,b.yAxis=v,d3.rebind(b,p,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","color","fill","classes","gradient"),b.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,t.series)},r=function(e,t){return"nv-group nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(e.series/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=e.series*(s.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n+" nv-stroke"+e.series)}}var f=s.gradient?function(e,t){var n={orientation:s.orientation||"horizontal",position:s.position||"base"};return p.gradient(e,e.series,n)}:n;return p.color(n),p.fill(f),p.classes(r),m.color(n),m.classes(r),b},b.margin=function(e){return arguments.length?(t=e,b):t},b.width=function(e){return arguments.length?(n=e,b):n},b.height=function(e){return arguments.length?(r=e,b):r},b.showControls=function(e){return arguments.length?(i=e,b):i},b.showLegend=function(e){return arguments.length?(s=e,b):s},b.showTitle=function(e){return arguments.length?(o=e,b):o},b.tooltips=function(e){return arguments.length?(u=e,b):u},b.tooltip=function(e){return arguments.length?(a=e,b):a},b.noData=function(e){return arguments.length?(c=e,b):c},b},e.models.lineWithFocusChart=function(){function C(e){return e.each(function(S){function R(e){var t=+(e=="e"),n=t?1:-1,r=M/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function U(){a.empty()||a.extent(w),I.data([a.empty()?g.domain():w]).each(function(e,t){var n=g(e[0])-v.range()[0],r=v.range()[1]-g(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",g(e[1])).attr("width",r<0?0:r)})}function z(){w=a.empty()?null:a.extent(),extent=a.empty()?g.domain():a.extent(),T.brush({extent:extent,brush:a})
,U();var e=H.select(".nv-focus .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}).map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return t.x()(e,n)>=extent[0]&&t.x()(e,n)<=extent[1]})}}));d3.transition(e).call(t),d3.transition(H.select(".nv-focus .nv-x.nv-axis")).call(r),d3.transition(H.select(".nv-focus .nv-y.nv-axis")).call(i)}var k=d3.select(this),L=this,A=(h||parseInt(k.style("width"))||960)-f.left-f.right,O=(p||parseInt(k.style("height"))||400)-f.top-f.bottom-d,M=d-l.top-l.bottom;C.update=function(){C(e)},C.container=this;if(!S||!S.length||!S.filter(function(e){return e.values.length}).length){var _=k.selectAll(".nv-noData").data([x]);return _.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),_.attr("x",f.left+A/2).attr("y",f.top+O/2).text(function(e){return e}),C}k.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale(),g=n.xScale(),y=n.yScale();var D=k.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([S]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),H=D.select("g");P.append("g").attr("class","nv-legendWrap");var B=P.append("g").attr("class","nv-focus");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-linesWrap");var j=P.append("g").attr("class","nv-context");j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-linesWrap"),j.append("g").attr("class","nv-brushBackground"),j.append("g").attr("class","nv-x nv-brush"),b&&(u.width(A),H.select(".nv-legendWrap").datum(S).call(u),f.top!=u.height()&&(f.top=u.height(),O=(p||parseInt(k.style("height"))||400)-f.top-f.bottom-d),H.select(".nv-legendWrap").attr("transform","translate(0,"+ -f.top+")")),D.attr("transform","translate("+f.left+","+f.top+")"),t.width(A).height(O).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),n.defined(t.defined()).width(A).height(M).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),H.select(".nv-context").attr("transform","translate(0,"+(O+f.bottom+l.top)+")");var F=H.select(".nv-context .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}));d3.transition(F).call(n),r.scale(v).ticks(A/100).tickSize(-O,0),i.scale(m).ticks(O/36).tickSize(-A,0),H.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+O+")"),a.x(g).on("brush",z),w&&a.extent(w);var I=H.select(".nv-brushBackground").selectAll("g").data([w||a.extent()]),q=I.enter().append("g");q.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",M),q.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",M),gBrush=H.select(".nv-x.nv-brush").call(a),gBrush.selectAll("rect").attr("height",M),gBrush.selectAll(".resize").append("path").attr("d",R),z(),s.scale(g).ticks(A/100).tickSize(-M,0),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),d3.transition(H.select(".nv-context .nv-x.nv-axis")).call(s),o.scale(y).ticks(M/36).tickSize(-A,0),d3.transition(H.select(".nv-context .nv-y.nv-axis")).call(o),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),u.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,S.filter(function(e){return!e.disabled}).length||S.map(function(e){return e.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(C)}),T.on("tooltipShow",function(e){E&&N(e,L.parentNode)})}),C}var t=e.models.line(),n=e.models.line(),r=e.models.axis(),i=e.models.axis(),s=e.models.axis(),o=e.models.axis(),u=e.models.legend(),a=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},l={top:0,right:30,bottom:20,left:60},c=e.utils.defaultColor(),h=null,p=null,d=100,v,m,g,y,b=!0,w=null,E=!0,S=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},x="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","brush");t.clipEdge(!0),n.interactive(!1),r.orient("bottom").tickPadding(5),i.orient("left"),s.orient("bottom").tickPadding(5),o.orient("left");var N=function(n,s){var o=n.pos[0]+(s.offsetLeft||0),u=n.pos[1]+(s.offsetTop||0),a=r.tickFormat()(t.x()(n.point,n.pointIndex)),f=i.tickFormat()(t.y()(n.point,n.pointIndex)),l=S(n.series.key,a,f,n,C);e.tooltip.show([o,u],l,null,null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+f.left,e.pos[1]+f.top],T.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){T.tooltipHide(e)}),T.on("tooltipHide",function(){E&&e.tooltip.cleanup()}),C.dispatch=T,C.legend=u,C.lines=t,C.lines2=n,C.xAxis=r,C.yAxis=i,C.x2Axis=s,C.y2Axis=o,d3.rebind(C,t,"defined","isArea","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),C.x=function(e){return arguments.length?(t.x(e),n.x(e),C):t.x},C.y=function(e){return arguments.length?(t.y(e),n.y(e),C):t.y},C.margin=function(e){return arguments.length?(f.top=typeof e.top!="undefined"?e.top:f.top,f.right=typeof e.right!="undefined"?e.right:f.right,f.bottom=typeof e.bottom!="undefined"?e.bottom:f.bottom,f.left=typeof e.left!="undefined"?e.left:f.left,C):f},C.margin2=function(e){return arguments.length?(l=e,C):l},C.width=function(e){return arguments.length?(h=e,C):h},C.height=function(e){return arguments.length?(p=e,C):p},C.height2=function(e){return arguments.length?(d=e,C):d},C.color=function(t){return arguments.length?(c=e.utils.getColor(t),u.color(c),C):c},C.showLegend=function(e){return arguments.length?(b=e,C):b},C.tooltips=function(e){return arguments.length?(E=e,C):E},C.tooltipContent=function(e){return arguments.length?(S=e,C):S},C.interpolate=function(e){return arguments.length?(t.interpolate(e),n.interpolate(e),C):t.interpolate()},C.noData=function(e){return arguments.length?(x=e,C):x},C.xTickFormat=function(e){return arguments.length?(r.tickFormat(e),s.tickFormat(e),C):r.tickFormat()},C.yTickFormat=function(e){return arguments.length?(i.tickFormat(e),o.tickFormat(e),C):i.tickFormat()},C},e.models.multiBar=function(){function S(v){return v.each(function(v){var T=n-t.left-t.right,N=r-t.top-t.bottom,C=d3.select(this);p&&(v=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(v)),v=v.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var k=l&&c?[]:v.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});i.domain(d3.merge(k).map(function(e){return e.x})).rangeBands([0,T],.3),s.domain(c||d3.extent(d3.merge(k).map(function(e){return e.y+(p?e.y0:0)}).concat(h))).range([N,0]);if(i.domain()[0]===i.domain()[1]||s.domain()[0]===s.domain()[1])singlePoint=!0;i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1])),s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]+s.domain()[0]*.01,s.domain()[1]-s.domain()[1]*.01]):s.domain([-1,1])),w=w||i,E=E||s;var L=C.selectAll("g.nv-wrap.nv-multibar").data([v]),A=L.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),O=A.append("defs"),M=A.append("g"),_=L.select("g");S.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,o+"-"+n,r,m(t,n),L.select("defs"))},M.append("g").attr("class","nv-groups"),L.attr("transform","translate("+t.left+","+t.top+")"),O.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),L.select("#nv-edge-clip-"+o+" rect").attr("width",T).attr("height",N),_.attr("clip-path",f?"url(#nv-edge-clip-"+o+")":"");var D=L.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});D.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(D.exit()).selectAll("rect.nv-bar").delay(function(e,t){return t*d/v[0].values.length}).attr("y",function(e){return p?E(e.y0):E(0)}).attr("height",0).remove(),D.attr("class",function(e,t){return this.getAttribute("class")||y(e,t)}).classed("hover",function(e){return e.hover}).attr("fill",function(e,t){return this.getAttribute("fill")||g(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||g(e,t)}),d3.transition(D).style("stroke-opacity",1).style("fill-opacity",.85);var P=D.selectAll("rect.nv-bar").data(function(e){return e.values});P.exit().remove();var H=P.enter().append("rect").attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(e,t,n){return p?0:n*i.rangeBand()/v.length}).attr("y",function(e){return E(p?e.y0:0)}).attr("height",0).attr("width",i.rangeBand()/(p?1:v.length));P.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(e,t){return"translate("+i(u(e,t))+",0)"}),P.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),b.elementMouseover({value:a(e,t),point:e,series:v[e.series],pos:[i(u(e,t))+i.rangeBand()*(p?v.length/2:e.series+.5)/v.length,s(a(e,t)+(p?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),b.elementMouseout({value:a(e,t),point:e,series:v[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){b.elementClick({value:a(e,t),point:e,series:v[e.series],pos:[i(u(e,t))+i.rangeBand()*(p?v.length/2:e.series+.5)/v.length,s(a(e,t)+(p?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){b.elementDblClick({value:a(e,t),point:e,series:v[e.series],pos:[i(u(e,t))+i.rangeBand()*(p?v.length/2:e.series+.5)/v.length,s(a(e,t)+(p?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),p?d3.transition(P).delay(function(e,t){return t*d/v[0].values.length}).attr("y",function(e,t){return s(a(e,t)+(p?e.y0:0))}).attr("height",function(e,t){return Math.abs(s(e.y+(p?e.y0:0))-s(p?e.y0:0))}).each("end",function(){d3.transition(d3.select(this)).attr("x",0).attr("width",i.rangeBand())}):d3.transition(P).delay(function(e,t){return t*d/v[0].values.length}).attr("x",function(e,t){return e.series*i.rangeBand()/v.length}).attr("width",i.rangeBand()/v.length).each("end",function(){d3.transition(d3.select(this)).attr("y",function(e,t){return a(e,t)<0?s(0):s(a(e,t))}).attr("height",function(e,t){return Math.abs(s(a(e,t))-s(0))})}),w=i.copy(),E=s.copy()}),S}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=!0,l,c,h=[0],p=!1,d=1200,v=e.models.scatter(),m=e.utils.defaultColor(),g=m,y=function(e,t){return"nv-group nv-series-"+t},b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w,E;return S.dispatch=b,S.color=function(e){return arguments.length?(m=e,S):m},S.fill=function(e){return arguments.length?(g=e,S):g},S.classes=function(e){return arguments.length?(y=e,S):y},S.gradient=function(e){return arguments.length?(gradient=e,S):gradient},S.x=function(e){return arguments.length?(u=e,S):u},S.y=function(e){return arguments.length?(a=e,S):a},S.margin=function(e){return arguments.length?(t=e,S):t},S.width=function(e){return arguments.length?(n=e,S):n},S.height=function(e){return arguments.length?(r=e,S):r},S.xScale=function(e){return arguments.length?(i=e,S):i},S.yScale=function(e){return arguments.length?(s=e,S):s},S.xDomain=function(e){return arguments.length?(l=e,S):l},S.yDomain=function(e){return arguments.length?(c=e,S):c},S.forceY=function(e){return arguments.length?(h=e,S):h},S.stacked=function(e){return arguments.length?(p=e,S):p},S.id=function(e){return arguments.length?(o=e,S):o},S.delay=function(e){return arguments.length?(d=e,S):d},S.clipEdge=function(e){return arguments.length?(f=e,S):f},S},e.models.multiBarChart=function(){function T(l){return l.each(function(p){var N=p.properties,C=p.data,k=d3.select(this),L=this,A=(n||parseInt(k.style("width"),10)||960)-t.left-t.right,O=(r||parseInt(k.style("height"),10)||400)-t.top-t.bottom;if(!C||!C.length||!C.filter(function(e){return e.values.length}).length)return k.append("text").attr("class","nvd3 nv-noData").attr("x",A/2).attr("y",O/2).attr("dy","-.7em").style("text-anchor","middle").text(d),T;k.select(".nv-noData").remove();var M=C.filter(function(e){return!e.disabled&&e.type==="bar"}),_=N.labels,D=N.values,P=C.filter(function(e){return!e.disabled}).map(function(e){return e.values.map(function(e,t){return{x:i(e,t),y:s(e,t)}})});m.domain(d3.extent(d3.merge(P),function(e){return e.x})).range([0,A]),g.domain(d3.extent(d3.merge(P),function(e){return e.y})).range([O,0]);var H=k.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([C]),B=H.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),j=H.select("g");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-barsWrap");var F=0,I=0;u&&(B.append("g").attr("class","nv-legendWrap"),w.width(A*(o?.7:1)),j.select(".nv-legendWrap").datum(C).call(w),I=w.height(),t.top!==I+F&&(t.top=I+F,O=(r||parseInt(k.style("height"),10)||400)-t.top-t.bottom),j.select(".nv-legendWrap").attr("transform","translate("+A*(o?.3:0)+","+ -t.top+")")),a&&N.title&&(B.append("g").attr("class","nv-titleWrap"),j.select(".nv-title").remove(),j.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(N.title).attr("stroke","none").attr("fill","black"),F=parseInt(j.select(".nv-title").node().getBBox().height,10)+parseInt(j.select(".nv-title").style("margin-top"),10)+parseInt(j.select(".nv-title").style("margin-bottom"),10),t.top!==F+I&&(t.top=F+I,O=(r||parseInt(k.style("height"),10)||400)-t.top-t.bottom),j.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt(j.select(".nv-title").node().getBBox().height,10))+")"));if(o){B.append("g").attr("class","nv-controlsWrap");var q=[{key:"Grouped",disabled:v.stacked()},{key:"Stacked",disabled:!v.stacked()}];E.width(A*.3).color(["#444"]),j.select(".nv-controlsWrap").datum(q).attr("transform","translate(0,"+(-t.top+F)+")").call(E)}H.attr("transform","translate("+t.left+","+t.top+")"),v.width(A).height(O);var R=j.select(".nv-barsWrap").datum(M.length?M:[{values:[]}]);d3.transition(R).call(v),y.ticks(A/100).tickSize(-O,0).tickFormat(function(e,t){return _[t]?_[t].l:"asfd"}),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")"),d3.transition(j.select(".nv-x.nv-axis")).call(y);var U=j.select(".nv-x.nv-axis > g").selectAll("g");U.selectAll("line, text").style("opacity",1),f&&U.filter(function(e,t){return t%Math.ceil(C[0].values.length/(A/100))!==0}).selectAll("text, line").style("opacity",0),c&&U.selectAll("text").attr("transform",function(e,t,n){return"rotate("+c+" 0,0) translate(0,10)"}).attr("text-transform",c>0?"start":"end"),b.ticks(O/100).tickSize(-A,0),d3.transition(j.select(".nv-y.nv-axis")).style("opacity",M.length?1:0).call(b),w.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,C.filter(function(e){return!e.disabled}).length||C.map(function(e){return e.disabled=!1,H.selectAll(".nv-series").classed("disabled",!1),e}),l.transition().call(T)}),E.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;q=q.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":v.stacked(!1);break;case"Stacked":v.stacked(!0)}l.transition().call(T)}),v.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),h&&S.on("tooltipShow",function(e){x(e,L.parentNode,D)}),h&&S.on("tooltipHide",e.tooltip.cleanup),T.update=function(){l.transition().call(T)},T.container=this}),T}var t={top:30,right:20,bottom:20,left:40},n=null,r=null,i=function(e){return e.x},s=function(e){return e.y},o=!1,u=!0,a=!1,f=!1,l=!1,c=0,h=!0,p=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},d="No Data Available.",v=e.models.multiBar().stacked(!0),m=v.xScale(),g=v.yScale(),y=e.models.axis().scale(m).orient("bottom").tickPadding(5).tickFormat(function(e){return e}),b=e.models.axis().scale(g).orient("left").tickFormat(function(e){return e+"K"}),w=e.models.legend(),E=e.models.legend(),S=d3.dispatch("tooltipShow","tooltipHide");y.highlightZero(!1).showMaxMin(!1);var x=function(t,n,r){var i=t.pos[0]+(n.offsetLeft||0),s=t.pos[1]+(n.offsetTop||0),o=(t.point.y*100/r[t.pointIndex].t).toFixed(1),u=b.tickFormat()(v.y()(t.point,t.pointIndex)),a=p(t.series.key,o,u,t,T);e.tooltip.show([i,s],a,t.value<0?"n":"s",null,n)};return T.dispatch=S,T.multibar=v,T.legend=w,T.xAxis=y,T.yAxis=b,d3.rebind(T,v,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","stacked","delay","color","fill","classes","gradient"),T.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,n)},r=function(e,t){return"nv-group nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(t/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=t*(s.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var f=s.gradient?function(e,t){var n={orientation:s.orientation||"vertical",position:s.position||"middle"};return v.gradient(e,t,n)}:n;return v.color(n),v.fill(f),v.classes(r),w.color(n),w.classes(r),T},T.x=function(e){return arguments.length?(i=e,v.x(e),T):i},T.y=function(e){return arguments.length?(s=e,v.y(e),T):s},T.margin=function(e){return arguments.length?(t=e,T):t},T.width=function(e){return arguments.length?(n=e,T):n},T.height=function(e){return arguments.length?(r=e,T):r},T.showControls=function(e){return arguments.length?(o=e,T):o},T.showLegend=function(e){return arguments.length?(u=e,T):u},T.showTitle=function(e){return arguments.length?(a=e,T):a},T.reduceXTicks=function(e){return arguments.length?(f=e,T):f},T.rotateLabels=function(e){return arguments.length?(c=e,T):c},T.tooltip=function(e){return arguments.length?(p=e,T):p},T.tooltips=function(e){return arguments.length?(h=e,T):h},T.tooltipContent=function(e){return arguments.length?(p=e,T):p},T.noData=function(e){return arguments.length?(d=e,T):d},T},e.models.multiBarHorizontal=function(){function C(l){return l.each(function(l){var c=n-t.left-t.right,b=r-t.top-t.bottom,k=d3.select(this);h&&(l=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(l)),l=l.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e}),h&&l[0].values.map(function(e,t){var n=0,r=0;l.map(function(e){var i=e.values[t];i.size=Math.abs(i.y),i.y<0?(i.y1=r-i.size,r-=i.size):(i.y1=n,n+=i.size)})});var L=g&&y?[]:l.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0,y1:e.y1}})});s.domain(g||d3.merge(L).map(function(e){return e.x})).rangeBands([0,b],.1),o.domain(y||d3.extent(d3.merge(L).map(function(e){return h?e.y>0?e.y1+e.y:e.y1:e.y}).concat(f))),p&&!h?o.range([o.domain()[0]<0?d:0,c-(o.domain()[1]>0?d:0)]):o.range([0,c]),T=T||s,N=N||d3.scale.linear().domain(o.domain()).range([o(0),o(0)]);var A=k.selectAll("g.nv-wrap.nv-multibarHorizontal").data([l]),O=A.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),M=O.append("defs"),_=O.append("g"),D=A.select("g");C.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,i+"-"+n,r,w(t,n),A.select("defs"))},_.append("g").attr("class","nv-groups"),A.attr("transform","translate("+t.left+","+t.top+")");var P=A.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});P.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(P.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).selectAll("g.nv-bar").delay(function(e,t){return t*m/l[0].values.length}).attr("y",function(e){return h?N(e.y0):N(0)}).attr("width",0).remove(),P.attr("class",function(e,t){return this.getAttribute("class")||S(e,t)}).classed("hover",function(e){return e.hover}).attr("fill",function(e,t){return this.getAttribute("fill")||E(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||E(e,t)}),d3.transition(P).style("stroke-opacity",1).style("fill-opacity",.85);var H=P.selectAll("g.nv-bar").data(function(e){return e.values});H.exit().remove();var B=H.enter().append("g").attr("class","nv-bar").attr("transform",function(e,t,n){return"translate("+N(h?e.y0:0)+","+(h?0:n*s.rangeBand()/l.length+s(u(e,t)))+")"});B.append("rect").attr("width",0).attr("height",s.rangeBand()/(h?1:l.length)),H.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),x.elementMouseover({value:a(e,t),point:e,series:l[e.series],pos:[o(a(e,t)+(h?e.y0:0)),s(u(e,t))+s.rangeBand()*(h?l.length/2:e.series+.5)/l.length],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),x.elementMouseout({value:a(e,t),point:e,series:l[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){x.elementClick({value:a(e,t),point:e,series:l[e.series],pos:[s(u(e,t))+s.rangeBand()*(h?l.length/2:e.series+.5)/l.length,o(a(e,t)+(h?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){x.elementDblClick({value:a(e,t),point:e,series:l[e.series],pos:[s(u(e,t))+s.rangeBand()*(h?l.length/2:e.series+.5)/l.length,o(a(e,t)+(h?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),B.append("text"),p&&!h?(H.select("text").attr("text-anchor",function(e,t){return a(e,t)<0?"end":"start"}).attr("y",s.rangeBand()/(l.length*2)).attr("dy",".32em").text(function(e,t){return v(a(e,t))}),d3.transition(H).select("text").attr("x",function(e,t){return a(e,t)<0?-4:o(a(e,t))-o(0)+4})):H.selectAll("text").text(""),H.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}),h?d3.transition(H).attr("transform",function(e,t){return"translate("+o(e.y1)+","+s(u(e,t))+")"}).select("rect").attr("width",function(e,t){return Math.abs(o(a(e,t)+e.y0)-o(e.y0))}).attr("height",s.rangeBand()):d3.transition(H).attr("transform",function(e,t){return"translate("+(a(e,t)<0?o(a(e,t)):o(0))+","+(e.series*s.rangeBand()/l.length+s(u(e,t)))+")"}).select("rect").attr("height",s.rangeBand()/l.length).attr("width",function(e,t){return Math.max(Math.abs(o(a(e,t))-o(0)),1)}),T=s.copy(),N=o.copy()}),C}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.ordinal(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=null,c,h=!1,p=!1,d=60,v=d3.format(",.2f"),m=1200,g,y,b=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},w=e.utils.defaultColor(),E=w,S=function(e,t){return"nv-group nv-series-"+t},x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),T,N;return C.dispatch=x,C.color=function(e){return arguments.length?(w=e,C):w},C.fill=function(e){return arguments.length?(E=e,C):E},C.classes=function(e){return arguments.length?(S=e,C):S},C.gradient=function(e){return arguments.length?(gradient=e,C):gradient},C.x=function(e){return arguments.length?(u=e,C):u},C.y=function(e){return arguments.length?(a=e,C):a},C.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,C):t},C.width=function(e){return arguments.length?(n=e,C):n},C.height=function(e){return arguments.length?(r=e,C):r},C.xScale=function(e){return arguments.length?(s=e,C):s},C.barColor=function(t){return arguments.length?(l=e.utils.getColor(t),C):l},C.disabled=function(e){return arguments.length?(c=e,C):c},C.yScale=function(e){return arguments.length?(o=e,C):o},C.xDomain=function(e){return arguments.length?(g=e,C):g},C.yDomain=function(e){return arguments.length?(y=e,C):y},C.forceY=function(e){return arguments.length?(f=e,C):f},C.stacked=function(e){return arguments.length?(h=e,C):h},C.id=function(e){return arguments.length?(i=e,C):i},C.delay=function(e){return arguments.length?(m=e,C):m},C.showValues=function(e){return arguments.length?(p=e,C):p},C.valueFormat=function(e){return arguments.length?(v=e,C):v},C.valuePadding=function(e){return arguments.length?(d=e,C):d},C},e.models.multiBarHorizontalChart=function(){function S(e){return e.each(function(h){var d=h.properties,T=h.data,N=d3.select(this),C=this,k=(u||parseInt(N.style("width"),10)||960)-o.left-o.right,L=(a||parseInt(N.style("height"),10)||400)-o.top-o.bottom;S.update=function(){e.transition().call(S)},S.container=this,g.disabled=T.map(function(e){return!!e.disabled});if(!T||!T.length||!T.filter(function(e){return e.values.length}).length){var A=N.selectAll(".nv-noData").data([y]);return A.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),A.attr("x",o.left+k/2).attr("y",o.top+L/2).text(function(e){return e}),S}N.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale();var O=N.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([T]),M=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),_=O.select("g");M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis"),M.append("g").attr("class","nv-barsWrap");var D=0,P=0;l&&(M.append("g").attr("class","nv-legendWrap"),i.width(k*(f?.7:1)),_.select(".nv-legendWrap").datum(T).call(i),P=i.height(),o.top!==P+D&&(o.top=P+D,L=(a||parseInt(N.style("height"),10)||400)-o.top-o.bottom),_.select(".nv-legendWrap").attr("transform","translate("+w(k)+","+ -o.top+")")),c&&d.title&&(M.append("g").attr("class","nv-titleWrap"),_.select(".nv-title").remove(),_.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(d.title).attr("stroke","none").attr("fill","black"),D=parseInt(_.select(".nv-title").node().getBBox().height,10)+parseInt(_.select(".nv-title").style("margin-top"),10)+parseInt(_.select(".nv-title").style("margin-bottom"),10),o.top!==D+P&&(o.top=D+P,L=(a||parseInt(N.style("height"),10)||400)-o.top-o.bottom),_.select(".nv-titleWrap").attr("transform","translate(0,"+(-o.top+parseInt(_.select(".nv-title").node().getBBox().height,10))+")"));if(f){M.append("g").attr("class","nv-controlsWrap");var H=[{key:"Grouped",disabled:t.stacked()},{key:"Stacked",disabled:!t.stacked()}];s.width(w(k)).color(["#444"]),_.select(".nv-controlsWrap").datum(H).attr("transform","translate(0,"+(-o.top+D)+")").call(s)}O.attr("transform","translate("+o.left+","+o.top+")"),t.disabled(T.map(function(e){return e.disabled})).width(k).height(L);var B=_.select(".nv-barsWrap").datum(T.filter(function(e){return!e.disabled}));d3.transition(B).call(t),n.scale(v).ticks(L/24).tickSize(-k,0),d3.transition(_.select(".nv-x.nv-axis")).call(n);var j=_.select(".nv-x.nv-axis").selectAll("g");j.selectAll("line, text").style("opacity",1),r.scale(m).ticks(k/100).tickSize(-L,0),_.select(".nv-y.nv-axis").attr("transform","translate(0,"+L+")"),d3.transition(_.select(".nv-y.nv-axis")).call(r),i.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,T.filter(function(e){return!e.disabled}).length||T.map(function(e){return e.disabled=!1,O.selectAll(".nv-series").classed("disabled",!1),e}),g.disabled=T.map(function(e){return!!e.disabled}),b.stateChange(g),e.transition().call(S)}),s.dispatch.on("legendClick",function(n,r){if(!n.disabled)return;H=H.map(function(e){return e.disabled=!0,e}),n.disabled=!1;switch(n.key){case"Grouped":t.stacked(!1);break;case"Stacked":t.stacked(!0)}g.stacked=t.stacked(),b.stateChange(g),e.transition().call(S)}),b.on("tooltipShow",function(e){p&&E(e,C.parentNode)}),b.on("changeState",function(n){typeof n.disabled!="undefined"&&(T.forEach(function(e,t){e.disabled=n.disabled[t]}),g.disabled=n.disabled),typeof n.stacked!="undefined"&&(t.stacked(n.stacked),g.stacked=n.stacked),e.call(S)})}),S}var t=e.models.multiBarHorizontal(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend().height(30),s=e.models.legend().height(30),o={top:30,right:20,bottom:50,left:60},u=null,a=null,f=!0,l=!0,c=!1,h=!0,p=!0,d=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},v,m,g={stacked:h},y="No Data Available.",b=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),w=function(e){return f?e*.3:0};t.stacked(h),n.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),r.orient("bottom").tickFormat(d3.format(",.1f"));var E=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=d(i.series.key,a,f,i,S);e.tooltip.show([o,u],l,i.value<0?"e":"w",null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],b.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){b.tooltipHide(e)}),b.on("tooltipHide",function(){p&&e.tooltip.cleanup()}),S.dispatch=b,S.multibar=t,S.legend=i,S.xAxis=n,S.yAxis=r,d3.rebind(S,t,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","showValues","valueFormat","stacked","color","fill","classes","gradient"),S.colorData=function(n){var r=function(t,n){return e.utils.defaultColor()(t,n)},s=function(e,t){return"nv-group nv-series-"+t},o=arguments[0],u=arguments[1]||{};switch(o){case"graduated":var a=u.c1,f=u.c2,l=u.l;r=function(e,t){return d3.interpolateHsl(d3.rgb(a),d3.rgb(f))(t/l)};break;case"class":r=function(){return"inherit"},s=function(e,t){var n=t*(u.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var c=u.gradient?function(e,n){var r={orientation:u.orientation||"horizontal",position:u.position||"middle"};return t.gradient(e,n,r)}:r;return t.color(r),t.fill(c),t.classes(s),i.color(r),i.classes(s),S},S.margin=function(e){return arguments.length?(o.top=typeof e.top!="undefined"?e.top:o.top,o.right=typeof e.right!="undefined"?e.right:o.right,o.bottom=typeof e.bottom!="undefined"?e.bottom:o.bottom,o.left=typeof e.left!="undefined"?e.left:o.left,S):o},S.width=function(e){return arguments.length?(u=e,S):u},S.height=function(e){return arguments.length?(a=e,S):a},S.showControls=function(e){return arguments.length?(f=e,S):f},S.showLegend=function(e){return arguments.length?(l=e,S):l},S.showTitle=function(e){return arguments.length?(c=e,S):c},S.tooltip=function(e){return arguments.length?(d=e,S):d},S.tooltips=function(e){return arguments.length?(p=e,S):p},S.tooltipContent=function(e){return arguments.length?(d=e,S):d},S.state=function(e){return arguments.length?(g=e,S):g},S.noData=function(e){return arguments.length?(y=e,S):y},S},e.models.paretoLegend=function(){function f(e){return e.each(function(e){var a=n-t.left-t.right,l=d3.select(this);if(!e||!e.length||!e.values||!e.values||!e.filter(function(e){return e.values.length}).length)return f;l.selectAll("g.nv-legend").remove();var c=l.selectAll("g.nv-legend").data([e]),h=c.enter().append("g").attr("class","nvd3 nv-legend").append("g"),p=c.select("g");c.attr("transform","translate("+t.left+","+t.top+")");var d=p.selectAll(".nv-series").data(function(e){return e}),v=d.enter().append("g").attr("class","nv-series").on("mouseover",function(e,t){o.legendMouseover(e,t)}).on("mouseout",function(e,t){o.legendMouseout(e,t)}).on("click",function(e,t){o.legendClick(e,t)}).on("dblclick",function(e,t){o.legendDblclick(e,t)});e[0].type==="bar"?(v.append("rect").attr("class",function(e,t){return this.getAttribute("class")||(useClass?e.class||"nv-fill"+(t%20>9?"":"0")+t%20:"")}).attr("fill",function(e,t){return u(e,t)}).attr("stroke",function(e,t){return u(e,t)}).attr("stroke-width",0).attr("width",10).attr("height",10).attr("transform","translate(-5,-5)"),v.append("text").text(i).attr("text-anchor","start").attr("dy",".36em").attr("dx","8")):(v.append("circle").attr("class",function(e,t){return this.getAttribute("class")||(useClass?e.class||"nv-fill"+(t%20>9?"":"0")+t%20:"")}).attr("fill",function(e,t){return u(e,t)}).attr("stroke",function(e,t){return u(e,t)}).attr("stroke-width",0).attr("r",4).attr("transform","translate(8,0)"),v.append("line").attr("class",function(e,t){return this.getAttribute("class")||(useClass?e.class||"nv-stroke"+(t%10>9?"":"0")+t%10:"")}).attr("stroke",function(e,t){return u(e,t)}).attr("stroke-width",2).attr("x0",0).attr("x1",16).attr("y0",0).attr("y1",0),v.append("text").text(i).attr("text-anchor","start").attr("dy",".36em").attr("dx","20")),d.classed("disabled",function(e){return e.disabled}),d.exit().remove();if(s){var m=
[];d.each(function(e,t){m.push(d3.select(this).select("text").node().getComputedTextLength()+28)});var g=0,y=0,b=[];while(y<a&&g<m.length)b[g]=m[g],y+=m[g+=1];while(y>a&&g>1){b=[],g-=1;for(k=0;k<m.length;k+=1)m[k]>(b[k%g]||0)&&(b[k%g]=m[k]);y=b.reduce(function(e,t,n,r){return e+t})}var w=[];for(var E=0,S=0;E<g;E+=1)w[E]=S,S+=b[E];d.attr("transform",function(e,t){return"translate("+w[t%g]+","+(5+Math.floor(t/g)*20)+")"}),p.attr("transform","translate("+(n-t.right-y)+","+t.top+")"),r=t.top+t.bottom+Math.ceil(m.length/g)*20}else{var x=5,T=5,N=0,C;d.attr("transform",function(e,r){var i=d3.select(this).select("text").node().getComputedTextLength()+28;return C=T,n<t.left+t.right+C+i&&(T=C=5,x+=20),T+=i,T>N&&(N=T),"translate("+C+","+x+")"}),p.attr("transform","translate("+(n-t.right-N)+","+t.top+")"),r=t.top+t.bottom+x+15}}),f}var t={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(e){return e.key},s=!0,o=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout"),u=e.utils.defaultColor(),a=function(e,t){return""};return f.dispatch=o,f.margin=function(e){return arguments.length?(t=e,f):t},f.width=function(e){return arguments.length?(n=e,f):n},f.height=function(e){return arguments.length?(r=e,f):r},f.key=function(e){return arguments.length?(i=e,f):i},f.color=function(t){return arguments.length?(u=e.utils.getColor(t),f):u},f.classes=function(e){return arguments.length?(a=e,f):a},f.align=function(e){return arguments.length?(s=e,f):s},f},e.models.paretoChart=function(){function A(l){return l.each(function(p){var d=p.properties,L=p.data,O=d3.select(this),M=this,_=(n||parseInt(O.style("width"),10)||960)-t.left-t.right,D=(r||parseInt(O.style("height"),10)||400)-t.top-t.bottom,P=O.node().parentNode.className.indexOf("expanded")!==-1;t.left=P?50:40,t.bottom=P?40:34;if(!L||!L.length||!L.filter(function(e){return e.values.length}).length)return O.append("text").attr("class","nvd3 nv-noData").attr("x",_/2).attr("y",D/2).attr("dy","-.7em").style("text-anchor","middle").text(v),A;O.select(".nv-noData").remove();var H=L.filter(function(e){return!e.disabled&&e.type==="bar"}),B=L.filter(function(e){return!e.disabled&&e.type==="line"}),j=d.groupData,F=d.quota,I=L.filter(function(e){return!e.disabled}).map(function(e){return e.valuesOrig.map(function(e,t){return i(e,t)})}),q=L.filter(function(e){return!e.disabled}).map(function(e){return e.valuesOrig.map(function(e,t){return s(e,t)})}),R=g.domain(d3.merge(I)).rangeBands([0,_],.3),U=Math.max(d3.max(d3.merge(q)),F),z=Math.round((U+U*.1)*.1)*10,W=R(1)+R.rangeBand()/(m.stacked()||B.length===1?2:4),X=O.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([L]),V=X.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),$=X.select("g");V.append("g").attr("class","nv-x nv-axis"),V.append("g").attr("class","nv-y nv-axis"),V.append("g").attr("class","nv-barsWrap"),V.append("g").attr("class","nv-linesWrap"),V.append("g").attr("class","nv-quotaWrap");var J=0,K=0,Q=m.stacked()&&H.length>2;console.log(u),u&&(V.append("g").attr("class","nv-legendWrap nv-barLegend"),S.width(_*(Q?.75:.5)),$.select(".nv-legendWrap.nv-barLegend").datum(L.filter(function(e){return e.type==="bar"})).call(S),V.append("g").attr("class","nv-legendWrap nv-lineLegend"),x.width(_*(Q?.25:.4)),$.select(".nv-legendWrap.nv-lineLegend").datum(L.filter(function(e){return e.type==="line"}).concat([{key:"Quota ($"+d3.format(",.2s")(F)+")",type:"line",color:"#444"}])).call(x),K=Math.max(S.height(),x.height()),t.top!==K+J&&(t.top=K+J,D=(r||parseInt(O.style("height"),10)||400)-t.top-t.bottom),$.select(".nv-legendWrap.nv-barLegend").attr("transform","translate("+_*(Q?.25:.4)+","+ -t.top+")"),$.select(".nv-legendWrap.nv-lineLegend").attr("transform","translate(0,"+ -t.top+")")),a&&d.title&&(V.append("g").attr("class","nv-titleWrap"),$.select(".nv-title").remove(),$.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(d.title).attr("stroke","none").attr("fill","black"),J=parseInt($.select(".nv-title").node().getBBox().height,10)+parseInt($.select(".nv-title").style("margin-top"),10)+parseInt($.select(".nv-title").style("margin-bottom"),10),t.top!==J+K&&(t.top=J+K,D=(r||parseInt(O.style("height"),10)||400)-t.top-t.bottom),$.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt($.select(".nv-title").node().getBBox().height,10))+")"));if(o){V.append("g").attr("class","nv-controlsWrap");var G=[{key:"Grouped",disabled:m.stacked()},{key:"Stacked",disabled:!m.stacked()}];T.width(_*.3).color(["#444"]),$.select(".nv-controlsWrap").datum(G).attr("transform","translate(0,"+(-t.top+J)+")").call(T)}X.attr("transform","translate("+t.left+","+t.top+")"),m.width(_).height(D).forceY([0,z]).id(A.id()),y.margin({top:0,right:W,bottom:0,left:W}).width(_).height(D).forceY([0,z]).id(A.id());var Y=$.select(".nv-barsWrap").datum(H.length?H:[{values:[]}]),Z=$.select(".nv-linesWrap").datum(B.length?B.map(function(e){return e.values=m.stacked()?e.valuesOrig:e.valuesOrig.map(function(e,t){return{series:e.series,x:e.x+e.series*.25-t*.25,y:e.y}}),e}):[{values:[]}]);d3.transition(Y).call(m),d3.transition(Z).call(y),F&&($.selectAll("line.nv-quotaLine").remove(),$.select(".nv-quotaWrap").append("line").attr("class","nv-quotaLine").attr("x1",0).attr("y1",0).attr("x2",_).attr("y2",0).attr("transform","translate(0,"+b(F)+")").style("stroke-dasharray","20, 5")),w.ticks(_/100).tickSize(0).tickFormat(function(e,t){return j[t]?j[t].l:"asfd"}),$.select(".nv-x.nv-axis").attr("transform","translate(0,"+b.range()[0]+")"),d3.transition($.select(".nv-x.nv-axis")).call(w);var et=$.select(".nv-x.nv-axis > g").selectAll("g");et.selectAll("line, text").style("opacity",1),et.select("text").each(function(e){var t=this.textContent,n=d3.select(this),r=t.split(" "),i=r.length,s=0,o=.71,u=g.rangeBand();if(this.getBBox().width>u){this.textContent="";do{var a,f=n.append("tspan").text(r[s]+" ").attr("dy",o+"em").attr("x","0px");s===0&&(o=.9),s+=1;while(s<i){a=f.text(),f.text(a+" "+r[s]);if(!(this.getBBox().width<=u)){f.text(a);break}s+=1}}while(s<i)}}),f&&et.filter(function(e,t){return t%Math.ceil(L[0].values.length/(_/100))!==0}).selectAll("text, line").style("opacity",0),c&&et.selectAll("text").attr("transform",function(e,t,n){return"rotate("+c+" 0,0) translate(0,10)"}).attr("text-transform",c>0?"start":"end"),E.ticks(D/100).tickSize(-_,0).tickFormat(function(e){return"$"+d3.format(",.2s")(e)}),d3.transition($.select(".nv-y.nv-axis")).style("opacity",H.length?1:0).call(E),S.dispatch.on("legendClick",function(e,t){var n=e.series;e.disabled=!e.disabled,L.filter(function(e){return e.series===n&&e.type==="line"}).map(function(e){return e.disabled=!e.disabled,e}),L.filter(function(e){return!e.disabled&&e.type==="bar"}).length||L.map(function(e){return e.disabled=!1,X.selectAll(".nv-series").classed("disabled",!1),e}),l.transition().call(A)}),T.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;G=G.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":m.stacked(!1);break;case"Stacked":m.stacked(!0)}l.transition().call(A)}),y.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],N.tooltipShow(e)}),y.dispatch.on("elementMouseout.tooltip",function(e){N.tooltipHide(e)}),m.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],N.tooltipShow(e)}),m.dispatch.on("elementMouseout.tooltip",function(e){N.tooltipHide(e)}),m.dispatch.on("elementClick",function(e){k(L,e,l)}),h&&N.on("tooltipShow",function(e){C(e,M.parentNode,j,W)}),h&&N.on("tooltipHide",e.tooltip.cleanup),A.update=function(){l.transition().call(A)},A.container=this}),A}var t={top:5,right:5,bottom:34,left:40},n=null,r=null,i=function(e){return e.x},s=function(e){return e.y},o=!0,u=!0,a=!1,f=!1,l=!1,c=0,h=!0,p=function(e,t,n,r,i){return"<p>Stage: <b>"+e+"</b></p>"+"<p>Amount: <b>"+n+"</b></p>"+"<p>Percent: <b>"+t+"%</b></p>"},d=function(e,t,n,r,i){return"<p>Likely: <b>"+n+"</b></p>"},v="No Data Available.",m=e.models.multiBar().stacked(!0),g=m.xScale(),y=e.models.line(),b=m.yScale(),w=e.models.axis().scale(g).orient("bottom").tickPadding(5),E=e.models.axis().scale(b).orient("left"),S=e.models.paretoLegend(),x=e.models.paretoLegend(),T=e.models.legend(),N=d3.dispatch("tooltipShow","tooltipHide");w.highlightZero(!1).showMaxMin(!1);var C=function(t,n,r,i){var s=L(n),o=t.pos[0]+(s.x||0)+(t.series.type==="bar"?0:i),u=t.pos[1]+(s.y||0),a=(t.point.y*100/r[t.pointIndex].t).toFixed(1),f=E.tickFormat()(y.y()(t.point,t.pointIndex)),l=t.series.type==="bar"?p(t.series.key,a,f,t,A):d(t.series.key,a,f,t,A);e.tooltip.show([o,u],l,"s",null,n)},k=function(e,t,n){e.filter(function(e){return!e.disabled&&e.type==="bar"}).length===1?e=e.map(function(e){return e.disabled=!1,e}):e=e.filter(function(e){return e.type==="bar"}).map(function(e,n){return e.disabled=n!==t.seriesIndex,e}),n.transition().call(A)},L=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,s=n.left+r,o=n.top+i;return{x:s,y:o}};return A.dispatch=N,A.lines=y,A.multibar=m,A.barLegend=S,A.lineLegend=x,A.xAxis=w,A.yAxis=E,d3.rebind(A,m,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","stacked","delay","color","fill","gradient","classes"),A.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,n)},r=function(e,t){return"nv-group nv-series-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(t/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=t*(s.step||1)%20;return"nv-group nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var f=s.gradient?function(e,t){var n={orientation:s.orientation||"vertical",position:s.position||"middle"};return m.gradient(e,t,n)}:n;return m.color(n),m.fill(f),m.classes(r),y.color(n),y.fill(f),y.classes(r),S.color(n),S.classes(r),x.color(n),x.classes(r),A},A.x=function(e){return arguments.length?(i=e,y.x(e),m.x(e),A):i},A.y=function(e){return arguments.length?(s=e,y.y(e),m.y(e),A):s},A.margin=function(e){return arguments.length?(t=e,A):t},A.width=function(e){return arguments.length?(n=e,A):n},A.height=function(e){return arguments.length?(r=e,A):r},A.showControls=function(e){return arguments.length?(o=e,A):o},A.showLegend=function(e){return arguments.length?(u=e,A):u},A.showTitle=function(e){return arguments.length?(a=e,A):a},A.reduceXTicks=function(e){return arguments.length?(f=e,A):f},A.rotateLabels=function(e){return arguments.length?(c=e,A):c},A.tooltipBar=function(e){return arguments.length?(p=e,A):p},A.tooltipLine=function(e){return arguments.length?(d=e,A):d},A.tooltips=function(e){return arguments.length?(h=e,A):h},A.tooltipContent=function(e){return arguments.length?(tooltip=e,A):tooltip},A.noData=function(e){return arguments.length?(v=e,A):v},A.barClick=function(e){return arguments.length?(k=e,A):k},A},e.models.pie=function(){function x(i){return i.each(function(i){function F(e){var t=(e.startAngle+e.endAngle)*90/Math.PI-90;return t>90?t-180:t}function I(e){d||(e.innerRadius=0);var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){return _(t(e))}}function q(e){e.innerRadius=0;var t=d3.interpolate({startAngle:0,endAngle:0},e);return function(e){return _(t(e))}}var u=n-t.left-t.right,f=r-t.top-t.bottom,T=Math.min(u,f)/2,N=T-T/5,C=d3.select(this),k=C.selectAll(".nv-wrap.nv-pie").data([i]),L=k.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a),A=L.append("defs"),O=L.append("g"),M=k.select("g");x.gradient=function(t,n){return e.utils.colorRadialGradient(t,a+"-"+n,{x:0,y:0,r:"35%",s:"35%",u:"userSpaceOnUse"},b(t,n),k.select("defs"))},O.append("g").attr("class","nv-pie"),k.attr("transform","translate("+t.left+","+t.top+")"),M.select(".nv-pie").attr("transform","translate("+u/2+","+f/2+")"),C.on("click",function(e,t){S.chartClick({data:e,index:t,pos:d3.event,id:a})});var _=d3.svg.arc().outerRadius(N);m&&_.startAngle(m),g&&_.endAngle(g),d&&_.innerRadius(T*y);var D=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:o(e)}),P=k.select(".nv-pie").selectAll(".nv-slice").data(D);P.exit().remove();var H=P.enter().append("g").attr("class",function(e,t){return this.getAttribute("class")||E(e.data,t)}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),S.elementMouseover({label:s(e.data),value:o(e.data),point:e.data,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),S.elementMouseout({label:s(e.data),value:o(e.data),point:e.data,index:t,id:a})}).on("click",function(e,t){S.elementClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}).on("dblclick",function(e,t){S.elementDblClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()});P.attr("fill",function(e,t){return w(e.data,t)}).attr("stroke",function(e,t){return w(e.data,t)});var B=H.append("path").each(function(e){this._current=e});d3.transition(P.select("path")).attr("d",_).attrTween("d",I);if(l){var j=d3.svg.arc().innerRadius(0);c&&(j=_),h&&(j=d3.svg.arc().outerRadius(_.outerRadius())),H.append("g").classed("nv-label",!0).each(function(e,t){var n=d3.select(this);n.attr("transform",function(e){if(v){e.outerRadius=N+10,e.innerRadius=N+15;var t=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?t-=90:t+=90,"translate("+j.centroid(e)+") rotate("+t+")"}return e.outerRadius=T+10,e.innerRadius=T+15,"translate("+j.centroid(e)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",v?(e.startAngle+e.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")}),P.select(".nv-label").transition().attr("transform",function(e){if(v){e.outerRadius=N+10,e.innerRadius=N+15;var t=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?t-=90:t+=90,"translate("+j.centroid(e)+") rotate("+t+")"}return e.outerRadius=T+10,e.innerRadius=T+15,"translate("+j.centroid(e)+")"}),P.each(function(e,t){var n=d3.select(this);n.select(".nv-label text").style("text-anchor",v?(e.startAngle+e.endAngle)/2<Math.PI?"start":"end":"middle").text(function(e,t){var n=(e.endAngle-e.startAngle)/(2*Math.PI);return e.value&&n>p?s(e.data):""});var r=n.select("text").node().getBBox();n.select(".nv-label rect").attr("width",r.width+10).attr("height",r.height+10).attr("transform",function(){return"translate("+[r.x-5,r.y-5]+")"})})}}),x}var t={top:0,right:0,bottom:0,left:0},n=500,r=500,i=function(e){return e},s=function(e){return e.key},o=function(e){return e.value},u=function(e){return e.description},a=Math.floor(Math.random()*1e4),f=d3.format(",.2f"),l=!0,c=!0,h=!1,p=.02,d=!1,v=!1,m=!1,g=!1,y=.5,b=e.utils.defaultColor(),w=b,E=function(e,t){return"nv-slice nv-series-"+t},S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return x.dispatch=S,x.color=function(e){return arguments.length?(b=e,x):b},x.fill=function(e){return arguments.length?(w=e,x):w},x.classes=function(e){return arguments.length?(E=e,x):E},x.gradient=function(e){return arguments.length?(gradient=e,x):gradient},x.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,x):t},x.width=function(e){return arguments.length?(n=e,x):n},x.height=function(e){return arguments.length?(r=e,x):r},x.values=function(e){return arguments.length?(i=e,x):i},x.x=function(e){return arguments.length?(s=e,x):s},x.y=function(e){return arguments.length?(o=d3.functor(e),x):o},x.description=function(e){return arguments.length?(u=e,x):u},x.showLabels=function(e){return arguments.length?(l=e,x):l},x.labelSunbeamLayout=function(e){return arguments.length?(v=e,x):v},x.donutLabelsOutside=function(e){return arguments.length?(h=e,x):h},x.pieLabelsOutside=function(e){return arguments.length?(c=e,x):c},x.donut=function(e){return arguments.length?(d=e,x):d},x.donutRatio=function(e){return arguments.length?(y=e,x):y},x.startAngle=function(e){return arguments.length?(m=e,x):m},x.endAngle=function(e){return arguments.length?(g=e,x):g},x.id=function(e){return arguments.length?(a=e,x):a},x.valueFormat=function(e){return arguments.length?(f=e,x):f},x.labelThreshold=function(e){return arguments.length?(p=e,x):p},x},e.models.pieChart=function(){function v(e){return e.each(function(l){var m=l.properties,g=l.data,y=d3.select(this),b=this,w=(i||parseInt(y.style("width"),10)||960)-r.left-r.right,E=(s||parseInt(y.style("height"),10)||400)-r.top-r.bottom,S=d3.sum(g.map(function(e){return e.value}));v.update=function(){v(e)},v.container=this;if(!g||!g.length){var x=y.selectAll(".nv-noData").data([h]);return x.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),x.attr("x",r.left+w/2).attr("y",r.top+E/2).text(function(e){return e}),v}y.selectAll(".nv-noData").remove();var T=y.selectAll("g.nv-wrap.nv-pieChart").data([l]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),C=T.select("g");N.append("g").attr("class","nv-pieWrap");var k=0,L=0;o&&(N.append("g").attr("class","nv-legendWrap"),n.width(w).key(t.x()),T.select(".nv-legendWrap").datum(g).call(n),L=n.height()+10,r.top!==L+k&&(r.top=L+k,E=(s||parseInt(y.style("height"),10)||400)-r.top-r.bottom),T.select(".nv-legendWrap").attr("transform","translate(0,"+ -r.top+")")),u&&m.title&&(N.append("g").attr("class","nv-titleWrap"),C.select(".nv-title").remove(),C.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(m.title).attr("stroke","none").attr("fill","black"),k=parseInt(C.select(".nv-title").node().getBBox().height,10)+parseInt(C.select(".nv-title").style("margin-top"),10)+parseInt(C.select(".nv-title").style("margin-bottom"),10),r.top!==k+L&&(r.top=k+L,E=(s||parseInt(y.style("height"),10)||400)-r.top-r.bottom),C.select(".nv-titleWrap").attr("transform","translate(0,"+(-r.top+parseInt(C.select(".nv-title").node().getBBox().height,10))+")")),T.attr("transform","translate("+r.left+","+r.top+")"),t.width(w).height(E);var A=C.select(".nv-pieWrap").datum(g);d3.transition(A).call(t),T.selectAll(".nv-pie-hole").remove();if(a)var O=T.append("g").append("text").text(a).attr("text-anchor","middle").attr("class","nv-pie-hole").attr("transform","translate("+w/2+","+(12+E/2)+")").attr("fill","#333");n.dispatch.on("legendClick",function(n,r,i){n.disabled=!n.disabled,t.values()(g).filter(function(e){return!e.disabled}).length||t.values()(g).map(function(e){return e.disabled=!1,T.selectAll(".nv-series").classed("disabled",!1),e}),c.disabled=g.map(function(e){return!!e.disabled}),p.stateChange(c),e.transition().call(v)}),p.on("tooltipShow",function(e){f&&d(e,b.parentNode,S)}),t.dispatch.on("elementMouseout.tooltip",function(e){p.tooltipHide(e)}),p.on("changeState",function(t){typeof t.disabled!="undefined"&&(g.forEach(function(e,n){e.disabled=t.disabled[n]}),c.disabled=t.disabled),e.call(v)})}),v}var t=e.models.pie(),n=e.models.legend(),r={top:30,right:20,bottom:20,left:20},i=null,s=null,o=!0,u=!1,a=!1,f=!0,l=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},c={},h="No Data Available.",p=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),d=function(n,r,i){var s=n.pos[0]+(r&&r.offsetLeft||0),o=n.pos[1]+(r&&r.offsetTop||0),u=(t.y()(n.point)*100/i).toFixed(1),a=t.valueFormat()(t.y()(n.point)),f=l(n.point.key,u,a,n,v);e.tooltip.show([s,o],f,null,null,r)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+r.left,e.pos[1]+r.top],p.tooltipShow(e)}),p.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),v.legend=n,v.dispatch=p,v.pie=t,d3.rebind(v,t,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","donut","donutRatio","labelThreshold","color","fill","classes","gradient"),v.colorData=function(r){var i=function(t,n){return e.utils.defaultColor()(t,n)},s=function(e,t){return"nv-slice nv-series-"+t},o=arguments[0],u=arguments[1]||{};switch(o){case"graduated":var a=u.c1,f=u.c2,l=u.l;i=function(e,t){return d3.interpolateHsl(d3.rgb(a),d3.rgb(f))(t/l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=t*(u.step||1)%20;return"nv-slice nv-series-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n)}}var c=u.gradient?function(e,n){return t.gradient(e,n)}:i;return t.color(i),t.fill(c),t.classes(s),n.color(i),n.classes(s),v},v.margin=function(e){return arguments.length?(r.top=typeof e.top!="undefined"?e.top:r.top,r.right=typeof e.right!="undefined"?e.right:r.right,r.bottom=typeof e.bottom!="undefined"?e.bottom:r.bottom,r.left=typeof e.left!="undefined"?e.left:r.left,v):r},v.width=function(e){return arguments.length?(i=e,v):i},v.height=function(e){return arguments.length?(s=e,v):s},v.showTitle=function(e){return arguments.length?(u=e,v):u},v.showLegend=function(e){return arguments.length?(o=e,v):o},v.tooltips=function(e){return arguments.length?(f=e,v):f},v.tooltipContent=function(e){return arguments.length?(l=e,v):l},v.state=function(e){return arguments.length?(c=e,v):c},v.noData=function(e){return arguments.length?(h=e,v):h},v.hole=function(e){return arguments.length?(a=e,v):a},v},e.models.sparkline=function(){function h(e){return e.each(function(e){var i=n-t.left-t.right,h=r-t.top-t.bottom,p=d3.select(this);s.domain(l||d3.extent(e,u)).range([0,i]),o.domain(c||d3.extent(e,a)).range([h,0]);var d=p.selectAll("g.nv-wrap.nv-sparkline").data([e]),v=d.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),m=v.append("g"),g=d.select("g");d.attr("transform","translate("+t.left+","+t.top+")");var b=d.selectAll("path").data(function(e){return[e]});b.enter().append("path"),b.exit().remove(),b.style("stroke",function(e,t){return e.color||f(e,t)}).attr("d",d3.svg.line().x(function(e,t){return s(u(e,t))}).y(function(e,t){return o(a(e,t))}));var w=d.selectAll("circle.nv-point").data(function(e){function n(t){if(t!=-1){var n=e[t];return n.pointIndex=t,n}return null}var t=e.map(function(e,t){return a(e,t)}),r=n(t.lastIndexOf(o.domain()[1])),i=n(t.indexOf(o.domain()[0])),s=n(t.length-1);return[i,r,s].filter(function(e){return e!=null})});w.enter().append("circle"),w.exit().remove(),w.attr("cx",function(e,t){return s(u(e,e.pointIndex))}).attr("cy",function(e,t){return o(a(e,e.pointIndex))}).attr("r",2).attr("class",function(e,t){return u(e,e.pointIndex)==s.domain()[1]?"nv-point nv-currentValue":a(e,e.pointIndex)==o.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),h}var t={top:2,right:0,bottom:2,left:0},n=400,r=32,i=!0,s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=e.utils.getColor(["#000"]),l,c;return h.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,h):t},h.width=function(e){return arguments.length?(n=e,h):n},h.height=function(e){return arguments.length?(r=e,h):r},h.x=function(e){return arguments.length?(u=d3.functor(e),h):u},h.y=function(e){return arguments.length?(a=d3.functor(e),h):a},h.xScale=function(e){return arguments.length?(s=e,h):s},h.yScale=function(e){return arguments.length?(o=e,h):o},h.xDomain=function(e){return arguments.length?(l=e,h):l},h.yDomain=function(e){return arguments.length?(c=e,h):c},h.animate=function(e){return arguments.length?(i=e,h):i},h.color=function(t){return arguments.length?(f=e.utils.getColor(t),h):f},h},e.models.sparklinePlus=function(){function v(e){return e.each(function(c){function O(){if(a)return;var e=C.selectAll(".nv-hoverValue").data(u),r=e.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);e.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),e.attr("transform",function(e){return"translate("+s(t.x()(c[e],e))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!u.length)return;r.append("line").attr("x1",0).attr("y1",-n.top).attr("x2",0).attr("y2",b),r.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-n.top).attr("text-anchor","end").attr("dy",".9em"),C.select(".nv-hoverValue .nv-xValue").text(f(t.x()(c[u[0]],u[0]))),r.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-n.top).attr("text-anchor","start").attr("dy",".9em"),C.select(".nv-hoverValue .nv-yValue").text(l(t.y()(c[u[0]],u[0])))}function M(){function r(e,n){var r=Math.abs(t.x()(e[0],0)-n),i=0;for(var s=0;s<e.length;s++)Math.abs(t.x()(e[s],s)-n)<r&&(r=Math.abs(t.x()(e[s],s)-n),i=s);return i}if(a)return;var e=d3.mouse(this)[0]-n.left;u=[r(c,Math.round(s.invert(e)))],O()}var m=d3.select(this),g=(r||parseInt(m.style("width"))||960)-n.left-n.right,b=(i||parseInt(m.style("height"))||400)-n.top-n.bottom,w=t.y()(c[c.length-1],c.length-1);v.update=function(){v(e)},v.container=this;if(!c||!c.length){var E=m.selectAll(".nv-noData").data([d]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",n.left+g/2).attr("y",n.top+b/2).text(function(e){return e}),v}m.selectAll(".nv-noData").remove(),s=t.xScale(),o=t.yScale();var S=m.selectAll("g.nv-wrap.nv-sparklineplus").data([c]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),N=T.append("g"),C=S.select("g");N.append("g").attr("class","nv-sparklineWrap"),N.append("g").attr("class","nv-valueWrap"),N.append("g").attr("class","nv-hoverArea"),S.attr("transform","translate("+n.left+","+n.top+")");var k=C.select(".nv-sparklineWrap");t.width(g).height(b),k.call(t);var L=C.select(".nv-valueWrap"),A=L.selectAll(".nv-currentValue").data([w]);A.enter().append("text").attr("class","nv-currentValue").attr("dx",p?-8:8).attr("dy",".9em").style("text-anchor",p?"end":"start"),A.attr("x",g+(p?n.right:0)).attr("y",h?function(e){return o(e)}:0).style("fill",t.color()(c[c.length-1],c.length-1)).text(l(w)),N.select(".nv-hoverArea").append("rect").on("mousemove",M).on("click",function(){a=!a}).on("mouseout",function(){u=[],O()}),C.select(".nv-hoverArea rect").attr("transform",function(e){return"translate("+ -n.left+","+ -n.top+")"}).attr("width",g+n.left+n.right).attr("height",b+n.top)}),v}var t=e.models.sparkline(),n={top:15,right:100,bottom:10,left:50},r=null,i=null,s,o,u=[],a=!1,f=d3.format(",r"),l=d3.format(",.2f"),c=!0,h=!0,p=!1,d="No Data Available.";return v.sparkline=t,d3.rebind(v,t,"x","y","xScale","yScale","color"),v.margin=function(e){return arguments.length?(n.top=typeof e.top!="undefined"?e.top:n.top,n.right=typeof e.right!="undefined"?e.right:n.right,n.bottom=typeof e.bottom!="undefined"?e.bottom:n.bottom,n.left=typeof e.left!="undefined"?e.left:n.left,v):n},v.width=function(e){return arguments.length?(r=e,v):r},v.height=function(e){return arguments.length?(i=e,v):i},v.xTickFormat=function(e){return arguments.length?(f=e,v):f},v.yTickFormat=function(e){return arguments.length?(l=e,v):l},v.showValue=function(e){return arguments.length?(c=e,v):c},v.alignValue=function(e){return arguments.length?(h=e,v):h},v.rightAlignValue=function(e){return arguments.length?(p=e,v):p},v.noData=function(e){return arguments.length?(d=e,v):d},v},e.models.stackedArea=function(){function y(l){return l.each(function(l){var b=n-t.left-t.right,w=r-t.top-t.bottom,E=d3.select(this);i=p.xScale(),s=p.yScale(),l=l.map(function(e,t){return e.values=e.values.map(function(t,n){return t.index=n,t.stackedY=e.disabled?0:a(t,n),t}),e}),l=d3.layout.stack().order(h).offset(c).values(function(e){return e.values}).x(u).y(function(e){return e.stackedY}).out(function(e,t,n){e.display={y:n,y0:t}})(l);var S=E.selectAll("g.nv-wrap.nv-stackedarea").data([l]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),N=T.append("defs"),C=T.append("g"),k=S.select("g");y.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,o+"-"+n,r,d(t,n),S.select("defs"))},C.append("g").attr("class","nv-areaWrap"),C.append("g").attr("class","nv-scatterWrap"),S.attr("transform","translate("+t.left+","+t.top+")"),p.width(b).height(w).x(u).y(function(e){return e.display.y+e.display.y0}).forceY([0]);var L=k.select(".nv-scatterWrap");d3.transition(L).call(p),N.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),S.select("#nv-edge-clip-"+o+" rect").attr("width",b).attr("height",w),k.attr("clip-path",f?"url(#nv-edge-clip-"+o+")":"");var A=d3.svg.area().x(function(e,t){return i(u(e,t))}).y0(function(e){return s(e.display.y0)}).y1(function(e){return s(e.display.y+e.display.y0)}),O=d3.svg.area().x(function(e,t){return i(u(e,t))}).y0(function(e){return s(e.display.y0)}).y1(function(e){return s(e.display.y0)}),M=k.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e){return e});M.enter().append("path").on("mouseover",function(e,t){d3.select(this).classed("hover",!0),g.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),g.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("click",function(e,t){d3.select(this).classed("hover",!1),g.areaClick({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}),d3.transition(M.exit()).attr("d",function(e,t){return O(e.values,t)}).remove(),M.attr("class",function(e,t){return this.getAttribute("class")||m(e,t)}).attr("fill",function(e,t){return e.color||v(e,t)}).attr("stroke",function(e,t){return e.color||v(e,t)}),d3.transition(M).attr("d",function(e,t){return A(e.values,t)}),p.dispatch.on("elementMouseover.area",function(e){k.select(".nv-chart-"+o+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),p.dispatch.on("elementMouseout.area",function(e){k.select(".nv-chart-"+o+" .nv-area-"+e.seriesIndex).classed("hover",!1)})}),y}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i,s,o=Math.floor(Math.random()*1e5),u=function(e){return e.x},a=function(e){return e.y},f=!1,l="stack",c="zero",h="default",p=e.models.scatter(),d=e.utils.defaultColor(),v=d,m=function(e,t){return"nv-area nv-area-"+t},g=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return p.size(2.2).sizeDomain([2.2]),p.dispatch.on("elementClick.area",function(e){g.areaClick(e)}),p.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],g.tooltipShow(e)}),p.dispatch.on("elementMouseout.tooltip",function(e){g.tooltipHide(e)}),y.dispatch=g,y.scatter=p,d3.rebind(y,p,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),y.color=function(e){return arguments.length?(d=e,p.color(d),y):d},y.fill=function(e){return arguments.length?(v=e,p.fill(v),y):v},y.classes=function(e){return arguments.length?(m=e,p.classes(m),y):m},y.gradient=function(e){return arguments.length?(gradient=e,y):gradient},y.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,y):t},y.width=function(e){return arguments.length?(n=e,y):n},y.height=function(e){return arguments.length?(r=e,y):r},y.x=function(e){return arguments.length?(u=d3.functor(e),y):u},y.y=function(e){return arguments.length?(a=d3.functor(e),y):a},y.clipEdge=function(e){return arguments.length?(f=e,y):f},y.offset=function(e){return arguments.length?(c=e,y):c},y.order=function(e){return arguments.length?(h=e,y):h},y.style=function(e){if(!arguments.length)return l;l=e;switch(l){case"stack":y.offset("zero"),y.order("default");break;case"stream":y.offset("wiggle"),y.order("inside-out");break;case"expand":y.offset("expand"),y.order("default")}return y},y},e.models.stackedAreaChart=function(){function E(e){return e.each(function(a){var S=a.properties,T=a.data,N=d3.select(this),C=this,k=(n||parseInt(N.style("width"),10)||960)-t.left-t.right,L=(r||parseInt(N.style("height"),10)||400)-t.top-t.bottom;if(!T||!T.length||!T.filter(function(e){return e.values.length}).length)return N.append("text").attr("class","nvd3 nv-noData").attr("x",k/2).attr("y",L/2).attr("dy","-.7em").style("text-anchor","middle").text(c),E;N.select(".nv-noData").remove(),f=p.xScale(),l=p.yScale();var A=N.selectAll
("g.nv-wrap.nv-stackedAreaChart").data([T]),O=A.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),M=A.select("g");O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis"),O.append("g").attr("class","nv-stackedWrap");var _=0,D=0;s&&(O.append("g").attr("class","nv-legendWrap"),g.width(k*(i?.7:1)),M.select(".nv-legendWrap").datum(T).call(g),D=g.height(),t.top!==D+_&&(t.top=D+_,L=(r||parseInt(N.style("height"),10)||400)-t.top-t.bottom),M.select(".nv-legendWrap").attr("transform","translate("+k*(i?.3:0)+","+ -t.top+")")),o&&S.title&&(O.append("g").attr("class","nv-titleWrap"),M.select(".nv-title").remove(),M.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(S.title).attr("stroke","none").attr("fill","black"),_=parseInt(M.select(".nv-title").node().getBBox().height,10)+parseInt(M.select(".nv-title").style("margin-top"),10)+parseInt(M.select(".nv-title").style("margin-bottom"),10),t.top!==_+D&&(t.top=_+D,L=(r||parseInt(N.style("height"),10)||400)-t.top-t.bottom),M.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt(M.select(".nv-title").node().getBBox().height,10))+")")),i&&(O.append("g").attr("class","nv-controlsWrap"),y.width(k*.3).color(["#444"]),M.select(".nv-controlsWrap").datum(h).attr("transform","translate(0,"+(-t.top+_)+")").call(y)),M.attr("transform","translate("+t.left+","+t.top+")"),p.width(k).height(L);var P=M.select(".nv-stackedWrap").datum(T);d3.transition(P).call(p),d.scale(f).ticks(k/100).tickSize(-L,0),M.select(".nv-x.nv-axis").attr("transform","translate(0,"+L+")"),d3.transition(M.select(".nv-x.nv-axis")).call(d),v.scale(l).ticks(p.offset()=="wiggle"?0:L/36).tickSize(-k,0).setTickFormat(p.offset()=="expand"?d3.format("%"):m),d3.transition(M.select(".nv-y.nv-axis")).call(v),p.dispatch.on("areaClick.toggle",function(t){T.filter(function(e){return!e.disabled}).length===1?T=T.map(function(e){return e.disabled=!1,e}):T=T.map(function(e,n){return e.disabled=n!=t.seriesIndex,e}),e.transition().call(E)}),g.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,T.filter(function(e){return!e.disabled}).length||T.map(function(e){return e.disabled=!1,e}),e.transition().call(E)}),y.dispatch.on("legendClick",function(t,n){if(!t.disabled)return;h=h.map(function(e){return e.disabled=!0,e}),t.disabled=!1;switch(t.key){case"Stacked":p.style("stack");break;case"Stream":p.style("stream");break;case"Expanded":p.style("expand")}e.transition().call(E)}),b.on("tooltipShow",function(e){u&&w(e,C.parentNode)}),E.update=function(){e.transition().call(E)},E.container=this}),E}var t={top:30,right:20,bottom:50,left:60},n=null,r=null,i=!1,s=!0,o=!1,u=!0,a=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},f,l,c="No Data Available.",h=[{key:"Stacked"},{key:"Stream",disabled:!0},{key:"Expanded",disabled:!0}],p=e.models.stackedArea(),d=e.models.axis().orient("bottom").tickPadding(5),v=e.models.axis().orient("left"),m=d3.format(",.2f"),g=e.models.legend().height(30),y=e.models.legend().height(30),b=d3.dispatch("tooltipShow","tooltipHide"),w=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=d.tickFormat()(p.x()(t.point,t.pointIndex)),o=v.tickFormat()(p.y()(t.point,t.pointIndex)),u=a(t.series.key,s,o,t,E);e.tooltip.show([r,i],u,null,null,n)};return p.dispatch.on("tooltipShow",function(e){if(!Math.round(p.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],b.tooltipShow(e)}),p.dispatch.on("tooltipHide",function(e){b.tooltipHide(e)}),b.on("tooltipHide",function(){u&&e.tooltip.cleanup()}),E.dispatch=b,E.stacked=p,E.legend=g,E.xAxis=d,E.yAxis=v,d3.rebind(E,p,"x","y","size","xScale","yScale","xDomain","yDomain","sizeDomain","interactive","offset","order","style","clipEdge","forceX","forceY","forceSize","color","fill","classes","gradient"),E.colorData=function(t){var n=function(t,n){return e.utils.defaultColor()(t,n)},r=function(e,t){return"nv-area nv-area-"+t},i=arguments[0],s=arguments[1]||{};switch(i){case"graduated":var o=s.c1,u=s.c2,a=s.l;n=function(e,t){return d3.interpolateHsl(d3.rgb(o),d3.rgb(u))(t/a)};break;case"class":n=function(){return"inherit"},r=function(e,t){var n=t*(s.step||1)%20;return"nv-area nv-area-"+t+" "+(e.classes||"nv-fill"+(n>9?"":"0")+n+" nv-stroke"+t)}}var f=s.gradient?function(e,t){var n={orientation:s.orientation||"horizontal",position:s.position||"base"};return p.gradient(e,t,n)}:n;return p.color(n),p.fill(f),p.classes(r),g.color(n),g.classes(r),E},E.margin=function(e){return arguments.length?(t=e,E):t},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.showControls=function(e){return arguments.length?(i=e,E):i},E.showLegend=function(e){return arguments.length?(s=e,E):s},E.showTitle=function(e){return arguments.length?(o=e,E):o},E.tooltips=function(e){return arguments.length?(u=e,E):u},E.tooltip=function(e){return arguments.length?(a=e,E):a},E.noData=function(e){return arguments.length?(c=e,E):c},v.setTickFormat=v.tickFormat,v.tickFormat=function(e){return arguments.length?(m=e,v):m},E},e.models.treemap=function(){function w(a){return a.each(function(a){function E(e){var t,n,r=d.length;if(e.children&&u(e,r)&&d.indexOf(u(e,r))===-1){d.push(u(e,r)),n=e.children.length;for(t=0;t<n;t++)E(e.children[t])}}function P(e){function h(e){g.elementMouseout();if(C||!e)return;C=!0;var t=P(e),n=r.transition().duration(750),i=t.transition().duration(750);f.domain([e.x,e.x+e.dx]),l.domain([e.y,e.y+e.dy]),N.style("shape-rendering",null),N.selectAll(".nv-depth").sort(function(e,t){return e.depth-t.depth}),t.selectAll("text").style("fill-opacity",0),n.selectAll("text").call(b).style("fill-opacity",0),i.selectAll("text").call(b).style("fill-opacity",1),n.selectAll("rect").call(w),i.selectAll("rect").call(w),n.remove().each("end",function(){N.style("shape-rendering","crispEdges"),C=!1})}function y(e){e.children&&(n.nodes({children:e.children}),e.children.forEach(function(t){t.x=e.x+t.x*e.dx,t.y=e.y+t.y*e.dy,t.dx*=e.dx,t.dy*=e.dy,t.parent=e,y(t)}))}function b(e){e.attr("x",function(e){return f(e.x)+6}).attr("y",function(e){return l(e.y)+6})}function w(e){e.attr("x",function(e){return f(e.x)}).attr("y",function(e){return l(e.y)}).attr("width",function(e){return f(e.x+e.dx)-f(e.x)}).attr("height",function(e){return l(e.y+e.dy)-l(e.y)}).attr("class",function(e,t){return v&&p(e,t)&&d3.select(this).classed(p(e,t),!0),this.getAttribute("class")}).attr("fill",function(e,t){return d3.select(this).classed("nv-parent")?this.getAttribute("fill"):this.getAttribute("fill")||c(e,d.indexOf(p(e,t)))})}function E(e){return e.parent?E(e.parent)+" / "+u(e):u(e)}var n=d3.layout.treemap().value(o).sort(function(e,t){return o(e)-o(t)}).round(!1);y(e),D.datum(e.parent).on("click",h).select("text").text(E(e));var r=M.insert("g",".nv-grandparent").attr("class","nv-depth").attr("height",T).attr("transform","translate("+t.left+","+t.top+")"),i=r.selectAll("g").data(e.children).enter().append("g");i.filter(function(e){return e.children}).classed("nv-children",!0).on("click",h),i.filter(function(e){return!e.children}).on("click",m),i.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),g.elementMouseover({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:s})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),g.elementMouseout()}).on("mousemove",function(e,t){g.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:s})});var a=i.selectAll(".nv-child").data(function(e){return e.children||[e]}).enter().append("rect").attr("class","nv-child").call(w);return a.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),g.elementMouseover({label:u(e),value:o(e),point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:s})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),g.elementMouseout()}),i.append("rect").attr("class","nv-parent").call(w),i.append("text").attr("dy",".75em").text(function(e){return u(e)}).call(b),i}var h=a[0];E(h);var S=n-t.left-t.right,T=r-t.top-t.bottom,N=d3.select(this),C,k=function(t,n){return e.utils.colorLinearGradient(t,n,"vertical","base",i(t,n),L.select("defs"))};w.gradient(k),h.dx=S,h.dy=T,f=d3.scale.linear().domain([0,S]).range([0,S]),l=d3.scale.linear().domain([0,T]).range([0,T]),y=y||f,b=b||l;var L=N.selectAll("g.nv-wrap.nv-treemap").data([h]),A=L.enter().append("g").attr("class","nvd3 nv-wrap nv-treemap"),O=A.append("defs"),M=A.append("g"),_=L.select("g"),D=M.append("g").attr("class","nv-grandparent");D.append("rect").attr("width",n).attr("height",t.top),D.append("text").attr("x",6).attr("y",6).attr("dy",".75em"),P(h)}),w}var t={top:20,right:0,bottom:0,left:0},n=0,r=0,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e4),o=function(e){return e.size},u=function(e){return e.name},a=!0,f,l,i=e.utils.defaultColor(),c=function(e,t){return i(e,t)},h=function(e,t){return i(e,t)},p=function(e,t){return"nv-fill"+(t%20>9?"":"0")+t%20},d=[],v=!1,m=function(){return!1},g=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),y,b;return w.dispatch=g,w.color=function(e){return arguments.length?(i=e,w):i},w.fill=function(e){return arguments.length?(c=e,w):c},w.gradient=function(e){return arguments.length?(h=e,w):h},w.useClass=function(e){return arguments.length?(v=e,w):v},w.x=function(e){return arguments.length?(getX=e,w):getX},w.y=function(e){return arguments.length?(getY=e,w):getY},w.margin=function(e){return arguments.length?(t=e,w):t},w.width=function(e){return arguments.length?(n=e,w):n},w.height=function(e){return arguments.length?(r=e,w):r},w.xScale=function(e){return arguments.length?(f=e,w):f},w.yScale=function(e){return arguments.length?(l=e,w):l},w.xDomain=function(e){return arguments.length?(xDomain=e,w):xDomain},w.yDomain=function(e){return arguments.length?(yDomain=e,w):yDomain},w.id=function(e){return arguments.length?(s=e,w):s},w.leafClick=function(e){return arguments.length?(m=e,w):m},w.getSize=function(e){return arguments.length?(o=e,w):o},w.getName=function(e){return arguments.length?(u=e,w):u},w.className=function(e){return arguments.length?(p=e,w):p},w.groups=function(e){return arguments.length?(d=e,w):d},w},e.models.treemapChart=function(){function g(e){return e.each(function(o){var f=[o],c=d3.select(this),b=this,w=(i||parseInt(c.style("width"))||960)-r.left-r.right,E=(s||parseInt(c.style("height"))||400)-r.top-r.bottom;if(!f||!f.length||!f.filter(function(e){return e.children.length}).length)return c.append("text").attr("class","nvd3 nv-noData").attr("x",w/2).attr("y",E/2).attr("dy","-.7em").style("text-anchor","middle").text(d),g;c.select(".nv-noData").remove(),h=t.xScale(),p=t.yScale();var S=c.selectAll("g.nv-wrap.nv-treemapWithLegend").data([f]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-treemapWithLegend").append("g"),N=S.select("g");T.append("g").attr("class","nv-treemapWrap");var C=0,k=0;u&&(T.append("g").attr("class","nv-legendWrap"),n.width(w+r.left),N.select(".nv-legendWrap").datum(f).call(n),k=n.height()+10,r.top!==k+C&&(r.top=k+C,E=(s||parseInt(c.style("height"))||400)-r.top-r.bottom),N.select(".nv-legendWrap").attr("transform","translate("+ -r.left+","+ -r.top+")")),a&&properties.title&&(T.append("g").attr("class","nv-titleWrap"),N.select(".nv-title").remove(),N.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(properties.title).attr("stroke","none").attr("fill","black"),C=parseInt(N.select(".nv-title").style("height"))+parseInt(N.select(".nv-title").style("margin-top"))+parseInt(N.select(".nv-title").style("margin-bottom")),r.top!==C+k&&(r.top=C+k,E=(s||parseInt(c.style("height"))||400)-r.top-r.bottom),N.select(".nv-titleWrap").attr("transform","translate(0,"+(-r.top+parseInt(N.select(".nv-title").style("height")))+")")),S.attr("transform","translate("+r.left+","+r.top+")"),t.width(w).height(E);var L=N.select(".nv-treemapWrap").datum(f.filter(function(e){return!e.disabled}));d3.transition(L).call(t),n.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,f.filter(function(e){return!e.disabled}).length||f.map(function(e){return e.disabled=!1,S.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(g)}),v.on("tooltipShow",function(e){l&&m(e,b.parentNode)}),g.update=function(){e.transition().call(g)},g.container=this}),g}var t=e.models.treemap(),n=e.models.legend(),r={top:10,right:10,bottom:10,left:10},i=null,s=null,o=e.utils.defaultColor(),u=!1,a=!1,f=null,l=!0,c=function(e){var t="<p>Value: <b>"+d3.format(",.2s")(e.value)+"</b></p>"+"<p>Name: <b>"+e.name+"</b></p>";return t},h,p,d="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide","tooltipMove","elementMousemove"),m=function(t,n){var r=t.pos[0],i=t.pos[1],s=c(t.point);f=e.tooltip.show([r,i],s,null,null,n)};return t.dispatch.on("elementMouseover",function(e){e.pos=[e.pos[0]+r.left,e.pos[1]+r.top],v.tooltipShow(e)}),t.dispatch.on("elementMouseout",function(e){v.tooltipHide(e)}),v.on("tooltipHide",function(){l&&e.tooltip.cleanup()}),t.dispatch.on("elementMousemove",function(e){v.tooltipMove(e)}),v.on("tooltipMove",function(t){f&&e.tooltip.position(f,t.pos)}),g.dispatch=v,g.legend=n,g.treemap=t,d3.rebind(g,t,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","color","gradient","useClass","leafClick","getSize","getName","className","groups"),g.colorData=function(r){if(arguments[0]==="graduated")var i=arguments[1].c1,s=arguments[1].c2,o=arguments[1].l,u=function(e,t){return d3.interpolateHsl(d3.rgb(i),d3.rgb(s))(t/o)};else if(r==="class"){t.useClass(!0),n.useClass(!0);var u=function(e,t){return"inherit"}}else var u=e.utils.defaultColor();return t.color(u),n.color(u),g},g.colorFill=function(e){if(e==="gradient")var n=function(e,t){return g.gradient()(e,t)};else var n=g.color();return t.fill(n),g},g.x=function(e){return arguments.length?(getX=e,t.x(e),g):getX},g.y=function(e){return arguments.length?(getY=e,t.y(e),g):getY},g.margin=function(e){return arguments.length?(r=e,g):r},g.width=function(e){return arguments.length?(i=e,g):i},g.height=function(e){return arguments.length?(s=e,g):s},g.color=function(t){return arguments.length?(o=e.utils.getColor(t),n.color(o),g):o},g.showLegend=function(e){return arguments.length?(u=e,g):u},g.showTitle=function(e){return arguments.length?(a=e,g):a},g.tooltip=function(e){return arguments.length?(f=e,g):f},g.tooltips=function(e){return arguments.length?(l=e,g):l},g.tooltipContent=function(e){return arguments.length?(c=e,g):c},g.noData=function(e){return arguments.length?(d=e,g):d},g},e.models.tree=function(){function k(e){return e.each(function(e){var o=d3.svg.diagonal().projection(function(e){return[g(e),y(e)]}),l=d3.behavior.zoom().scaleExtent([i.min,i.max]).on("zoom",function(){N.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}),c=d3.select(this),h=c.selectAll(".nv-wrap").data([1]),p=h.enter().append("g").attr("class","nvd3 nv-wrap").attr("id","nv-chart-"+f).call(l),x=p.append("defs"),T=p.append("svg:rect").attr("id","backg").attr("transform","translate("+n.left+","+n.top+")").style("fill","transparent"),N=p.append("g"),C=N.append("g").attr("class","nv-tree").attr("id","vis"),L=d3.layout.tree().size(null).elementsize([a?s.height:s.width,1]).separation(function(t,n){return t.parent==n.parent?1:1}),A={width:parseInt(c.style("width"),10),height:parseInt(c.style("height"),10)};e.x0=e.x0||0,e.y0=e.y0||0;var O=e;k.showall=function(){function e(t){if(t.children&&t.children.length||t._children&&t._children.length)t._children&&t._children.length&&(t.children=t._children,t._children=null),t.children.forEach(e)}e(O),l.translate([0,0]).scale(1),N.attr("transform","translate("+[0,0]+")scale("+1+")"),k.update(O)},k.resize=function(){A={width:parseInt(c.style("width"),10),height:parseInt(c.style("height"),10)},k.reset(),k.update(O)},k.orientation=function(e){a=e==="horizontal"||!a?!0:!1,k.reset(),k.update(O)},k.reset=function(){l.translate([0,0]).scale(1),N.attr("transform","translate("+[0,0]+")scale("+1+")")},k.zoom=function(e){var t=e>0?i.max:i.min,n=Math.min(Math.max(l.scale()+e,i.min),i.max);return n!==t&&(l.translate([0,0]).scale(n),N.attr("transform","translate("+[0,0]+")scale("+n+")")),n},k.zoomLevel=function(e){var t=Math.min(Math.max(e,i.min),i.max);return l.translate([0,0]).scale(t),N.attr("transform","translate("+[0,0]+")scale("+t+")"),t},k.filter=function(t){function i(e){E(e)===t?(n=e,r=!0):!r&&e.children&&e.children.forEach(i)}var n={},r=!1;i(e),n.x0=0,n.y0=0,O=n,k.update(O)},k.update=function(e){function i(e){f(e),k.update(e)}function f(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null)}var l=L.nodes(O),c=l[0],h={width:A.width-n.left-n.right,height:A.height-n.top-n.bottom},p={width:d3.min(l,g)+d3.max(l,g),height:d3.min(l,y)+d3.max(l,y)};a?p.width=p.width*s.width*2+s.width:p.height=p.height*s.height*2+s.height;var S=d3.min([h.width/p.width,h.height/p.height]),x=h.width/p.width<h.height/p.height?[0,(h.height/S-p.height)/2]:[(h.width/S-p.width)/2,0],N={top:a?n.top/2:s.height,left:a?s.width:n.left/2};T.attr("width",h.width).attr("height",h.height),C.attr("transform","translate("+[(N.left+x[0])*S,(N.top+x[1])*S]+")scale("+S+")"),l.forEach(function(e){d(e,e.depth*(a?2*s.width:2*s.height))});var M=C.selectAll("g.nv-card").data(l,E),_=M.enter().append("svg:g").attr("class","nv-card").attr("id",function(e){return"nv-card-"+E(e)}).attr("transform",function(t){return y(e)===0?"translate("+g(c)+","+y(c)+")":"translate("+b(e)+","+w(e)+")"}).on("click",i);_.append("foreignObject").attr("class","nv-foreign-object").attr("width",1).attr("height",1).attr("x",-1).attr("y",-1).append("xhtml:body").style("font","14px 'Helvetica Neue'").html(u);var D=_.append("svg:g").attr("class","nv-expcoll").style("opacity",1e-6);D.append("svg:circle").attr("class","nv-circ-back").attr("r",t),D.append("svg:line").attr("class","nv-line-vert").attr("x1",0).attr("y1",.5-t).attr("x2",0).attr("y2",t-.5).style("stroke","#bbb"),D.append("svg:line").attr("class","nv-line-hrzn").attr("x1",.5-t).attr("y1",0).attr("x2",t-.5).attr("y2",0).style("stroke","#fff");var P=M.transition().duration(r).attr("transform",function(e){return"translate("+g(e)+","+y(e)+")"});P.select(".nv-expcoll").style("opacity",function(e){return e.children&&e.children.length||e._children&&e._children.length?1:0}),P.select(".nv-circ-back").style("fill",function(e){return e._children&&e._children.length?"#777":e.children?"#bbb":"none"}),P.select(".nv-line-vert").style("stroke",function(e){return e._children&&e._children.length?"#fff":"#bbb"}),P.selectAll(".nv-foreign-object").attr("width",s.width).attr("height",s.height).attr("x",a?-s.width+t:-s.width/2).attr("y",a?-s.height/2+t:-s.height+t*2);var H=M.exit().transition().duration(r).attr("transform",function(t){return"translate("+g(e)+","+y(e)+")"}).remove();H.selectAll(".nv-expcoll").style("stroke-opacity",1e-6),H.selectAll(".nv-foreign-object").attr("width",1).attr("height",1).attr("x",-1).attr("y",-1);var B=C.selectAll("path.link").data(L.links(l),function(e){return e.source.id+"-"+e.target.id});B.enter().insert("svg:path","g").attr("class","link").attr("d",function(t){var n=y(e)===0?{x:e.x,y:e.y}:{x:e.x0,y:e.y0};return o({source:n,target:n})}),B.transition().duration(r).attr("d",o),B.exit().transition().duration(r).attr("d",function(t){var n={x:e.x,y:e.y};return o({source:n,target:n})}).remove(),l.forEach(function(e){v(e,g(e)),m(e,y(e))})},k.gradient(S),k.update(O)}),k}var t=5.5,n={top:10,right:10,bottom:10,left:10},r=300,i={min:.25,max:2},s={width:100,height:50},o="../img/",u=function(e){return'<div class="nv-tree-node"></div>'},a=!1,f=Math.floor(Math.random()*1e4),l=e.utils.defaultColor(),c=function(e,t){return l(e,t)},h=function(e,t){return l(e,t)},p=function(e,t){e.x=t},d=function(e,t){e.y=t},v=function(e,t){a?e.y0=t:e.x0=t},m=function(e,t){a?e.x0=t:e.y0=t},g=function(e){return a?e.y:e.x},y=function(e){return a?e.x:e.y},b=function(e){return a?e.y0:e.x0},w=function(e){return a?e.x0:e.y0},E=function(e){return e.id},S=function(t,n){return e.utils.colorRadialGradient(t,n,0,0,"35%","35%",l(t,n),wrap.select("defs"))},x=!1,T=d3.format(",.2f"),N=!0,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return k.dispatch=C,k.color=function(e){return arguments.length?(l=e,k):l},k.fill=function(e){return arguments.length?(c=e,k):c},k.gradient=function(e){return arguments.length?(h=e,k):h},k.useClass=function(e){return arguments.length?(x=e,k):x},k.width=function(e){return arguments.length?(width=e,k):width},k.height=function(e){return arguments.length?(height=e,k):height},k.values=function(e){return arguments.length?(getValues=e,k):getValues},k.x=function(e){return arguments.length?(g=e,k):g},k.y=function(e){return arguments.length?(y=d3.functor(e),k):y},k.showLabels=function(e){return arguments.length?(N=e,k):N},k.id=function(e){return arguments.length?(f=e,k):f},k.valueFormat=function(e){return arguments.length?(T=e,k):T},k.labelThreshold=function(e){return arguments.length?(labelThreshold=e,k):labelThreshold},k.radius=function(e){return arguments.length?(t=e,k):t},k.duration=function(e){return arguments.length?(r=e,k):r},k.zoomExtents=function(e){return arguments.length?(i=e,k):i},k.padding=function(e){return arguments.length?(n=e,k):n},k.nodeSize=function(e){return arguments.length?(s=e,k):s},k.nodeImgPath=function(e){return arguments.length?(o=e,k):o},k.nodeRenderer=function(e){return arguments.length?(u=e,k):u},k.horizontal=function(e){return arguments.length?(a=e,k):a},k.getId=function(e){return arguments.length?(E=e,k):E},k}})();