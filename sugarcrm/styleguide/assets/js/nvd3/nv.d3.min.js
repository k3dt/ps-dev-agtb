(function(){function t(e,t){return(new Date(t,e+1,0)).getDate()}function n(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s===0&&u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}var e={version:"0.0.1a",dev:!1};window.nv=e,e.tooltip={},e.utils={},e.models={},e.charts={},e.graphs=[],e.logs={},e.dispatch=d3.dispatch("render_start","render_end"),e.dev&&(e.dispatch.on("render_start",function(t){e.logs.startTime=+(new Date)}),e.dispatch.on("render_end",function(t){e.logs.endTime=+(new Date),e.logs.totalTime=e.logs.endTime-e.logs.startTime,e.log("total",e.logs.totalTime)})),e.log=function(){return e.dev&&console.log&&console.log.apply&&console.log.apply(console,arguments),arguments[arguments.length-1]},e.render=function r(t){t=t||1,r.active=!0,e.dispatch.render_start(),setTimeout(function(){var n;for(var i=0;i<t&&(graph=r.queue[i]);i++)n=graph.generate(),typeof graph.callback==typeof Function&&graph.callback(n),e.graphs.push(n);r.queue.splice(0,i),r.queue.length?setTimeout(arguments.callee,0):(e.render.active=!1,e.dispatch.render_end())},0)},e.render.queue=[],e.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),e.render.queue.push(t),e.render.active||e.render()},e.identity=function(e){return e},e.strip=function(e){return e.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)},d3.time.monthEnds=n(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(e){return e.getMonth()}),function(){var t=window.nv.tooltip={};t.show=function(e,n,r,i,s,o){var u=document.createElement("div"),a=document.getElementsByTagName("body")[0];return u.className="nvtooltip "+(o?o:"xy-tooltip"),r=r||"s",i=i||20,u.innerHTML=n,u.style.left=0,u.style.top=-1e3,u.style.opacity=0,u.style.position="absolute",u.style.pointerEvents="none",a.appendChild(u),t.position(u,e,r,i),u.style.opacity=1,u},t.cleanup=function(){var e=document.getElementsByClassName("nvtooltip"),t=[];while(e.length)t.push(e[0]),e[0].style.transitionDelay="0 !important",e[0].style.opacity=0,e[0].className="nvtooltip-pending-removal";setTimeout(function(){while(t.length){var e=t.pop();e.parentNode.removeChild(e)}},500)},t.position=function(t,n,r,i){var s=document.getElementsByTagName("body")[0];r=r||"s",i=i||20;var o=parseInt(t.offsetHeight),u=parseInt(t.offsetWidth),a=e.utils.windowSize().width,f=e.utils.windowSize().height,l=s.scrollTop,c=s.scrollLeft,h,p;switch(r){case"e":h=n[0]-u-i,p=n[1]-o/2,h<c&&(h=n[0]+i),p<l&&(p=l+5),p+o>l+f&&(p=l-o-5);break;case"w":h=n[0]+i,p=n[1]-o/2,h+u>a&&(h=n[0]-u-i),p<l&&(p=l+5),p+o>l+f&&(p=l-o-5);break;case"n":h=n[0]-u/2,p=n[1]+i,h<c&&(h=c+5),h+u>a&&(h=a-u-5),p+o>l+f&&(p=n[1]-o-i);break;case"s":h=n[0]-u/2,p=n[1]-o-i,h<c&&(h=c+5),h+u>a&&(h=a-u-5),l>p&&(p=n[1]+20)}t.style.left=h+"px",t.style.top=p+"px"}}(),e.utils.windowSize=function(){var e={width:640,height:480};return document.body&&document.body.offsetWidth&&(e.width=document.body.offsetWidth,e.height=document.body.offsetHeight),document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(e.width=document.documentElement.offsetWidth,e.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e.width=window.innerWidth,e.height=window.innerHeight),e},e.utils.getAbsoluteXY=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,s=n.left+r,o=n.top+i;return{left:s,top:o}},e.utils.windowResize=function(e){window.attachEvent?window.attachEvent("onresize",e):window.addEventListener&&window.addEventListener("resize",e,!0)},e.utils.windowUnResize=function(e){window.detachEvent?window.detachEvent("onresize",e):window.removeEventListener&&window.removeEventListener("resize",e,!0)},e.utils.getColor=function(t){return arguments.length?Object.prototype.toString.call(t)==="[object Array]"?function(e,n){return e.color||t[n%t.length]}:t:e.utils.defaultColor()},e.utils.defaultColor=function(){var e=d3.scale.category20().range();return function(t,n){return t.color||e[n%e.length]}},e.utils.colorLinearGradient=function(t,n,r,i,s){var o="rg_gradient_"+n,u=s.select("#"+o);return!u.empty()||e.utils.createLinearGradient(o,r,s,[{offset:"0%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1},{offset:"20%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1},{offset:"80%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1}]),"url(#"+o+")"},e.utils.createLinearGradient=function(e,t,n,r){var i=t==="horizontal"?"0%":"100%",s=t==="horizontal"?"100%":"0%",o=n.append("linearGradient").attr("id",e).attr("x1","0%").attr("y1","0%").attr("x2",i).attr("y2",s).attr("spreadMethod","pad");for(var u=0;u<r.length;u++){var a=r[u],f=o.append("stop");for(var l in a)a.hasOwnProperty(l)&&f.attr(l,a[l])}},e.utils.colorRadialGradient=function(t,n,r,i,s,o,u,a){var f="rg_gradient_"+n,l=a.select("#"+f);return l.empty()?e.utils.createRadialGradient(f,r,i,s,a,[{offset:o,"stop-color":d3.rgb(u).brighter().toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(u).darker().toString(),"stop-opacity":1}]):l.attr("r",s),"url(#"+f+")"},e.utils.createRadialGradient=function(e,t,n,r,i,s){var o=i.append("radialGradient").attr("id",e).attr("r",r).attr("cx",t).attr("cy",n).attr("gradientUnits","userSpaceOnUse").attr("spreadMethod","pad");for(var u=0;u<s.length;u++){var a=s[u],f=o.append("stop");for(var l in a)a.hasOwnProperty(l)&&f.attr(l,a[l])}},e.utils.pjax=function(t,n){function r(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),e.utils.pjax(t,n)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},e.utils.roundedRectangle=function(e,t,n,r,i){return"M"+e+","+t+"h"+(n-i*2)+"a"+i+","+i+" 0 0 1 "+i+","+i+"v"+(r-2-i*2)+"a"+i+","+i+" 0 0 1 "+ -i+","+i+"h"+(i*2-n)+"a"+ -i+","+i+" 0 0 1 "+ -i+","+ -i+"v"+(-r+i*2+2)+"a"+i+","+i+" 0 0 1 "+i+","+ -i+"z"},e.utils.dropShadow=function(e,t,n){var r=n||{},i=r.height||"130%",s=r.offset||2,o=r.blur||1,u=t.append("filter").attr("id",e).attr("height",i),a=u.append("feOffset").attr("in","SourceGraphic").attr("result","offsetBlur").attr("dx",s).attr("dy",s),f=u.append("feColorMatrix").attr("in","offsetBlur").attr("result","matrixOut").attr("type","matrix").attr("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"),l=u.append("feGaussianBlur").attr("in","matrixOut").attr("result","blurOut").attr("stdDeviation",o),c=u.append("feMerge");return c.append("feMergeNode"),c.append("feMergeNode").attr("in","SourceGraphic"),"url(#"+e+")"},e.models.axis=function(){function h(n){return n.each(function(n){var h=d3.select(this),p=h.selectAll("g.nv-wrap.nv-axis").data([n]),d=p.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),v=d.append("g"),m=p.select("g");f!==null?l.ticks(f):(l.orient()=="top"||l.orient()=="bottom")&&l.ticks(Math.abs(r.range()[1]-r.range()[0])/100),d3.transition(m).call(l),c=c||l.scale();var g=m.selectAll("text.nv-axislabel").data([i||null]);g.exit().remove();switch(l.orient()){case"top":g.enter().append("text").attr("class","nv-axislabel").attr("text-anchor","middle").attr("y",0);var y=r.range().length==2?r.range()[1]:r.range()[r.range().length-1]+(r.range()[1]-r.range()[0]);g.attr("x",y/2);if(s){var b=p.selectAll("g.nv-axisMaxMin").data(r.domain());b.enter().append("g").attr("class","nv-axisMaxMin").append("text"),b.exit().remove(),b.attr("transform",function(e,t){return"translate("+r(e)+",0)"}).select("text").attr("dy","0em").attr("y",-l.tickPadding()).attr("text-anchor","middle").text(function(e,t){return(""+l.tickFormat()(e)).match("NaN")?"":l.tickFormat()(e)}),d3.transition(b).attr("transform",function(e,t){return"translate("+r.range()[t]+",0)"})}break;case"bottom":var w=30,E=30;if(u%360){var S=m.selectAll("g").select("text");S.each(function(e,t){var n=this.getBBox().width;n>E&&(E=n)});var x=Math.abs(Math.sin(u*Math.PI/180)),w=(x?x*E:E)+30;S.attr("transform",function(e,t,n){return"rotate("+u+" 0,0)"}).attr("text-anchor",u%360>0?"start":"end")}g.enter().append("text").attr("class","nv-axislabel").attr("text-anchor","middle").attr("y",w);var y=r.range().length==2?r.range()[1]:r.range()[r.range().length-1]+(r.range()[1]-r.range()[0]);g.attr("x",y/2);if(s){var b=p.selectAll("g.nv-axisMaxMin").data(r.domain());b.enter().append("g").attr("class","nv-axisMaxMin").append("text"),b.exit().remove(),b.attr("transform",function(e,t){return"translate("+r(e)+",0)"}).select("text").attr("dy",".71em").attr("y",l.tickPadding()).attr("transform",function(e,t,n){return"rotate("+u+" 0,0)"}).attr("text-anchor",u%360>0?"start":"end").text(function(e,t){return(""+l.tickFormat()(e)).match("NaN")?"":l.tickFormat()(e)}),d3.transition(b).attr("transform",function(e,t){return"translate("+r.range()[t]+",0)"})}break;case"right":g.enter().append("text").attr("class","nv-axislabel").attr("text-anchor",a?"middle":"begin").attr("transform",a?"rotate(90)":"").attr("y",a?-Math.max(e.right,t)-12:-10),g.attr("x",a?r.range()[0]/2:l.tickPadding());if(s){var b=p.selectAll("g.nv-axisMaxMin").data(r.domain());b.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),b.exit().remove(),b.attr("transform",function(e,t){return"translate(0,"+r(e)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",l.tickPadding()).attr("text-anchor","start").text(function(e,t){return(""+l.tickFormat()(e)).match("NaN")?"":l.tickFormat()(e)}),d3.transition(b).attr("transform",function(e,t){return"translate(0,"+r.range()[t]+")"}).select("text").style("opacity",1)}break;case"left":g.enter().append("text").attr("class","nv-axislabel").attr("text-anchor",a?"middle":"end").attr("transform",a?"rotate(-90)":"").attr("y",a?-Math.max(e.left,t)+12:-10),g.attr("x",a?-r.range()[0]/2:-l.tickPadding());if(s){var b=p.selectAll("g.nv-axisMaxMin").data(r.domain());b.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),b.exit().remove(),b.attr("transform",function(e,t){return"translate(0,"+c(e)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-l.tickPadding()).attr("text-anchor","end").text(function(e,t){return(""+l.tickFormat()(e)).match("NaN")?"":l.tickFormat()(e)}),d3.transition(b).attr("transform",function(e,t){return"translate(0,"+r.range()[t]+")"}).select("text").style("opacity",1)}}g.text(function(e){return e}),s&&(l.orient()==="left"||l.orient()==="right")&&m.selectAll("g").each(function(e,t){if(r(e)<r.range()[1]+10||r(e)>r.range()[0]-10)e>1e-10||e<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove()});if(s&&(l.orient()==="top"||l.orient()==="bottom")){var T=[];p.selectAll("g.nv-axisMaxMin").each(function(e,t){t?T.push(r(e)-this.getBBox().width-4):T.push(r(e)+this.getBBox().width+4)}),m.selectAll("g").each(function(e,t){if(r(e)<T[0]||r(e)>T[1])e>1e-10||e<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove()})}o&&m.selectAll("line.tick").filter(function(e){return!parseFloat(Math.round(e*1e5)/1e6)}).classed("zero",!0),c=r.copy()}),h}var e={top:0,right:0,bottom:0,left:0},t=60,n=60,r=d3.scale.linear(),i=null,s=!0,o=!0,u=0,a=!0,f=null,l=d3.svg.axis().scale(r).orient("bottom").tickFormat(function(e){return e}),c;return d3.rebind(h,l,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(h,r,"domain","range","rangeBand","rangeBands"),h.margin=function(t){return arguments.length?(e=t,h):e},h.width=function(e){return arguments.length?(t=e,h):t},h.ticks=function(e){return arguments.length?(f=e,h):f},h.height=function(e){return arguments.length?(n=e,h):n},h.axisLabel=function(e){return arguments.length?(i=e,h):i},h.showMaxMin=function(e){return arguments.length?(s=e,h):s},h.highlightZero=function(e){return arguments.length?(o=e,h):o},h.scale=function(e){return arguments.length?(r=e,l.scale(r),d3.rebind(h,r,"domain","range","rangeBand","rangeBands"),h):r},h.rotateYLabel=function(e){return arguments.length?(a=e,h):a},h.rotateLabels=function(e){return arguments.length?(u=e,h):u},h},e.models.funnel=function(){function S(l){return l.each(function(l){var g=n-t.left-t.right,T=r-t.top-t.bottom,N=d3.select(this),C=function(t,n){return e.utils.colorLinearGradient(t,n,"vertical",v(t,n),A.select("defs"))},k=20;S.gradient(C),l=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(l),l=l.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var L=p&&d?[]:l.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});i.domain(d3.merge(L).map(function(e){return e.x})).rangeBands([0,g],.1),s.domain(d||d3.extent(d3.merge(L).map(function(e){return e.y+e.y0}).concat(f))).range([T,0]);if(i.domain()[0]===i.domain()[1]||s.domain()[0]===s.domain()[1])singlePoint=!0;i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1])),s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]+s.domain()[0]*.01,s.domain()[1]-s.domain()[1]*.01]):s.domain([-1,1])),w=w||i,E=E||s;var A=N.selectAll("g.nv-wrap.nv-funnel").data([l]),O=A.enter().append("g").attr("class","nvd3 nv-wrap nv-funnel"),M=O.append("defs"),_=O.append("g"),D=A.select("g");_.append("g").attr("class","nv-groups"),A.attr("transform","translate("+t.left+","+t.top+")"),M.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),A.select("#nv-edge-clip-"+o+" rect").attr("width",g).attr("height",T),D.attr("clip-path",c?"url(#nv-edge-clip-"+o+")":"");var P=Math.min(T/1.1,g-40),H=(P/3-P)/2/T,B=g/2,j=A.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});j.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(j.exit()).selectAll("polygon.nv-bar").delay(function(e,t){return t*h/l[0].values.length}).attr("points",function(e){var t=H*s(e.y0)+P/2,n=H*s(e.y0+e.y)+P/2;return B-t+","+0+" "+(B-n)+","+0+" "+(B+n)+","+0+" "+(B+t)+","+0}).remove(),d3.transition(j.exit()).selectAll("g.nv-label-value").delay(function(e,t){return t*h/l[0].values.length}).attr("y",0).style("fill-opacity",1e-6).attr("transform","translate("+B+",0)").remove(),d3.transition(j.exit()).selectAll("text.nv-label-group").delay(function(e,t){return t*h/l[0].values.length}).attr("y",0).style("fill-opacity",1e-6).attr("transform","translate("+g+",0)").remove(),j.attr("class",function(e,t){return this.getAttribute("class")||"nv-group nv-series-"+t+(y?" "+(e.class||"nv-fill"+(t%20>9?"":"0")+t%20):"")}).classed("hover",function(e){return e.hover}).attr("fill",function(e,t){return m(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||m(e,t)}),d3.transition(j).style("stroke-opacity",1).style("fill-opacity",1);var F=j.selectAll("polygon.nv-bar").data(function(e){return e.values}),I=F.enter().append("polygon").attr("class","nv-bar positive").attr("points",function(e){var t=H*s(e.y0)+P/2,n=H*s(e.y0+e.y)+P/2;return B-t+","+0+" "+(B-n)+","+0+" "+(B+n)+","+0+" "+(B+t)+","+0});d3.transition(F).delay(function(e,t){return t*h/l[0].values.length}).attr("points",function(e){var t=H*s(e.y0)+P/2,n=H*s(e.y0+e.y)+P/2;return B-t+","+s(e.y0)+" "+(B-n)+","+s(e.y0+e.y)+" "+(B+n)+","+s(e.y0+e.y)+" "+(B+t)+","+s(e.y0)});var q=j.selectAll(".nv-label-value").data(function(e){return e.values}),R=q.enter().append("g").attr("class","nv-label-value").attr("transform","translate("+B+",0)");R.append("rect").attr("x",-k/2).attr("y",-20).attr("width",k).attr("height",40).attr("rx",3).attr("ry",3).style("fill",m({},0)).attr("stroke","none").style("fill-opacity",.4),R.append("text").attr("x",0).attr("y",5).attr("text-anchor","middle").text(function(e){return"$"+e.y+"K"}).attr("stroke","none").style("fill","#fff"),q.selectAll("text").each(function(e,t){var n=this.getBBox().width+20;n>k&&(k=n)}),q.selectAll("rect").each(function(e,t){d3.select(this).attr("width",k).attr("x",-k/2)}),d3.transition(q).delay(function(e,t){return t*h/l[0].values.length}).attr("transform",function(e){return"translate("+B+","+s(e.y0+e.y/2)+")"});var U=j.selectAll("text.nv-label-group").data(function(e){return[{y:e.values[0].y,y0:e.values[0].y0,key:e.count}]}),z=U.enter().append("text").attr("class","nv-label-group").attr("x",0).attr("y",0).attr("dx",-10).attr("dy",5).attr("text-anchor","middle").text(function(e){return e.key}).attr("stroke","none").style("fill","black").style("fill-opacity",1e-6).attr("transform","translate("+g+",0)");d3.transition(U).delay(function(e,t){return t*h/l[0].values.length}).style("fill-opacity",1).attr("transform",function(e){return"translate("+g+","+s(e.y0+e.y/2)+")"}),F.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),b.elementMouseover({value:a(e,t),point:e,series:l[e.series],pos:[i(u(e,t))+i.rangeBand()*(l.length/2)/l.length,s(a(e,t)+e.y0)],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),b.elementMouseout({value:a(e,t),point:e,series:l[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){b.elementClick({value:a(e,t),point:e,series:l[e.series],pos:[i(u(e,t))+i.rangeBand()*(l.length/2)/l.length,s(a(e,t)+e.y0)],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){b.elementDblClick({value:a(e,t),point:e,series:l[e.series],pos:[i(u(e,t))+i.rangeBand()*(l.length/2)/l.length,s(a(e,t)+e.y0)],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),w=i.copy(),E=s.copy()}),S}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=!1,c=!0,h=1200,p,d,v=e.utils.defaultColor(),m=function(e,t){return v(e,t)},g=function(e,t){return v(e,t)},y=!1,b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w,E;return S.dispatch=b,S.color=function(e){return arguments.length?(v=e,S):v},S.fill=function(e){return arguments.length?(m=e,S):m},S.gradient=function(e){return arguments.length?(g=e,S):g},S.useClass=function(e){return arguments.length?(y=e,S):y},S.x=function(e){return arguments.length?(u=e,S):u},S.y=function(e){return arguments.length?(a=e,S):a},S.margin=function(e){return arguments.length?(t=e,S):t},S.width=function(e){return arguments.length?(n=e,S):n},S.height=function(e){return arguments.length?(r=e,S):r},S.xScale=function(e){return arguments.length?(i=e,S):i},S.yScale=function(e){return arguments.length?(s=e,S):s},S.xDomain=function(e){return arguments.length?(p=e,S):p},S.yDomain=function(e){return arguments.length?(d=e,S):d},S.forceY=function(e){return arguments.length?(f=e,S):f},S.stacked=function(e){return arguments.length?(l=e,S):l},S.id=function(e){return arguments.length?(o=e,S):o},S.delay=function(e){return arguments.length?(h=e,S):h},S.clipEdge=function(e){return arguments.length?(c=e,S):c},S},e.models.funnelChart=function(){function y(e){return e.each(function(n){var u=n.properties,l=n.data,h=d3.select(this),b=this,w=(s||parseInt(h.style("width"))||960)-i.left-i.right,E=(o||parseInt(h.style("height"))||400)-i.top-i.bottom;if(!l||!l.length||!l.filter(function(e){return e.values.length}).length)return h.append("text").attr("class","nvd3 nv-noData").attr("x",w/2).attr("y",E/2).attr("dy","-.7em").style("text-anchor","middle").text(v),y;h.select(".nv-noData").remove(),p=t.xScale();var S=h.selectAll("g.nv-wrap.nv-funnelWithLegend").data([l]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-funnelWithLegend").append("g"),N=S.select("g");T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-funnelWrap");var C=0,k=0;a&&(T.append("g").attr("class","nv-legendWrap"),r.width(w+i.left),N.select(".nv-legendWrap").datum(l).call(r),k=r.height()+10,i.top!==k+C&&(i.top=k+C,E=(o||parseInt(h.style("height"))||400)-i.top-i.bottom),N.select(".nv-legendWrap").attr("transform","translate("+ -i.left+","+ -i.top+")")),f&&u.title&&(T.append("g").attr("class","nv-titleWrap"),N.select(".nv-title").remove(),N.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(u.title).attr("stroke","none").attr("fill","black"),C=parseInt(N.select(".nv-title").node().getBBox().height)+parseInt(N.select(".nv-title").style("margin-top"))+parseInt(N.select(".nv-title").style("margin-bottom")),i.top!==C+k&&(i.top=C+k,E=(o||parseInt(h.style("height"))||400)-i.top-i.bottom),N.select(".nv-titleWrap").attr("transform","translate(0,"+(-i.top+parseInt(N.select(".nv-title").node().getBBox().height))+")")),S.attr("transform","translate("+i.left+","+i.top+")"),t.width(w).height(E);var L=N.select(".nv-funnelWrap").datum(l.filter(function(e){return!e.disabled}));d3.transition(L).call(t);var A=[{x:0,y:0}],O=l.filter(function(e){return!e.disabled}).map(function(e){return e.values.map(function(e,t){return{x:e.x,y:e.y0+e.y}})}),M=d3.merge(A.concat(O)),_=d3.extent(M,function(e){return e.y}),D=d3.merge(M).map(function(e){return e.y});d=d3.scale.linear().domain(_).range([E,0]),yScale=d3.scale.quantile().domain(D).range(D.map(function(e){return d(e)}));var P=E/1.1,H=(P/8-P)/2/E,B=w/2,j=d3.svg.axis().scale(yScale).orient("left").tickSize(-w,0).tickValues(D).tickFormat(function(e,t){return""});d3.transition(N.select(".nv-y.nv-axis")).call(j).style("stroke-width","1").selectAll("line"),r.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,l.filter(function(e){return!e.disabled}).length||l.map(function(e){return e.disabled=!1,S.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(y)}),m.on("tooltipShow",function(e){c&&g(e,b.parentNode,u)}),y.update=function(){e.transition().call(y)},y.container=this}),y}var t=e.models.funnel(),n=e.models.axis(),r=e.models.legend(),i={top:30,right:20,bottom:20,left:20},s=null,o=null,u=e.utils.defaultColor(),a=!0,f=!1,l=!1,c=!0,h=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},p,d,v="No Data Available.",m=d3.dispatch("tooltipShow","tooltipHide");n.orient("left").tickFormat(d3.format(",.1f"));var g=function(r,i,s){var o=r.pos[0]+(i&&i.offsetLeft||0),u=r.pos[1]+(i&&i.offsetTop||0),a=(r.point.y*100/s.total).toFixed(1);d=n.tickFormat()(t.y()(r.point,r.pointIndex)),content=h(r.series.key,a,d,r,y),e.tooltip.show([o,u],content,r.value<0?"n":"s",null,i)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+i.left,e.pos[1]+i.top],m.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){m.tooltipHide(e)}),m.on("tooltipHide",function(){c&&e.tooltip.cleanup()}),y.dispatch=m,y.legend=r,y.funnel=t,y.yAxis=n,d3.rebind(y,t,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","color","gradient","useClass"),y.colorData=function(n){if(arguments[0]==="graduated")var i=arguments[1].c1,s=arguments[1].c2,o=arguments[1].l,u=function(e,t){return d3.interpolateHsl(d3.rgb(i),d3.rgb(s))(t/o)};else if(n==="class"){t.useClass(!0),r.useClass(!0);var u=function(e,t){return"inherit"}}else var u=e.utils.defaultColor();return r.color(u),t.color(u),y},y.colorFill=function(e){if(e==="gradient")var n=function(e,t){return y.gradient()(e,t)};else var n=y.color();return t.fill(n),y},y.x=function(e){return arguments.length?(getX=e,lines.x(e),funnelWrap.x(e),y):getX},y.y=function(e){return arguments.length?(getY=e,lines.y(e),t.y(e),y):getY},y.margin=function(e){return arguments.length?(i=e,y):i},y.width=function(e){return arguments.length?(s=e,y):s},y.height=function(e){return arguments.length?(o=e,y):o},y.showLegend=function(e){return arguments.length?(a=e,y):a},y.showTitle=function(e){return arguments.length?(f=e,y):f},y.tooltip=function(e){return arguments.length?(h=e,y):h},y.tooltips=function(e){return arguments.length?(c=e,y):c},y.tooltipContent=function(e){return arguments.length?(h=e,y):h},y.noData=function(e){return arguments.length?(v=e,y):v},y},e.models.gauge=function(){function k(i){return i.each(function(i){function $(e){X.transition().duration(N).ease("elastic").attr("transform","rotate("+K(e)+")")}function J(e){return e*Math.PI/180}function K(e){return x+A(e)*L}function Q(){return"translate("+v+","+v+")"}var s=i.properties,o=i.data,u=n-t.left-t.right,c=r-t.top-t.bottom,v=Math.min(u/2,c)/((100+C)/100),b=d3.select(this),L=T-x,A=d3.scale.linear().range([0,1]).domain([E,S]),O=0,M=o.map(function(e,t){var n={key:e.key,y0:O,y1:e.y,color:e.color,"class":e.class};return O=e.y,n}),_=[0].concat(o.map(function(e){return e.y})),D=function(e){return e*v/100},P=function(t,n){return e.utils.colorRadialGradient(t,n,0,0,v,g/100,f(t,n),H.select("defs"))};k.gradient(P);var H=b.selectAll("g.nv-wrap.nv-gauge").data([o]),B=H.enter().append("g").attr("class","nvd3 nv-wrap nv-gauge"),j=B.append("defs"),F=B.append("g"),I=H.select("g");F.append("g").attr("class","nv-arc-group"),F.append("g").attr("class","nv-labels"),F.append("g").attr("class","nv-pointer"),F.append("g").attr("class","nv-odometer"),H.attr("transform","translate("+(t.left/2+t.right/2+D(C))+","+(t.top+D(C))+")");var q=d3.svg.arc().innerRadius(D(g)).outerRadius(v).startAngle(function(e,t){return J(K(e.y0))}).endAngle(function(e,t){return J(K(e.y1))}),R=I.select(".nv-arc-group").attr("transform",Q);R.selectAll(".nv-arc-path").transition().duration(10).attr("fill",function(e,t){return l(e,t)}).attr("d",q),R.selectAll(".nv-arc-path").data(M).enter().append("path").attr("class",function(e,t){return this.getAttribute("class")||"nv-arc-path"+(h?" "+(e.class||"nv-fill"+(t%20>9?"":"0")+t%20):"")}).attr("fill",function(e,t){return l(e,t)}).attr("stroke","#ffffff").attr("stroke-width",3).attr("d",q).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),m.elementMouseover({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),m.elementMouseout({point:e,index:t,id:a})}).on("click",function(e,t){m.elementClick({point:e,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}).on("dblclick",function(e,t){m.elementDblClick({point:e,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()});var U=I.select(".nv-labels").attr("transform",Q);U.selectAll("text").transition().duration(0).attr("transform",function(e){return"rotate("+K(e)+") translate(0,"+(-v-D(1.5))+")"}).style("font-size",D(.6)+"em"),U.selectAll("text").data(_).enter().append("text").attr("transform",function(e){return"rotate("+K(e)+") translate(0,"+(-v-D(1.5))+")"}).text(p).style("text-anchor","middle").style("font-size",D(.6)+"em");var z=[[Math.round(D(y)/2),0],[0,-Math.round(D(w))],[-Math.round(D(y)/2),0],[0,Math.round(D(y))],[Math.round(D(y)/2),0]],W=I.select(".nv-pointer").attr("transform",Q);W.selectAll("path").transition().duration(120).attr("d",d3.svg.line().interpolate("monotone"));var X=W.selectAll("path").data([z]).enter().append("path").attr("d",d3.svg.line().interpolate("monotone")).attr("transform","rotate("+x+")");$(s.value),I.selectAll(".nv-odom").remove(),I.select(".nv-odomText").transition().duration(0).style("font-size",D(.7)+"em"),I.select(".nv-odometer").append("text").attr("class","nv-odom nv-odomText").attr("x",0).attr("y",0).attr("text-anchor","middle").text(d(s.value)).style("stroke","none").style("fill","black").style("font-size",D(.7)+"em");var V=I.select(".nv-odomText").node().getBBox();I.select(".nv-odometer").insert("path",".nv-odomText").attr("class","nv-odom nv-odomBox").attr("d",e.utils.roundedRectangle(-V.width/2,-V.height+D(1.5),V.width+D(4),V.height+D(2),D(2))).attr("fill","#eeffff").attr("stroke","black").attr("stroke-width","2px").attr("opacity",.8),I.select(".nv-odometer").attr("transform","translate("+v+","+(t.top+D(70)+V.width)+")"),k.setGaugePointer=$}),k}var t={top:0,right:0,bottom:0,left:0},n=null,r=null,i=!0,s=function(e){return e.values},o=function(e){return e.key},u=function(e){return e.y},a=Math.floor(Math.random()*1e4),f=e.utils.defaultColor(),l=function(e,t){return f(e,t)},c=function(e,t){return f(e,t)},h=!1,p=d3.format(",g"),d=d3.format(",.f"),v=!0,m=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),g=50,y=5,b=5,w=90,E=0,S=10,x=-90,T=90,N=750,C=10;return k.dispatch=m,k.color=function(e){return arguments.length?(f=e,k):f},k.fill=function(e){return arguments.length?(l=e,k):l},k.gradient=function(e){return arguments.length?(c=e,k):c},k.useClass=function(e){return arguments.length?(h=e,k):h},k.margin=function(e){return arguments.length?(t=e,k):t},k.width=function(e){return arguments.length?(n=e,k):n},k.height=function(e){return arguments.length?(r=e,k):r},k.values=function(e){return arguments.length?(s=e,k):s},k.x=function(e){return arguments.length?(o=e,k):o},k.y=function(e){return arguments.length?(u=d3.functor(e),k):u},k.showLabels=function(e){return arguments.length?(v=e,k):v},k.id=function(e){return arguments.length?(a=e,k):a},k.valueFormat=function(e){return arguments.length?(d=e,k):d},k.labelThreshold=function(e){return arguments.length?(labelThreshold=e,k):labelThreshold},k.ringWidth=function(e){return arguments.length?(g=e,k):g},k.pointerWidth=function(e){return arguments.length?(y=e,k):y},k.pointerTailLength=function(e){return arguments.length?(b=e,k):b},k.pointerHeadLength=function(e){return arguments.length?(w=e,k):w},k.minValue=function(e){return arguments.length?(E=e,k):E},k.maxValue=function(e){return arguments.length?(S=e,k):S},k.minAngle=function(e){return arguments.length?(x=e,k):x},k.maxAngle=function(e){return arguments.length?(T=e,k):T},k.transitionMs=function(e){return arguments.length?(N=e,k):N},k.labelFormat=function(e){return arguments.length?(p=e,k):p},k.labelInset=function(e){return arguments.length?(C=e,k):C},k.setPointer=function(e){return arguments.length?(k.setGaugePointer(e),k):k.setGaugePointer},k.isRendered=function(e){return svg!==undefined},k},e.models.gaugeChart=function(){function v(e){return e.each(function(f){var l=f.properties,c=f.data,m=d3.select(this),g=this,y=(i||parseInt(m.style("width"))||960)-r.left-r.right,b=(s||parseInt(m.style("height"))||400)-r.top-r.bottom;v.update=function(){v(e)},v.container=this;if(!c||!c.length)return m.append("text").attr("class","nvd3 nv-noData").attr("x",y/2).attr("y",b/2).attr("dy","-.7em").style("text-anchor","middle").text(h),v;m.select(".nv-noData").remove();var w=m.selectAll("g.nv-wrap.nv-gaugeChart").data([c]),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-gaugeChart").append("g"),S=w.select("g");E.append("g").attr("class","nv-gaugeWrap");var x=0,T=0;o&&(E.append("g").attr("class","nv-legendWrap"),n.width(y).key(t.x()),S.select(".nv-legendWrap").datum(c).call(n),T=n.height(),r.top!==T+x&&(r.top=T+x,b=(s||parseInt(m.style("height"))||400)-r.top-r.bottom),S.select(".nv-legendWrap").attr("transform","translate(0,"+ -r.top+")")),u&&l.title&&(E.append("g").attr("class","nv-titleWrap"),S.select(".nv-title").remove(),S.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(l.title).attr("stroke","none").attr("fill","black"),x=parseInt(S.select(".nv-title").node().getBBox().height)+parseInt(S.select(".nv-title").style("margin-top"))+parseInt(S.select(".nv-title").style("margin-bottom")),r.top!==x+T&&(r.top=x+T,b=(s||parseInt(m.style("height"))||400)-r.top-r.bottom),S.select(".nv-titleWrap").attr("transform","translate(0,"+(-r.top+parseInt(S.select(".nv-title").node().getBBox().height))+")")),w.attr("transform","translate("+r.left+","+r.top+")"),t.width(y).height(b);var N=S.select(".nv-gaugeWrap").datum(f);d3.transition(N).call(t),p.on("tooltipShow",function(e){a&&d(e)})}),v}var t=e.models.gauge(),n=e.models.legend(),r={top:30,right:20,bottom:20,left:20},i=null,s=null,o=!0,u=!1,a=!0,f=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},l,c,h="No Data Available.",p=d3.dispatch("tooltipShow","tooltipHide"),d=function(n,r){var i=n.pos[0]+(r&&r.offsetLeft||0),s=n.pos[1]+(r&&r.offsetTop||0),o=t.valueFormat()(n.point.y1-n.point.y0),u=f(n.point.key,o,n,v);e.tooltip.show([i,s],u,n.value<0?"n":"s",null,r)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+r.left,e.pos[1]+r.top],p.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){p.tooltipHide(e)}),p.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),v.dispatch=p,v.legend=n,v.gauge=t,d3.rebind(v,t,"valueFormat","values","x","y","id","showLabels"
,"setPointer","ringWidth","labelThreshold","maxValue","minValue","transitionMs","color","gradient","useClass"),v.colorData=function(r){if(arguments[0]==="graduated")var i=arguments[1].c1,s=arguments[1].c2,o=arguments[1].l,u=function(e,t){return d3.interpolateHsl(d3.rgb(i),d3.rgb(s))(t/o)};else if(r==="class"){v.useClass(!0),n.useClass(!0);var u=function(e,t){return"inherit"}}else var u=e.utils.defaultColor();return n.color(u),t.color(u),v},v.colorFill=function(e){if(e==="gradient")var n=function(e,t){return v.gradient()(e,t)};else var n=v.color();return t.fill(n),v},v.margin=function(e){return arguments.length?(r=e,v):r},v.width=function(e){return arguments.length?(i=e,v):i},v.height=function(e){return arguments.length?(s=e,v):s},v.showLegend=function(e){return arguments.length?(o=e,v):o},v.showTitle=function(e){return arguments.length?(u=e,v):u},v.tooltip=function(e){return arguments.length?(f=e,v):f},v.tooltips=function(e){return arguments.length?(a=e,v):a},v.tooltipContent=function(e){return arguments.length?(f=e,v):f},v.noData=function(e){return arguments.length?(h=e,v):h},v},e.models.legend=function(){function l(e){return e.each(function(e){var l=n-t.left-t.right,c=d3.select(this);c.selectAll("g.nv-legend").remove();var h=c.selectAll("g.nv-legend").data([e]),p=h.enter().append("g").attr("class","nvd3 nv-legend").append("g"),d=h.select("g");h.attr("transform","translate("+t.left+","+t.top+")");var v=d.selectAll(".nv-series").data(function(e){return e}),m=v.enter().append("g").attr("class","nv-series").on("mouseover",function(e,t){u.legendMouseover(e,t)}).on("mouseout",function(e,t){u.legendMouseout(e,t)}).on("click",function(e,t){u.legendClick(e,t)}).on("dblclick",function(e,t){u.legendDblclick(e,t)});m.append("circle").attr("class",function(e,t){return this.getAttribute("class")||(a?(e.class||"nv-fill"+(t*f%20>9?"":"0")+t*f%20)+" nv-stroke"+t%10:"")}).attr("fill",function(e,t){return s(e,t)}).attr("stroke",function(e,t){return s(e,t)}).attr("stroke-width",2).attr("r",5),m.append("text").text(i).attr("text-anchor","start").attr("dy",".32em").attr("dx","8"),v.classed("disabled",function(e){return e.disabled}),v.exit().remove();if(o){var g=[];v.each(function(e,t){g.push(d3.select(this).select("text").node().getComputedTextLength()+28)});var y=0,b=0,w=[];while(b<l&&y<g.length)w[y]=g[y],b+=g[y++];while(b>l&&y>1){w=[],y--;for(k=0;k<g.length;k++)g[k]>(w[k%y]||0)&&(w[k%y]=g[k]);b=w.reduce(function(e,t,n,r){return e+t})}var E=[];for(var S=0,x=0;S<y;S++)E[S]=x,x+=w[S];v.attr("transform",function(e,t){return"translate("+E[t%y]+","+(5+Math.floor(t/y)*20)+")"}),d.attr("transform","translate("+(n-t.right-b)+","+t.top+")"),r=t.top+t.bottom+Math.ceil(g.length/y)*20}else{var T=5,N=5,C=0,L;v.attr("transform",function(e,r){var i=d3.select(this).select("text").node().getComputedTextLength()+28;return L=N,n<t.left+t.right+L+i&&(N=L=5,T+=20),N+=i,N>C&&(C=N),"translate("+L+","+T+")"}),d.attr("transform","translate("+(n-t.right-C)+","+t.top+")"),r=t.top+t.bottom+T+15}}),l}var t={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(e){return e.key},s=e.utils.defaultColor(),o=!0,u=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout"),a=!1,f=1;return l.dispatch=u,l.margin=function(e){return arguments.length?(t=e,l):t},l.width=function(e){return arguments.length?(n=e,l):n},l.height=function(e){return arguments.length?(r=e,l):r},l.key=function(e){return arguments.length?(i=e,l):i},l.color=function(t){return arguments.length?(s=e.utils.getColor(t),l):s},l.useClass=function(e){return arguments.length?(a=e,l):a},l.classStep=function(e){return arguments.length?(f=e,l):f},l.align=function(e){return arguments.length?(o=e,l):o},l},e.models.line=function(){function g(e){return e.each(function(e){var b=n-t.left-t.right,w=r-t.top-t.bottom,E=d3.select(this);c=d.xScale(),h=d.yScale(),v=v||c,m=m||h;var S=E.selectAll("g.nv-wrap.nv-line").data([e]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),N=T.append("defs"),C=T.append("g"),k=S.select("g");C.append("g").attr("class","nv-groups"),C.append("g").attr("class","nv-scatterWrap"),S.attr("transform","translate("+t.left+","+t.top+")"),d.width(b).height(w).id(g.id());var L=S.select(".nv-scatterWrap");d3.transition(L).call(d),N.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),S.select("#nv-edge-clip-"+s+" rect").attr("width",b).attr("height",w),k.attr("clip-path",l?"url(#nv-edge-clip-"+s+")":""),L.attr("clip-path",l?"url(#nv-edge-clip-"+s+")":"");var A=S.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});A.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(A.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),A.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).attr("fill",function(e,t){return this.getAttribute("fill")||i(e,t)}).attr("stroke",function(e,t){return this.getAttribute("stroke")||i(e,t)}),d3.transition(A).style("stroke-opacity",1).style("fill-opacity",.5);var O=A.selectAll("path.nv-area").data(function(e){return f(e)?[e]:[]});O.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(p).defined(a).x(function(e,t){return v(o(e,t))}).y0(function(e,t){return m(u(e,t))}).y1(function(e,t){return m(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[e.values])}),O.exit().remove(),d3.transition(A.exit().selectAll("path.nv-area")).attr("d",function(e){return d3.svg.area().interpolate(p).defined(a).x(function(e,t){return v(o(e,t))}).y0(function(e,t){return m(u(e,t))}).y1(function(e,t){return m(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[e.values])}),d3.transition(O).attr("d",function(e){return d3.svg.area().interpolate(p).defined(a).x(function(e,t){return v(o(e,t))}).y0(function(e,t){return m(u(e,t))}).y1(function(e,t){return m(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[e.values])});var M=A.selectAll("path.nv-line").data(function(e){return[e.values]});M.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(p).defined(a).x(function(e,t){return v(o(e,t))}).y(function(e,t){return m(u(e,t))})),d3.transition(A.exit().selectAll("path.nv-line")).attr("d",d3.svg.line().interpolate(p).defined(a).x(function(e,t){return c(o(e,t))}).y(function(e,t){return h(u(e,t))})),d3.transition(M).attr("d",d3.svg.line().interpolate(p).defined(a).x(function(e,t){return c(o(e,t))}).y(function(e,t){return h(u(e,t))})),v=c.copy(),m=h.copy()}),g}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e4),o=function(e){return e.x},u=function(e){return e.y},a=function(e,t){return!isNaN(u(e,t))&&u(e,t)!==null},f=function(e){return e&&e.area||!1},l=!1,c,h,p="linear",d=e.models.scatter();d.id(s).size(16).sizeDomain([16,256]);var v,m;return g.dispatch=d.dispatch,g.scatter=d,d3.rebind(g,d,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),g.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,g):t},g.width=function(e){return arguments.length?(n=e,g):n},g.height=function(e){return arguments.length?(r=e,g):r},g.x=function(e){return arguments.length?(o=e,d.x(e),g):o},g.y=function(e){return arguments.length?(u=e,d.y(e),g):u},g.clipEdge=function(e){return arguments.length?(l=e,g):l},g.color=function(t){return arguments.length?(i=e.utils.getColor(t),d.color(i),g):i},g.id=function(e){return arguments.length?(s=e,g):s},g.interpolate=function(e){return arguments.length?(p=e,g):p},g.defined=function(e){return arguments.length?(a=e,g):a},g.isArea=function(e){return arguments.length?(f=d3.functor(e),g):f},g},e.models.lineChart=function(){function w(e){return e.each(function(f){var E=f.properties,S=f.data,T=d3.select(this),N=this,C=(n||parseInt(T.style("width"))||960)-t.left-t.right,k=(r||parseInt(T.style("height"))||400)-t.top-t.bottom;if(!S||!S.length||!S.filter(function(e){return e.values.length}).length)return T.append("text").attr("class","nvd3 nv-noData").attr("x",C/2).attr("y",k/2).attr("dy","-.7em").style("text-anchor","middle").text(h),w;T.select(".nv-noData").remove(),l=d.xScale(),c=d.yScale();var L=T.selectAll("g.nv-wrap.nv-lineChart").data([S]),A=L.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),O=L.select("g");A.append("g").attr("class","nv-x nv-axis"),A.append("g").attr("class","nv-y nv-axis"),A.append("g").attr("class","nv-linesWrap");var M=0,_=0;o&&(A.append("g").attr("class","nv-legendWrap"),g.width(C*(s?.7:1)),O.select(".nv-legendWrap").datum(S).call(g),_=g.height(),t.top!==_+M&&(t.top=_+M,k=(r||parseInt(T.style("height"))||400)-t.top-t.bottom),O.select(".nv-legendWrap").attr("transform","translate("+C*(s?.3:0)+","+ -t.top+")")),u&&E.title&&(A.append("g").attr("class","nv-titleWrap"),O.select(".nv-title").remove(),O.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(E.title).attr("stroke","none").attr("fill","black"),M=parseInt(O.select(".nv-title").node().getBBox().height)+parseInt(O.select(".nv-title").style("margin-top"))+parseInt(O.select(".nv-title").style("margin-bottom")),t.top!==M+_&&(t.top=M+_,k=(r||parseInt(T.style("height"))||400)-t.top-t.bottom),O.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt(O.select(".nv-title").node().getBBox().height))+")"));var D=[{key:"Linear",disabled:d.interpolate()!=="linear"},{key:"Basis",disabled:d.interpolate()!=="basis"},{key:"Monotone",disabled:d.interpolate()!=="monotone"},{key:"Cardinal",disabled:d.interpolate()!=="cardinal"},{key:"Line",disabled:d.isArea()()===!0},{key:"Area",disabled:d.isArea()()===!1}];s&&(A.append("g").attr("class","nv-controlsWrap"),y.width(C*.3).color(["#444"]),O.select(".nv-controlsWrap").datum(D).attr("transform","translate(0,"+(-t.top+M)+")").call(y)),L.attr("transform","translate("+t.left+","+t.top+")"),d.width(C).height(k).color(S.map(function(e,t){return e.color||i(e,t)}).filter(function(e,t){return!S[t].disabled}));var P=O.select(".nv-linesWrap").datum(S.filter(function(e){return!e.disabled}));d3.transition(P).call(d),v.scale(l).ticks(C/100).tickSize(-k,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+c.range()[0]+")"),d3.transition(O.select(".nv-x.nv-axis")).call(v),m.scale(c).ticks(k/36).tickSize(-C,0),d3.transition(O.select(".nv-y.nv-axis")).call(m),g.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,S.filter(function(e){return!e.disabled}).length||S.map(function(e){return e.disabled=!1,L.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(w)}),y.dispatch.on("legendClick",function(t,n){if(!t.disabled)return;D=D.map(function(e){return e.disabled=!0,e}),t.disabled=!1;switch(t.key){case"Basis":d.interpolate("basis");break;case"Linear":d.interpolate("linear");break;case"Monotone":d.interpolate("monotone");break;case"Cardinal":d.interpolate("cardinal");break;case"Line":d.isArea(!1);break;case"Area":d.isArea(!0)}e.transition().call(w)}),p.on("tooltipShow",function(e){a&&b(e,N.parentNode)}),w.update=function(){w(e)},w.container=this}),w}var t={top:30,right:20,bottom:50,left:60},n=null,r=null,i=e.utils.defaultColor(),s=!0,o=!0,u=!1,a=!0,f=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},l,c,h="No Data Available.",p=d3.dispatch("tooltipShow","tooltipHide"),d=e.models.line(),v=e.models.axis().orient("bottom").tickPadding(5),m=e.models.axis().orient("left"),g=e.models.legend(),y=e.models.legend(),b=function(t,n){if(n){var r=d3.select(n).select("svg"),i=r.attr("viewBox");if(i){i=i.split(" ");var s=parseInt(r.style("width"))/i[2];t.pos[0]=t.pos[0]*s,t.pos[1]=t.pos[1]*s}}var o=t.pos[0]+(n.offsetLeft||0),u=t.pos[1]+(n.offsetTop||0),a=v.tickFormat()(d.x()(t.point,t.pointIndex)),l=m.tickFormat()(d.y()(t.point,t.pointIndex)),c=f(t.series.key,a,l,t,w);e.tooltip.show([o,u],c,null,null,n)};return d.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],p.tooltipShow(e)}),d.dispatch.on("elementMouseout.tooltip",function(e){p.tooltipHide(e)}),p.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),w.dispatch=p,w.lines=d,w.legend=g,w.xAxis=v,w.yAxis=m,d3.rebind(w,d,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","color","gradient","useClass"),w.colorData=function(t){if(arguments[0]==="graduated")var n=arguments[1].c1,r=arguments[1].c2,i=arguments[1].l,s=function(e,t){return d3.interpolateHsl(d3.rgb(n),d3.rgb(r))(t/i)};else if(t==="class"){w.useClass(!0),g.useClass(!0);var s=function(e,t){return"inherit"}}else var s=e.utils.defaultColor();return g.color(s),d.color(s),w},w.colorFill=function(e){if(e==="gradient")var t=function(e,t){return w.gradient()(e,t)};else var t=w.color();return d.fill(t),w},w.margin=function(e){return arguments.length?(t=e,w):t},w.width=function(e){return arguments.length?(n=e,w):n},w.height=function(e){return arguments.length?(r=e,w):r},w.showControls=function(e){return arguments.length?(s=e,w):s},w.showLegend=function(e){return arguments.length?(o=e,w):o},w.showTitle=function(e){return arguments.length?(u=e,w):u},w.tooltips=function(e){return arguments.length?(a=e,w):a},w.tooltip=function(e){return arguments.length?(f=e,w):f},w.noData=function(e){return arguments.length?(h=e,w):h},w},e.models.lineWithFocusChart=function(){function C(e){return e.each(function(S){function R(e){var t=+(e=="e"),n=t?1:-1,r=M/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function U(){a.empty()||a.extent(w),I.data([a.empty()?g.domain():w]).each(function(e,t){var n=g(e[0])-v.range()[0],r=v.range()[1]-g(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",g(e[1])).attr("width",r<0?0:r)})}function z(){w=a.empty()?null:a.extent(),extent=a.empty()?g.domain():a.extent(),T.brush({extent:extent,brush:a}),U();var e=H.select(".nv-focus .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}).map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return t.x()(e,n)>=extent[0]&&t.x()(e,n)<=extent[1]})}}));d3.transition(e).call(t),d3.transition(H.select(".nv-focus .nv-x.nv-axis")).call(r),d3.transition(H.select(".nv-focus .nv-y.nv-axis")).call(i)}var k=d3.select(this),L=this,A=(h||parseInt(k.style("width"))||960)-f.left-f.right,O=(p||parseInt(k.style("height"))||400)-f.top-f.bottom-d,M=d-l.top-l.bottom;C.update=function(){C(e)},C.container=this;if(!S||!S.length||!S.filter(function(e){return e.values.length}).length){var _=k.selectAll(".nv-noData").data([x]);return _.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),_.attr("x",f.left+A/2).attr("y",f.top+availableHeight/2).text(function(e){return e}),C}k.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale(),g=n.xScale(),y=n.yScale();var D=k.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([S]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),H=D.select("g");P.append("g").attr("class","nv-legendWrap");var B=P.append("g").attr("class","nv-focus");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-linesWrap");var j=P.append("g").attr("class","nv-context");j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-linesWrap"),j.append("g").attr("class","nv-brushBackground"),j.append("g").attr("class","nv-x nv-brush"),b&&(u.width(A),H.select(".nv-legendWrap").datum(S).call(u),f.top!=u.height()&&(f.top=u.height(),O=(p||parseInt(k.style("height"))||400)-f.top-f.bottom-d),H.select(".nv-legendWrap").attr("transform","translate(0,"+ -f.top+")")),D.attr("transform","translate("+f.left+","+f.top+")"),t.width(A).height(O).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),n.defined(t.defined()).width(A).height(M).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),H.select(".nv-context").attr("transform","translate(0,"+(O+f.bottom+l.top)+")");var F=H.select(".nv-context .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}));d3.transition(F).call(n),r.scale(v).ticks(A/100).tickSize(-O,0),i.scale(m).ticks(O/36).tickSize(-A,0),H.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+O+")"),a.x(g).on("brush",z),w&&a.extent(w);var I=H.select(".nv-brushBackground").selectAll("g").data([w||a.extent()]),q=I.enter().append("g");q.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",M),q.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",M),gBrush=H.select(".nv-x.nv-brush").call(a),gBrush.selectAll("rect").attr("height",M),gBrush.selectAll(".resize").append("path").attr("d",R),z(),s.scale(g).ticks(A/100).tickSize(-M,0),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),d3.transition(H.select(".nv-context .nv-x.nv-axis")).call(s),o.scale(y).ticks(M/36).tickSize(-A,0),d3.transition(H.select(".nv-context .nv-y.nv-axis")).call(o),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),u.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,S.filter(function(e){return!e.disabled}).length||S.map(function(e){return e.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(C)}),T.on("tooltipShow",function(e){E&&N(e,L.parentNode)})}),C}var t=e.models.line(),n=e.models.line(),r=e.models.axis(),i=e.models.axis(),s=e.models.axis(),o=e.models.axis(),u=e.models.legend(),a=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},l={top:0,right:30,bottom:20,left:60},c=e.utils.defaultColor(),h=null,p=null,d=100,v,m,g,y,b=!0,w=null,E=!0,S=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},x="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","brush");t.clipEdge(!0),n.interactive(!1),r.orient("bottom").tickPadding(5),i.orient("left"),s.orient("bottom").tickPadding(5),o.orient("left");var N=function(n,s){var o=n.pos[0]+(s.offsetLeft||0),u=n.pos[1]+(s.offsetTop||0),a=r.tickFormat()(t.x()(n.point,n.pointIndex)),f=i.tickFormat()(t.y()(n.point,n.pointIndex)),l=S(n.series.key,a,f,n,C);e.tooltip.show([o,u],l,null,null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+f.left,e.pos[1]+f.top],T.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){T.tooltipHide(e)}),T.on("tooltipHide",function(){E&&e.tooltip.cleanup()}),C.dispatch=T,C.legend=u,C.lines=t,C.lines2=n,C.xAxis=r,C.yAxis=i,C.x2Axis=s,C.y2Axis=o,d3.rebind(C,t,"defined","isArea","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),C.x=function(e){return arguments.length?(t.x(e),n.x(e),C):t.x},C.y=function(e){return arguments.length?(t.y(e),n.y(e),C):t.y},C.margin=function(e){return arguments.length?(f.top=typeof e.top!="undefined"?e.top:f.top,f.right=typeof e.right!="undefined"?e.right:f.right,f.bottom=typeof e.bottom!="undefined"?e.bottom:f.bottom,f.left=typeof e.left!="undefined"?e.left:f.left,C):f},C.margin2=function(e){return arguments.length?(l=e,C):l},C.width=function(e){return arguments.length?(h=e,C):h},C.height=function(e){return arguments.length?(p=e,C):p},C.color=function(t){return arguments.length?(c=e.utils.getColor(t),u.color(c),C):c},C.showLegend=function(e){return arguments.length?(b=e,C):b},C.tooltips=function(e){return arguments.length?(E=e,C):E},C.tooltipContent=function(e){return arguments.length?(S=e,C):S},C.interpolate=function(e){return arguments.length?(t.interpolate(e),n.interpolate(e),C):t.interpolate()},C.noData=function(e){return arguments.length?(x=e,C):x},C.xTickFormat=function(e){return arguments.length?(r.tickFormat(e),s.tickFormat(e),C):r.tickFormat()},C.yTickFormat=function(e){return arguments.length?(i.tickFormat(e),o.tickFormat(e),C):i.tickFormat()},C},e.models.multiBar=function(){function S(g){return g.each(function(g){var T=n-t.left-t.right,N=r-t.top-t.bottom,C=d3.select(this),k=function(t,n){return e.utils.colorLinearGradient(t,n,"vertical",v(t,n),A.select("defs"))};S.gradient(k),l&&(g=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(g)),g=g.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var L=p&&d?[]:g.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});i.domain(d3.merge(L).map(function(e){return e.x})).rangeBands([0,T],.3),s.domain(d||d3.extent(d3.merge(L).map(function(e){return e.y+(l?e.y0:0)}).concat(f))).range([N,0]);if(i.domain()[0]===i.domain()[1]||s.domain()[0]===s.domain()[1])singlePoint=!0;i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1])),s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]+s.domain()[0]*.01,s.domain()[1]-s.domain()[1]*.01]):s.domain([-1,1])),w=w||i,E=E||s;var A=C.selectAll("g.nv-wrap.nv-multibar").data([g]),O=A.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),M=O.append("defs"),_=O.append("g"),D=A.select("g");_.append("g").attr("class","nv-groups"),A.attr("transform","translate("+t.left+","+t.top+")"),M.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),A.select("#nv-edge-clip-"+o+" rect").attr("width",T).attr("height",N),D.attr("clip-path",c?"url(#nv-edge-clip-"+o+")":"");var P=A.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});P.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(P.exit()).selectAll("rect.nv-bar").delay(function(e,t){return t*h/g[0].values.length}).attr("y",function(e){return l?E(e.y0):E(0)}).attr("height",0).remove(),P.attr("class",function(e,t){return this.getAttribute("class")||"nv-group nv-series-"+t+(y?" "+(e.class||"nv-fill"+(t%20>9?"":"0")+t%20):"")}).classed("hover",function(e){return e.hover}).attr("fill",function(e,t){return this.getAttribute("fill")||m(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||m(e,t)}),d3.transition(P).style("stroke-opacity",1).style("fill-opacity",.85);var H=P.selectAll("rect.nv-bar").data(function(e){return e.values});H.exit().remove();var B=H.enter().append("rect").attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(e,t,n){return l?0:n*i.rangeBand()/g.length}).attr("y",function(e){return E(l?e.y0:0)}).attr("height",0).attr("width",i.rangeBand()/(l?1:g.length));H.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(e,t){return"translate("+i(u(e,t))+",0)"}),H.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),b.elementMouseover({value:a(e,t),point:e,series:g[e.series],pos:[i(u(e,t))+i.rangeBand()*(l?g.length/2:e.series+.5)/g.length,s(a(e,t)+(l?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),b.elementMouseout({value:a(e,t),point:e,series:g[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){b.elementClick({value:a(e,t),point:e,series:g[e.series],pos:[i(u(e,t))+i.rangeBand()*(l?g.length/2:e.series+.5)/g.length,s(a(e,t)+(l?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){b.elementDblClick({value:a(e,t),point:e,series:g[e.series],pos:[i(u(e,t))+i.rangeBand()*(l?g.length/2:e.series+.5)/g.length,s(a(e,t)+(l?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),l?d3.transition(H).delay(function(e,t){return t*h/g[0].values.length}).attr("y",function(e,t){return s(a(e,t)+(l?e.y0:0))}).attr("height",function(e,t){return Math.abs(s(e.y+(l?e.y0:0))-s(l?e.y0:0))}).each("end",function(){d3.transition(d3.select(this)).attr("x",0).attr("width",i.rangeBand())}):d3.transition(H).delay(function(e,t){return t*h/g[0].values.length}).attr("x",function(e,t){return e.series*i.rangeBand()/g.length}).attr("width",i.rangeBand()/g.length).each("end",function(){d3.transition(d3.select(this)).attr("y",function(e,t){return a(e,t)<0?s(0):s(a(e,t))}).attr("height",function(e,t){return Math.abs(s(a(e,t))-s(0))})}),w=i.copy(),E=s.copy()}),S}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=!1,c=!0,h=1200,p,d,v=e.utils.defaultColor(),m=function(e,t){return v(e,t)},g=function(e,t){return v(e,t)},y=!1,b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w,E;return S.dispatch=b,S.color=function(e){return arguments.length?(v=e,S):v},S.fill=function(e){return arguments.length?(m=e,S):m},S.gradient=function(e){return arguments.length?(g=e,S):g},S.useClass=function(e){return arguments.length?(y=e,S):y},S.x=function(e){return arguments.length?(u=e,S):u},S.y=function(e){return arguments.length?(a=e,S):a},S.margin=function(e){return arguments.length?(t=e,S):t},S.width=function(e){return arguments.length?(n=e,S):n},S.height=function(e){return arguments.length?(r=e,S):r},S.xScale=function(e){return arguments.length?(i=e,S):i},S.yScale=function(e){return arguments.length?(s=e,S):s},S.xDomain=function(e){return arguments.length?(p=e,S):p},S.yDomain=function(e){return arguments.length?(d=e,S):d},S.forceY=function(e){return arguments.length?(f=e,S):f},S.stacked=function(e){return arguments.length?(l=e,S):l},S.id=function(e){return arguments.length?(o=e,S):o},S.delay=function(e){return arguments.length?(h=e,S):h},S.clipEdge=function(e){return arguments.length?(c=e,S):c},S},e.models.multiBarChart=function(){function N(o){return o.each(function(c){var d=c.properties,C=c.data,k=d3.select(this),L=this,A=(n||parseInt(k.style("width"))||960)-t.left-t.right,O=(r||parseInt(k.style("height"))||400)-t.top-t.bottom;if(!C||!C.length||!C.filter(function(e){return e.values.length}).length)return k.append("text").attr("class","nvd3 nv-noData").attr("x",A/2).attr("y",O/2).attr("dy","-.7em").style("text-anchor","middle").text(v),N;k.select(".nv-noData").remove();var M=C.filter(function(e){return!e.disabled&&e.type==="bar"}),_=d.labels,D=d.values,P=C.filter(function(e){return!e.disabled}).map(function(e){return e.values.map(function(e,t){return{x:i(e,t),y:s(e,t)}})});g.domain(d3.extent(d3.merge(P),function(e){return e.x})).range([0,A]),y.domain(d3.extent(d3.merge(P),function(e){return e.y})).range([O,0]);var H=k.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([C]),B=H.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),j=H.select("g");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-barsWrap");var F=0,I=0;a&&(B.append("g").attr("class","nv-legendWrap"),E.width(A*(u?.7:1)),j.select(".nv-legendWrap").datum(C).call(E),I=E.height(),t.top!==I+F&&(t.top=I+F,O=(r||parseInt(k.style("height"))||400)-t.top-t.bottom),j.select(".nv-legendWrap").attr("transform","translate("+A*(u?.3:0)+","+ -t.top+")")),f&&d.title&&(B.append("g").attr("class","nv-titleWrap"),j.select(".nv-title").remove(),j.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(d.title).attr("stroke","none").attr("fill","black"),F=parseInt(j.select(".nv-title").node().getBBox().height)+parseInt(j.select(".nv-title").style("margin-top"))+parseInt(j.select(".nv-title").style("margin-bottom")),t.top!==F+I&&(t.top=F+I,O=(r||parseInt(k.style("height"))||400)-t.top-t.bottom),j.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt(j.select(".nv-title").node().getBBox().height))+")"));if(u){B.append("g").attr("class","nv-controlsWrap");var q=[{key:"Grouped",disabled:m.stacked()},{key:"Stacked",disabled:!m.stacked()}];S.width(A*.3).color(["#444"]),j.select(".nv-controlsWrap").datum(q).attr("transform","translate(0,"+(-t.top+F)+")").call(S)}H.attr("transform","translate("+t.left+","+t.top+")"),m.width(A).height(O);var R=j.select(".nv-barsWrap").datum(M.length?M:[{values:[]}]);d3.transition(R).call(m),b.ticks(A/100).tickSize(-O,0).tickFormat(function(e,t){return _[t]?_[t].l:"asfd"}),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),d3.transition(j.select(".nv-x.nv-axis")).call(b);var U=j.select(".nv-x.nv-axis > g").selectAll("g");U.selectAll("line, text").style("opacity",1),l&&U.filter(function(e,t){return t%Math.ceil(C[0].values.length/(A/100))!==0}).selectAll("text, line").style("opacity",0),h&&U.selectAll("text").attr("transform",function(e,t,n){return"rotate("+h+" 0,0) translate(0,10)"}).attr("text-transform",h>0?"start":"end"),w.ticks(O/100).tickSize(-A,0),d3.transition(j.select(".nv-y.nv-axis")).style("opacity",M.length?1:0).call(w),E.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,C.filter(function(e){return!e.disabled}).length||C.map(function(e){return e.disabled=!1,H.selectAll(".nv-series").classed("disabled",!1),e}),o.transition().call(N)}),S.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;q=q.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":m.stacked(!1);break;case"Stacked":m.stacked(!0)}o.transition().call(N)}),m.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],x.tooltipShow(e)}),m.dispatch.on("elementMouseout.tooltip",function(e){x.tooltipHide(e)}),p&&x.on("tooltipShow",function(e){T(e,L.parentNode,D)}),p&&x.on("tooltipHide",e.tooltip.cleanup),N.update=function(){o.transition().call(N)},N.container=this}),N}var t={top:30,right:20,bottom:20,left:40},n=null,r=null,i=function(e){return e.x},s=function(e){return e.y},o=e.utils.defaultColor(),u=!0,a=!0,f=!1,l=!1,c=!1,h=0,p=!0,d=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},v="No Data Available.",m=e.models.multiBar().stacked(!0),g=m.xScale(),y=m.yScale(),b=e.models.axis().scale(g).orient("bottom").tickPadding(5).tickFormat(function(e){return e}),w=e.models.axis().scale(y).orient("left").tickFormat(function(e){return e+"K"}),E=e.models.legend(),S=e.models.legend(),x=d3.dispatch("tooltipShow","tooltipHide");b.highlightZero(!1).showMaxMin(!1);var T=function(t,n,r){var i=t.pos[0]+(n.offsetLeft||0),s=t.pos[1]+(n.offsetTop||0),o=(t.point.y*100/r[t.pointIndex].t).toFixed(1);y=w.tickFormat()(m.y()(t.point,t.pointIndex)),content=d(t.series.key,o,y,t,N),e.tooltip.show([i,s],content,t.value<0?"n":"s",null,n)};return N.dispatch=x,N.multibar=m,N.legend=E,N.xAxis=b,N.yAxis=w,d3.rebind(N,m,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","stacked","delay","color","gradient","useClass"),N.colorData=function(t){if(arguments[0]==="graduated")var n=arguments[1].c1,r=arguments[1].c2,i=arguments[1].l,s=function(e,t){return d3.interpolateHsl(d3.rgb(n),d3.rgb(r))(t/i)};else if(t==="class"){N.useClass(!0),E.useClass(!0);var s=function(e,t){return"inherit"}}else var s=e.utils.defaultColor();return E.color(s),m.color(s),N},N.colorFill=function(e){if(e==="gradient")var t=function(e,t){return N.gradient()(e,t)};else var t=N.color();return m.fill(t),N},N.x=function(e){return arguments.length?(i=e,m.x(e),N):i},N.y=function(e){return arguments.length?(s=e,m.y(e),N):s},N.margin=function(e){return arguments.length?(t=e,N):t},N.width=function(e){return arguments.length?(n=e,N):n},N.height=function(e){return arguments.length?(r=e,N):r},N.showControls=function(e){return arguments.length?(u=e,N):u},N.showLegend=function(e){return arguments.length?(a=e,N):a},N.showTitle=function(e){return arguments.length?(f=e,N):f},N.reduceXTicks=function(e){return arguments.length?(l=e,N):l},N.rotateLabels=function(e){return arguments.length?(h=e,N):h},N.tooltip=function(e){return arguments.length?(d=e,N):d},N.tooltips=function(e){return arguments.length?(p=e,N):p},N.tooltipContent=function(e){return arguments.length?(d=e,N):d},N.noData=function(e){return arguments.length?(v=e,N):v},N},e.models.paretoChart=function(){function O(o){return o.each(function(c){var d=c.properties,v=c.data,A=d3.select(this),M=this,_=(n||parseInt(A.style("width"))||960)-t.left-t.right,D=(r||parseInt(A.style("height"))||400)-t.top-t.bottom,P=A.node
().parentNode.className.indexOf("expanded")!==-1;t.left=P?50:40,t.bottom=P?40:34;if(!v||!v.length||!v.filter(function(e){return e.values.length}).length)return A.append("text").attr("class","nvd3 nv-noData").attr("x",_/2).attr("y",D/2).attr("dy","-.7em").style("text-anchor","middle").text(m),O;A.select(".nv-noData").remove();var H=v.filter(function(e){return!e.disabled&&e.type==="bar"}),B=v.filter(function(e){return!e.disabled&&e.type==="line"}),j=d.groupData,F=d.quota,I=v.filter(function(e){return!e.disabled}).map(function(e){return e.valuesOrig.map(function(e,t){return i(e,t)})}),q=v.filter(function(e){return!e.disabled}).map(function(e){return e.valuesOrig.map(function(e,t){return s(e,t)})}),R=y.domain(d3.merge(I)).rangeBands([0,_],.3),U=Math.max(d3.max(d3.merge(q)),F),z=Math.round((U+U*.1)*.1)*10,W=R(1)+R.rangeBand()/(g.stacked()||B.length===1?2:4),X=A.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([v]),V=X.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),$=X.select("g");V.append("g").attr("class","nv-x nv-axis"),V.append("g").attr("class","nv-y nv-axis"),V.append("g").attr("class","nv-barsWrap"),V.append("g").attr("class","nv-linesWrap"),V.append("g").attr("class","nv-quotaWrap");var J=0,K=0,Q=g.stacked()&&H.length>2;a&&(V.append("g").attr("class","nv-legendWrap nv-barLegend"),x.width(_*(Q?.75:.5)),$.select(".nv-legendWrap.nv-barLegend").datum(v.filter(function(e){return e.type==="bar"})).call(x),V.append("g").attr("class","nv-legendWrap nv-lineLegend"),T.width(_*(Q?.25:.4)),$.select(".nv-legendWrap.nv-lineLegend").datum(v.filter(function(e){return e.type==="line"}).concat([{key:"Quota ($"+d3.format(",.2s")(F)+")",type:"line",color:"#444"}])).call(T),K=Math.max(x.height(),T.height()),t.top!==K+J&&(t.top=K+J,D=(r||parseInt(A.style("height"))||400)-t.top-t.bottom),$.select(".nv-legendWrap.nv-barLegend").attr("transform","translate("+_*(Q?.25:.4)+","+ -t.top+")"),$.select(".nv-legendWrap.nv-lineLegend").attr("transform","translate(0,"+ -t.top+")")),f&&d.title&&(V.append("g").attr("class","nv-titleWrap"),$.select(".nv-title").remove(),$.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(d.title).attr("stroke","none").attr("fill","black"),J=parseInt($.select(".nv-title").node().getBBox().height)+parseInt($.select(".nv-title").style("margin-top"))+parseInt($.select(".nv-title").style("margin-bottom")),t.top!==J+K&&(t.top=J+K,D=(r||parseInt(A.style("height"))||400)-t.top-t.bottom),$.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt($.select(".nv-title").node().getBBox().height))+")"));if(u){V.append("g").attr("class","nv-controlsWrap");var G=[{key:"Grouped",disabled:g.stacked()},{key:"Stacked",disabled:!g.stacked()}];N.width(_*.3).color(["#444"]),$.select(".nv-controlsWrap").datum(G).attr("transform","translate(0,"+(-t.top+J)+")").call(N)}X.attr("transform","translate("+t.left+","+t.top+")"),g.width(_).height(D).forceY([0,z]).id(O.id()),b.margin({top:0,right:W,bottom:0,left:W}).width(_).height(D).forceY([0,z]).id(O.id());var Y=$.select(".nv-barsWrap").datum(H.length?H:[{values:[]}]),Z=$.select(".nv-linesWrap").datum(B.length?B.map(function(e){return e.values=g.stacked()?e.valuesOrig:e.valuesOrig.map(function(e,t){return{series:e.series,x:e.x+e.series*.25-t*.25,y:e.y}}),e}):[{values:[]}]);d3.transition(Y).call(g),d3.transition(Z).call(b),F&&($.selectAll("line.nv-quotaLine").remove(),$.select(".nv-quotaWrap").append("line").attr("class","nv-quotaLine").attr("x1",0).attr("y1",0).attr("x2",_).attr("y2",0).attr("transform","translate(0,"+w(F)+")").style("stroke-dasharray","20, 5")),E.ticks(_/100).tickSize(0).tickFormat(function(e,t){return j[t]?j[t].l:"asfd"}),$.select(".nv-x.nv-axis").attr("transform","translate(0,"+w.range()[0]+")"),d3.transition($.select(".nv-x.nv-axis")).call(E);var et=$.select(".nv-x.nv-axis > g").selectAll("g");et.selectAll("line, text").style("opacity",1),et.select("text").each(function(e,t){var n=this.textContent,r=d3.select(this),i=n.split(" "),s=i.length,t=0,o=.71,u=y.rangeBand();if(this.getBBox().width>u){this.textContent="";do{var a,f=r.append("tspan").text(i[t]+" ").attr("dy",o+"em").attr("x","0px");t==0&&(o=.9),t+=1;while(t<s){a=f.text(),f.text(a+" "+i[t]);if(!(this.getBBox().width<=u)){f.text(a);break}t+=1}}while(t<s)}}),l&&et.filter(function(e,t){return t%Math.ceil(v[0].values.length/(_/100))!==0}).selectAll("text, line").style("opacity",0),h&&et.selectAll("text").attr("transform",function(e,t,n){return"rotate("+h+" 0,0) translate(0,10)"}).attr("text-transform",h>0?"start":"end"),S.ticks(D/100).tickSize(-_,0).tickFormat(function(e){return"$"+d3.format(",.2s")(e)}),d3.transition($.select(".nv-y.nv-axis")).style("opacity",H.length?1:0).call(S),x.dispatch.on("legendClick",function(e,t){var n=e.series;e.disabled=!e.disabled,v.filter(function(e){return e.series===n&&e.type==="line"}).map(function(e){return e.disabled=!e.disabled,e}),v.filter(function(e){return!e.disabled&&e.type==="bar"}).length||v.map(function(e){return e.disabled=!1,X.selectAll(".nv-series").classed("disabled",!1),e}),o.transition().call(O)}),N.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;G=G.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":g.stacked(!1);break;case"Stacked":g.stacked(!0)}o.transition().call(O)}),b.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],C.tooltipShow(e)}),b.dispatch.on("elementMouseout.tooltip",function(e){C.tooltipHide(e)}),g.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],C.tooltipShow(e)}),g.dispatch.on("elementMouseout.tooltip",function(e){C.tooltipHide(e)}),g.dispatch.on("elementClick",function(e){L(v,e,o)}),p&&C.on("tooltipShow",function(e){k(e,M.parentNode,j,W)}),p&&C.on("tooltipHide",e.tooltip.cleanup),O.update=function(){o.transition().call(O)},O.container=this}),O}var t={top:5,right:5,bottom:34,left:40},n=null,r=null,i=function(e){return e.x},s=function(e){return e.y},o=e.utils.defaultColor(),u=!0,a=!0,f=!1,l=!1,c=!1,h=0,p=!0,d=function(e,t,n,r,i){return"<p>Stage: <b>"+e+"</b></p>"+"<p>Amount: <b>"+n+"</b></p>"+"<p>Percent: <b>"+t+"%</b></p>"},v=function(e,t,n,r,i){return"<p>Likely: <b>"+n+"</b></p>"},m="No Data Available.",g=e.models.multiBar().stacked(!0),y=g.xScale(),b=e.models.line(),w=g.yScale(),E=e.models.axis().scale(y).orient("bottom").tickPadding(5),S=e.models.axis().scale(w).orient("left"),x=e.models.paretoLegend(),T=e.models.paretoLegend(),N=e.models.legend(),C=d3.dispatch("tooltipShow","tooltipHide");E.highlightZero(!1).showMaxMin(!1);var k=function(t,n,r,i){var s=A(n),o=t.pos[0]+(s.x||0)+(t.series.type==="bar"?0:i),u=t.pos[1]+(s.y||0),a=(t.point.y*100/r[t.pointIndex].t).toFixed(1),f=S.tickFormat()(b.y()(t.point,t.pointIndex)),l=t.series.type==="bar"?d(t.series.key,a,f,t,O):v(t.series.key,a,f,t,O);e.tooltip.show([o,u],l,"s",null,n)},L=function(e,t,n){e.filter(function(e){return!e.disabled&&e.type==="bar"}).length===1?e=e.map(function(e){return e.disabled=!1,e}):e=e.filter(function(e){return e.type==="bar"}).map(function(e,n){return e.disabled=n!=t.seriesIndex,e}),n.transition().call(O)},A=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,s=n.left+r,o=n.top+i;return{x:s,y:o}};return O.dispatch=C,O.lines=b,O.multibar=g,O.barLegend=x,O.lineLegend=T,O.xAxis=E,O.yAxis=S,d3.rebind(O,g,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","stacked","delay","color","gradient","useClass"),d3.rebind(O,b,"color"),O.colorData=function(t){if(arguments[0]==="graduated")var n=arguments[1].c1,r=arguments[1].c2,i=arguments[1].l,s=function(e,t){return d3.interpolateHsl(d3.rgb(n),d3.rgb(r))(t/i)};else if(t==="class"){O.useClass(!0),x.useClass(!0),T.useClass(!0);var s=function(e,t){return"inherit"}}else var s=e.utils.defaultColor();return x.color(s),T.color(s),g.color(s),b.color(s),O},O.colorFill=function(e){if(e==="gradient")var t=function(e,t){return O.gradient()(e,t)};else var t=O.color();return g.fill(t),O},O.x=function(e){return arguments.length?(i=e,b.x(e),g.x(e),O):i},O.y=function(e){return arguments.length?(s=e,b.y(e),g.y(e),O):s},O.margin=function(e){return arguments.length?(t=e,O):t},O.width=function(e){return arguments.length?(n=e,O):n},O.height=function(e){return arguments.length?(r=e,O):r},O.showControls=function(e){return arguments.length?(u=e,O):u},O.showLegend=function(e){return arguments.length?(a=e,O):a},O.showTitle=function(e){return arguments.length?(f=e,O):f},O.reduceXTicks=function(e){return arguments.length?(l=e,O):l},O.rotateLabels=function(e){return arguments.length?(h=e,O):h},O.tooltipBar=function(e){return arguments.length?(d=e,O):d},O.tooltipLine=function(e){return arguments.length?(v=e,O):v},O.tooltips=function(e){return arguments.length?(p=e,O):p},O.tooltipContent=function(e){return arguments.length?(tooltip=e,O):tooltip},O.noData=function(e){return arguments.length?(m=e,O):m},O.barClick=function(e){return arguments.length?(L=e,O):L},O},e.models.paretoLegend=function(){function f(e){return e.each(function(e){var l=n-t.left-t.right,c=d3.select(this);if(!e||!e.length||!e.values||!e.values||!e.filter(function(e){return e.values.length}).length)return f;c.selectAll("g.nv-legend").remove();var h=c.selectAll("g.nv-legend").data([e]),p=h.enter().append("g").attr("class","nvd3 nv-legend").append("g"),d=h.select("g");h.attr("transform","translate("+t.left+","+t.top+")");var v=d.selectAll(".nv-series").data(function(e){return e}),m=v.enter().append("g").attr("class","nv-series").on("mouseover",function(e,t){u.legendMouseover(e,t)}).on("mouseout",function(e,t){u.legendMouseout(e,t)}).on("click",function(e,t){u.legendClick(e,t)}).on("dblclick",function(e,t){u.legendDblclick(e,t)});e[0].type==="bar"?(m.append("rect").attr("class",function(e,t){return this.getAttribute("class")||(a?e.class||"nv-fill"+(t%20>9?"":"0")+t%20:"")}).attr("fill",function(e,t){return s(e,t)}).attr("stroke",function(e,t){return s(e,t)}).attr("stroke-width",0).attr("width",10).attr("height",10).attr("transform","translate(-5,-5)"),m.append("text").text(i).attr("text-anchor","start").attr("dy",".36em").attr("dx","8")):(m.append("circle").attr("class",function(e,t){return this.getAttribute("class")||(a?e.class||"nv-fill"+(t%20>9?"":"0")+t%20:"")}).attr("fill",function(e,t){return s(e,t)}).attr("stroke",function(e,t){return s(e,t)}).attr("stroke-width",0).attr("r",4).attr("transform","translate(8,0)"),m.append("line").attr("class",function(e,t){return this.getAttribute("class")||(a?e.class||"nv-stroke"+(t%10>9?"":"0")+t%10:"")}).attr("stroke",function(e,t){return s(e,t)}).attr("stroke-width",2).attr("x0",0).attr("x1",16).attr("y0",0).attr("y1",0),m.append("text").text(i).attr("text-anchor","start").attr("dy",".36em").attr("dx","20")),v.classed("disabled",function(e){return e.disabled}),v.exit().remove();if(o){var g=[];v.each(function(e,t){g.push(d3.select(this).select("text").node().getComputedTextLength()+28)});var y=0,b=0,w=[];while(b<l&&y<g.length)w[y]=g[y],b+=g[y++];while(b>l&&y>1){w=[],y--;for(k=0;k<g.length;k++)g[k]>(w[k%y]||0)&&(w[k%y]=g[k]);b=w.reduce(function(e,t,n,r){return e+t})}var E=[];for(var S=0,x=0;S<y;S++)E[S]=x,x+=w[S];v.attr("transform",function(e,t){return"translate("+E[t%y]+","+(5+Math.floor(t/y)*20)+")"}),d.attr("transform","translate("+(n-t.right-b)+","+t.top+")"),r=t.top+t.bottom+Math.ceil(g.length/y)*20}else{var T=5,N=5,C=0,L;v.attr("transform",function(e,r){var i=d3.select(this).select("text").node().getComputedTextLength()+28;return L=N,n<t.left+t.right+L+i&&(N=L=5,T+=20),N+=i,N>C&&(C=N),"translate("+L+","+T+")"}),d.attr("transform","translate("+(n-t.right-C)+","+t.top+")"),r=t.top+t.bottom+T+15}}),f}var t={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(e){return e.key},s=e.utils.defaultColor(),o=!0,u=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout"),a=!1;return f.dispatch=u,f.margin=function(e){return arguments.length?(t=e,f):t},f.width=function(e){return arguments.length?(n=e,f):n},f.height=function(e){return arguments.length?(r=e,f):r},f.key=function(e){return arguments.length?(i=e,f):i},f.color=function(t){return arguments.length?(s=e.utils.getColor(t),f):s},f.useClass=function(e){return arguments.length?(a=e,f):a},f.align=function(e){return arguments.length?(o=e,f):o},f},e.models.multiBarHorizontal=function(){function N(o){return o.each(function(o){var y=n-t.left-t.right,w=r-t.top-t.bottom,C=d3.select(this),k=function(t,n){return e.utils.colorLinearGradient(t,n,"horizontal",g(t,n),A.select("defs"))};N.gradient(k),l&&(o=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(o)),o=o.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var L=v&&m?[]:o.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});i.domain(v||d3.merge(L).map(function(e){return e.x})).rangeBands([0,w],.1),s.domain(m||d3.extent(d3.merge(L).map(function(e){return e.y+(l?e.y0:0)}).concat(f))),c&&!l?s.range([s.domain()[0]<0?h:0,y-(s.domain()[1]>0?h:0)]):s.range([0,y]),x=x||i,T=T||d3.scale.linear().domain(s.domain()).range([s(0),s(0)]);var A=C.selectAll("g.nv-wrap.nv-multibarHorizontal").data([o]),O=A.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),M=O.append("defs"),_=O.append("g"),D=A.select("g");_.append("g").attr("class","nv-groups"),A.attr("transform","translate("+t.left+","+t.top+")");var P=A.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});P.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(P.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).selectAll("g.nv-bar").delay(function(e,t){return t*d/o[0].values.length}).attr("y",function(e){return l?T(e.y0):T(0)}).attr("width",0).remove(),P.attr("class",function(e,t){return this.getAttribute("class")||"nv-group nv-series-"+t+(E?" "+(e.class||"nv-fill"+(t%20>9?"":"0")+t%20):"")}).classed("hover",function(e){return e.hover}).attr("fill",function(e,t){return this.getAttribute("fill")||b(e,t)}).attr("stroke",function(e,t){return this.getAttribute("fill")||b(e,t)}),d3.transition(P).style("stroke-opacity",1).style("fill-opacity",.85);var H=P.selectAll("g.nv-bar").data(function(e){return e.values});H.exit().remove();var B=H.enter().append("g").attr("class","nv-bar").attr("transform",function(e,t,n){return"translate("+T(l?e.y0:0)+","+(l?0:n*i.rangeBand()/o.length+i(u(e,t)))+")"});B.append("rect").attr("width",0).attr("height",i.rangeBand()/(l?1:o.length)),H.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),S.elementMouseover({value:a(e,t),point:e,series:o[e.series],pos:[s(a(e,t)+(l?e.y0:0)),i(u(e,t))+i.rangeBand()*(l?o.length/2:e.series+.5)/o.length],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),S.elementMouseout({value:a(e,t),point:e,series:o[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){S.elementClick({value:a(e,t),point:e,series:o[e.series],pos:[i(u(e,t))+i.rangeBand()*(l?o.length/2:e.series+.5)/o.length,s(a(e,t)+(l?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){S.elementDblClick({value:a(e,t),point:e,series:o[e.series],pos:[i(u(e,t))+i.rangeBand()*(l?o.length/2:e.series+.5)/o.length,s(a(e,t)+(l?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),c&&!l?(B.append("text").attr("text-anchor",function(e,t){return a(e,t)<0?"end":"start"}),H.select("text").attr("y",i.rangeBand()/2).attr("dy","-.32em").text(function(e,t){return p(a(e,t))}),d3.transition(H).select("text").attr("x",function(e,t){return a(e,t)<0?-4:s(a(e,t))-s(0)+4})):H.selectAll("text").remove(),H.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}),l?d3.transition(H).attr("transform",function(e,t){return"translate("+s(e.y0)+","+i(u(e,t))+")"}).select("rect").attr("width",function(e,t){return Math.abs(s(a(e,t)+e.y0)-s(e.y0))}).attr("height",i.rangeBand()):d3.transition(H).attr("transform",function(e,t){return"translate("+(a(e,t)<0?s(a(e,t)):s(0))+","+(e.series*i.rangeBand()/o.length+i(u(e,t)))+")"}).select("rect").attr("height",i.rangeBand()/o.length).attr("width",function(e,t){return Math.abs(s(a(e,t))-s(0))}),x=i.copy(),T=s.copy()}),N}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=!1,c=!1,h=60,p=d3.format(",.2f"),d=1200,v,m,g=e.utils.defaultColor(),y=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},b=function(e,t){return g(e,t)},w=function(e,t){return g(e,t)},E=!1,S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),x,T;return N.dispatch=S,N.color=function(e){return arguments.length?(g=e,N):g},N.fill=function(e){return arguments.length?(b=e,N):b},N.gradient=function(e){return arguments.length?(w=e,N):w},N.useClass=function(e){return arguments.length?(E=e,N):E},N.x=function(e){return arguments.length?(u=e,N):u},N.y=function(e){return arguments.length?(a=e,N):a},N.margin=function(e){return arguments.length?(t=e,N):t},N.width=function(e){return arguments.length?(n=e,N):n},N.height=function(e){return arguments.length?(r=e,N):r},N.xScale=function(e){return arguments.length?(i=e,N):i},N.yScale=function(e){return arguments.length?(s=e,N):s},N.xDomain=function(e){return arguments.length?(v=e,N):v},N.yDomain=function(e){return arguments.length?(m=e,N):m},N.forceY=function(e){return arguments.length?(f=e,N):f},N.stacked=function(e){return arguments.length?(l=e,N):l},N.id=function(e){return arguments.length?(o=e,N):o},N.delay=function(e){return arguments.length?(d=e,N):d},N.showValues=function(e){return arguments.length?(c=e,N):c},N.valueFormat=function(e){return arguments.length?(p=e,N):p},N.valuePadding=function(e){return arguments.length?(h=e,N):h},N},e.models.multiBarHorizontalChart=function(){function w(u){return u.each(function(f){var h=f.properties,p=f.data,E=d3.select(this),S=this,x=(n||parseInt(E.style("width"))||960)-t.left-t.right,T=(r||parseInt(E.style("height"))||400)-t.top-t.bottom;if(!p||!p.length||!p.filter(function(e){return e.values.length}).length)return E.append("text").attr("class","nvd3 nv-noData").attr("x",x/2).attr("y",T/2).attr("dy","-.7em").style("text-anchor","middle").text(l),w;E.select(".nv-noData").remove();var N=E.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([p]),C=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),k=N.select("g");C.append("g").attr("class","nv-x nv-axis"),C.append("g").attr("class","nv-y nv-axis"),C.append("g").attr("class","nv-barsWrap");var L=0,A=0;s&&(C.append("g").attr("class","nv-legendWrap"),m.width(x*(i?.7:1)),k.select(".nv-legendWrap").datum(p).call(m),A=m.height(),t.top!==A+L&&(t.top=A+L,T=(r||parseInt(E.style("height"))||400)-t.top-t.bottom),k.select(".nv-legendWrap").attr("transform","translate("+x*(i?.3:0)+","+ -t.top+")")),o&&h.title&&(C.append("g").attr("class","nv-titleWrap"),k.select(".nv-title").remove(),k.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(h.title).attr("stroke","none").attr("fill","black"),L=parseInt(k.select(".nv-title").node().getBBox().height)+parseInt(k.select(".nv-title").style("margin-top"))+parseInt(k.select(".nv-title").style("margin-bottom")),t.top!==L+A&&(t.top=L+A,T=(r||parseInt(E.style("height"))||400)-t.top-t.bottom),k.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt(k.select(".nv-title").node().getBBox().height))+")"));if(i){C.append("g").attr("class","nv-controlsWrap");var O=[{key:"Grouped",disabled:c.stacked()},{key:"Stacked",disabled:!c.stacked()}];g.width(x*.3).color(["#444"]),k.select(".nv-controlsWrap").datum(O).attr("transform","translate(0,"+(-t.top+L)+")").call(g)}k.attr("transform","translate("+t.left+","+t.top+")"),c.width(x).height(T);var M=k.select(".nv-barsWrap").datum(p.filter(function(e){return!e.disabled}));d3.transition(M).call(c),d.ticks(T/24).tickSize(-x,0),k.select(".nv-x.nv-axis").transition().duration(0).call(d);var _=k.select(".nv-x.nv-axis").selectAll("g");_.selectAll("line, text").style("opacity",1),v.ticks(x/100).tickSize(-T,0),k.select(".nv-y.nv-axis").attr("transform","translate(0,"+T+")"),d3.transition(k.select(".nv-y.nv-axis")).call(v),m.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,p.filter(function(e){return!e.disabled}).length||p.map(function(e){return e.disabled=!1,N.selectAll(".nv-series").classed("disabled",!1),e}),u.transition().call(w)}),g.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;O=O.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":c.stacked(!1);break;case"Stacked":c.stacked(!0)}u.transition().call(w)}),c.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],y.tooltipShow(e)}),a&&y.on("tooltipShow",function(e){b(e,S.parentNode)}),c.dispatch.on("elementMouseout.tooltip",function(e){y.tooltipHide(e)}),a&&y.on("tooltipHide",e.tooltip.cleanup),w.update=function(){u.transition().call(w)},w.container=this}),w}var t={top:30,right:20,bottom:50,left:60},n=null,r=null,i=!0,s=!0,o=!1,u=!0,a=!0,f=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},l="No Data Available.",c=e.models.multiBarHorizontal().stacked(u),h=c.xScale(),p=c.yScale(),d=e.models.axis().scale(h).orient("bottom").highlightZero(!1).showMaxMin(!1),v=e.models.axis().scale(p).orient("left"),m=e.models.legend().height(30),g=e.models.legend().height(30),y=d3.dispatch("tooltipShow","tooltipHide");d.tickFormat(function(e){return e}),v.tickFormat(d3.format(",.1f"));var b=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=d.tickFormat()(c.x()(t.point,t.pointIndex)),o=v.tickFormat()(c.y()(t.point,t.pointIndex)),u=f(t.series.key,s,o,t,w);e.tooltip.show([r,i],u,t.value<0?"e":"w",null,n)};return w.dispatch=y,w.multibar=c,w.legend=m,w.xAxis=d,w.yAxis=v,d3.rebind(w,c,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","stacked","delay","showValues","valueFormat","color","gradient","useClass"),w.colorData=function(t){if(arguments[0]==="graduated")var n=arguments[1].c1,r=arguments[1].c2,i=arguments[1].l,s=function(e,t){return d3.interpolateHsl(d3.rgb(n),d3.rgb(r))(t/i)};else if(t==="class"){w.useClass(!0),m.useClass(!0);var s=function(e,t){return"inherit"}}else var s=e.utils.defaultColor();return m.color(s),c.color(s),w},w.colorFill=function(e){if(e==="gradient")var t=function(e,t){return w.gradient()(e,t)};else var t=w.color();return c.fill(t),w},w.margin=function(e){return arguments.length?(t=e,w):t},w.width=function(e){return arguments.length?(n=e,w):n},w.height=function(e){return arguments.length?(r=e,w):r},w.showControls=function(e){return arguments.length?(i=e,w):i},w.showLegend=function(e){return arguments.length?(s=e,w):s},w.showTitle=function(e){return arguments.length?(o=e,w):o},w.tooltip=function(e){return arguments.length?(f=e,w):f},w.tooltips=function(e){return arguments.length?(a=e,w):a},w.tooltipContent=function(e){return arguments.length?(f=e,w):f},w.noData=function(e){return arguments.length?(l=e,w):l},w},e.models.pie=function(){function y(i){return i.each(function(i){function D(e){var t=(e.startAngle+e.endAngle)*90/Math.PI-90;return t>90?t-180:t}function P(e){m||(e.innerRadius=0);var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){return k(t(e))}}function H(e){e.innerRadius=0;var t=d3.interpolate({startAngle:0,endAngle:0},e);return function(e){return k(t(e))}}var l=n-t.left-t.right,h=r-t.top-t.bottom,b=Math.min(l,h)/2,w=d3.select(this),E=function(t,n){return e.utils.colorRadialGradient(t,n,0,0,"35%","35%",a(t,n),S.select("defs"))};y.gradient(E);var S=w.selectAll(".nv-wrap.nv-pie").data([i]),x=S.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+u),T=x.append("defs"),N=x.append("g"),C=S.select("g");N.append("g").attr("class","nv-pie"),S.attr("transform","translate("+t.left+","+t.top+")"),C.select(".nv-pie").attr("transform","translate("+l/2+","+h/2+")"),w.on("click",function(e,t){d.chartClick({data:e,index:t,pos:d3.event,id:u})});var k=d3.svg.arc().outerRadius(b-b/5);m&&k.innerRadius(b/2.5);var L=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:o(e)}),A=S.select(".nv-pie").selectAll(".nv-slice").data(L);A.exit().remove();var O=A.enter().append("g").attr("class",function(e,t){return this.getAttribute("class")||"nv-slice"+(c?" "+(e.data.class||"nv-fill"+(t%20>9?"":"0")+t%20):"")}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),d.elementMouseover({label:s(e.data),value:o(e.data),point:e.data,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:u})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),d.elementMouseout({label:s(e.data),value:o(e.data),point:e.data,index:t,id:u})}).on("click",function(e,t){d.elementClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:u}),d3.event.stopPropagation()}).on("dblclick",function(e,t){d.elementDblClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:u}),d3.event.stopPropagation()});A.attr("fill",function(e,t){return f(e,t)}).attr("stroke",function(e,t){return f(e,t)});var M=O.append("path").each(function(e){this._current=e});d3.transition(A.select("path")).attr("d",k).attrTween("d",P);if(p){var _=k;v&&(_=d3.svg.arc().outerRadius(k.outerRadius())),O.append("g").classed("nv-label",!0).each(function(e,t){var n=d3.select(this);n.attr("transform",function(e){return e.outerRadius=b+10,e.innerRadius=b+15,"translate("+_.centroid(e)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor","middle").style("fill","#000")}),A.select(".nv-label").transition().attr("transform",function(e){return e.outerRadius=b+10,e.innerRadius=b+15,"translate("+_.centroid(e)+")"}),A.each(function(e,t){var n=d3.select(this);n.select(".nv-label text").text(function(e,t){var n=(e.endAngle-e.startAngle)/(2*Math.PI);return e.value&&n>g?s(e.data):""});var r=n.select("text").node().getBBox();n.select(".nv-label rect").attr("width",r.width+10).attr("height",r.height+10).attr("transform",function(){return"translate("+[r.x-5,r.y-5]+")"})})}}),y}var t={top:0,right:0,bottom:0,left:0},n=500,r=500,i=function(e){return e},s=function(e){return e.x},o=function(e){return e.y},u=Math.floor(Math.random()*1e4),a=e.utils.defaultColor(),f=function(e,t){return a(e,t)},l=function(e,t){return a(e,t)},c=!1,h=d3.format(",.2f"),p=!0,d=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),v=!1,m=!1,g=.02;return y.dispatch=d,y.color=function(e){return arguments.length?(a=e,y):a},y.fill=function(e){return arguments.length?(f=e,y):f},y.gradient=function(e){return arguments.length?(l=e,y):l},y.useClass=function(e){return arguments.length?(c=e,y):c},y.margin=function(e){return arguments.length?(t=e,y):t},y.width=function(e){return arguments.length?(n=e,y):n},y.height=function(e){return arguments.length?(r=e,y):r},y.values=function(e){return arguments.length?(i=e,y):i},y.x=function(e){return arguments.length?(s=e,y):s},y.y=function(e){return arguments.length?(o=d3.functor(e),y):o},y.showLabels=function(e){return arguments.length?(p=e,y):p},y.id=function(e){return arguments.length?(u=e,y):u},y.valueFormat=function(e){return arguments.length?(h=e,y):h},y.labelThreshold=function(e){return arguments.length?(g=e,y):g},y.donutLabelsOutside=function(e){return arguments.length?(v=e,y):v},y.donut=function(e){return arguments.length?(m=e,y):m},y},e.models.pieChart=function(){function v(e){return e.each(function(f){var c=f.properties,m=f.data,g=d3.select(this),y=this,b=(i||parseInt(g.style("width"))||960)-r.left-r.right,w=(s||parseInt(g.style("height"))||400)-r.top-r.bottom,E=d3.sum(m.map(function(e){return e.value}));v.update=function(){v(e)},v.container=this;if(!m||!m.length){var S=g.selectAll(".nv-noData").data([h]);return S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),S.attr("x",r.left+b/2).attr("y",r.top+w/2).text(function(e){return e}),v}g.selectAll(".nv-noData").remove();var x=g.selectAll("g.nv-wrap.nv-pieChart").data([f]),T=x.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),N=x.select("g");T.append("g").attr("class","nv-pieWrap");var C=0,k=0;o&&(T.append("g").attr("class","nv-legendWrap"),n.width(b).key(t.x()),x.select(".nv-legendWrap").datum(m).call(n),k=n.height()+10,r.top!==k+C&&(r.top=k+C,w=(s||parseInt(g.style("height"))||400)-r.top-r.bottom),x.select(".nv-legendWrap").attr("transform","translate(0,"+ -r.top+")")),u&&c.title&&(T.append("g").attr("class","nv-titleWrap"),N.select(".nv-title").remove(),N.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(c.title).attr("stroke","none").attr("fill","black"),C=parseInt(N.select(".nv-title").node().getBBox().height)+parseInt(N.select(".nv-title").style("margin-top"))+parseInt(N.select(".nv-title").style("margin-bottom")),r.top!==C+k&&(r.top=C+k,w=(s||parseInt(g.style("height"))||400)-r.top-r.bottom),N.select(".nv-titleWrap").attr("transform","translate(0,"+(-r.top+parseInt(N.select(".nv-title").node().getBBox().height))+")")),x.attr("transform","translate("+r.left+","+r.top+")"),t.width(b).height(w);var L=N.select(".nv-pieWrap").datum(m);d3.transition(L).call(t),x.selectAll(".nv-pie-hole").remove();if(a)var A=x.append("g").append("text").text(a).attr("text-anchor","middle").attr("class","nv-pie-hole").attr("transform","translate("+b/2+","+(12+w/2)+")").attr("fill","#333");n.dispatch.on("legendClick",function(n,r,i){n.disabled=!n.disabled,t.values()(m).filter(function(e){return!e.disabled}).length||t.values()(m).map(function(e){return e.disabled=!1,x.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(v)}),p.on("tooltipShow",function(e){l&&d(e,y.parentNode,E)}),t.dispatch.on("elementMouseout.tooltip",function(e){p.tooltipHide(e)})}),v}var t=e.models.pie(),n=e.models.legend(),r={top:30,right:20,bottom:20,left:20},i=null,s=null,o=!0,u=!1,a=!1,f=e.utils.defaultColor(),l=!0,c=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},h="No Data Available.",p=d3.dispatch("tooltipShow","tooltipHide"),d=function(n,r,i){var s=n.pos[0]+(r&&r.offsetLeft||0),o=n.pos[1]+(r&&r.offsetTop||0),u=(t.y()(n.point)*100/i).toFixed(1),a=t.valueFormat()(t.y()(n.point)),f=c(n.point.key,u,a,n,v);e.tooltip.show([s,o],f,null,null,r)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+r.left,e.pos[1]+r.top],p.tooltipShow(e)}),p.on("tooltipHide",function(){l&&e.tooltip.cleanup()}),v.dispatch=p,v.legend=n,v.pie=t,d3.rebind(v,t,"valueFormat","values","x","y","id","showLabels","donutLabelsOutside","donut","labelThreshold","color","gradient","useClass"),v.colorData=function(r){if(arguments[0]==="graduated")var i=arguments[1].c1,s=arguments[1].c2,o=arguments[1].l,u=function(e,t){return d3.interpolateHsl(d3.rgb(i),d3.rgb(s))(t/o)};else if(r==="class"){v.useClass(!0),n.useClass(!0);var u=function(e,t){return"inherit"}}else var u=e.utils.defaultColor();return n.color(u),t.color(u),v},v.colorFill=function(e){if(e==="gradient")var n=function(e,t){return v.gradient()(e,t)};else var n=v.color();return t.fill(n),v},v.margin=function(e){return arguments.length?(r=e,v):r},v.width=function(e){return arguments.length?(i=e,v):i},v.height=function(e){return arguments.length?(s=e,v):s},v.showLegend=function(e){return arguments.length?(o=e,v):o},v.showTitle=function(e){return arguments.length?(u=e,v):u},v.tooltip=function(e){return arguments.length?(c=e,v):c},v.tooltips=function(e){return arguments.length?(l=e,v):l},v.tooltipContent=function(e){return arguments.length?(c=e,v):c},v.noData=function(e){return arguments.length?(h=e,v):h},v.hole=function(e){return arguments.length?(a=e,v):a},v},e.models.scatter=function(){function B(e){return e.each(function(e){function W(){if(!v)return!1;var n,r=d3.merge(e.map(function(e,t){return e.values.filter(m).map(function(e,n){return[s(a(e,n))*(Math.random()/1e12+1),o(f(e,n))*(Math.random()/1e12+1),t,n]})}));if(y){q.append("clipPath").attr("id","nv-points-clip-"+i);var u=F.select("#nv-points-clip-"+i).selectAll("circle").data(r);u.enter().append("circle").attr("r",b),u.exit().remove(),u.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}),F.select(".nv-point-paths"
).attr("clip-path","url(#nv-points-clip-"+i+")")}if(N===!0){var l=d3.geom.voronoi(r).map(function(e,t){return{data:e,series:r[t][2],point:r[t][3]}}),c=F.select(".nv-point-paths").selectAll("path").data(l);c.enter().append("path").attr("class",function(e,t){return"nv-path-"+t}),c.exit().remove(),c.attr("d",function(e){return"M"+e.data.join(",")+"Z"}),n=c}else{var h=r.map(function(e,t){return{data:e,series:r[t][2],point:r[t][3]}});n=F.select(".nv-groups").selectAll(".nv-group").selectAll("path.nv-point").data(h).style("pointer-events","auto")}n.on("click",function(n){var r=e[n.series],i=r.values[n.point];M.elementClick({point:i,series:r,pos:[s(a(i,n.point))+t.left,o(f(i,n.point))+t.top],seriesIndex:n.series,pointIndex:n.point})}).on("mouseover",function(n){var r=e[n.series],i=r.values[n.point];M.elementMouseover({point:i,series:r,pos:[s(a(i,n.point))+t.left,o(f(i,n.point))+t.top],seriesIndex:n.series,pointIndex:n.point})}).on("mouseout",function(t,n){var r=e[t.series],i=r.values[t.point];M.elementMouseout({point:i,series:r,seriesIndex:t.series,pointIndex:t.point})})}var C=n-t.left-t.right,L=r-t.top-t.bottom,B=d3.select(this);e=e.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var j=w&&E&&S?[]:d3.merge(e.map(function(e){return e.values.map(function(e,t){return{x:a(e,t),y:f(e,t),size:l(e,t)}})}));s.domain(w||d3.extent(j.map(function(e){return e.x}).concat(h))).range([0,C]),o.domain(E||d3.extent(j.map(function(e){return e.y}).concat(p))).range([L,0]),u.domain(S||d3.extent(j.map(function(e){return e.size}).concat(d))).range(x||[16,256]);if(s.domain()[0]===s.domain()[1]||o.domain()[0]===o.domain()[1])T=!0;s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]-s.domain()[0]*.01,s.domain()[1]+s.domain()[1]*.01]):s.domain([-1,1])),o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]+o.domain()[0]*.01,o.domain()[1]-o.domain()[1]*.01]):o.domain([-1,1])),_=_||s,D=D||o,P=P||u;var F=B.selectAll("g.nv-wrap.nv-scatter").data([e]),I=F.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+i+(T?" nv-single-point":"")),q=I.append("defs"),R=I.append("g"),U=F.select("g");R.append("g").attr("class","nv-groups"),R.append("g").attr("class","nv-point-paths"),F.attr("transform","translate("+t.left+","+t.top+")"),q.append("clipPath").attr("id","nv-edge-clip-"+i).append("rect"),F.select("#nv-edge-clip-"+i+" rect").attr("width",C).attr("height",L),U.attr("clip-path",g?"url(#nv-edge-clip-"+i+")":"");var X=F.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});X.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(X.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),X.attr("class",function(e,t){return this.getAttribute("class")||"nv-group nv-series-"+t+(A?" "+(e.class||"nv-fill"+(t*O%20>9?"":"0")+t*O%20):"")}).attr("fill",function(e,t){return this.getAttribute("fill")||k(e,t)}).attr("stroke",function(e,t){return this.getAttribute("stroke")||k(e,t)}).classed("hover",function(e){return e.hover}),d3.transition(X).style("stroke-opacity",1).style("fill-opacity",.5);var V=X.selectAll("path.nv-point").data(function(e){return e.values});V.enter().append("path").attr("transform",function(e,t){return"translate("+_(a(e,t))+","+D(f(e,t))+")"}).attr("d",d3.svg.symbol().type(c).size(function(e,t){return u(l(e,t))})),V.exit().remove(),d3.transition(X.exit().selectAll("path.nv-point")).attr("transform",function(e,t){return"translate("+s(a(e,t))+","+o(f(e,t))+")"}).remove(),V.attr("class",function(e,t){return"nv-point nv-point-"+t}),d3.transition(V).attr("transform",function(e,t){return"translate("+s(a(e,t))+","+o(f(e,t))+")"}).attr("d",d3.svg.symbol().type(c).size(function(e,t){return u(l(e,t))})),clearTimeout(H),H=setTimeout(W,1e3),_=s.copy(),D=o.copy(),P=u.copy()}),B}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e5),s=d3.scale.linear(),o=d3.scale.linear(),u=d3.scale.linear(),a=function(e){return e.x},f=function(e){return e.y},l=function(e){return e.size},c=function(e){return e.shape||"circle"},h=[],p=[],d=[],v=!0,m=function(e){return!e.notActive},g=!1,y=!0,b=function(){return 25},w=null,E=null,S=null,x=null,T=!1,N=!0,C=e.utils.defaultColor(),k=function(e,t){return C(e,t)},L=function(e,t){return C(e,t)},A=!1,O=1,M=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),_,D,P,H;return M.on("elementMouseover.point",function(e){v&&d3.select(".nv-chart-"+i+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!0)}),M.on("elementMouseout.point",function(e){v&&d3.select(".nv-chart-"+i+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!1)}),B.dispatch=M,B.color=function(e){return arguments.length?(C=e,B):C},B.fill=function(e){return arguments.length?(k=e,B):k},B.gradient=function(e){return arguments.length?(L=e,B):L},B.useClass=function(e){return arguments.length?(A=e,B):A},B.classStep=function(e){return arguments.length?(O=e,B):O},B.x=function(e){return arguments.length?(a=d3.functor(e),B):a},B.y=function(e){return arguments.length?(f=d3.functor(e),B):f},B.size=function(e){return arguments.length?(l=d3.functor(e),B):l},B.margin=function(e){return arguments.length?(t=e,B):t},B.width=function(e){return arguments.length?(n=e,B):n},B.height=function(e){return arguments.length?(r=e,B):r},B.xScale=function(e){return arguments.length?(s=e,B):s},B.yScale=function(e){return arguments.length?(o=e,B):o},B.zScale=function(e){return arguments.length?(u=e,B):u},B.xDomain=function(e){return arguments.length?(w=e,B):w},B.yDomain=function(e){return arguments.length?(E=e,B):E},B.sizeDomain=function(e){return arguments.length?(S=e,B):S},B.sizeRange=function(e){return arguments.length?(x=e,B):x},B.forceX=function(e){return arguments.length?(h=e,B):h},B.forceY=function(e){return arguments.length?(p=e,B):p},B.forceSize=function(e){return arguments.length?(d=e,B):d},B.interactive=function(e){return arguments.length?(v=e,B):v},B.pointActive=function(e){return arguments.length?(m=e,B):m},B.clipEdge=function(e){return arguments.length?(g=e,B):g},B.clipVoronoi=function(e){return arguments.length?(y=e,B):y},B.useVoronoi=function(e){return arguments.length?(N=e,N===!1&&(y=!1),B):N},B.clipRadius=function(e){return arguments.length?(b=e,B):b},B.shape=function(e){return arguments.length?(c=e,B):c},B.id=function(e){return arguments.length?(i=e,B):i},B.singlePoint=function(e){return arguments.length?(T=e,B):T},B},e.models.sparkline=function(){function h(e){return e.each(function(e){var i=n-t.left-t.right,h=r-t.top-t.bottom,p=d3.select(this);s.domain(l||d3.extent(e,u)).range([0,i]),o.domain(c||d3.extent(e,a)).range([h,0]);var d=p.selectAll("g.nv-wrap.nv-sparkline").data([e]),v=d.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),m=v.append("g"),g=d.select("g");d.attr("transform","translate("+t.left+","+t.top+")");var b=d.selectAll("path").data(function(e){return[e]});b.enter().append("path"),b.exit().remove(),b.style("stroke",function(e,t){return e.color||f(e,t)}).attr("d",d3.svg.line().x(function(e,t){return s(u(e,t))}).y(function(e,t){return o(a(e,t))}));var w=d.selectAll("circle.nv-point").data(function(e){return e.filter(function(e,t){return o.domain().indexOf(a(e,t))!=-1||u(e,t)==s.domain()[1]})});w.enter().append("circle").attr("class","nv-point"),w.exit().remove(),w.attr("cx",function(e,t){return s(u(e,t))}).attr("cy",function(e,t){return o(a(e,t))}).attr("r",2).style("stroke",function(e,t){return e.x==s.domain()[1]?"#444":e.y==o.domain()[0]?"#d62728":"#2ca02c"}).style("fill",function(e,t){return e.x==s.domain()[1]?"#444":e.y==o.domain()[0]?"#d62728":"#2ca02c"})}),h}var t={top:2,right:0,bottom:2,left:0},n=400,r=32,i=!0,s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=e.utils.getColor(["#000"]),l,c;return h.margin=function(e){return arguments.length?(t=e,h):t},h.width=function(e){return arguments.length?(n=e,h):n},h.height=function(e){return arguments.length?(r=e,h):r},h.x=function(e){return arguments.length?(u=d3.functor(e),h):u},h.y=function(e){return arguments.length?(a=d3.functor(e),h):a},h.xDomain=function(e){return arguments.length?(l=e,h):l},h.yDomain=function(e){return arguments.length?(c=e,h):c},h.animate=function(e){return arguments.length?(i=e,h):i},h.color=function(t){return arguments.length?(f=e.utils.getColor(t),h):f},h},e.models.sparklinePlus=function(){function v(e){return e.each(function(e){function C(){var n=d3.event.offsetX-t.left;S.attr("x1",n).attr("x2",n),T.attr("transform",function(e){return"translate("+(n-6)+","+ -t.top+")"}).text(f(Math.round(h.invert(n))));var r=function(e,t){var n=Math.abs(s(e[0])-t),r=0;for(var i=0;i<e.length;i++)Math.abs(s(e[i])-t)<n&&(n=Math.abs(s(e[i])-t),r=i);return r};N.attr("transform",function(e){return"translate("+(n+6)+","+ -t.top+")"}).text(l(o(e[r(e,Math.round(h.invert(n)))])))}var i=n-t.left-t.right,a=r-t.top-t.bottom;if(!e||!e.length||!e.filter(function(e){return e.values.length}).length)return container.append("text").attr("class","nvd3 nv-noData").attr("x",i/2).attr("y",a/2).attr("dy","-.7em").style("text-anchor","middle").text(c),v;container.select(".nv-noData").remove(),h.domain(d3.extent(e,s)).range([0,i]),p.domain(d3.extent(e,o)).range([a,0]);var m=d3.select(this).selectAll("g.nv-wrap.nv-sparklineplus").data([e]),g=m.enter().append("g"),b=g.append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").attr("transform","translate("+t.left+","+t.top+")").style("stroke",function(e,t){return e.color||u(e,t)});d.xDomain(h.domain()).yDomain(p.domain()),b.call(d);var w=b.append("g").attr("class","nv-hoverValue"),E=b.append("g").attr("class","nv-hoverArea");w.attr("transform",function(e){return"translate("+h(e)+",0)"});var S=w.append("line").attr("x1",h.range()[1]).attr("y1",-t.top).attr("x2",h.range()[1]).attr("y2",r),T=w.append("text").attr("class","nv-xValue").attr("text-anchor","end").attr("dy",".9em"),N=w.append("text").attr("class","nv-yValue").attr("text-anchor","start").attr("dy",".9em");E.append("rect").attr("width",i).attr("height",a).on("mousemove",C)}),v}var t={top:15,right:40,bottom:3,left:40},n=400,r=50,i=!0,s=function(e){return e.x},o=function(e){return e.y},u=e.utils.defaultColor(),a=Math.floor(Math.random()*1e5),f=d3.format(",r"),l=d3.format(",.2f"),c="No Data Available.",h=d3.scale.linear(),p=d3.scale.linear(),d=e.models.sparkline();return v.margin=function(e){return arguments.length?(t=e,v):t},v.width=function(e){return arguments.length?(n=e,d.width(e-t.left-t.right),v):n},v.height=function(e){return arguments.length?(r=e,d.height(e-t.top-t.bottom),v):r},v.x=function(e){return arguments.length?(s=d3.functor(e),d.x(e),v):s},v.y=function(e){return arguments.length?(o=d3.functor(e),d.y(e),v):o},v.id=function(e){return arguments.length?(a=e,v):a},v.animate=function(e){return arguments.length?(i=e,v):i},v.noData=function(e){return arguments.length?(c=e,v):c},v},e.models.stackedArea=function(){function b(e){return e.each(function(e){var o=n-t.left-t.right,l=r-t.top-t.bottom,b=d3.select(this);d=m.xScale(),v=m.yScale(),e=e.map(function(e,t){return e.values=e.values.map(function(t,n){return t.index=n,t.stackedY=e.disabled?0:f(t,n),t}),e}),e=d3.layout.stack().order(h).offset(c).values(function(e){return e.values}).x(a).y(function(e){return e.stackedY}).out(function(e,t,n){e.display={y:n,y0:t}})(e);var w=b.selectAll("g.nv-wrap.nv-stackedarea").data([e]),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),S=E.append("defs"),T=E.append("g"),N=w.select("g");T.append("g").attr("class","nv-areaWrap"),T.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+t.left+","+t.top+")"),m.width(o).height(l).x(a).y(function(e){return e.display.y+e.display.y0}).forceY([0]).color(e.map(function(e,t){return e.color||i(e,t)}).filter(function(t,n){return!e[n].disabled}));var C=N.select(".nv-scatterWrap").datum(e.filter(function(e){return!e.disabled}));d3.transition(C).call(m),S.append("clipPath").attr("id","nv-edge-clip-"+u).append("rect"),w.select("#nv-edge-clip-"+u+" rect").attr("width",o).attr("height",l),N.attr("clip-path",p?"url(#nv-edge-clip-"+u+")":"");var k=d3.svg.area().x(function(e,t){return d(a(e,t))}).y0(function(e){return v(e.display.y0)}).y1(function(e){return v(e.display.y+e.display.y0)}),L=d3.svg.area().x(function(e,t){return d(a(e,t))}).y0(function(e){return v(e.display.y0)}).y1(function(e){return v(e.display.y0)}),A=N.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e){return e});A.enter().append("path").on("mouseover",function(e,t){d3.select(this).classed("hover",!0),g.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),g.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("click",function(e,t){d3.select(this).classed("hover",!1),g.areaClick({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}),d3.transition(A.exit()).attr("d",function(e,t){return L(e.values,t)}).remove(),A.attr("class",function(e,t){return this.getAttribute("class")||"nv-area nv-area-"+t+(y?" "+(e.class||"nv-fill"+(t%20>9?"":"0")+t%20):"")}).attr("fill",function(e,t){return e.color||s(e,t)}).attr("stroke",function(e,t){return e.color||s(e,t)}),d3.transition(A).attr("d",function(e,t){return k(e.values,t)}),m.dispatch.on("elementMouseover.area",function(e){N.select(".nv-chart-"+u+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),m.dispatch.on("elementMouseout.area",function(e){N.select(".nv-chart-"+u+" .nv-area-"+e.seriesIndex).classed("hover",!1)})}),b}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=function(e,t){return i(e,t)},o=function(e,t){return i(e,t)},u=Math.floor(Math.random()*1e5),a=function(e){return e.x},f=function(e){return e.y},l="stack",c="zero",h="default",p=!1,d,v,m=e.models.scatter(),g=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout"),y=!1;return m.size(2.2).sizeDomain([2.2]),m.dispatch.on("elementClick.area",function(e){g.areaClick(e)}),m.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],g.tooltipShow(e)}),m.dispatch.on("elementMouseout.tooltip",function(e){g.tooltipHide(e)}),b.dispatch=g,b.scatter=m,d3.rebind(b,m,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),b.color=function(e){return arguments.length?(i=e,b):i},b.fill=function(e){return arguments.length?(s=e,b):s},b.gradient=function(e){return arguments.length?(o=e,b):o},b.useClass=function(e){return arguments.length?(y=e,b):y},b.x=function(e){return arguments.length?(a=d3.functor(e),b):a},b.y=function(e){return arguments.length?(f=d3.functor(e),b):f},b.margin=function(e){return arguments.length?(t=e,b):t},b.width=function(e){return arguments.length?(n=e,b):n},b.height=function(e){return arguments.length?(r=e,b):r},b.clipEdge=function(e){return arguments.length?(p=e,b):p},b.offset=function(e){return arguments.length?(c=e,b):c},b.order=function(e){return arguments.length?(h=e,b):h},b.style=function(e){if(!arguments.length)return l;l=e;switch(l){case"stack":b.offset("zero"),b.order("default");break;case"stream":b.offset("wiggle"),b.order("inside-out");break;case"expand":b.offset("expand"),b.order("default")}return b},b},e.models.stackedAreaChart=function(){function E(e){return e.each(function(a){var S=a.properties,T=a.data,N=d3.select(this),C=this,k=(n||parseInt(N.style("width"))||960)-t.left-t.right,L=(r||parseInt(N.style("height"))||400)-t.top-t.bottom;if(!T||!T.length||!T.filter(function(e){return e.values.length}).length)return N.append("text").attr("class","nvd3 nv-noData").attr("x",k/2).attr("y",L/2).attr("dy","-.7em").style("text-anchor","middle").text(c),E;N.select(".nv-noData").remove(),f=p.xScale(),l=p.yScale();var A=N.selectAll("g.nv-wrap.nv-stackedAreaChart").data([T]),O=A.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),M=A.select("g");O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis"),O.append("g").attr("class","nv-stackedWrap");var _=0,D=0;s&&(O.append("g").attr("class","nv-legendWrap"),g.width(k*(i?.7:1)),M.select(".nv-legendWrap").datum(T).call(g),D=g.height(),t.top!==D+_&&(t.top=D+_,L=(r||parseInt(N.style("height"))||400)-t.top-t.bottom),M.select(".nv-legendWrap").attr("transform","translate("+k*(i?.3:0)+","+ -t.top+")")),o&&S.title&&(O.append("g").attr("class","nv-titleWrap"),M.select(".nv-title").remove(),M.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(S.title).attr("stroke","none").attr("fill","black"),_=parseInt(M.select(".nv-title").node().getBBox().height)+parseInt(M.select(".nv-title").style("margin-top"))+parseInt(M.select(".nv-title").style("margin-bottom")),t.top!==_+D&&(t.top=_+D,L=(r||parseInt(N.style("height"))||400)-t.top-t.bottom),M.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt(M.select(".nv-title").node().getBBox().height))+")")),i&&(O.append("g").attr("class","nv-controlsWrap"),y.width(k*.3).color(["#444"]),M.select(".nv-controlsWrap").datum(h).attr("transform","translate(0,"+(-t.top+_)+")").call(y)),M.attr("transform","translate("+t.left+","+t.top+")"),p.width(k).height(L);var P=M.select(".nv-stackedWrap").datum(T);d3.transition(P).call(p),d.scale(f).ticks(k/100).tickSize(-L,0),M.select(".nv-x.nv-axis").attr("transform","translate(0,"+L+")"),d3.transition(M.select(".nv-x.nv-axis")).call(d),v.scale(l).ticks(p.offset()=="wiggle"?0:L/36).tickSize(-k,0).setTickFormat(p.offset()=="expand"?d3.format("%"):m),d3.transition(M.select(".nv-y.nv-axis")).call(v),p.dispatch.on("areaClick.toggle",function(t){T.filter(function(e){return!e.disabled}).length===1?T=T.map(function(e){return e.disabled=!1,e}):T=T.map(function(e,n){return e.disabled=n!=t.seriesIndex,e}),e.transition().call(E)}),g.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,T.filter(function(e){return!e.disabled}).length||T.map(function(e){return e.disabled=!1,e}),e.transition().call(E)}),y.dispatch.on("legendClick",function(t,n){if(!t.disabled)return;h=h.map(function(e){return e.disabled=!0,e}),t.disabled=!1;switch(t.key){case"Stacked":p.style("stack");break;case"Stream":p.style("stream");break;case"Expanded":p.style("expand")}e.transition().call(E)}),b.on("tooltipShow",function(e){u&&w(e,C.parentNode)}),E.update=function(){e.transition().call(E)},E.container=this}),E}var t={top:30,right:20,bottom:50,left:60},n=null,r=null,i=!0,s=!0,o=!1,u=!0,a=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},f,l,c="No Data Available.",h=[{key:"Stacked"},{key:"Stream",disabled:!0},{key:"Expanded",disabled:!0}],p=e.models.stackedArea(),d=e.models.axis().orient("bottom").tickPadding(5),v=e.models.axis().orient("left"),m=d3.format(",.2f"),g=e.models.legend().height(30),y=e.models.legend().height(30),b=d3.dispatch("tooltipShow","tooltipHide"),w=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=d.tickFormat()(p.x()(t.point,t.pointIndex)),o=v.tickFormat()(p.y()(t.point,t.pointIndex)),u=a(t.series.key,s,o,t,E);e.tooltip.show([r,i],u,null,null,n)};return p.dispatch.on("tooltipShow",function(e){if(!Math.round(p.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],b.tooltipShow(e)}),p.dispatch.on("tooltipHide",function(e){b.tooltipHide(e)}),b.on("tooltipHide",function(){u&&e.tooltip.cleanup()}),E.dispatch=b,E.stacked=p,E.legend=g,E.xAxis=d,E.yAxis=v,d3.rebind(E,p,"x","y","size","xScale","yScale","xDomain","yDomain","sizeDomain","interactive","offset","order","style","clipEdge","forceX","forceY","forceSize","color","gradient","useClass"),E.colorData=function(t){if(arguments[0]==="graduated")var n=arguments[1].c1,r=arguments[1].c2,i=arguments[1].l,s=function(e,t){return d3.interpolateHsl(d3.rgb(n),d3.rgb(r))(t/i)};else if(t==="class"){E.useClass(!0),g.useClass(!0);var s=function(e,t){return"inherit"}}else var s=e.utils.defaultColor();return g.color(s),p.color(s),E},E.colorFill=function(e){if(e==="gradient")var t=function(e,t){return E.gradient()(e,t)};else var t=E.color();return p.fill(t),E},E.margin=function(e){return arguments.length?(t=e,E):t},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.showControls=function(e){return arguments.length?(i=e,E):i},E.showLegend=function(e){return arguments.length?(s=e,E):s},E.showTitle=function(e){return arguments.length?(o=e,E):o},E.tooltips=function(e){return arguments.length?(u=e,E):u},E.tooltip=function(e){return arguments.length?(a=e,E):a},E.noData=function(e){return arguments.length?(c=e,E):c},v.setTickFormat=v.tickFormat,v.tickFormat=function(e){return arguments.length?(m=e,v):m},E},e.models.treemap=function(){function w(a){return a.each(function(a){function E(e){var t,n,r=d.length;if(e.children&&u(e,r)&&d.indexOf(u(e,r))===-1){d.push(u(e,r)),n=e.children.length;for(t=0;t<n;t++)E(e.children[t])}}function P(e){function h(e){g.elementMouseout();if(C||!e)return;C=!0;var t=P(e),n=r.transition().duration(750),i=t.transition().duration(750);f.domain([e.x,e.x+e.dx]),l.domain([e.y,e.y+e.dy]),N.style("shape-rendering",null),N.selectAll(".nv-depth").sort(function(e,t){return e.depth-t.depth}),t.selectAll("text").style("fill-opacity",0),n.selectAll("text").call(b).style("fill-opacity",0),i.selectAll("text").call(b).style("fill-opacity",1),n.selectAll("rect").call(w),i.selectAll("rect").call(w),n.remove().each("end",function(){N.style("shape-rendering","crispEdges"),C=!1})}function y(e){e.children&&(n.nodes({children:e.children}),e.children.forEach(function(t){t.x=e.x+t.x*e.dx,t.y=e.y+t.y*e.dy,t.dx*=e.dx,t.dy*=e.dy,t.parent=e,y(t)}))}function b(e){e.attr("x",function(e){return f(e.x)+6}).attr("y",function(e){return l(e.y)+6})}function w(e){e.attr("x",function(e){return f(e.x)}).attr("y",function(e){return l(e.y)}).attr("width",function(e){return f(e.x+e.dx)-f(e.x)}).attr("height",function(e){return l(e.y+e.dy)-l(e.y)}).attr("class",function(e,t){return v&&p(e,t)&&d3.select(this).classed(p(e,t),!0),this.getAttribute("class")}).attr("fill",function(e,t){return d3.select(this).classed("nv-parent")?this.getAttribute("fill"):this.getAttribute("fill")||c(e,d.indexOf(p(e,t)))})}function E(e){return e.parent?E(e.parent)+" / "+u(e):u(e)}var n=d3.layout.treemap().value(o).sort(function(e,t){return o(e)-o(t)}).round(!1);y(e),D.datum(e.parent).on("click",h).select("text").text(E(e));var r=M.insert("g",".nv-grandparent").attr("class","nv-depth").attr("height",T).attr("transform","translate("+t.left+","+t.top+")"),i=r.selectAll("g").data(e.children).enter().append("g");i.filter(function(e){return e.children}).classed("nv-children",!0).on("click",h),i.filter(function(e){return!e.children}).on("click",m),i.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),g.elementMouseover({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:s})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),g.elementMouseout()}).on("mousemove",function(e,t){g.elementMousemove({point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:s})});var a=i.selectAll(".nv-child").data(function(e){return e.children||[e]}).enter().append("rect").attr("class","nv-child").call(w);return a.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),g.elementMouseover({label:u(e),value:o(e),point:e,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:s})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),g.elementMouseout()}),i.append("rect").attr("class","nv-parent").call(w),i.append("text").attr("dy",".75em").text(function(e){return u(e)}).call(b),i}var h=a[0];E(h);var S=n-t.left-t.right,T=r-t.top-t.bottom,N=d3.select(this),C,k=function(t,n){return e.utils.colorLinearGradient(t,n,"vertical",i(t,n),L.select("defs"))};w.gradient(k),h.dx=S,h.dy=T,f=d3.scale.linear().domain([0,S]).range([0,S]),l=d3.scale.linear().domain([0,T]).range([0,T]),y=y||f,b=b||l;var L=N.selectAll("g.nv-wrap.nv-treemap").data([h]),A=L.enter().append("g").attr("class","nvd3 nv-wrap nv-treemap"),O=A.append("defs"),M=A.append("g"),_=L.select("g"),D=M.append("g").attr("class","nv-grandparent");D.append("rect").attr("width",n).attr("height",t.top),D.append("text").attr("x",6).attr("y",6).attr("dy",".75em"),P(h)}),w}var t={top:20,right:0,bottom:0,left:0},n=0,r=0,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e4),o=function(e){return e.size},u=function(e){return e.name},a=!0,f,l,i=e.utils.defaultColor(),c=function(e,t){return i(e,t)},h=function(e,t){return i(e,t)},p=function(e,t){return"nv-fill"+(t%20>9?"":"0")+t%20},d=[],v=!1,m=function(){return!1},g=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),y,b;return w.dispatch=g,w.color=function(e){return arguments.length?(i=e,w):i},w.fill=function(e){return arguments.length?(c=e,w):c},w.gradient=function(e){return arguments.length?(h=e,w):h},w.useClass=function(e){return arguments.length?(v=e,w):v},w.x=function(e){return arguments.length?(getX=e,w):getX},w.y=function(e){return arguments.length?(getY=e,w):getY},w.margin=function(e){return arguments.length?(t=e,w):t},w.width=function(e){return arguments.length?(n=e,w):n},w.height=function(e){return arguments.length?(r=e,w):r},w.xScale=function(e){return arguments.length?(f=e,w):f},w.yScale=function(e){return arguments.length?(l=e,w):l},w.xDomain=function(e){return arguments.length?(xDomain=e,w):xDomain},w.yDomain=function(e){return arguments.length?(yDomain=e,w):yDomain},w.id=function(e){return arguments.length?(s=e,w):s},w.leafClick=function(e){return arguments.length?(m=e,w):m},w.getSize=function(e){return arguments.length?(o=e,w):o},w.getName=function(e){return arguments.length?(u=e,w):u},w.className=function(e){return arguments.length?(p=e,w):p},w.groups=function(e){return arguments.length?(d=e,w):d},w},e.models.treemapChart=function(){function g(e){return e.each(function(o){var f=[o],c=d3.select(this),b=this,w=(i||parseInt(c.style("width"))||960)-r.left-r.right,E=(s||parseInt(c.style("height"))||400)-r.top-r.bottom;if(!f||!f.length||!f.filter(function(e){return e.children.length}).length)return c.append("text").attr("class","nvd3 nv-noData").attr("x",w/2).attr("y",E/2).attr("dy","-.7em").style("text-anchor","middle").text(d),g;c.select(".nv-noData").remove(),h=t.xScale(),p=t.yScale();var S=c.selectAll("g.nv-wrap.nv-treemapWithLegend").data([f]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-treemapWithLegend").append("g"),N=S.select("g");T.append("g").attr("class","nv-treemapWrap");var C=0,k=0;u&&(T.append("g").attr("class","nv-legendWrap"),n.width(w+r.left),N.select(".nv-legendWrap").datum(f).call(n),k=n.height()+10,r.top!==k+C&&(r.top=k+C,E=(s||parseInt(c.style("height"))||400)-r.top-r.bottom),N.select(".nv-legendWrap").attr("transform","translate("+ -r.left+","+ -r.top+")")),a&&properties.title&&(T.append("g").attr("class","nv-titleWrap"),N.select(".nv-title").remove(),N.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(properties.title).attr("stroke","none").attr("fill","black"),C=parseInt(N.select(".nv-title").style("height"))+parseInt(N.select(".nv-title").style("margin-top"))+parseInt(N.select(".nv-title").style("margin-bottom")),r.top!==C+k&&(r.top=C+k,E=(s||parseInt(c.style("height"))||400)-r.top-r.bottom),N.select(".nv-titleWrap").attr("transform","translate(0,"+(-r.top+parseInt(N.select(".nv-title").style("height")))+")")),S.attr("transform","translate("+r.left+","+r.top+")"),t.width(w).height(E);var L=N.select(".nv-treemapWrap").datum(f.filter(function(e){return!e.disabled}));d3.transition(L).call(t),n.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,f.filter(function(e){return!e.disabled}).length||f.map(function(e){return e.disabled=!1,S.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(g)}),v.on("tooltipShow",function(e){l&&m(e,b.parentNode)}),g.update=function(){e.transition().call(g)},g.container=this}),g}var t=e.models.treemap(),n=e.models.legend(),r={top:10,right:10,bottom:10,left:10},i=null,s=null,o=e.utils.defaultColor(),u=!1,a=!1,f=null,l=!0,c=function(e){var t="<p>Value: <b>"+d3.format(",.2s")(e.value)+"</b></p>"+"<p>Name: <b>"+e.name+"</b></p>";return t},h,p,d="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide","tooltipMove","elementMousemove"),m=function(t,n){var r=t.pos[0],i=t.pos[1],s=c(t.point);f=e.tooltip.show([r,i],s,null,null,n)};return t.dispatch.on("elementMouseover",function(e){e.pos=[e.pos[0]+r.left,e.pos[1]+r.top],v.tooltipShow(e)}),t.dispatch.on("elementMouseout",function(e){v.tooltipHide(e)}),v.on("tooltipHide",function(){l&&e.tooltip.cleanup()}),t.dispatch.on("elementMousemove",function(e){v.tooltipMove(e)}),v.on("tooltipMove",function(t){f&&e.tooltip.position(f,t.pos)}),g.dispatch=v,g.legend=n,g.treemap=t,d3.rebind(g,t,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","color","gradient","useClass","leafClick","getSize","getName","className","groups"),g.colorData=function(r){if(arguments[0]==="graduated")var i=arguments[1].c1,s=arguments[1].c2,o=arguments[1].l,u=function(e,t){return d3.interpolateHsl(d3.rgb(i),d3.rgb(s))(t/o)};else if(r==="class"){t.useClass(!0),n.useClass(!0);var u=function(e,t){return"inherit"}}else var u=e.utils.defaultColor();return t.color(u),n.color(u),g},g.colorFill=function(e){if(e==="gradient")var n=function(e,t){return g.gradient()(e,t)};else var n=g.color();return t.fill(n),g},g.x=function(e){return arguments.length?(getX=e,t.x(e),g):getX},g.y=function(e){return arguments.length?(getY=e,t.y(e),g):getY},g.margin=function(e){return arguments.length?(r=e,g):r},g.width=function(e){return arguments.length?(i=e,g):i},g.height=function(e){return arguments.length?(s=e,g):s},g.color=function(t){return arguments.length?(o=e.utils.getColor(t),n.color(o),g):o},g.showLegend=function(e){return arguments.length?(u=e,g):u},g.showTitle=function(e){return arguments.length?(a=e,g):a},g.tooltip=function(e){return arguments.length?(f=e,g):f},g.tooltips=function(e){return arguments.length?(l=e,g):l},g.tooltipContent=function(e){return arguments.length?(c=e,g):c},g.noData=function(e){return arguments.length?(d=e,g):d},g},e.models.tree=function(){function k(e){return e.each(function(e){var o=d3.svg.diagonal().projection(function(e){return[g(e),y(e)]}),l=d3.behavior.zoom().scaleExtent([i.min,i.max]).on("zoom",function(){N.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}),c=d3.select(this),h=c.selectAll(".nv-wrap").data([1]),p=h.enter().append("g").attr("class","nvd3 nv-wrap").attr("id","nv-chart-"+f).call(l),x=p.append("defs"),T=p.append("svg:rect").attr("id","backg").attr("transform","translate("+n.left+","+n.top+")").style("fill","transparent"),N=p.append("g"),C=N.append("g").attr("class","nv-tree").attr("id","vis"),L=d3.layout.tree().size(null).elementsize([a?s.height:s.width,1]).separation(function(t,n){return t.parent==n.parent?1:1}),A={width:parseInt(c.style("width"),10),height:parseInt(c.style("height"),10)};e.x0=e.x0||0,e.y0=e.y0||0;var O=e;k.showall=function(){function e(t){if(t.children&&t.children.length||t._children&&t._children.length)t._children&&t._children.length&&(t.children=t._children,t._children=null),t.children.forEach(e)}e(O),l.translate([0,0]).scale(1),N.attr("transform","translate("+[0,0]+")scale("+1+")"),k.update(O)},k.resize=function(){A={width:parseInt(c.style("width"),10),height:parseInt(c.style("height"),10)},k.reset(),k.update(O)},k.orientation=function(e){a=e==="horizontal"||!a?!0:!1,k.reset(),k.update(O)},k.reset=function(){l.translate([0,0]).scale(1),N.attr("transform","translate("+[0,0]+")scale("+1+")")},k.zoom=function(e){var t=e>0?i.max:i.min,n=Math.min(Math.max(l.scale()+e,i.min),i.max);return n!==t&&(l.translate([0,0]).scale(n),N.attr("transform","translate("+[0,0]+")scale("+n+")")),n},k.zoomLevel=function(e){var t=Math.min(Math.max(e,i.min),i.max);return l.translate([0,0]).scale(t),N.attr("transform","translate("+[0,0]+")scale("+t+")"),t},k.filter=function(t){function i(e){E(e)===t?(n=e,r=!0):!r&&e.children&&e.children.forEach(i)}var n={},r=!1;i(e),n.x0=0,n.y0=0,O=n,k.update(O)},k.update=function(e){function i(e){f(e),k.update(e)}function f(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null)}var l=L.nodes(O),c=l[0],h={width:A.width-n.left-n.right,height:A.height-n.top-n.bottom
},p={width:d3.min(l,g)+d3.max(l,g),height:d3.min(l,y)+d3.max(l,y)};a?p.width=p.width*s.width*2+s.width:p.height=p.height*s.height*2+s.height;var S=d3.min([h.width/p.width,h.height/p.height]),x=h.width/p.width<h.height/p.height?[0,(h.height/S-p.height)/2]:[(h.width/S-p.width)/2,0],N={top:a?n.top/2:s.height,left:a?s.width:n.left/2};T.attr("width",h.width).attr("height",h.height),C.attr("transform","translate("+[(N.left+x[0])*S,(N.top+x[1])*S]+")scale("+S+")"),l.forEach(function(e){d(e,e.depth*(a?2*s.width:2*s.height))});var M=C.selectAll("g.nv-card").data(l,E),_=M.enter().append("svg:g").attr("class","nv-card").attr("id",function(e){return"nv-card-"+E(e)}).attr("transform",function(t){return y(e)===0?"translate("+g(c)+","+y(c)+")":"translate("+b(e)+","+w(e)+")"}).on("click",i);_.append("foreignObject").attr("class","nv-foreign-object").attr("width",1).attr("height",1).attr("x",-1).attr("y",-1).append("xhtml:body").style("font","14px 'Helvetica Neue'").html(u);var D=_.append("svg:g").attr("class","nv-expcoll").style("opacity",1e-6);D.append("svg:circle").attr("class","nv-circ-back").attr("r",t),D.append("svg:line").attr("class","nv-line-vert").attr("x1",0).attr("y1",.5-t).attr("x2",0).attr("y2",t-.5).style("stroke","#bbb"),D.append("svg:line").attr("class","nv-line-hrzn").attr("x1",.5-t).attr("y1",0).attr("x2",t-.5).attr("y2",0).style("stroke","#fff");var P=M.transition().duration(r).attr("transform",function(e){return"translate("+g(e)+","+y(e)+")"});P.select(".nv-expcoll").style("opacity",function(e){return e.children&&e.children.length||e._children&&e._children.length?1:0}),P.select(".nv-circ-back").style("fill",function(e){return e._children&&e._children.length?"#777":e.children?"#bbb":"none"}),P.select(".nv-line-vert").style("stroke",function(e){return e._children&&e._children.length?"#fff":"#bbb"}),P.selectAll(".nv-foreign-object").attr("width",s.width).attr("height",s.height).attr("x",a?-s.width+t:-s.width/2).attr("y",a?-s.height/2+t:-s.height+t*2);var H=M.exit().transition().duration(r).attr("transform",function(t){return"translate("+g(e)+","+y(e)+")"}).remove();H.selectAll(".nv-expcoll").style("stroke-opacity",1e-6),H.selectAll(".nv-foreign-object").attr("width",1).attr("height",1).attr("x",-1).attr("y",-1);var B=C.selectAll("path.link").data(L.links(l),function(e){return e.source.id+"-"+e.target.id});B.enter().insert("svg:path","g").attr("class","link").attr("d",function(t){var n=y(e)===0?{x:e.x,y:e.y}:{x:e.x0,y:e.y0};return o({source:n,target:n})}),B.transition().duration(r).attr("d",o),B.exit().transition().duration(r).attr("d",function(t){var n={x:e.x,y:e.y};return o({source:n,target:n})}).remove(),l.forEach(function(e){v(e,g(e)),m(e,y(e))})},k.gradient(S),k.update(O)}),k}var t=5.5,n={top:10,right:10,bottom:10,left:10},r=300,i={min:.25,max:2},s={width:100,height:50},o="../img/",u=function(e){return'<div class="nv-tree-node"></div>'},a=!1,f=Math.floor(Math.random()*1e4),l=e.utils.defaultColor(),c=function(e,t){return l(e,t)},h=function(e,t){return l(e,t)},p=function(e,t){e.x=t},d=function(e,t){e.y=t},v=function(e,t){a?e.y0=t:e.x0=t},m=function(e,t){a?e.x0=t:e.y0=t},g=function(e){return a?e.y:e.x},y=function(e){return a?e.x:e.y},b=function(e){return a?e.y0:e.x0},w=function(e){return a?e.x0:e.y0},E=function(e){return e.id},S=function(t,n){return e.utils.colorRadialGradient(t,n,0,0,"35%","35%",l(t,n),wrap.select("defs"))},x=!1,T=d3.format(",.2f"),N=!0,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return k.dispatch=C,k.color=function(e){return arguments.length?(l=e,k):l},k.fill=function(e){return arguments.length?(c=e,k):c},k.gradient=function(e){return arguments.length?(h=e,k):h},k.useClass=function(e){return arguments.length?(x=e,k):x},k.width=function(e){return arguments.length?(width=e,k):width},k.height=function(e){return arguments.length?(height=e,k):height},k.values=function(e){return arguments.length?(getValues=e,k):getValues},k.x=function(e){return arguments.length?(g=e,k):g},k.y=function(e){return arguments.length?(y=d3.functor(e),k):y},k.showLabels=function(e){return arguments.length?(N=e,k):N},k.id=function(e){return arguments.length?(f=e,k):f},k.valueFormat=function(e){return arguments.length?(T=e,k):T},k.labelThreshold=function(e){return arguments.length?(labelThreshold=e,k):labelThreshold},k.radius=function(e){return arguments.length?(t=e,k):t},k.duration=function(e){return arguments.length?(r=e,k):r},k.zoomExtents=function(e){return arguments.length?(i=e,k):i},k.padding=function(e){return arguments.length?(n=e,k):n},k.nodeSize=function(e){return arguments.length?(s=e,k):s},k.nodeImgPath=function(e){return arguments.length?(o=e,k):o},k.nodeRenderer=function(e){return arguments.length?(u=e,k):u},k.horizontal=function(e){return arguments.length?(a=e,k):a},k.getId=function(e){return arguments.length?(E=e,k):E},k},e.models.bubble=function(){function E(a){return a.each(function(a){var c=r-t.left-t.right,h=i-t.top-t.bottom,p=d3.select(this),v=function(t,n){return e.utils.colorLinearGradient(t,n,"vertical",d(t,n),b.select("defs"))};E.gradient(v);var m=d3.extent(d3.merge(a.map(function(e){return e.values.map(function(e,t){return w.parse(e.x)})}))),g=[d3.time.month.floor(m[0]),d3.time.day.offset(d3.time.month.ceil(m[1]),-1)],y=d3.extent(d3.merge(a.map(function(e){return e.values.map(function(e,t){return f(e,t)})})).concat(l));n.id(u).size(function(e){return e.opportunity}).sizeRange([256,2048]).singlePoint(!0).xScale(s).xDomain(g).yScale(o).yDomain(y).width(c).height(h).id(E.id());var b=p.selectAll("g.nv-wrap.nv-bubble").data([a]),S=b.enter().append("g").attr("class","nvd3 nv-wrap nv-bubble"),T=S.append("g"),N=b.select("g");T.append("g").attr("class","nv-bubbleWrap");var C=b.select(".nv-bubbleWrap");d3.transition(C).call(n)}),E}var t={top:0,right:0,bottom:0,left:0},n=e.models.scatter(),r=960,i=500,s=d3.time.scale(),o=n.yScale(),u=Math.floor(Math.random()*1e4),a=function(e){return e.x},f=function(e){return e.y},l=[0],c=!1,h,p,d=e.utils.defaultColor(),v=function(e,t){return d(e,t)},m=function(e,t){return d(e,t)},g=!1,y=1,b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w=d3.time.format("%Y-%m-%d");return E.dispatch=n.dispatch,E.scatter=n,d3.rebind(E,n,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius","color","gradient","useClass"),E.color=function(e){return arguments.length?(d=e,n.color(d),E):d},E.fill=function(e){return arguments.length?(v=e,n.fill(v),E):v},E.gradient=function(e){return arguments.length?(m=e,n.gradient(e),E):m},E.useClass=function(e){return arguments.length?(g=e,n.useClass(e),E):g},E.classStep=function(e){return arguments.length?(y=e,n.classStep(e),E):y},E.x=function(e){return arguments.length?(a=e,n.x(e),E):a},E.y=function(e){return arguments.length?(f=e,n.y(e),E):f},E.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,E):t},E.width=function(e){return arguments.length?(r=e,E):r},E.height=function(e){return arguments.length?(i=e,E):i},E.xScale=function(e){return arguments.length?(s=e,E):s},E.yScale=function(e){return arguments.length?(o=e,E):o},E.xDomain=function(e){return arguments.length?(h=e,E):h},E.yDomain=function(e){return arguments.length?(p=e,E):p},E.forceY=function(e){return arguments.length?(l=e,E):l},E.id=function(e){return arguments.length?(u=e,E):u},E.clipEdge=function(e){return arguments.length?(c=e,E):c},E},e.models.bubbleChart=function(){function k(e){return e.each(function(n){function C(e){function t(e){return 32-(new Date(e.getFullYear(),e.getMonth(),32)).getDate()}var n=d3.extent(d3.merge(e.map(function(e){return e.values.map(function(e,t){return d3.time.format("%Y-%m-%d").parse(i(e))})}))),r=d3.time.month.range(d3.time.month.floor(n[0]),d3.time.month.ceil(n[1])),s=r.map(function(e){return d3.time.day.offset(d3.time.month.floor(e),-1+t(e)/2)});return s}function L(e){var t=d3.nest().key(o).entries(e),n=m/t.length,r=n*.25,i=[0,1],s=[0,1],u=d3.scale.linear().domain(i).range(s),a=[],f=0;return t.map(function(e,t){return e.total=0,e.values=e.values.sort(function(e,t){return t.y<e.y?-1:t.y>e.y?1:0}).map(function(t){return e.total+=t.y,t}),e.group=t,e}).sort(function(e,t){return e.total<t.total?-1:e.total>t.total?1:0}).map(function(e,t){return f+=e.total,i=d3.extent(e.values.map(function(e){return e.y})),s=[n*t+r,n*(t+1)-r],u.domain(i).range(s),e.values=e.values.map(function(t){return t.group=e.group,t.opportunity=t.y,t.y=u(t.opportunity),t}),a.push({y:d3.min(e.values.map(function(e){return e.y})),key:e.key}),e}),a}var r=n.properties,s=n.data,a=d3.select(this),f=this,h=h||parseInt(a.style("width"),10),p=p||parseInt(a.style("height"),10),d=(h||960)-t.left-t.right,m=(p||400)-t.top-t.bottom,A=L(s);if(!s||!s.length)return a.append("text").attr("class","nvd3 nv-noData").attr("x",d/2).attr("y",m/2).attr("dy","-.7em").style("text-anchor","middle").text(g),k;a.select(".nv-noData").remove();var O=d3.nest().key(u).entries(s);k.render=function(){var e=a.selectAll("g.nv-wrap.nv-bubbleChart").data([O]),n=e.enter().append("g").attr("class","nvd3 nv-wrap nv-bubbleChart").append("g"),i=e.select("g");n.append("g").attr("class","nv-x nv-axis"),n.append("g").attr("class","nv-y nv-axis"),n.append("g").attr("class","nv-bubblesWrap");var s=0,o=0;l&&(n.append("g").attr("class","nv-legendWrap"),x.width(h*(c?.7:1)-10).key(function(e){return e.key+"%"}),i.select(".nv-legendWrap").datum(O).call(x),o=x.height(),t.top<Math.max(o,s)&&(t.top=Math.max(o,s),m=(p||parseInt(a.style("height"),10)||400)-t.top-t.bottom),i.select(".nv-legendWrap").attr("transform","translate("+(h*(c?.3:0)-t.left+10)+","+ -t.top+")")),c&&r.title&&(n.append("g").attr("class","nv-titleWrap"),i.select(".nv-title").remove(),i.select(".nv-titleWrap").append("text").attr("class","nv-title").attr("x",0).attr("y",0).attr("text-anchor","start").text(r.title).attr("stroke","none").attr("fill","black"),s=parseInt(i.select(".nv-title").node().getBBox().height,10)+parseInt(i.select(".nv-title").style("margin-top"),10)+parseInt(i.select(".nv-title").style("margin-bottom"),10),t.top<Math.max(o,s)&&(t.top=Math.max(o,s),m=(p||parseInt(a.style("height"),10)||400)-t.top-t.bottom),i.select(".nv-titleWrap").attr("transform","translate(0,"+(-t.top+parseInt(i.select(".nv-title").node().getBBox().height,10))+")")),e.attr("transform","translate("+t.left+","+t.top+")"),y.width(d).height(m);var u=i.select(".nv-bubblesWrap").datum(O.filter(function(e){return!e.disabled}));d3.transition(u).call(y),E.scale(b).ticks(d3.time.months,1).tickSize(0).tickValues(C(O)).showMaxMin(!1).tickFormat(function(e){return d3.time.format("%b")(new Date(e))}),i.select(".nv-x.nv-axis").attr("transform","translate(0,"+w.range()[0]+")"),d3.transition(i.select(".nv-x.nv-axis")).call(E),S.scale(w).ticks(O.length).tickValues(A.map(function(e,t){return A[t].y})).tickSize(-d,0).tickFormat(function(e,t){return A[t].key}),d3.transition(i.select(".nv-y.nv-axis")).call(S)},x.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,s.filter(function(e){return!e.disabled}).length||s.map(function(e){return e.disabled=!1,wrap.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(k.render)}),T.on("tooltipShow",function(e){v&&N(e,f.parentNode)}),k.render(),k.update=function(){k(e)},k.container=this}),k}var t={top:70,right:20,bottom:30,left:100},n=null,r=null,i=function(e){return e.x},s=function(e){return e.y},o=function(e){return e.y},u=function(e){return e.y},a=e.utils.defaultColor(),f=1,l=!0,c=!1,h=!0,p=!1,d=0,v=!0,m=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},g="No Data Available.",y=e.models.bubble(),b=y.xScale(),w=y.yScale(),E=e.models.axis().orient("bottom").tickPadding(5).highlightZero(!1).showMaxMin(!1),S=e.models.axis().orient("left").highlightZero(!1).showMaxMin(!1),x=e.models.legend(),T=d3.dispatch("tooltipShow","tooltipHide"),N=function(n,r){var i={left:0,right:0};if(r){var s=d3.select(r).select("svg"),o=s.attr("viewBox");i=e.utils.getAbsoluteXY(r);if(o){o=o.split(" ");var u=parseInt(s.style("width"),10)/o[2];n.pos[0]=n.pos[0]*u,n.pos[1]=n.pos[1]*u}}var a=n.pos[0]+(i.left||0)+t.left,f=n.pos[1]+(i.top||0)+t.top,l=n.point.x,c=n.point.y,h=m(n.series.key,l,c,n,k);e.tooltip.show([a,f],h,null,null,r)},C=function(e){return};return y.dispatch.on("elementMouseover.tooltip",function(e){T.tooltipShow(e)}),y.dispatch.on("elementMouseout.tooltip",function(e){T.tooltipHide(e)}),T.on("tooltipHide",function(){v&&e.tooltip.cleanup()}),y.dispatch.on("elementClick",function(e){C(e)}),k.dispatch=T,k.bubbles=y,k.legend=x,k.xAxis=E,k.yAxis=S,d3.rebind(k,y,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","color","gradient","useClass"),k.colorData=function(t){if(arguments[0]==="graduated")var n=arguments[1].c1,r=arguments[1].c2,i=arguments[1].l,s=function(e,t){return d3.interpolateHsl(d3.rgb(n),d3.rgb(r))(t/i)};else if(t==="class"){y.useClass(!0),x.useClass(!0),y.classStep(f),x.classStep(f);var s=function(e,t){return"inherit"}}else var s=function(t,n){return e.utils.defaultColor()(t,n)};return y.color(s),x.color(s),k},k.classStep=function(e){return arguments.length?(f=e,k):f},k.colorFill=function(e){if(e==="gradient")var t=function(e,t){return k.gradient()(e,t)};else var t=k.color();return y.fill(t),k},k.margin=function(e){return arguments.length?(t=e,k):t},k.width=function(e){return arguments.length?(n=e,k):n},k.height=function(e){return arguments.length?(r=e,k):r},k.showLegend=function(e){return arguments.length?(l=e,k):l},k.showTitle=function(e){return arguments.length?(c=e,k):c},k.tooltips=function(e){return arguments.length?(v=e,k):v},k.tooltip=function(e){return arguments.length?(m=e,k):m},k.noData=function(e){return arguments.length?(g=e,k):g},k.bubbleClick=function(e){return arguments.length?(C=e,k):C},k.groupBy=function(e){return arguments.length?(o=e,k):o},k.filterBy=function(e){return arguments.length?(u=e,k):u},k}})();