<soda>
	<puts text="Test: Reports_1770.xml starting." />
	<!--
	1. Login to system with valid user, such as "user1".
	2. Click "Reports" navigation tab to go to Report module.
	3. Create a summation report with a name and set "Team" as
		private team, such as "Team" -> "(user1)".
	4. Click "Home" navigation tab.  
		/* Franklin 01/20/2011: changed Dashboard to Home for 6.1.2 release */
	5. Check the item of "Add Sugar Dashlets" list on "Dashboard: Home" page.
	-->

	<csv file="{@global.scriptsdir}/modules/lib/SugarInit_Lib.csv" var="user">
		<browser url="{@global.url}" />

		<link text="Log Out" required="false" timeout="2" />
		<browser assert="Please enter your user name and password" />

		<textfield id="user_name" set="{@user.last_name}" />
		<textfield id="user_password" set="{@user.pass}" />
		<button id="login_button" />

		<browser assert="/Welcome(, | to Sugar!)/" />
	</csv>
	
	<link id="moduleTab_Reports" />
	
	<link text="Create Report" />
	
	<wait timeout="3" />
	
	<javascript addUtils="true">
			SUGAR.reports.selectReportType('summation');
	</javascript>
	
	<wait timeout="3" />
	
	<table id="Accounts">
		<link text="Accounts" />
	</table>
	
	<javascript addUtils="true">
		javascript:SUGAR.reports.populateFieldGrid('Accounts','','');
		SUGAR.reports.showWizardStep(0);
	</javascript>
	
	<div text="Name" click="true" />
	
	<!-- step through the "next" buttons of report generation -->
	<javascript addUtils="true">
		SUGAR.reports.showWizardStep(0);
		SUGAR.reports.showWizardStep(0);
		SUGAR.reports.showWizardStep(0);
	</javascript>
	
	<timestamp />
	<var var="report_name" set="Report_{@stamp}" />
	
	<!-- hack to enable field validation to work -->
	
	<textfield name="save_report_as" set="{@report_name}" />
	<textfield id="team_name_collection_0" set="{@user.last_name}" jscriptevent="onkeydown" />
	<textfield id="team_name_collection_0" jscriptevent="onkeyup" click="false" />
	<wait timeout="2" />
	
	<javascript addUtils="true">
		SUGAR.reports.saveReport();
	</javascript>
	
	<link id="moduleTab_Reports" />
	<link text="{@report_name}" />
	
	<javascript addUtils="true">
		<!-- this is a javascript hack to enable the first of the favorites... -->
		stars = document.getElementsByClassName('off');
		var star = stars[0];
		star.onclick();
	</javascript>
	
	<wait timeout="2" />
	
	<link id="moduleTab_Home" />
	<link id="add_dashlets" />
	<link class="mbLBLL" text="My Favorite Reports" />
	
	<browser assert="{@report_name}" />

	<!-- clean up -->
	
	<div class="dashletToolSet" index="1">
		<link index="2" alert="true" />
	</div>

	<script file="{@global.scriptsdir}/modules/lib/Report_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/login.xml" />
	
</soda>
	