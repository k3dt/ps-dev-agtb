<soda>
	<!--
		Action:
			1. Login to system as a valid user.
			2. Click "Calendar" navigation tab.
			3. Click "Meetings" link on Navigation shortcuts.
			4. Click "Advanced" link in "Meeting Search" sub-panel.
			5. Enter more advanced search condition in the open out
				"Meeting Search" sub-panel. like "Subject", "Contact",
				check or un-check "Only my items" check box,
				select "Assigned to", "Status".
			6. Click "Search" button.
		Expectation:
			6. The match scheduled meetings are displayed in the "Meeting List" view.
	-->
	
	<puts text="Test: Calendar_0706.xml starting." />

	<script file="{@global.scriptsdir}/modules/lib/Contact_Create_Lib.xml" />
	
	<script file="{@global.scriptsdir}/modules/lib/Meeting_Create_Lib.xml" />
	<var var="meeting1_name" set="{@pre_meeting_name}" />
	
	<script file="{@global.scriptsdir}/modules/lib/Meeting_Create_Lib.xml" />
	<var var="meeting2_name" set="{@pre_meeting_name}" />	
	
	
	<link id="moduleTab_Meetings" />
	
	<button id="search_form_clear" />
	<textfield id="name_basic" set="{@meeting2_name}" />
	<button id="search_form_submit" />
	
	<browser assert="{@meeting2_name}" />
	<link text="{@meeting2_name}" />
	
	<button id="edit_button" />
	
	<textfield name="search_last_name" set="{@pre_contact_last_name}" />
	<button value="Search" />
	<javascript loadUtils="true">
		SugarWidgetSchedulerAttendees.form_add_attendee(0);
	</javascript>
	
	<wait timeout="5" />
	
	<textfield id="assigned_user_name" set="qauser" jscriptevent="onkeydown" />
	<textfield id="assigned_user_name" jscriptevent="onkeyup" click="false" />
	<wait timeout="2" />
	
	<select id="status" set="Held" />
	
	<button value="Save" />
	
	<wait timeout="8" />
	
	<link id="moduleTab_Meetings" />
	
	<link text="Advanced Search" />
	
	<button id="search_form_clear" />	
	
	<!-- simple search for meeting 2 -->
	<textfield id="name_advanced" set="{@meeting2_name}" />
	<button id="search_form_submit" />
	
	<table class="list view">
		<browser assert="{@meeting2_name}" />
		<browser assertnot="{@meeting1_name}" />
	</table>
	
	<!-- Star meeting2 while we're here... -->
	
	<javascript addUtils="true">
            <!-- this is a javascript hack to enable the first of 
			the favorites... -->
        stars = document.getElementsByClassName('off');
        var star = stars[0];
		star.onclick();
    </javascript>

	
	<button id="search_form_clear" />

	<!-- simple search for meeting 1 -->
	<textfield id="name_advanced" set="{@meeting1_name}" />
	<button id="search_form_submit" />
	
	<table class="list view">
		<browser assert="{@meeting1_name}" />
		<browser assertnot="{@meeting2_name}" />
	</table>	

	<button id="search_form_clear" />
	
	<!-- search for my items (#1) -->
	<checkbox id="current_user_only_advanced" set="true" />
	<button id="search_form_submit" />
	
	<table class="list view">
		<browser assert="{@meeting1_name}" />
		<browser assertnot="{@meeting2_name}" />
	</table>

	<button id="search_form_clear" />
	
	<!-- search for favorite (#2) -->
	<checkbox id="favorites_only_advanced" set="true" />
	<button id="search_form_submit" />
	<table class="list view">
		<browser assert="{@meeting2_name}" />
		<browser assertnot="{@meeting1_name}" />
	</table>
	
	<button id="search_form_clear" />
	
	<!-- search for "held" only (#2) -->
	<select name="status_advanced[]" set="Held" />
	<button id="search_form_submit" />
	<table class="list view">
		<browser assert="{@meeting2_name}" />
		<browser assertnot="{@meeting1_name}" />
	</table>
	
	<button id="search_form_clear" />
	
	<!-- Below is reason for blocking: BUG:42919 -->
	<!-- search for contact association (#2) -->
	<select id="parent_type" set="Contact" />
	<textfield id="parent_name_advanced" set="{@pre_contact_first_name} {@pre_contact_last_name}"
		jscriptevent="onkeydown" />
	<textfield id="parent_name_advanced" jscriptevent="onkeyup" click="false" />
	<wait timeout="4" />
	<button id="search_form_submit" />
	<table class="list view">
		<browser assert="{@meeting2_name}" />
		<browser assertnot="{@meeting1_name}" />
	</table>	
	
	<button id="search_form_clear" />
	
	<!-- search for "owned by qasuer" (#2) -->
	<select name="assigned_user_id_advanced[]" set="qauser" />
	<button id="search_form_submit" />
	<table class="list view">
		<browser assert="{@meeting2_name}" />
		<browser assertnot="{@meeting1_name}" />
	</table>
	
	<link text="Basic Search" />
	<button id="search_form_clear" />
	<button id="search_form_submit" />

	<script file="{@global.scriptsdir}/modules/lib/Contact_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Meeting_Delete_Lib.xml" />
	
	<puts text="Test: Calendar_0706.xml finished." />
</soda>