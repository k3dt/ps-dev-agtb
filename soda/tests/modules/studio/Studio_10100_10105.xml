<soda>
    
    <!-- contains and concat function test -->
    <puts text="Test: Studio_10100_10105.xml starting" />
    <!-- set description field as calculated field and define formula -->
    <timestamp />
    <link text="Admin" />
    <link text="Studio" assertPage="false" />
    <link text="Contacts" class="studiolink" assertPage="false" />
    <link text="Fields" class="studiolink" assertPage="false" />
    <link text="description" class="mbLBLL" assertPage="false" />
    <checkbox id="calculated" set="true" />
    <wait timeout="1" />
    <button value="Edit Formula" />
    <wait timeout="3" />
    <browser assert="Formula Builder" />
    <div id="formulaBuilderWindow" >
      <textfield id="formulaInput" set="concat(toString(contains($primary_address_street,$primary_address_city)),toString(contains($primary_address_street,$primary_address_state)))" />
      <button value="Save" />
    </div>
    <wait timeout="3" />
    <form id="popup_form_id" >
      <button name="fsavebtn" assertPage="false" />
    </form>
    <wait timeout="3" />
    
    <!--create contact record and check calculated field-->
    <link id="moduleTab_Contacts" />
      
    <!--whitelist action="add" name="tmp-white">Error: '' is not a number</whitelist-->
    <csv file="{@global.scriptsdir}/csvs/studio/Studio_10100.csv" var="studio10100">
        <link text="Create Contact" />
        <browser assert="Create" />
        <form id="EditView">
        <textfield id="last_name" set="{@studio10100.name} {@user.name} {@stamp}" />
        <textfield id="primary_address_street" set="{@studio10100.street}" />
        <textfield id="primary_address_street" click="false" jscriptevent="onchange" />
        <textfield id="primary_address_city" set="{@studio10100.city}" />
        <textfield id="primary_address_city" click="false" jscriptevent="onchange" />
        <textfield id="primary_address_state" set="{@studio10100.state}" />
        <textfield id="primary_address_state" click="false" jscriptevent="onchange" />
        <textfield id="description" assert="{@studio10100.des}" />
        <button value="Save" />
      </form>
      <wait timeout="3" />
      <browser assert="{@studio10100.name} {@user.name} {@stamp}" />
      <table id="detailpanel_1">
        <span id="description" assert="{@studio10100.des}" />
      </table>
    </csv>
    <!--whitelist action="delete" name="tmp-white" /-->
    <!-- Now uncalculated the field -->
    <link text="Admin" />
    <link text="Studio" assertPage="false" />
    <link text="Contacts" class="studiolink" assertPage="false" />
    <link text="Fields" class="studiolink" assertPage="false" />
    <link text="description" class="mbLBLL" assertPage="false" />
    <checkbox id="calculated" set="false" />
    <form id="popup_form_id" >
      <browser assertnot="Formula Builder" />
      <button name="fsavebtn" assertPage="false" />
    </form>
    <wait timeout="3" />
    
    <!-- Delete contact record -->
    <script file="{@global.scriptsdir}/modules/lib/Contact_Delete_Lib.xml" />
    
    <puts text="Test: Studio_10100_10105.xml finished." />
</soda>